%!PS-Adobe-3.0
%%Creator: groff version 1.15
%%CreationDate: Fri Mar 10 11:36:51 2000
%%DocumentNeededResources: font Times-Roman
%%+ font Times-Bold
%%+ font Courier
%%+ font Symbol
%%+ font Times-Italic
%%DocumentSuppliedResources: procset grops 1.15 0
%%Pages: 29
%%PageOrder: Ascend
%%Orientation: Portrait
%%EndComments
%%BeginProlog
%%BeginResource: procset grops 1.15 0
/setpacking where{
pop
currentpacking
true setpacking
}if
/grops 120 dict dup begin
/SC 32 def
/A/show load def
/B{0 SC 3 -1 roll widthshow}bind def
/C{0 exch ashow}bind def
/D{0 exch 0 SC 5 2 roll awidthshow}bind def
/E{0 rmoveto show}bind def
/F{0 rmoveto 0 SC 3 -1 roll widthshow}bind def
/G{0 rmoveto 0 exch ashow}bind def
/H{0 rmoveto 0 exch 0 SC 5 2 roll awidthshow}bind def
/I{0 exch rmoveto show}bind def
/J{0 exch rmoveto 0 SC 3 -1 roll widthshow}bind def
/K{0 exch rmoveto 0 exch ashow}bind def
/L{0 exch rmoveto 0 exch 0 SC 5 2 roll awidthshow}bind def
/M{rmoveto show}bind def
/N{rmoveto 0 SC 3 -1 roll widthshow}bind def
/O{rmoveto 0 exch ashow}bind def
/P{rmoveto 0 exch 0 SC 5 2 roll awidthshow}bind def
/Q{moveto show}bind def
/R{moveto 0 SC 3 -1 roll widthshow}bind def
/S{moveto 0 exch ashow}bind def
/T{moveto 0 exch 0 SC 5 2 roll awidthshow}bind def
/SF{
findfont exch
[exch dup 0 exch 0 exch neg 0 0]makefont
dup setfont
[exch/setfont cvx]cvx bind def
}bind def
/MF{
findfont
[5 2 roll
0 3 1 roll
neg 0 0]makefont
dup setfont
[exch/setfont cvx]cvx bind def
}bind def
/level0 0 def
/RES 0 def
/PL 0 def
/LS 0 def
/MANUAL{
statusdict begin/manualfeed true store end
}bind def
/PLG{
gsave newpath clippath pathbbox grestore
exch pop add exch pop
}bind def
/BP{
/level0 save def
1 setlinecap
1 setlinejoin
72 RES div dup scale
LS{
90 rotate
}{
0 PL translate
}ifelse
1 -1 scale
}bind def
/EP{
level0 restore
showpage
}bind def
/DA{
newpath arcn stroke
}bind def
/SN{
transform
.25 sub exch .25 sub exch
round .25 add exch round .25 add exch
itransform
}bind def
/DL{
SN
moveto
SN
lineto stroke
}bind def
/DC{
newpath 0 360 arc closepath
}bind def
/TM matrix def
/DE{
TM currentmatrix pop
translate scale newpath 0 0 .5 0 360 arc closepath
TM setmatrix
}bind def
/RC/rcurveto load def
/RL/rlineto load def
/ST/stroke load def
/MT/moveto load def
/CL/closepath load def
/FL{
currentgray exch setgray fill setgray
}bind def
/BL/fill load def
/LW/setlinewidth load def
/RE{
findfont
dup maxlength 1 index/FontName known not{1 add}if dict begin
{
1 index/FID ne{def}{pop pop}ifelse
}forall
/Encoding exch def
dup/FontName exch def
currentdict end definefont pop
}bind def
/DEFS 0 def
/EBEGIN{
moveto
DEFS begin
}bind def
/EEND/end load def
/CNT 0 def
/level1 0 def
/PBEGIN{
/level1 save def
translate
div 3 1 roll div exch scale
neg exch neg exch translate
0 setgray
0 setlinecap
1 setlinewidth
0 setlinejoin
10 setmiterlimit
[]0 setdash
/setstrokeadjust where{
pop
false setstrokeadjust
}if
/setoverprint where{
pop
false setoverprint
}if
newpath
/CNT countdictstack def
userdict begin
/showpage{}def
}bind def
/PEND{
clear
countdictstack CNT sub{end}repeat
level1 restore
}bind def
end def
/setpacking where{
pop
setpacking
}if
%%EndResource
%%IncludeResource: font Times-Roman
%%IncludeResource: font Times-Bold
%%IncludeResource: font Courier
%%IncludeResource: font Symbol
%%IncludeResource: font Times-Italic
grops begin/DEFS 1 dict def DEFS begin/u{.001 mul}bind def end/RES 72
def/PL 792 def/LS false def/ENC0[/asciicircum/asciitilde/Scaron/Zcaron
/scaron/zcaron/Ydieresis/trademark/quotesingle/.notdef/.notdef/.notdef
/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef
/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef
/.notdef/.notdef/space/exclam/quotedbl/numbersign/dollar/percent
/ampersand/quoteright/parenleft/parenright/asterisk/plus/comma/hyphen
/period/slash/zero/one/two/three/four/five/six/seven/eight/nine/colon
/semicolon/less/equal/greater/question/at/A/B/C/D/E/F/G/H/I/J/K/L/M/N/O
/P/Q/R/S/T/U/V/W/X/Y/Z/bracketleft/backslash/bracketright/circumflex
/underscore/quoteleft/a/b/c/d/e/f/g/h/i/j/k/l/m/n/o/p/q/r/s/t/u/v/w/x/y
/z/braceleft/bar/braceright/tilde/.notdef/quotesinglbase/guillemotleft
/guillemotright/bullet/florin/fraction/perthousand/dagger/daggerdbl
/endash/emdash/ff/fi/fl/ffi/ffl/dotlessi/dotlessj/grave/hungarumlaut
/dotaccent/breve/caron/ring/ogonek/quotedblleft/quotedblright/oe/lslash
/quotedblbase/OE/Lslash/.notdef/exclamdown/cent/sterling/currency/yen
/brokenbar/section/dieresis/copyright/ordfeminine/guilsinglleft
/logicalnot/minus/registered/macron/degree/plusminus/twosuperior
/threesuperior/acute/mu/paragraph/periodcentered/cedilla/onesuperior
/ordmasculine/guilsinglright/onequarter/onehalf/threequarters
/questiondown/Agrave/Aacute/Acircumflex/Atilde/Adieresis/Aring/AE
/Ccedilla/Egrave/Eacute/Ecircumflex/Edieresis/Igrave/Iacute/Icircumflex
/Idieresis/Eth/Ntilde/Ograve/Oacute/Ocircumflex/Otilde/Odieresis
/multiply/Oslash/Ugrave/Uacute/Ucircumflex/Udieresis/Yacute/Thorn
/germandbls/agrave/aacute/acircumflex/atilde/adieresis/aring/ae/ccedilla
/egrave/eacute/ecircumflex/edieresis/igrave/iacute/icircumflex/idieresis
/eth/ntilde/ograve/oacute/ocircumflex/otilde/odieresis/divide/oslash
/ugrave/uacute/ucircumflex/udieresis/yacute/thorn/ydieresis]def
/Times-Italic@0 ENC0/Times-Italic RE/Courier@0 ENC0/Courier RE
/Times-Bold@0 ENC0/Times-Bold RE/Times-Roman@0 ENC0/Times-Roman RE
%%EndProlog
%%Page: 1 1
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/Times-Roman@0 SF(PTH-MANU)72 48 Q 78.275(AL\(1\) User)-.4 F
(Contrib)2.5 E(uted Perl Documentation)-.2 E(PTH-MANU)80.775 E(AL\(1\))
-.4 E/F1 9/Times-Bold@0 SF 10.562 -6.496(NN AA)72 84 T -8.494(MM)6.496 G
-6.001(EE)8.494 G/F2 10/Times-Bold@0 SF -5.558(pp)108 96 S -3.328(tt)
5.558 G -5.558(hh)3.328 G F0 2.5<ad47>8.058 G(NU Portable Threads)-2.5 E
F1 -6.496(VV)72 112.8 S -6.001(EE)6.496 G -6.496(RR)6.001 G -5.002(SS)
6.496 G -3.499(II)5.002 G -7(OO)3.499 G -6.496(NN)7 G F0
(GNU Pth PTH_VERSION_STR)108 124.8 Q F1 -5.002(SS)72 141.6 S -6.496(YY)
5.002 G -6.496(NN)6.496 G -7(OO)6.496 G -5.497(PP)7 G -5.002(SS)5.497 G
-3.499(II)5.002 G -5.002(SS)3.499 G F2 -7.778(GG)108 153.6 S -2.778(ll)
7.778 G -4.998(oo)2.778 G -5.558(bb)4.998 G -4.998(aa)5.558 G 5.556
-2.778(ll L)4.998 H(Li)-3.89 E(ib)-2.778 E(br)-5.558 E(ra)-4.438 E(ar)
-4.998 E(ry)-4.438 E 2.5(yM)-4.998 G(Ma)-11.938 E(an)-4.998 E(na)-5.558
E(ag)-4.998 E(ge)-4.998 E(em)-4.438 E(me)-8.328 E(en)-4.438 E(nt)-5.558
E(t)-3.328 E F0(pth_init, pth_kill, pth_ctrl, pth_v)128 165.6 Q(ersion.)
-.15 E F2 -6.668(TT)108 182.4 S -5.558(hh)6.668 G 6.196 -4.438(rr ee)
5.558 H -4.998(aa)4.438 G 11.116 -5.558(dd A)4.998 H(At)-1.66 E(tt)
-3.328 E(tr)-3.328 E(ri)-4.438 E(ib)-2.778 E -.2(bu)-5.558 G(ut)-5.358 E
(te)-3.328 E 2.5(eH)-4.438 G(Ha)-10.278 E(an)-4.998 E(nd)-5.558 E(dl)
-5.558 E(li)-2.778 E(in)-2.778 E(ng)-5.558 E(g)-4.998 E F0
(pth_attr_of, pth_attr_ne)128 194.4 Q 1.3 -.65(w, p)-.25 H
(th_attr_init, pth_attr_set, pth_attr_get, pth_attr_destro).65 E -.65
(y.)-.1 G F2 -6.668(TT)108 211.2 S -5.558(hh)6.668 G 6.196 -4.438(rr ee)
5.558 H -4.998(aa)4.438 G 11.116 -5.558(dd C)4.998 H(Co)-1.66 E(on)
-4.998 E(nt)-5.558 E(tr)-3.328 E -.18(ro)-4.438 G(ol)-4.818 E(l)-2.778 E
F0(pth_spa)128 223.2 Q 1.57(wn, pth_once, pth_self, pth_suspend, pth_re\
sume, pth_yield, pth_nap, pth_w)-.15 F 1.57(ait, pth_cancel,)-.1 F
(pth_abort, pth_raise, pth_join, pth_e)128 235.2 Q(xit.)-.15 E F2 -7.218
(UU)108 252 S -3.328(tt)7.218 G -2.778(ii)3.328 G -2.778(ll)2.778 G
-2.778(ii)2.778 G -3.328(tt)2.778 G -2.778(ii)3.328 G -4.438(ee)2.778 G
-3.888(ss)4.438 G F0(pth_fdmode, pth_time, pth_timeout, pth_s\214odisc.)
128 264 Q F2 -7.218(CC)108 280.8 S -4.998(aa)7.218 G -5.558(nn)4.998 G
-4.438(cc)5.558 G -4.438(ee)4.438 G -2.778(ll)4.438 G -2.778(ll)2.778 G
-4.998(aa)2.778 G -3.328(tt)4.998 G -2.778(ii)3.328 G -4.998(oo)2.778 G
11.116 -5.558(nn M)4.998 H(Ma)-3.88 E(an)-4.998 E(na)-5.558 E(ag)-4.998
E(ge)-4.998 E(em)-4.438 E(me)-8.328 E(en)-4.438 E(nt)-5.558 E(t)-3.328 E
F0(pth_cancel_point, pth_cancel_state.)128 292.8 Q F2 -6.668(EE)108
309.6 S 7.396 -4.998(vv e)6.668 H(en).56 E(nt)-5.558 E 2.5(tH)-3.328 G
(Ha)-10.278 E(an)-4.998 E(nd)-5.558 E(dl)-5.558 E(li)-2.778 E(in)-2.778
E(ng)-5.558 E(g)-4.998 E F0(pth_e)128 321.6 Q -.15(ve)-.25 G .22
(nt, pth_e).15 F -.15(ve)-.25 G .22(nt_typeof, pth_e).15 F -.15(ve)-.25
G(nt_e).15 E .22(xtract, pth_e)-.15 F -.15(ve)-.25 G .22
(nt_concat, pth_e).15 F -.15(ve)-.25 G .22(nt_isolate, pth_e).15 F -.15
(ve)-.25 G(nt_w).15 E(alk,)-.1 E(pth_e)128 333.6 Q -.15(ve)-.25 G
(nt_occurred, pth_e).15 E -.15(ve)-.25 G(nt_free.).15 E F2 12.806 -7.778
(KK e)108 350.4 T(ey)3.34 E(y-)-4.998 E(-B)-3.328 E(Ba)-6.668 E(as)
-4.998 E(se)-3.888 E(ed)-4.438 E 2.5(dS)-5.558 G(St)-8.058 E(to)-3.328 E
(or)-4.998 E(ra)-4.438 E(ag)-4.998 E(ge)-4.998 E(e)-4.438 E F0(pth_k)128
362.4 Q -.15(ey)-.1 G(_create, pth_k).15 E -.15(ey)-.1 G(_delete, pth_k)
.15 E -.15(ey)-.1 G(_setdata, pth_k).15 E -.15(ey)-.1 G(_getdata.).15 E
F2 -9.438(MM)108 379.2 S -4.438(ee)9.438 G -3.888(ss)4.438 G -3.888(ss)
3.888 G -4.998(aa)3.888 G -4.998(gg)4.998 G 8.876 -4.438(ee P)4.998 H
-.2(Po)-1.67 G(or)-4.798 E(rt)-4.438 E 2.5(tC)-3.328 G(Co)-9.718 E(om)
-4.998 E(mm)-8.328 E(mu)-8.328 E(un)-5.558 E(ni)-5.558 E(ic)-2.778 E(ca)
-4.438 E(at)-4.998 E(ti)-3.328 E(io)-2.778 E(on)-4.998 E(n)-5.558 E F0
7.91(pth_msgport_create, pth_msgport_destro)128 391.2 R 9.21 -.65(y, p)
-.1 H 7.91(th_msgport_\214nd, pth_msgport_pending, pth_msg-).65 F
(port_put, pth_msgport_get, pth_msgport_reply)128 403.2 Q(.)-.65 E F2
-6.668(TT)108 420 S -5.558(hh)6.668 G 6.196 -4.438(rr ee)5.558 H -4.998
(aa)4.438 G 11.116 -5.558(dd C)4.998 H(Cl)-1.66 E(le)-2.778 E(ea)-4.438
E(an)-4.998 E(nu)-5.558 E(up)-5.558 E(ps)-5.558 E(s)-3.888 E F0
(pth_cleanup_push, pth_cleanup_pop.)128 432 Q F2 -6.108(PP)108 448.8 S
6.196 -4.438(rr o)6.108 H(oc)-.56 E(ce)-4.438 E(es)-4.438 E(ss)-3.888 E
2.5(sF)-3.888 G -.25(Fo)-8.608 G(or)-4.748 E(rk)-4.438 E(ki)-5.558 E(in)
-2.778 E(ng)-5.558 E(g)-4.998 E F0
(pth_atfork_push, pth_atfork_pop, pth_fork.)128 460.8 Q F2 -5.558(SS)108
477.6 S -4.998(yy)5.558 G -5.558(nn)4.998 G -4.438(cc)5.558 G -5.558(hh)
4.438 G 6.196 -4.438(rr o)5.558 H(on)-.56 E(ni)-5.558 E(iz)-2.778 E(za)
-4.438 E(at)-4.998 E(ti)-3.328 E(io)-2.778 E(on)-4.998 E(n)-5.558 E F0
(pth_mute)128 489.6 Q 8.052(x_init, pth_mute)-.15 F 8.052
(x_acquire, pth_mute)-.15 F 8.053
(x_release, pth_rwlock_init, pth_rwlock_acquire,)-.15 F 5.518
(pth_rwlock_release, pth_cond_init, pth_cond_a)128 501.6 R -.1(wa)-.15 G
5.518(it, pth_cond_notify).1 F 8.018(,p)-.65 G 5.518
(th_barrier_init, pth_bar)-8.018 F(-)-.2 E(rier_reach.)128 513.6 Q F2
-7.778(GG)108 530.4 S -4.438(ee)7.778 G -5.558(nn)4.438 G -4.438(ee)
5.558 G -4.438(rr)4.438 G -4.998(aa)4.438 G -2.778(ll)4.998 G -2.778(ii)
2.778 G -4.438(zz)2.778 G -4.438(ee)4.438 G -5.558(dd)4.438 G F1 -5.497
(PP)8.058 G -7(OO)5.497 G -5.002(SS)7 G -3.499(II)5.002 G -6.496(XX)
3.499 G F2 -7.218(RR)8.996 G -4.438(ee)7.218 G -5.558(pp)4.438 G -2.778
(ll)5.558 G -4.998(aa)2.778 G -4.438(cc)4.998 G -4.438(ee)4.438 G -8.328
(mm)4.438 G -4.438(ee)8.328 G -5.558(nn)4.438 G -3.328(tt)5.558 G F1
-6.496(AA)5.828 G -5.497(PP)6.496 G -3.499(II)5.497 G F0(pth_sigw)128
542.4 Q(ait_e)-.1 E 12.422 -.65(v, p)-.25 H(th_accept_e).65 E 12.422
-.65(v, p)-.25 H(th_connect_e).65 E 12.422 -.65(v, p)-.25 H(th_select_e)
.65 E 12.422 -.65(v, p)-.25 H(th_poll_e).65 E 12.422 -.65(v, p)-.25 H
(th_read_e).65 E -.65(v,)-.25 G(pth_readv_e)128 554.4 Q 1.3 -.65(v, p)
-.25 H(th_write_e).65 E 1.3 -.65(v, p)-.25 H(th_write).65 E(v_e)-.25 E
-.65(v.)-.25 G F2 -5.558(SS)108 571.2 S -3.328(tt)5.558 G -4.998(aa)
3.328 G -5.558(nn)4.998 G -5.558(dd)5.558 G -4.998(aa)5.558 G -4.438(rr)
4.998 G -5.558(dd)4.438 G F1 -5.497(PP)8.058 G -7(OO)5.497 G -5.002(SS)7
G -3.499(II)5.002 G -6.496(XX)3.499 G F2 -7.218(RR)8.996 G -4.438(ee)
7.218 G -5.558(pp)4.438 G -2.778(ll)5.558 G -4.998(aa)2.778 G -4.438(cc)
4.998 G -4.438(ee)4.438 G -8.328(mm)4.438 G -4.438(ee)8.328 G -5.558(nn)
4.438 G -3.328(tt)5.558 G F1 -6.496(AA)5.828 G -5.497(PP)6.496 G -3.499
(II)5.497 G F0 2.183(pth_usleep, pth_sleep, pth_w)128 583.2 R 2.183
(aitpid, pth_sigmask, pth_sigw)-.1 F 2.183
(ait, pth_accept, pth_connect, pth_select,)-.1 F
(pth_poll, pth_read, pth_readv)128 595.2 Q 2.5(,p)-.65 G
(th_write, pth_write)-2.5 E 1.3 -.65(v, p)-.25 H(th_pread, pth_pwrite.)
.65 E F1 -6.496(DD)72 612 S -6.001(EE)6.496 G -5.002(SS)6.001 G -6.496
(CC)5.002 G -6.496(RR)6.496 G -3.499(II)6.496 G -5.497(PP)3.499 G -6.001
(TT)5.497 G -3.499(II)6.001 G -7(OO)3.499 G -6.496(NN)7 G/F3 10
/Courier@0 SF 6(____ _)120 624 R(_)18 E/F4 10/Symbol SF<ef>114 636 Q F3
6(_\\)12 G F4 6<efef>-6 G F3(_)-6 E F4 6<efef>C F3(__)-6 E F4 6<efef>114
648 S F3(_\))-6 E F4<ef>6 E F3(__)6 E F4<ef>A F3('_ \\)6 E
(``Only those who attempt)54 E F4<ef>114 660 Q F3(__/)12 E F4 6<efef>C
F3(_)-6 E F4 6<efefefef>C F3(the absurd can achieve)54 E F4<ef>114 672 Q
F3(_)A F4<ef>A F3(\\__)24 E F4<ef>A F3(_)A F4 6<efef>C F3(_)-6 E F4<ef>A
F3(the impossible.'')60 E F2 -6.108(PP)108 696 S -3.328(tt)6.108 G
-5.558(hh)3.328 G F0 1.124(is a v)9.182 F 1.124(ery portable POSIX/ANSI\
\255C based library for Unix platforms which pro)-.15 F 1.125
(vides non-preempti)-.15 F -.15(ve)-.25 G .112
(priority-based scheduling for multiple threads of e)108 708 R -.15(xe)
-.15 G .112(cution \(aka `multithreading'\) inside e).15 F -.15(ve)-.25
G(nt-dri).15 E -.15(ve)-.25 G 2.611(na).15 G(ppli-)-2.611 E .85(cations\
. All threads run in the same address space of the application process,\
 b)108 720 R .851(ut each thread has its o)-.2 F(wn)-.25 E 139.425
(10/Mar/2000 perl)72 768 R(5.005, patch 03)2.5 E(1)189.145 E EP
%%Page: 2 2
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/Times-Roman@0 SF(PTH-MANU)72 48 Q 78.275(AL\(1\) User)-.4 F
(Contrib)2.5 E(uted Perl Documentation)-.2 E(PTH-MANU)80.775 E(AL\(1\))
-.4 E(indi)108 84 Q(vidual program counter)-.25 E 2.5(,r)-.4 G
(un-time stack, signal mask and)-2.5 E/F1 10/Courier@0 SF(errno)2.5 E F0
-.25(va)2.5 G(riable.).25 E .243
(The thread scheduling itself is done in a cooperati)108 100.8 R .542
-.15(ve w)-.25 H(ay).05 E 2.742(,i)-.65 G .242
(.e., the threads are managed and dispatched by a)-2.742 F .983
(priority- and e)108 112.8 R -.15(ve)-.25 G(nt-dri).15 E -.15(ve)-.25 G
3.484(nn).15 G(on-preempti)-3.484 E 1.284 -.15(ve s)-.25 H(cheduler).15
E 3.484(.T)-.55 G .984(he intention is that this w)-3.484 F .984
(ay both better portability)-.1 F .2(and run-time performance is achie)
108 124.8 R -.15(ve)-.25 G 2.7(dt).15 G .2(han with preempti)-2.7 F .5
-.15(ve s)-.25 H .2(cheduling. The e).15 F -.15(ve)-.25 G .2(nt f).15 F
.2(acility allo)-.1 F .2(ws threads to)-.25 F -.1(wa)108 136.8 S 1.427
(it until v).1 F 1.427(arious types of internal and e)-.25 F 1.427
(xternal e)-.15 F -.15(ve)-.25 G 1.427(nts occur).15 F 3.927(,i)-.4 G
1.428(ncluding pending I/O on \214le descriptors,)-3.927 F .949(asynchr\
onous signals, elapsed timers, pending I/O on message ports, thread and\
 process termination, and)108 148.8 R -2.15 -.25(ev e)108 160.8 T 2.5
(nr).25 G(esults of customized callback functions.)-2.5 E/F2 10
/Times-Bold@0 SF -6.108(PP)108 177.6 S -3.328(tt)6.108 G -5.558(hh)3.328
G F0 1.592(also pro)9.65 F 1.592(vides an optional emulation API for PO\
SIX.1c threads \(`Pthreads'\) which can be used for)-.15 F(backw)108
189.6 Q 2.414(ard compatibility to e)-.1 F 2.414
(xisting multithreaded applications. See)-.15 F F2 -6.108(PP)4.913 G
-3.328(tt)6.108 G -5.558(hh)3.328 G F0 -.55('s)5.558 G/F3 10
/Times-Italic@0 SF(pthr)5.463 E(ead)-.37 E F0 2.413
(\(3\) manual page for)1.666 F(details.)108 201.6 Q F2 -6.668(TT)108
224.4 S -5.558(hh)6.668 G 6.196 -4.438(rr ee)5.558 H -4.998(aa)4.438 G
-5.558(dd)4.998 G -2.778(ii)5.558 G -5.558(nn)2.778 G 9.996 -4.998(gg B)
5.558 H(Ba)-1.67 E(ac)-4.998 E(ck)-4.438 E(kg)-5.558 E(gr)-4.998 E -.18
(ro)-4.438 G(ou)-4.818 E(un)-5.558 E(nd)-5.558 E(d)-5.558 E F0 1.19
(When programming e)108 241.2 R -.15(ve)-.25 G(nt-dri).15 E -.15(ve)-.25
G 3.69(na).15 G 1.19(pplications, usually serv)-3.69 F 1.19
(ers, lots of re)-.15 F 1.19(gular jobs and one-shot requests)-.15 F(ha)
108 253.2 Q .727 -.15(ve t)-.2 H 2.927(ob).15 G 2.927(ep)-2.927 G .427
(rocessed in parallel.)-2.927 F 2.026 -.8(To e)5.427 H -.25<668c>.8 G
.426
(ciently simulate this parallel processing on uniprocessor machines,).25
F 2.19(we use `multitasking' -- that is, we ha)108 265.2 R 2.49 -.15
(ve t)-.2 H 2.19(he application ask the operating system to spa).15 F
2.19(wn multiple)-.15 F 1.53
(instances of itself. On Unix, typically the k)108 277.2 R 1.53
(ernel implements multitasking in a preempti)-.1 F 1.83 -.15(ve a)-.25 H
1.53(nd priority-).15 F .538(based w)108 289.2 R .538(ay through hea)-.1
F .539(vy-weight processes spa)-.2 F .539(wned with)-.15 F F3(fork)3.039
E F0 3.039(\(2\). These)1.666 F .539(processes usually do)3.039 F F3
(not)3.039 E F0 .539(share a)3.039 F .03
(common address space. Instead the)108 301.2 R 2.53(ya)-.15 G .029
(re clearly separated from each other)-2.53 F 2.529(,a)-.4 G .029
(nd are created by direct cloning)-2.529 F 2.538(ap)108 313.2 S .038
(rocess address space \(although modern k)-2.538 F .039
(ernels use memory se)-.1 F .039(gment mapping and cop)-.15 F .039
(y-on-write seman-)-.1 F(tics to a)108 325.2 Q -.2(vo)-.2 G
(id unnecessary cop).2 E(ying of ph)-.1 E(ysical memory\).)-.05 E 1.048
(The dra)108 342 R 1.048(wbacks are ob)-.15 F 1.048(vious: Sharing data\
 between the processes is complicated, and can usually only be)-.15 F
.526(done ef)108 354 R .526(\214ciently through shared memory \(b)-.25 F
.526(ut which itself is not v)-.2 F .527
(ery portable\). Synchronization is compli-)-.15 F 1.863
(cated because of the preempti)108 366 R 2.163 -.15(ve n)-.25 H 1.863
(ature of the Unix scheduler \(one has to use).15 F F3(atomic)4.363 E F0
1.863(locks, etc\). The)4.363 F(machine')108 378 Q 2.643(sr)-.55 G .143
(esources can be e)-2.643 F .143(xhausted v)-.15 F .143
(ery quickly when the serv)-.15 F .143(er application has to serv)-.15 F
2.643(et)-.15 G .144(oo man)-2.643 F 2.644(yl)-.15 G(ong-)-2.644 E .744
(running requests \(hea)108 390 R .744
(vy-weight processes cost memory\). And when each request spa)-.2 F .743
(wns a sub-process to)-.15 F 2.141(handle it, the serv)108 402 R 2.141
(er performance and responsi)-.15 F -.15(ve)-.25 G 2.142
(ness is horrible \(hea).15 F 2.142(vy-weight processes cost time to)-.2
F(spa)108 414 Q .142(wn\). Finally)-.15 F 2.642(,t)-.65 G .142(he serv)
-2.642 F .142(er application doesn')-.15 F 2.642(ts)-.18 G .142(cale v)
-2.642 F .142(ery well with the load because of these resource prob-)
-.15 F .092(lems. In practice, lots of tricks are usually used to o)108
426 R -.15(ve)-.15 G .093
(rcome these problems \255 ranging from pre-fork).15 F .093(ed sub-)-.1
F(process pools to semi-serialized processing, etc.)108 438 Q .479
(One of the most ele)108 454.8 R -.05(ga)-.15 G .479(nt w).05 F .479
(ays to solv)-.1 F 2.979(et)-.15 G .479
(hese resource- and data-sharing problems is to ha)-2.979 F .778 -.15
(ve m)-.2 H(ultiple).15 E F3(light-)2.978 E(weight)108 466.8 Q F0 2.083
(threads of e)4.583 F -.15(xe)-.15 G 2.084(cution inside a single \(hea)
.15 F 2.084(vy-weight\) process, i.e., to use)-.2 F F3(multithr)4.584 E
(eading)-.37 E F0 7.084(.T)C(hose)-7.084 E F3(thr)108 478.8 Q(eads)-.37
E F0 .179(usually impro)2.679 F .479 -.15(ve r)-.15 H(esponsi).15 E -.15
(ve)-.25 G .178(ness and performance of the application, often impro).15
F .478 -.15(ve a)-.15 H .178(nd simplify the).15 F .306(internal progra\
m structure, and most important, require less system resources than hea)
108 490.8 R .306(vy-weight processes.)-.2 F .293
(Threads are neither the optimal run-time f)108 502.8 R .292
(acility for all types of applications, nor can all applications bene-)
-.1 F(\214t from them. But at least e)108 514.8 Q -.15(ve)-.25 G(nt-dri)
.15 E -.15(ve)-.25 G 2.5(ns).15 G(erv)-2.5 E
(er applications usually bene\214t greatly from using threads.)-.15 E F2
-6.668(TT)108 537.6 S -5.558(hh)6.668 G 8.876 -4.438(ee W)5.558 H -.75
(Wo)-5.56 G(or)-4.248 E(rl)-4.438 E(ld)-2.778 E 2.5(do)-5.558 G(of)
-7.498 E 2.5(fT)-3.328 G(Th)-9.168 E(hr)-5.558 E -.18(re)-4.438 G(ea)
-4.258 E(ad)-4.998 E(di)-5.558 E(in)-2.778 E(ng)-5.558 E(g)-4.998 E F0
(Ev)108 554.4 Q .326(en though lots of documents e)-.15 F .326
(xists which describe and de\214ne the w)-.15 F .327
(orld of threading, to understand)-.1 F F2 -6.108(PP)2.827 G -3.328(tt)
6.108 G -5.558(hh)3.328 G F0(,)5.558 E .163(you need only basic kno)108
566.4 R .163(wledge about threading. The follo)-.25 F .163
(wing de\214nitions of thread-related terms should at)-.25 F
(least help you understand thread programming enough to allo)108 578.4 Q
2.5(wy)-.25 G(ou to use)-2.5 E F2 -6.108(PP)2.5 G -3.328(tt)6.108 G
-5.558(hh)3.328 G F0(.)5.558 E F2 9.996 -4.998(oo p)108 595.2 T(pr)-.56
E -.18(ro)-4.438 G(oc)-4.818 E(ce)-4.438 E(es)-4.438 E(ss)-3.888 E(s)
-3.888 E F0(vs.)2.5 E F2 -3.328(tt)2.5 G -5.558(hh)3.328 G 6.196 -4.438
(rr ee)5.558 H -4.998(aa)4.438 G -5.558(dd)4.998 G F0 3.615(Ap)118 607.2
S 1.116(rocess on Unix systems consists of at least the follo)-3.615 F
1.116(wing fundamental ingredients:)-.25 F F3 1.116(virtual memory)3.616
F(table)118 619.2 Q F0(,)A F3(pr)3.737 E -.1(og)-.45 G -.15(ra).1 G
3.737(mc).15 G(ode)-3.737 E F0(,)A F3(pr)3.737 E -.1(og)-.45 G -.15(ra)
.1 G 3.737(mc).15 G(ounter)-3.737 E F0(,)A F3 1.237(heap memory)3.737 F
F0(,)A F3(stac)3.737 E 3.737(km)-.2 G(emory)-3.737 E F0(,)A F3(stac)
3.737 E 3.737(kp)-.2 G(ointer)-3.737 E F0(,)A F3 1.237
(\214le descriptor set)3.737 F F0(,)A F3 .785(signal table)118 631.2 R
F0 3.285(.O)C 3.285(ne)-3.285 G -.15(ve)-3.535 G .785
(ry process switch, the k).15 F .785(ernel sa)-.1 F -.15(ve)-.2 G 3.285
(sa).15 G .786(nd restores these ingredients for the indi)-3.285 F
(vidual)-.25 E .818
(processes. On the other hand, a thread consists of only a pri)118 643.2
R -.25(va)-.25 G .817(te program counter).25 F 3.317(,s)-.4 G .817
(tack memory)-3.317 F 3.317(,s)-.65 G(tack)-3.317 E .776(pointer and si\
gnal table. All other ingredients, in particular the virtual memory)118
655.2 R 3.276(,i)-.65 G 3.277(ts)-3.276 G .777(hares with the other)
-3.277 F(threads of the same process.)118 667.2 Q F2 9.996 -4.998(oo k)
108 684 T -.1(ke)-.56 G(er)-4.338 E -.15(rn)-4.438 G(ne)-5.408 E(el)
-4.438 E(l-)-2.778 E(-s)-3.328 E(sp)-3.888 E(pa)-5.558 E(ac)-4.998 E(ce)
-4.438 E(e)-4.438 E F0(vs.)2.5 E F2 -5.558(uu)2.5 G -3.888(ss)5.558 G
-4.438(ee)3.888 G 6.006 -4.438(rr -)4.438 H(-s)1.11 E(sp)-3.888 E(pa)
-5.558 E(ac)-4.998 E(ce)-4.438 E(e)-4.438 E F0(threading)2.5 E 1.082(Th\
reads on a Unix platform traditionally can be implemented either inside\
 k)118 696 R 1.081(ernel-space or user)-.1 F(-space.)-.2 E 1.052
(When threads are implemented by the k)118 708 R 1.053
(ernel, the thread conte)-.1 F 1.053(xt switches are performed by the k)
-.15 F(ernel)-.1 E .704(without the application')118 720 R 3.204(sk)-.55
G(no)-3.204 E .704(wledge. Similarly)-.25 F 3.203(,w)-.65 G .703
(hen threads are implemented in user)-3.203 F .703(-space, the thread)
-.2 F 139.425(10/Mar/2000 perl)72 768 R(5.005, patch 03)2.5 E(2)189.145
E EP
%%Page: 3 3
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/Times-Roman@0 SF(PTH-MANU)72 48 Q 78.275(AL\(1\) User)-.4 F
(Contrib)2.5 E(uted Perl Documentation)-.2 E(PTH-MANU)80.775 E(AL\(1\))
-.4 E(conte)118 84 Q .35
(xt switches are performed by an application library)-.15 F 2.851(,w)
-.65 G .351(ithout the k)-2.851 F(ernel')-.1 E 2.851(sk)-.55 G(no)-2.851
E .351(wledge. There also are)-.25 F -.05(hy)118 96 S .611
(brid threading approaches where, typically).05 F 3.111(,au)-.65 G(ser)
-3.111 E .611(-space library binds one or more user)-.2 F .61
(-space threads)-.2 F(to one or more k)118 108 Q(ernel-space threads \(\
there usually called light-weight processes \255 or in short L)-.1 E
(WPs\).)-.74 E(User)118 126 Q .899
(-space threads are usually more portable and can perform f)-.2 F .9
(aster and cheaper conte)-.1 F .9(xt switches \(for)-.15 F .229
(instance via)118 138 R/F1 10/Times-Italic@0 SF(swapconte)2.729 E(xt)-.2
E F0 .229(\(2\) or)1.666 F F1(setjmp)2.729 E F0(\(3\)/)1.666 E F1
(longjmp)A F0 .229(\(3\)\) than k)1.666 F .228
(ernel based threads. On the other hand, k)-.1 F(er)-.1 E(-)-.2 E .303
(nel-space threads can tak)118 150 R 2.803(ea)-.1 G(dv)-2.803 E .304
(antage of multiprocessor machines and don')-.25 F 2.804(th)-.18 G -2.25
-.2(av e)-2.804 H(an)3.004 E 2.804(yi)-.15 G .304(nherent I/O block-)
-2.804 F .064(ing problems. K)118 162 R .063
(ernel-space threads are usually scheduled in preempti)-.25 F .363 -.15
(ve w)-.25 H .063(ay side-by-side with the under).05 F(-)-.2 E .537
(lying processes. User)118 174 R .538
(-space threads on the other hand use either preempti)-.2 F .838 -.15
(ve o)-.25 H 3.038(rn).15 G(on-preempti)-3.038 E .838 -.15(ve s)-.25 H
(chedul-).15 E(ing.)118 186 Q/F2 10/Times-Bold@0 SF 9.996 -4.998(oo p)
108 202.8 T(pr)-.56 E -.18(re)-4.438 G(ee)-4.258 E(em)-4.438 E(mt)-8.328
E(ti)-3.328 E -.1(iv)-2.778 G -.1(ve)-4.898 G(e)-4.338 E F0(vs.)2.5 E F2
-5.558(nn)2.5 G -4.998(oo)5.558 G -5.558(nn)4.998 G -3.328(--)5.558 G
-5.558(pp)3.328 G 6.196 -4.438(rr ee)5.558 H -4.438(ee)4.438 G -8.328
(mm)4.438 G -3.328(tt)8.328 G 2.956 -2.778(ii v)3.328 H -.1(ve)-2.22 G
(e)-4.338 E F0(thread scheduling)2.5 E .444(In preempti)118 214.8 R .744
-.15(ve s)-.25 H .444(cheduling, the scheduler lets a thread e).15 F
-.15(xe)-.15 G .444(cute until a blocking situation occurs \(usually a)
.15 F 1.477(function call which w)118 226.8 R 1.477(ould block\) or the\
 assigned timeslice elapses. Then it detracts control from the)-.1 F
1.953(thread without a chance for the thread to object. This is usually\
 realized by interrupting the thread)118 238.8 R 1.298(through a hardw)
118 250.8 R 1.298(are interrupt signal \(for k)-.1 F 1.299
(ernel-space threads\) or a softw)-.1 F 1.299
(are interrupt signal \(for user)-.1 F(-)-.2 E 1.208
(space threads\), lik)118 262.8 R(e)-.1 E/F3 10/Courier@0 SF(SIGALRM)
3.708 E F0(or)3.708 E F3(SIGVTALRM)3.708 E F0 3.708(.I)C 3.707(nn)-3.708
G(on-preempti)-3.707 E 1.507 -.15(ve s)-.25 H 1.207
(cheduling, once a thread recei).15 F -.15(ve)-.25 G(d).15 E .277
(control from the scheduler it k)118 274.8 R .277
(eeps it until either a blocking situation occurs \(ag)-.1 F .277
(ain a function call which)-.05 F -.1(wo)118 286.8 S .022
(uld block and instead switches back to the scheduler\) or the thread e)
.1 F .021(xplicitly yields control back to the)-.15 F
(scheduler in a cooperati)118 298.8 Q .3 -.15(ve w)-.25 H(ay).05 E(.)
-.65 E F2 9.996 -4.998(oo c)108 315.6 T(co).56 E(on)-4.998 E(nc)-5.558 E
(cu)-4.438 E(ur)-5.558 E(rr)-4.438 E -.18(re)-4.438 G(en)-4.258 E(nc)
-5.558 E(cy)-4.438 E(y)-4.998 E F0(vs.)2.5 E F2 -5.558(pp)2.5 G -4.998
(aa)5.558 G -4.438(rr)4.998 G -4.998(aa)4.438 G -2.778(ll)4.998 G -2.778
(ll)2.778 G -4.438(ee)2.778 G -2.778(ll)4.438 G -2.778(ii)2.778 G -3.888
(ss)2.778 G -8.328(mm)3.888 G F0(Concurrenc)118 327.6 Q 2.708(ye)-.15 G
.208(xists when at least tw)-2.858 F 2.708(ot)-.1 G .208(hreads are)
-2.708 F F1 .208(in pr)2.708 F -.1(og)-.45 G -.37(re).1 G(ss).37 E F0
.208(at the same time. P)2.708 F .209(arallelism arises when at)-.15 F
.477(least tw)118 339.6 R 2.977(ot)-.1 G .477(hreads are)-2.977 F F1 -.2
(ex)2.977 G(ecuting).2 E F0(simultaneously)2.977 E 2.977(.R)-.65 G .477
(eal parallelism can be only achie)-2.977 F -.15(ve)-.25 G 2.977(do).15
G 2.976(nm)-2.977 G(ultiprocessor)-2.976 E 1.134
(machines, of course. But one also usually speaks of parallelism or)118
351.6 R F1 1.134(high concurr)3.634 F(ency)-.37 E F0 1.134(in the conte)
3.634 F 1.134(xt of)-.15 F(preempti)118 363.6 Q 1.097 -.15(ve t)-.25 H
.796(hread scheduling and of).15 F F1 .796(low concurr)3.296 F(ency)-.37
E F0 .796(in the conte)3.296 F .796(xt of non-preempti)-.15 F 1.096 -.15
(ve t)-.25 H .796(hread schedul-).15 F(ing.)118 375.6 Q F2 9.996 -4.998
(oo r)108 392.4 T -.18(re).56 G(es)-4.258 E(sp)-3.888 E(po)-5.558 E(on)
-4.998 E(ns)-5.558 E(si)-3.888 E -.1(iv)-2.778 G -.1(ve)-4.898 G(en)
-4.338 E(ne)-5.558 E(es)-4.438 E(ss)-3.888 E(s)-3.888 E F0 .585
(The responsi)118 404.4 R -.15(ve)-.25 G .586(ness of a system can be d\
escribed by the user visible delay until the system responses to).15 F
.679(an e)118 416.4 R .678
(xternal request. When this delay is small enough and the user doesn')
-.15 F 3.178(tr)-.18 G .678(ecognize a noticeable delay)-3.178 F(,)-.65
E .11(the responsi)118 428.4 R -.15(ve)-.25 G .11(ness of the system is\
 considered good. When the user recognizes or is e).15 F -.15(ve)-.25 G
2.61(na).15 G(nno)-2.61 E .11(yed by the)-.1 F(delay)118 440.4 Q 2.5(,t)
-.65 G(he responsi)-2.5 E -.15(ve)-.25 G
(ness of the system is considered bad.).15 E F2 9.996 -4.998(oo r)108
457.2 T -.18(re).56 G(ee)-4.258 E(en)-4.438 E(nt)-5.558 E(tr)-3.328 E
(ra)-4.438 E(an)-4.998 E(nt)-5.558 E(t)-3.328 E F0(,)A F2 -3.328(tt)2.5
G -5.558(hh)3.328 G 6.196 -4.438(rr ee)5.558 H -4.998(aa)4.438 G -5.558
(dd)4.998 G -3.328(--)5.558 G -3.888(ss)3.328 G -4.998(aa)3.888 G -3.328
(ff)4.998 G -4.438(ee)3.328 G F0(and)6.938 E F2 -4.998(aa)2.5 G -3.888
(ss)4.998 G -4.998(yy)3.888 G -5.558(nn)4.998 G -4.438(cc)5.558 G -5.558
(hh)4.438 G 6.196 -4.438(rr o)5.558 H(on)-.56 E(no)-5.558 E(ou)-4.998 E
(us)-5.558 E(s-)-3.888 E(-s)-3.328 E(sa)-3.888 E(af)-4.998 E(fe)-3.328 E
(e)-4.438 E F0(functions)2.5 E 3.649(Ar)118 469.2 S 1.149
(eentrant function is one that beha)-3.649 F -.15(ve)-.2 G 3.649(sc).15
G 1.149(orrectly if it is called simultaneously by se)-3.649 F -.15(ve)
-.25 G 1.148(ral threads and).15 F .126(then also e)118 481.2 R -.15(xe)
-.15 G .126(cutes simultaneously).15 F 5.126(.F)-.65 G .126(unctions th\
at access global state, such as memory or \214les, of course,)-5.126 F
.04(need to be carefully designed in order to be reentrant. T)118 493.2
R .24 -.1(wo t)-.8 H .04(raditional approaches to solv).1 F 2.54(et)-.15
G .04(hese problems)-2.54 F(are caller)118 505.2 Q
(-supplied states and thread-speci\214c data.)-.2 E .126
(Thread-safety is the a)118 523.2 R -.2(vo)-.2 G .126(idance of).2 F F1
.126(data r)2.626 F(aces)-.15 E F0 2.627(,i)C .127
(.e., situations in which data is set to either correct or incor)-2.627
F(-)-.2 E 1.358(rect v)118 535.2 R 1.357(alue depending upon the \(unpr\
edictable\) order in which multiple threads access and modify the)-.25 F
.708(data. So a function is thread-safe when it still beha)118 547.2 R
-.15(ve)-.2 G 3.209(ss).15 G .709
(emantically correct when called simultaneously)-3.209 F 1.765(by se)118
559.2 R -.15(ve)-.25 G 1.764
(ral threads \(it is not required that the functions also e).15 F -.15
(xe)-.15 G 1.764(cute simultaneously\). The traditional).15 F .303
(approach to achie)118 571.2 R .603 -.15(ve t)-.25 H .304
(hread-safety is to wrap a function body with an internal mutual e).15 F
.304(xclusion lock \(aka)-.15 F(`mute)118 583.2 Q .46
(x'\). As you should recognize, reentrant is a stronger attrib)-.15 F
.46(ute than thread-safe, because it is harder)-.2 F .924(to achie)118
595.2 R 1.224 -.15(ve a)-.25 H .924(nd results especially in no run-tim\
e contention between threads. So, a reentrant function is).15 F(al)118
607.2 Q -.1(wa)-.1 G(ys thread-safe, b).1 E(ut not vice v)-.2 E(ersa.)
-.15 E .142(Additionally there is a related attrib)118 625.2 R .142
(ute for functions named asynchronous-safe, which comes into play in)-.2
F 1.276(conjunction with signal handlers. This is v)118 637.2 R 1.277
(ery related to the problem of reentrant functions. An asyn-)-.15 F .702
(chronous-safe function is one that can be called safe and without side\
-ef)118 649.2 R .702(fects from within a signal han-)-.25 F .147
(dler conte)118 661.2 R .147(xt. Usually v)-.15 F .147(ery fe)-.15 F
2.647(wf)-.25 G .148
(unctions are of this type, because an application is v)-2.647 F .148
(ery restricted in what)-.15 F .561(it can perform from within a signal\
 handler \(especially what system functions it is allo)118 673.2 R .56
(wed to call\). The)-.25 F .463(reason mainly is, because only a fe)118
685.2 R 2.964(ws)-.25 G .464(ystem functions are of)-2.964 F .464
(\214cially declared by)-.25 F/F4 9/Times-Roman@0 SF(POSIX)2.964 E F0
.464(as guaranteed to)2.964 F
(be asynchronous-safe. Asynchronous-safe functions usually ha)118 697.2
Q .3 -.15(ve t)-.2 H 2.5(ob).15 G 2.5(ea)-2.5 G(lready reentrant.)-2.5 E
139.425(10/Mar/2000 perl)72 768 R(5.005, patch 03)2.5 E(3)189.145 E EP
%%Page: 4 4
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/Times-Roman@0 SF(PTH-MANU)72 48 Q 78.275(AL\(1\) User)-.4 F
(Contrib)2.5 E(uted Perl Documentation)-.2 E(PTH-MANU)80.775 E(AL\(1\))
-.4 E/F1 10/Times-Bold@0 SF -7.218(UU)108 84 S -3.888(ss)7.218 G -4.438
(ee)3.888 G 6.006 -4.438(rr -)4.438 H(-S)1.11 E(Sp)-5.558 E(pa)-5.558 E
(ac)-4.998 E(ce)-4.438 E 2.5(eT)-4.438 G(Th)-9.168 E(hr)-5.558 E -.18
(re)-4.438 G(ea)-4.258 E(ad)-4.998 E(ds)-5.558 E(s)-3.888 E F0(User)108
100.8 Q(-space threads can be implemented in v)-.2 E(arious w)-.25 E(ay)
-.1 E 2.5(.T)-.65 G(he tw)-2.5 E 2.5(ot)-.1 G
(raditional approaches are:)-2.5 E F1 -4.998(11)108 117.6 S 9.992 -2.498
(.. M)4.998 H(Ma)-6.94 E(at)-4.998 E(tr)-3.328 E(ri)-4.438 E(ix)-2.778 E
(x-)-4.998 E(-b)-3.328 E(ba)-5.558 E(as)-4.998 E(se)-3.888 E(ed)-4.438 E
2.5(de)-5.558 G(ex)-6.938 E(xp)-4.998 E(pl)-5.558 E(li)-2.778 E(ic)
-2.778 E(ci)-4.438 E(it)-2.778 E 2.5(td)-3.328 G(di)-8.058 E(is)-2.778 E
(sp)-3.888 E(pa)-5.558 E(at)-4.998 E(tc)-3.328 E(ch)-4.438 E(hi)-5.558 E
(in)-2.778 E(ng)-5.558 E 2.5(gb)-4.998 G(be)-8.058 E(et)-4.438 E(tw)
-3.328 E(we)-7.218 E(ee)-4.438 E(en)-4.438 E 2.5(ns)-5.558 G(sm)-6.388 E
(ma)-8.328 E(al)-4.998 E(ll)-2.778 E 2.5(lu)-2.778 G(un)-8.058 E(ni)
-5.558 E(it)-2.778 E(ts)-3.328 E 2.5(so)-3.888 G(of)-7.498 E 2.5(fe)
-3.328 G(ex)-6.938 E(xe)-4.998 E(ec)-4.438 E(cu)-4.438 E(ut)-5.558 E(ti)
-3.328 E(io)-2.778 E(on)-4.998 E(n:)-5.558 E(:)-3.328 E F0 .123
(Here the global procedures of the application are split into small e)
123 135.6 R -.15(xe)-.15 G .123(cution units \(each is required to not)
.15 F .735(run for more than a fe)123 147.6 R 3.235(wm)-.25 G .736
(illiseconds\) and those units are implemented by separate functions.)
-3.235 F .736(Then a)5.736 F 1.005
(global matrix is de\214ned which describes the e)123 159.6 R -.15(xe)
-.15 G 1.004(cution \(and perhaps e).15 F -.15(ve)-.25 G 3.504(nd).15 G
(ependenc)-3.504 E 1.004(y\) order of these)-.15 F .773
(functions. The main serv)123 171.6 R .774(er procedure then just dispa\
tches between these units by calling one function)-.15 F .461(after eac\
h other controlled by this matrix. The threads are created by more than\
 one jump-trail through)123 183.6 R(this matrix and by switching betwee\
n these jump-trails controlled by corresponding occurred e)123 195.6 Q
-.15(ve)-.25 G(nts.).15 E .656(This approach gi)123 213.6 R -.15(ve)-.25
G 3.156(st).15 G .657(he best possible performance, because one can \
\214ne-tune the threads of e)-3.156 F -.15(xe)-.15 G(cution).15 E 1.036
(by adjusting the matrix, and the scheduling is done e)123 225.6 R 1.035
(xplicitly by the application itself. It is also v)-.15 F(ery)-.15 E .93
(portable, because the matrix is just an ordinary data structure, and f\
unctions are a standard feature of)123 237.6 R/F2 9/Times-Roman@0 SF
(ANSI)123 249.6 Q F0(C.)2.5 E 2.739(The disadv)123 267.6 R 2.739
(antage of this approach is that it is complicated to write lar)-.25 F
2.738(ge applications with this)-.18 F .255
(approach, because in those applications one quickly gets)123 279.6 R/F3
10/Times-Italic@0 SF(hundr)2.755 E(eds)-.37 E F0 .255(\(!\) of e)1.666 F
-.15(xe)-.15 G .256(cution units and the control).15 F<8d6f>123 291.6 Q
2.828(wi)-.25 G .328(nside such an application is v)-2.828 F .327
(ery hard to understand \(because it is interrupted by function borders)
-.15 F 1.042(and one al)123 303.6 R -.1(wa)-.1 G 1.043
(ys has to remember the global dispatching matrix to follo).1 F 3.543
(wi)-.25 G 1.043(t\). Additionally)-3.543 F 3.543(,a)-.65 G 1.043
(ll threads)-3.543 F .373(operate on the same e)123 315.6 R -.15(xe)-.15
G .373(cution stack. Although this sa).15 F -.15(ve)-.2 G 2.872(sm).15 G
(emory)-2.872 E 2.872(,i)-.65 G 2.872(ti)-2.872 G 2.872(so)-2.872 G .372
(ften nasty)-2.872 F 2.872(,b)-.65 G .372(ecause one cannot)-2.872 F
.784(switch between threads in the middle of a function. Thus the sched\
uling borders are the function bor)123 327.6 R(-)-.2 E(ders.)123 339.6 Q
F1 -4.998(22)108 356.4 S 9.992 -2.498(.. C)4.998 H(Co)-4.72 E(on)-4.998
E(nt)-5.558 E(te)-3.328 E(ex)-4.438 E(xt)-4.998 E(t-)-3.328 E(-b)-3.328
E(ba)-5.558 E(as)-4.998 E(se)-3.888 E(ed)-4.438 E 2.5(di)-5.558 G(im)
-5.278 E(mp)-8.328 E(pl)-5.558 E(li)-2.778 E(ic)-2.778 E(ci)-4.438 E(it)
-2.778 E 2.5(ts)-3.328 G(sc)-6.388 E(ch)-4.438 E(he)-5.558 E(ed)-4.438 E
(du)-5.558 E(ul)-5.558 E(li)-2.778 E(in)-2.778 E(ng)-5.558 E 2.5(gb)
-4.998 G(be)-8.058 E(et)-4.438 E(tw)-3.328 E(we)-7.218 E(ee)-4.438 E(en)
-4.438 E 2.5(nt)-5.558 G(th)-5.828 E(hr)-5.558 E -.18(re)-4.438 G(ea)
-4.258 E(ad)-4.998 E(ds)-5.558 E 2.5(so)-3.888 G(of)-7.498 E 2.5(fe)
-3.328 G(ex)-6.938 E(xe)-4.998 E(ec)-4.438 E(cu)-4.438 E(ut)-5.558 E(ti)
-3.328 E(io)-2.778 E(on)-4.998 E(n:)-5.558 E(:)-3.328 E F0 .223
(Here the idea is that one programs the application as with fork)123
374.4 R .223(ed processes, i.e., one spa)-.1 F .222(wns a thread of)-.15
F -.15(exe)123 386.4 S .885(cution and this runs from the be).15 F .885
(gin to the end without an interrupted control \215o)-.15 F 2.186 -.65
(w. B)-.25 H .886(ut the control).65 F<8d6f>123 398.4 Q 2.582(wc)-.25 G
.081(an be still interrupted \255 e)-2.582 F -.15(ve)-.25 G 2.581(ni).15
G 2.581(nt)-2.581 G .081(he middle of a function.)-2.581 F .081
(Actually in a preempti)5.081 F .381 -.15(ve w)-.25 H(ay).05 E 2.581(,s)
-.65 G .081(imilar to)-2.581 F .431(what the k)123 410.4 R .431
(ernel does for the hea)-.1 F .431(vy-weight processes, i.e., e)-.2 F
-.15(ve)-.25 G .432(ry fe).15 F 2.932(wm)-.25 G .432
(illiseconds the user)-2.932 F .432(-space sched-)-.2 F .541
(uler switches between the threads of e)123 422.4 R -.15(xe)-.15 G .541
(cution. But the thread itself doesn').15 F 3.04(tr)-.18 G .54
(ecognize this and usually)-3.04 F(\(e)123 434.4 Q
(xcept for synchronization issues\) doesn')-.15 E 2.5(th)-.18 G -2.25
-.2(av e)-2.5 H(to care about this.)2.7 E .082(The adv)123 452.4 R .082
(antage of this approach is that it')-.25 F 2.583(sv)-.55 G .083
(ery easy to program, because the control \215o)-2.733 F 2.583(wa)-.25 G
.083(nd conte)-2.583 F .083(xt of)-.15 F 3.049(at)123 464.4 S .549
(hread directly follo)-3.049 F .548
(ws a procedure without forced interrupts through function borders.)-.25
F(Additionally)5.548 E(,)-.65 E(the programming is v)123 476.4 Q
(ery similar to a traditional and well understood)-.15 E F3(fork)2.5 E
F0(\(2\) based approach.)1.666 E .565(The disadv)123 494.4 R .565(antag\
e is that although the general performance is increased, compared to us\
ing approaches)-.25 F .607(based on hea)123 506.4 R .607(vy-weight proc\
esses, it is decreased compared to the matrix-approach abo)-.2 F -.15
(ve)-.15 G 3.107(.B).15 G .606(ecause the)-3.107 F 2.085
(implicit preempti)123 518.4 R 2.385 -.15(ve s)-.25 H 2.086
(cheduling does usually a lot more conte).15 F 2.086(xt switches \(e)
-.15 F -.15(ve)-.25 G 2.086(ry user).15 F 2.086(-space conte)-.2 F(xt)
-.15 E .905(switch costs some o)123 530.4 R -.15(ve)-.15 G .905(rhead e)
.15 F -.15(ve)-.25 G 3.405(nw).15 G .905
(hen it is a lot cheaper than a k)-3.405 F(ernel-le)-.1 E -.15(ve)-.25 G
3.404(lc).15 G(onte)-3.404 E .904(xt switch\) than the)-.15 F -.15(ex)
123 542.4 S 2.241(plicit cooperati).15 F -.15(ve)-.25 G(/non-preempti)
.15 E 2.541 -.15(ve s)-.25 H 4.741(cheduling. Finally).15 F 4.741(,t)
-.65 G 2.241(here is no really portable)-4.741 F F2(POSIX/ANSI)4.742 E
F0<ad43>A 1.091(based w)123 554.4 R 1.091(ay to implement user)-.1 F
1.091(-space preempti)-.2 F 1.391 -.15(ve t)-.25 H 1.091
(hreading. Either the platform already has threads, or).15 F .656
(one has to hope that some semi-portable package e)123 566.4 R .657
(xists for it. And e)-.15 F -.15(ve)-.25 G 3.157(nt).15 G .657
(hose semi-portable packages)-3.157 F .228(usually ha)123 578.4 R .528
-.15(ve t)-.2 H 2.728(od).15 G .227(eal with assembler code and other n\
asty internals and are not easy to port to forthcom-)-2.728 F
(ing platforms.)123 590.4 Q .06
(So, in short: the matrix-dispatching approach is portable and f)108
607.2 R .061(ast, b)-.1 F .061(ut nasty to program. The thread schedul-)
-.2 F .908(ing approach is easy to program, b)108 619.2 R .908(ut suf)
-.2 F .908
(fers from synchronization and portability problems caused by its)-.25 F
(preempti)108 631.2 Q .3 -.15(ve n)-.25 H(ature.).15 E F1 -6.668(TT)108
654 S -5.558(hh)6.668 G 8.876 -4.438(ee C)5.558 H(Co)-2.78 E(om)-4.998 E
(mp)-8.328 E(pr)-5.558 E -.18(ro)-4.438 G(om)-4.818 E(mi)-8.328 E(is)
-2.778 E(se)-3.888 E 2.5(eo)-4.438 G(of)-7.498 E 2.5(fP)-3.328 G(Pt)
-8.608 E(th)-3.328 E(h)-5.558 E F0 .065(But wh)108 670.8 R 2.565(yn)-.05
G .066(ot combine the good aspects of both approaches while a)-2.565 F
-.2(vo)-.2 G .066(iding their bad aspects? That').2 F 2.566(st)-.55 G
.066(he goal)-2.566 F(of)108 682.8 Q F1 -6.108(PP)4.574 G -3.328(tt)
6.108 G -5.558(hh)3.328 G F0(.)5.558 E F1 -6.108(PP)4.574 G -3.328(tt)
6.108 G -5.558(hh)3.328 G F0 2.074
(implements easy-to-program threads of e)10.132 F -.15(xe)-.15 G 2.074
(cution, b).15 F 2.074(ut a)-.2 F -.2(vo)-.2 G 2.073
(ids the problems of preempti).2 F -.15(ve)-.25 G
(scheduling by using non-preempti)108 694.8 Q .3 -.15(ve s)-.25 H
(cheduling instead.).15 E .479(This sounds lik)108 711.6 R .479
(e, and is, a useful approach. Ne)-.1 F -.15(ve)-.25 G .479
(rtheless, one has to k).15 F .48(eep the implications of non-preemp-)
-.1 F(ti)108 723.6 Q 1.984 -.15(ve t)-.25 H 1.684
(hread scheduling in mind when w).15 F 1.684(orking with)-.1 F F1 -6.108
(PP)4.184 G -3.328(tt)6.108 G -5.558(hh)3.328 G F0 4.184(.T)5.558 G
1.683(he follo)-4.184 F 1.683(wing list summarizes a fe)-.25 F 4.183(we)
-.25 G(ssential)-4.183 E 139.425(10/Mar/2000 perl)72 768 R
(5.005, patch 03)2.5 E(4)189.145 E EP
%%Page: 5 5
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/Times-Roman@0 SF(PTH-MANU)72 48 Q 78.275(AL\(1\) User)-.4 F
(Contrib)2.5 E(uted Perl Documentation)-.2 E(PTH-MANU)80.775 E(AL\(1\))
-.4 E(points:)108 84 Q/F1 10/Times-Bold@0 SF -4.998(oo)108 100.8 S
-6.108(PP)118 112.8 S -3.328(tt)6.108 G 11.116 -5.558(hh pp)3.328 H
6.196 -4.438(rr o)5.558 H -.1(ov)-.56 G(vi)-4.898 E(id)-2.778 E(de)
-5.558 E(es)-4.438 E 2.5(sm)-3.888 G(ma)-10.828 E(ax)-4.998 E(xi)-4.998
E(im)-2.778 E(mu)-8.328 E(um)-5.558 E 2.5(mp)-8.328 G(po)-8.058 E(or)
-4.998 E(rt)-4.438 E(ta)-3.328 E(ab)-4.998 E(bi)-5.558 E(il)-2.778 E(li)
-2.778 E(it)-2.778 E(ty)-3.328 E -.55(y,)-4.998 G 2.5(,b)-1.948 G -.2
(bu)-8.058 G(ut)-5.358 E(t)-3.328 E/F2 9/Times-Bold@0 SF -6.496(NN)2.5 G
11.39 -7(OO T)6.496 H(T).999 E F1 -3.328(tt)2.5 G -5.558(hh)3.328 G
8.876 -4.438(ee f)5.558 H(fa)1.11 E(an)-4.998 E(nc)-5.558 E(ci)-4.438 E
(ie)-2.778 E(es)-4.438 E(st)-3.888 E 2.5(tf)-3.328 G(fe)-5.828 E(ea)
-4.438 E(at)-4.998 E(tu)-3.328 E(ur)-5.558 E -.18(re)-4.438 G(es)-4.258
E(s)-3.888 E F0(.)A .873(This is, because it uses a nifty and portable)
118 130.8 R/F3 9/Times-Roman@0 SF(POSIX/ANSI)3.374 E F0 .874
(\255C approach for thread creation \(and this w)B(ay)-.1 E(doesn')118
142.8 Q 3.615(tr)-.18 G 1.115(equire an)-3.615 F 3.615(yp)-.15 G 1.115(\
latform dependent assembler hacks\) and schedules the threads in non-pr\
eempti)-3.615 F -.15(ve)-.25 G -.1(wa)118 154.8 S 3.168(y\().1 G .668
(which doesn')-3.168 F 3.168(tr)-.18 G .668(equire unportable f)-3.168 F
.669(acilities lik)-.1 F(e)-.1 E/F4 10/Courier@0 SF(SIGVTALRM)3.169 E F0
.669(\). On the other hand, this w)B .669(ay not all)-.1 F -.1(fa)118
166.8 S(nc).1 E 2.83(yt)-.15 G .33
(hreading features can be implemented.)-2.83 F(Ne)5.33 E -.15(ve)-.25 G
.33(rtheless the a).15 F -.25(va)-.2 G .33(ilable f).25 F .33
(acilities are enough to pro)-.1 F(vide)-.15 E 2.5(ar)118 178.8 S(ob)
-2.5 E(ust and full-featured threading system.)-.2 E F1 -4.998(oo)108
195.6 S -6.108(PP)118 207.6 S -3.328(tt)6.108 G 11.345 -5.558(hh i)3.328
H(in)2.78 E(nc)-5.558 E(cr)-4.438 E -.18(re)-4.438 G(ea)-4.258 E(as)
-4.998 E(se)-3.888 E(es)-4.438 E 2.729(st)-3.888 G(th)-6.057 E(he)-5.558
E 2.729(er)-4.438 G -.18(re)-7.167 G(es)-4.258 E(sp)-3.888 E(po)-5.558 E
(on)-4.998 E(ns)-5.558 E(si)-3.888 E -.1(iv)-2.778 G -.1(ve)-4.898 G(en)
-4.338 E(ne)-5.558 E(es)-4.438 E(ss)-3.888 E 2.729(sa)-3.888 G(an)-7.727
E(nd)-5.558 E 2.729(dc)-5.558 G(co)-7.167 E(on)-4.998 E(nc)-5.558 E(cu)
-4.438 E(ur)-5.558 E(rr)-4.438 E -.18(re)-4.438 G(en)-4.258 E(nc)-5.558
E(cy)-4.438 E 2.729(yo)-4.998 G(of)-7.727 E 2.729(fa)-3.328 G(an)-7.727
E 2.729(ne)-5.558 G -.15(ev)-7.167 G -.1(ve)-4.848 G(en)-4.338 E(nt)
-5.558 E(t-)-3.328 E(-d)-3.328 E(dr)-5.558 E(ri)-4.438 E -.1(iv)-2.778 G
-.1(ve)-4.898 G(en)-4.338 E 2.729(na)-5.558 G(ap)-7.727 E(pp)-5.558 E
(pl)-5.558 E(li)-2.778 E(ic)-2.778 E(ca)-4.438 E(at)-4.998 E(ti)-3.328 E
(io)-2.778 E(on)-4.998 E(n,)-5.558 E 2.729(,b)-2.498 G -.2(bu)-8.287 G
(ut)-5.358 E(t)-3.328 E F2 -6.496(NN)2.729 G 11.39 -7(OO T)6.496 H(T)
.999 E F1 -3.328(tt)2.73 G -5.558(hh)3.328 G 9.106 -4.438(ee cc)5.558 H
-4.998(oo)4.438 G -5.558(nn)4.998 G -3.328(--)5.558 G -4.438(cc)118
219.6 S -5.558(uu)4.438 G -4.438(rr)5.558 G 6.196 -4.438(rr ee)4.438 H
-5.558(nn)4.438 G -4.438(cc)5.558 G 9.996 -4.998(yy oo)4.438 H 6.656
-3.328(ff n)4.998 H(nu)-2.23 E(um)-5.558 E(mb)-8.328 E(be)-5.558 E(er)
-4.438 E -.37(r-)-4.438 G(-c)-2.958 E(cr)-4.438 E(ru)-4.438 E(un)-5.558
E(nc)-5.558 E(ch)-4.438 E(hi)-5.558 E(in)-2.778 E(ng)-5.558 E 2.5(ga)
-4.998 G(ap)-7.498 E(pp)-5.558 E(pl)-5.558 E(li)-2.778 E(ic)-2.778 E(ca)
-4.438 E(at)-4.998 E(ti)-3.328 E(io)-2.778 E(on)-4.998 E(ns)-5.558 E(s)
-3.888 E F0(.)A .169(The reason is the non-preempti)118 237.6 R .469
-.15(ve s)-.25 H .169(cheduling. Number).15 F .169
(-crunching applications usually require preempti)-.2 F -.15(ve)-.25 G
.473(scheduling to achie)118 249.6 R .773 -.15(ve c)-.25 H(oncurrenc).15
E 2.973(yb)-.15 G .473(ecause of their long)-2.973 F F3(CPU)2.974 E F0
-.2(bu)2.974 G .474(rsts. F).2 F .474(or them, non-preempti)-.15 F .774
-.15(ve s)-.25 H(chedul-).15 E 1.406(ing \(e)118 261.6 R -.15(ve)-.25 G
3.906(nt).15 G 1.406(ogether with e)-3.906 F 1.406
(xplicit yielding\) pro)-.15 F 1.406
(vides only the old concept of `coroutines'. On the other)-.15 F 1.285
(hand, e)118 273.6 R -.15(ve)-.25 G 1.285(nt dri).15 F -.15(ve)-.25 G
3.786(na).15 G 1.286(pplications bene\214t greatly from non-preempti)
-3.786 F 1.586 -.15(ve s)-.25 H 1.286(cheduling. The).15 F 3.786(yh)-.15
G -2.25 -.2(av e)-3.786 H 1.286(only short)3.986 F F3(CPU)118 285.6 Q F0
-.2(bu)4.446 G 1.946(rsts and lots of e).2 F -.15(ve)-.25 G 1.945
(nts to w).15 F 1.945(ait on, and this w)-.1 F 1.945(ay run f)-.1 F
1.945(aster under non-preempti)-.1 F 2.245 -.15(ve s)-.25 H(cheduling)
.15 E .197(because no unnecessary conte)118 297.6 R .197
(xt switching occurs, as it is the case for preempti)-.15 F .498 -.15
(ve s)-.25 H .198(cheduling. That').15 F 2.698(sw)-.55 G -.05(hy)-2.698
G F1 -6.108(PP)118 309.6 S -3.328(tt)6.108 G -5.558(hh)3.328 G F0
(is mainly intended for serv)8.058 E
(er type applications, although there is no technical restriction.)-.15
E F1 -4.998(oo)108 326.4 S -6.108(PP)118 338.4 S -3.328(tt)6.108 G
11.116 -5.558(hh r)3.328 H -.18(re)1.12 G(eq)-4.258 E(qu)-5.558 E(ui)
-5.558 E(ir)-2.778 E -.18(re)-4.438 G(es)-4.258 E 2.5(st)-3.888 G(th)
-5.828 E(hr)-5.558 E -.18(re)-4.438 G(ea)-4.258 E(ad)-4.998 E(d-)-5.558
E(-s)-3.328 E(sa)-3.888 E(af)-4.998 E(fe)-3.328 E 2.5(ef)-4.438 G(fu)
-5.828 E(un)-5.558 E(nc)-5.558 E(ct)-4.438 E(ti)-3.328 E(io)-2.778 E(on)
-4.998 E(ns)-5.558 E(s,)-3.888 E 2.5(,b)-2.498 G -.2(bu)-8.058 G(ut)
-5.358 E(t)-3.328 E F2 -6.496(NN)2.5 G 11.39 -7(OO T)6.496 H(T).999 E F1
6.196 -4.438(rr ee)2.5 H -4.438(ee)4.438 G -5.558(nn)4.438 G -3.328(tt)
5.558 G -4.438(rr)3.328 G -4.998(aa)4.438 G -5.558(nn)4.998 G 6.656
-3.328(tt ff)5.558 H -5.558(uu)3.328 G -5.558(nn)5.558 G -4.438(cc)5.558
G -3.328(tt)4.438 G -2.778(ii)3.328 G -4.998(oo)2.778 G -5.558(nn)4.998
G -3.888(ss)5.558 G F0(.)3.888 E 1.124(This nice f)118 356.4 R 1.124
(act e)-.1 F 1.124(xists ag)-.15 F 1.124
(ain because of the nature of non-preempti)-.05 F 1.424 -.15(ve s)-.25 H
1.124(cheduling, where a function isn').15 F(t)-.18 E .033
(interrupted and this w)118 368.4 R .033(ay cannot be reentered before \
it returned. This is a great portability bene\214t, because)-.1 F 1.011
(thread-safety can be achie)118 380.4 R -.15(ve)-.25 G 3.511(dm).15 G
1.011(ore easily than reentrance possibility)-3.511 F 3.511(.E)-.65 G
1.01(specially this means that under)-3.511 F F1 -6.108(PP)118 392.4 S
-3.328(tt)6.108 G -5.558(hh)3.328 G F0 .294(more e)8.352 F .294
(xisting third-party libraries can be used without side-ef)-.15 F .294
(fects than its the case for other thread-)-.25 F(ing systems.)118 404.4
Q F1 -4.998(oo)108 421.2 S -6.108(PP)118 433.2 S -3.328(tt)6.108 G
11.116 -5.558(hh dd)3.328 H -4.998(oo)5.558 G -4.438(ee)4.998 G -3.888
(ss)4.438 G -5.558(nn)3.888 G -3.328('')5.558 G 6.656 -3.328(tt r)3.328
H -.18(re)-1.11 G(eq)-4.258 E(qu)-5.558 E(ui)-5.558 E(ir)-2.778 E -.18
(re)-4.438 G 2.5(ea)-4.258 G(an)-7.498 E(ny)-5.558 E 2.5(yk)-4.998 G -.1
(ke)-8.058 G(er)-4.338 E -.15(rn)-4.438 G(ne)-5.408 E(el)-4.438 E 2.5
(ls)-2.778 G(su)-6.388 E(up)-5.558 E(pp)-5.558 E(po)-5.558 E(or)-4.998 E
(rt)-4.438 E(t,)-3.328 E 2.5(,b)-2.498 G -.2(bu)-8.058 G(ut)-5.358 E 2.5
(tc)-3.328 G(ca)-6.938 E(an)-4.998 E(n)-5.558 E F2 -6.496(NN)2.5 G 11.39
-7(OO T)6.496 H(T).999 E F1 -5.558(bb)2.5 G -4.438(ee)5.558 G -5.558(nn)
4.438 G -4.438(ee)5.558 G -5.558<8c8c>4.438 G 6.656 -3.328(tt ff)5.558 H
6.196 -4.438(rr o)3.328 H(om)-.56 E 2.5(mm)-8.328 G(mu)-10.828 E(ul)
-5.558 E(lt)-2.778 E(ti)-3.328 E(ip)-2.778 E(pr)-5.558 E -.18(ro)-4.438
G(oc)-4.818 E(ce)-4.438 E(es)-4.438 E(ss)-3.888 E(so)-3.888 E(or)-4.998
E 2.5(rm)-4.438 G(ma)-10.828 E(ac)-4.998 E(ch)-4.438 E(hi)-5.558 E(in)
-2.778 E(ne)-5.558 E(es)-4.438 E(s)-3.888 E F0(.)A .168(This means that)
118 451.2 R F1 -6.108(PP)2.668 G -3.328(tt)6.108 G -5.558(hh)3.328 G F0
.168(runs on almost all Unix k)8.226 F .168(ernels, because the k)-.1 F
.167(ernel does not need to be a)-.1 F -.1(wa)-.15 G .167(re of the).1 F
F1 -6.108(PP)118 463.2 S -3.328(tt)6.108 G -5.558(hh)3.328 G F0 .773
(threads \(because the)8.831 F 3.273(ya)-.15 G .773
(re implemented entirely in user)-3.273 F .774
(-space\). On the other hand, it cannot bene\214t)-.2 F .292(from the e)
118 475.2 R .292(xistence of multiprocessors, because for this, k)-.15 F
.292(ernel support w)-.1 F .292(ould be needed. In practice, this)-.1 F
1.099(is no problem, because multiprocessor systems are rare, and porta\
bility is almost more important than)118 487.2 R(highest concurrenc)118
499.2 Q -.65(y.)-.15 G F1 -6.668(TT)108 522 S -5.558(hh)6.668 G 8.876
-4.438(ee l)5.558 H(li)1.66 E(if)-2.778 E(fe)-3.328 E 2.5(ec)-4.438 G
(cy)-6.938 E(yc)-4.998 E(cl)-4.438 E(le)-2.778 E 2.5(eo)-4.438 G(of)
-7.498 E 2.5(fa)-3.328 G 2.5(at)-7.498 G(th)-5.828 E(hr)-5.558 E -.18
(re)-4.438 G(ea)-4.258 E(ad)-4.998 E(d)-5.558 E F0 1.635 -.8(To u)108
538.8 T .035(nderstand the).8 F F1 -6.108(PP)2.535 G -3.328(tt)6.108 G
-5.558(hh)3.328 G F0 .035(Application Programming Interf)8.093 F .035
(ace \()-.1 F F3(API)A F0 .035
(\), it helps to \214rst understand the life c)B .034(ycle of)-.15 F 2.5
(at)108 550.8 S(hread in the)-2.5 E F1 -6.108(PP)2.5 G -3.328(tt)6.108 G
-5.558(hh)3.328 G F0
(threading system. It can be illustrated with the follo)8.058 E
(wing directed graph:)-.25 E F4(NEW)186 567.6 Q/F5 10/Symbol SF<ef>192
579.6 Q F4(V)192 591.6 Q(+---> READY ---+)144 603.6 Q F5<ef>144 615.6 Q
F4(^)42 E F5<ef>36 E 42<efef>144 627.6 S F4(V)-6 E
(WAITING <--+-- RUNNING)126 639.6 Q F5<ef>234 651.6 Q F4 84(:V)144 663.6
S 36(SUSPENDED DEAD)126 675.6 R F0 .091(When a ne)108 699.6 R 2.591(wt)
-.25 G .091(hread is created, it is mo)-2.591 F -.15(ve)-.15 G 2.591(di)
.15 G .091(nto the)-2.591 F F2 -6.496(NN)2.591 G -6.001(EE)6.496 G
-8.998(WW)6.001 G F0 .091(queue of the scheduler)11.589 F 2.591(.O)-.55
G 2.591(nt)-2.591 G .092(he ne)-2.591 F .092(xt dispatching for)-.15 F
.203(this thread, the scheduler picks it up from there and mo)108 711.6
R -.15(ve)-.15 G 2.702(si).15 G 2.702(tt)-2.702 G 2.702(ot)-2.702 G(he)
-2.702 E F2 -6.496(RR)2.702 G -6.001(EE)6.496 G -6.496(AA)6.001 G 10.382
-6.496(DD YY)6.496 H F0 .202(queue. This is a queue contain-)9.198 F
1.915(ing all threads which w)108 723.6 R 1.915(ant to perform a)-.1 F
F3(CPU)4.415 E F0 -.2(bu)4.415 G 1.915(rst. There the).2 F 4.415(ya)-.15
G 1.916(re queued in priority order)-4.415 F 4.416(.O)-.55 G 4.416(ne)
-4.416 G(ach)-4.416 E 139.425(10/Mar/2000 perl)72 768 R(5.005, patch 03)
2.5 E(5)189.145 E EP
%%Page: 6 6
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/Times-Roman@0 SF(PTH-MANU)72 48 Q 78.275(AL\(1\) User)-.4 F
(Contrib)2.5 E(uted Perl Documentation)-.2 E(PTH-MANU)80.775 E(AL\(1\))
-.4 E .826(dispatching step, the scheduler al)108 84 R -.1(wa)-.1 G .826
(ys remo).1 F -.15(ve)-.15 G 3.325(st).15 G .825
(he thread with the highest priority only)-3.325 F 3.325(.I)-.65 G 3.325
(tt)-3.325 G .825(hen increases)-3.325 F
(the priority of all remaining threads by 1, to pre)108 96 Q -.15(ve)
-.25 G(nt them from `starving'.).15 E .715(The thread which w)108 112.8
R .715(as remo)-.1 F -.15(ve)-.15 G 3.215(df).15 G .715(rom the)-3.215 F
/F1 9/Times-Bold@0 SF -6.496(RR)3.215 G -6.001(EE)6.496 G -6.496(AA)
6.001 G 10.382 -6.496(DD YY)6.496 H F0 .715(queue is the ne)9.711 F(w)
-.25 E F1 10.472 -6.496(RR UU)3.215 H -6.496(NN)6.496 G -6.496(NN)6.496
G -3.499(II)6.496 G -6.496(NN)3.499 G -7(GG)6.496 G F0 .716
(thread \(there is al)10.215 F -.1(wa)-.1 G .716(ys just).1 F(one)108
124.8 Q F1 10.472 -6.496(RR UU)3.767 H -6.496(NN)6.496 G -6.496(NN)6.496
G -3.499(II)6.496 G -6.496(NN)3.499 G -7(GG)6.496 G F0 1.267
(thread, of course\). The)10.767 F F1 10.472 -6.496(RR UU)3.767 H -6.496
(NN)6.496 G -6.496(NN)6.496 G -3.499(II)6.496 G -6.496(NN)3.499 G -7(GG)
6.496 G F0 1.267(thread is assigned e)10.767 F -.15(xe)-.15 G 1.267
(cution control. After this thread).15 F 1.583(yields e)108 136.8 R -.15
(xe)-.15 G 1.583(cution \(either e).15 F 1.583(xplicitly by yielding e)
-.15 F 1.584(xcution or implicitly by calling a function which w)-.15 F
(ould)-.1 E .638(block\) there are three possibilities: Either it has t\
erminated, then it is mo)108 148.8 R -.15(ve)-.15 G 3.137(dt).15 G 3.137
(ot)-3.137 G(he)-3.137 E F1 -6.496(DD)3.137 G -6.001(EE)6.496 G -6.496
(AA)6.001 G -6.496(DD)6.496 G F0 .637(queue, or it has)9.633 F -2.15
-.25(ev e)108 160.8 T .561(nts on which it w).25 F .561(ants to w)-.1 F
.561(ait, then it is mo)-.1 F -.15(ve)-.15 G 3.062(di).15 G .562
(nto the)-3.062 F F1 14.666 -8.998(WW A)3.062 H(AI)2.502 E(IT)-3.499 E
(TI)-6.001 E(IN)-3.499 E(NG)-6.496 E(G)-7 E F0 .562
(queue. Else it is assumed it w)3.062 F .562(ants to)-.1 F(perform more)
108 172.8 Q/F2 9/Times-Roman@0 SF(CPU)2.5 E F0 -.2(bu)2.5 G
(rsts and immediately enters the).2 E F1 -6.496(RR)2.5 G -6.001(EE)6.496
G -6.496(AA)6.001 G 10.382 -6.496(DD YY)6.496 H F0(queue ag)8.996 E
(ain.)-.05 E 1.658(Before the ne)108 189.6 R 1.658(xt thread is tak)-.15
F 1.658(en out of the)-.1 F F1 -6.496(RR)4.158 G -6.001(EE)6.496 G
-6.496(AA)6.001 G 10.382 -6.496(DD YY)6.496 H F0 1.657(queue, the)10.653
F F1 14.666 -8.998(WW A)4.157 H(AI)2.502 E(IT)-3.499 E(TI)-6.001 E(IN)
-3.499 E(NG)-6.496 E(G)-7 E F0 1.657(queue is check)4.157 F 1.657
(ed for pending)-.1 F -2.15 -.25(ev e)108 201.6 T .522
(nts. If one or more e).25 F -.15(ve)-.25 G .522
(nts occurred, the threads that are w).15 F .522
(aiting on them are immediately mo)-.1 F -.15(ve)-.15 G 3.023(dt).15 G
3.023(ot)-3.023 G(he)-3.023 E F1 -6.496(RR)108 213.6 S -6.001(EE)6.496 G
-6.496(AA)6.001 G 10.382 -6.496(DD YY)6.496 H F0(queue.)8.996 E 1.553
(The purpose of the)108 230.4 R F1 -6.496(NN)4.053 G -6.001(EE)6.496 G
-8.998(WW)6.001 G F0 1.553(queue has to do with the f)13.051 F 1.553
(act that in)-.1 F/F3 10/Times-Bold@0 SF -6.108(PP)4.053 G -3.328(tt)
6.108 G -5.558(hh)3.328 G F0 4.053(at)9.611 G 1.553(hread ne)-4.053 F
-.15(ve)-.25 G 4.052(rd).15 G 1.552(irectly switches to)-4.052 F .64
(another thread. A thread al)108 242.4 R -.1(wa)-.1 G .64(ys yields e).1
F -.15(xe)-.15 G .64
(cution to the scheduler and the scheduler dispatches to the ne).15 F
(xt)-.15 E .06(thread. So a freshly spa)108 254.4 R .06
(wned thread has to be k)-.15 F .06(ept some)-.1 F .06
(where until the scheduler gets a chance to pick it up)-.25 F
(for scheduling. That is for what the)108 266.4 Q F1 -6.496(NN)2.5 G
-6.001(EE)6.496 G -8.998(WW)6.001 G F0(queue is for)11.498 E(.)-.55 E
.026(The purpose of the)108 283.2 R F1 -6.496(DD)2.526 G -6.001(EE)6.496
G -6.496(AA)6.001 G -6.496(DD)6.496 G F0 .027
(queue is to support thread joining. When a thread is mark)9.022 F .027
(ed to be unjoinable, it is)-.1 F 1.28(directly kick)108 295.2 R 1.279(\
ed out of the system after it terminated. But when it is joinable, it e\
nters the)-.1 F F1 -6.496(DD)3.779 G -6.001(EE)6.496 G -6.496(AA)6.001 G
-6.496(DD)6.496 G F0(queue.)10.275 E
(There it remains until another thread joins it.)108 307.2 Q(Finally)108
324 Q 3.337(,t)-.65 G .838(here is a special separated queue named)
-3.337 F F1 -5.002(SS)3.338 G -6.496(UU)5.002 G -5.002(SS)6.496 G -5.497
(PP)5.002 G -6.001(EE)5.497 G -6.496(NN)6.001 G -6.496(DD)6.496 G -6.001
(EE)6.496 G -6.496(DD)6.001 G F0 3.338(,t)6.496 G 3.338(ow)-3.338 G .838
(here threads can be manually mo)-3.338 F -.15(ve)-.15 G(d).15 E 1.171
(from the)108 336 R F1 -6.496(NN)3.671 G -6.001(EE)6.496 G -8.998(WW)
6.001 G F0(,)8.998 E F1 -6.496(RR)3.671 G -6.001(EE)6.496 G -6.496(AA)
6.001 G 10.382 -6.496(DD YY)6.496 H F0(or)10.167 E F1 14.666 -8.998
(WW A)3.671 H(AI)2.502 E(IT)-3.499 E(TI)-6.001 E(IN)-3.499 E(NG)-6.496 E
(G)-7 E F0 1.17
(queues by the application. The purpose of this special queue is to)
3.671 F .858(temporarily absorb suspended threads until the)108 348 R
3.358(ya)-.15 G .858(re ag)-3.358 F .859
(ain resumed by the application. Suspended threads)-.05 F 1.472
(do not cost scheduling or e)108 360 R -.15(ve)-.25 G 1.471
(nt handling resources, because the).15 F 3.971(ya)-.15 G 1.471
(re temporarily completely out of the)-3.971 F(scheduler')108 372 Q
2.991(ss)-.55 G .491(cope. If a thread is resumed, it is mo)-2.991 F
-.15(ve)-.15 G 2.991(db).15 G .491
(ack to the queue from where it originally came and)-2.991 F(this w)108
384 Q(ay ag)-.1 E(ain enters the schedulers scope.)-.05 E F1 -6.496(AA)
72 400.8 S -5.497(PP)6.496 G -5.497(PP)5.497 G -6.001(LL)5.497 G -3.499
(II)6.001 G -6.496(CC)3.499 G 9.887 -6.496(AA T)6.496 H(TI).495 E(IO)
-3.499 E(ON)-7 E 2.25(NP)-6.496 G(PR)-7.747 E -.27(RO)-6.496 G(OG)-6.73
E(GR)-7 E(RA)-6.496 E(AM)-6.496 E(MM)-8.494 E(MI)-8.494 E(IN)-3.499 E
(NG)-6.496 E 2.25(GI)-7 G(IN)-5.749 E(NT)-6.496 E(TE)-6.001 E(ER)-6.001
E(RF)-6.496 E -.81(FA)-5.497 G -.495(AC)-5.686 G(CE)-6.001 E 2.25(E\()
-6.001 G(\(A)-5.245 E(AP)-6.496 E(PI)-5.497 E(I\))-3.499 E(\))-2.995 E
F0 .649(In the follo)108 412.8 R .649(wing the)-.25 F F3 -6.108(PP)3.149
G -3.328(tt)6.108 G -5.558(hh)3.328 G/F4 10/Times-Italic@0 SF .649
(Application Pr)8.707 F -.1(og)-.45 G -.15(ra).1 G .649(mming Interface)
.15 F F0 .649(\(API\) is discussed in detail. W)3.149 F .649
(ith the kno)-.4 F(wl-)-.25 E .156(edge gi)108 424.8 R -.15(ve)-.25 G
2.656(na).15 G(bo)-2.656 E -.15(ve)-.15 G 2.656(,i).15 G 2.656(ts)-2.656
G .156(hould be no)-2.656 F 2.656(we)-.25 G .156(asy to understand ho)
-2.656 F 2.656(wt)-.25 G 2.656(op)-2.656 G .157
(rogram threads with this API. In good Unix)-2.656 F(tradition,)108
436.8 Q F3 -6.108(PP)2.981 G -3.328(tt)6.108 G -5.558(hh)3.328 G F0 .481
(functions use special return v)8.539 F .48(alues \()-.25 F/F5 10
/Courier@0 SF(NULL)A F0 .48(in pointer conte)2.98 F(xt,)-.15 E F5(FALSE)
2.98 E F0 .48(in boolean conte)2.98 F .48(xt and)-.15 F F5(-1)108 448.8
Q F0 .126(in inte)2.626 F .126(ger conte)-.15 F .127
(xt\) to indicate an error condition and set \(or pass through\) the)
-.15 F F5(errno)2.627 E F0 .127(system v)2.627 F .127(ariable to)-.25 F
(pass more details about the error to the caller)108 460.8 Q(.)-.55 E F3
-7.778(GG)108 483.6 S -2.778(ll)7.778 G -4.998(oo)2.778 G -5.558(bb)
4.998 G -4.998(aa)5.558 G 5.556 -2.778(ll L)4.998 H(Li)-3.89 E(ib)-2.778
E(br)-5.558 E(ra)-4.438 E(ar)-4.998 E(ry)-4.438 E 2.5(yM)-4.998 G(Ma)
-11.938 E(an)-4.998 E(na)-5.558 E(ag)-4.998 E(ge)-4.998 E(em)-4.438 E
(me)-8.328 E(en)-4.438 E(nt)-5.558 E(t)-3.328 E F0 .429(The follo)108
500.4 R .429(wing functions act on the library as a whole.)-.25 F(The)
5.429 E 2.929(ya)-.15 G .429(re used to initialize and shutdo)-2.929 F
.428(wn the sched-)-.25 F(uler and fetch information from it.)108 512.4
Q(int)108 529.2 Q F3 -5.558(pp)2.5 G -3.328(tt)5.558 G -5.558(hh)3.328 G
-4.998(__)5.558 G -2.778(ii)4.998 G -5.558(nn)2.778 G -2.778(ii)5.558 G
-3.328(tt)2.778 G F0(\(v)3.328 E(oid\);)-.2 E 1.321
(This initializes the)128 541.2 R F3 -6.108(PP)3.821 G -3.328(tt)6.108 G
-5.558(hh)3.328 G F0(library)9.379 E 3.821(.I)-.65 G 3.821(th)-3.821 G
1.321(as to be the \214rst)-3.821 F F3 -6.108(PP)3.822 G -3.328(tt)6.108
G -5.558(hh)3.328 G F2(API)9.38 E F0 1.322
(function call in an application, and is)3.822 F(mandatory)128 553.2 Q
4.004(.I)-.65 G(t')-4.004 E 4.004(su)-.55 G 1.504(sually done at the be)
-4.004 F 1.503(gin of the)-.15 F F4(main\(\))4.003 E F0 1.503
(function of the application. This implicitly)4.003 F(spa)128 565.2 Q
1.093(wns the internal scheduler thread and transforms the single e)-.15
F -.15(xe)-.15 G 1.094(cution unit of the current process).15 F
(into a thread \(the `main' thread\). It returns)128 577.2 Q F5(TRUE)2.5
E F0(on success and)2.5 E F5(FALSE)2.5 E F0(on error)2.5 E(.)-.55 E(int)
108 594 Q F3 -5.558(pp)2.5 G -3.328(tt)5.558 G -5.558(hh)3.328 G -4.998
(__)5.558 G -5.558(kk)4.998 G -2.778(ii)5.558 G -2.778(ll)2.778 G -2.778
(ll)2.778 G F0(\(v)2.778 E(oid\);)-.2 E .335(This kills the)128 606 R F3
-6.108(PP)2.835 G -3.328(tt)6.108 G -5.558(hh)3.328 G F0(library)8.393 E
2.835(.I)-.65 G 2.835(ts)-2.835 G .335(hould be the last)-2.835 F F3
-6.108(PP)2.834 G -3.328(tt)6.108 G -5.558(hh)3.328 G F2(API)8.392 E F0
.334(function call in an application, b)2.834 F .334(ut is not really)
-.2 F 1.335(required. It')128 618 R 3.835(su)-.55 G 1.336(sually done a\
t the end of the main function of the application. At least, it has to \
be)-3.835 F .111(called from within the main thread. It implicitly kill\
s all threads and transforms back the calling thread)128 630 R .291
(into the single e)128 642 R -.15(xe)-.15 G .291
(cution unit of the underlying process.).15 F .292(The usual w)5.292 F
.292(ay to terminate a)-.1 F F3 -6.108(PP)2.792 G -3.328(tt)6.108 G
-5.558(hh)3.328 G F0(application)8.35 E .982(is either a simple `)128
654 R F5(pth_exit\(0\);)A F0 3.482('i)C 3.482(nt)-3.482 G .982
(he main thread \(which w)-3.482 F .982
(aits for all other threads to termi-)-.1 F 1.196(nate, kills the threa\
ding system and then terminates the process\) or a `)128 666 R F5 1.197
(pth_kill\(\); exit\(0\))B F0(')A 2.37(\(which immediately kills the th\
reading system and terminates the process\). The)128 678 R F4
(pth_kill\(\))4.87 E F0(return)4.87 E .253
(immediately with a return code of)128 690 R F5(FALSE)2.753 E F0 .253
(if it is called not from within the main thread. Else kills the)2.753 F
(threading system and returns)128 702 Q F5(TRUE)2.5 E F0(.)A 139.425
(10/Mar/2000 perl)72 768 R(5.005, patch 03)2.5 E(6)189.145 E EP
%%Page: 7 7
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/Times-Roman@0 SF(PTH-MANU)72 48 Q 78.275(AL\(1\) User)-.4 F
(Contrib)2.5 E(uted Perl Documentation)-.2 E(PTH-MANU)80.775 E(AL\(1\))
-.4 E(long)108 84 Q/F1 10/Times-Bold@0 SF -5.558(pp)2.5 G -3.328(tt)
5.558 G -5.558(hh)3.328 G -4.998(__)5.558 G -4.438(cc)4.998 G -3.328(tt)
4.438 G -4.438(rr)3.328 G -2.778(ll)4.438 G F0(\(unsigned long)2.778 E
/F2 10/Times-Italic@0 SF(query)2.5 E F0 2.5(,.)C(..\);)-2.5 E 1.582
(This is a generalized query/control function for the)128 96 R F1 -6.108
(PP)4.082 G -3.328(tt)6.108 G -5.558(hh)3.328 G F0(library)9.64 E 6.581
(.T)-.65 G 1.581(he ar)-6.581 F(gument)-.18 E F2(query)4.081 E F0 1.581
(is a bitmask)4.081 F(formed out of one or more)128 108 Q/F3 10
/Courier@0 SF(PTH_CTRL_)2.5 E/F4 9/Times-Italic@0 SF(XXXX)A F0
(queries. Currently the follo)2.5 E(wing queries are supported:)-.25 E
F3(PTH_CTRL_GETTHREADS)108 124.8 Q F0 .314
(This returns the total number of threads currently in e)148 136.8 R
2.814(xistence. This)-.15 F .314(query actually is formed out)2.814 F
2.684(of the combination of queries for threads in a particular state, \
i.e., the)148 148.8 R F3(PTH_CTRL_GET-)5.183 E(THREADS)148 160.8 Q F0
(query is equal to the)2.5 E/F5 9/Times-Roman@0 SF(OR)2.5 E F0
(\255combination of all the follo)A(wing specialized queries:)-.25 E F3
(PTH_CTRL_GETTHREADS_NEW)148 178.8 Q F0 1.226
(for the number of threads in the ne)3.726 F 3.727(wq)-.25 G 1.227
(ueue \(threads created)-3.727 F(via)148 190.8 Q F2(pth_spawn)4.908 E F0
2.407(\(3\) b)1.666 F 2.407(ut still not scheduled once\),)-.2 F F3
(PTH_CTRL_GETTHREADS_READY)4.907 E F0 2.407(for the)4.907 F .827
(number of threads in the ready queue \(threads who w)148 202.8 R .827
(ant to do)-.1 F F5(CPU)3.327 E F0 -.2(bu)3.327 G(rsts\),).2 E F3
(PTH_CTRL_GET-)3.327 E(THREADS_RUNNING)148 214.8 Q F0 6.031
(for the number of running threads \(al)8.531 F -.1(wa)-.1 G 6.031
(ys just one thread!\),).1 F F3(PTH_CTRL_GETTHREADS_WAITING)148 226.8 Q
F0 .737(for the number of threads in the w)3.237 F .737
(aiting queue \(threads)-.1 F -.1(wa)148 238.8 S .882(iting for e).1 F
-.15(ve)-.25 G(nts\),).15 E F3(PTH_CTRL_GETTHREADS_SUSPENDED)3.382 E F0
.882(for the number of threads in the)3.382 F .26
(suspended queue \(threads w)148 250.8 R .26(aiting to be resumed\) and)
-.1 F F3(PTH_CTRL_GETTHREADS_DEAD)2.76 E F0 .26(for the)2.76 F
(number of threads in the ne)148 262.8 Q 2.5(wq)-.25 G
(ueue \(terminated threads w)-2.5 E(aiting for a join\).)-.1 E F3
(PTH_CTRL_GETAVLOAD)108 279.6 Q F0 1.44(This requires a second ar)148
291.6 R 1.44(gument of type `)-.18 F F3 1.44(float *)B F0 3.94('\()C
1.44(pointer to a \215oating point v)-3.94 F 3.94(ariable\). It)-.25 F
.074(stores a \215oating point v)148 303.6 R .075(alue describing the e)
-.25 F .075(xponential a)-.15 F -.15(ve)-.2 G .075
(raged load of the scheduler in this v).15 F(ari-)-.25 E .409(able. The\
 load is a function from the number of threads in the ready queue of th\
e schedulers dis-)148 315.6 R .562(patching unit.)148 327.6 R .563(So a\
 load around 1.0 means there is only one ready thread \(the standard si\
tuation)5.562 F 1.031
(when the application has no high load\). A higher load v)148 339.6 R
1.031(alue means there a more threads ready)-.25 F 1.25(who w)148 351.6
R 1.251(ant to do)-.1 F F5(CPU)3.751 E F0 -.2(bu)3.751 G 1.251
(rsts. The a).2 F -.15(ve)-.2 G 1.251(rage load v).15 F 1.251
(alue updates once per second only)-.25 F 3.751(.T)-.65 G 1.251
(he return)-3.751 F -.25(va)148 363.6 S(lue for this query is al).25 E
-.1(wa)-.1 G(ys 0.).1 E F3(PTH_CTRL_GETPRIO)108 380.4 Q F0 .058
(This requires a second ar)148 392.4 R .057(gument of type `)-.18 F F3
(pth_t)A F0 2.557('w)C .057(hich identi\214es a thread.)-2.557 F .057
(It returns the priority)5.057 F(\(ranging from)148 404.4 Q F3
(PTH_PRIO_MIN)2.5 E F0(to)2.5 E F3(PTH_PRIO_MAX)2.5 E F0 2.5(\)o)C 2.5
(ft)-2.5 G(he gi)-2.5 E -.15(ve)-.25 G 2.5(nt).15 G(hread.)-2.5 E F3
(PTH_CTRL_GETNAME)108 421.2 Q F0 .054(This requires a second ar)148
433.2 R .054(gument of type `)-.18 F F3(pth_t)A F0 2.554('w)C .055
(hich identi\214es a thread. It returns the name of)-2.554 F(the gi)148
445.2 Q -.15(ve)-.25 G 2.5(nt).15 G(hread, i.e., the return v)-2.5 E
(alue of)-.25 E F2(pth_ctrl)2.5 E F0(\(3\) should be casted to a `)1.666
E F3(char *)A F0('.)A F3(PTH_CTRL_DUMPSTATE)108 462 Q F0 1.658
(This requires a second ar)148 474 R 1.657(gument of type `)-.18 F F3
1.657(FILE *)B F0 4.157('t)C 4.157(ow)-4.157 G 1.657
(hich a summary of the internal)-4.157 F F1 -6.108(PP)4.157 G -3.328(tt)
6.108 G -5.558(hh)3.328 G F0 .319(library state is written to. The main\
 information which is currently written out is the current state)148 486
R(of the thread pool.)148 498 Q(The function returns)148 516 Q F3(-1)2.5
E F0(on error)2.5 E(.)-.55 E(long)108 532.8 Q F1 -5.558(pp)2.5 G -3.328
(tt)5.558 G -5.558(hh)3.328 G -4.998(__)5.558 G 7.396 -4.998(vv e)4.998
H(er).56 E(rs)-4.438 E(si)-3.888 E(io)-2.778 E(on)-4.998 E(n)-5.558 E F0
(\(v)A(oid\);)-.2 E .145(This function returns a he)128 544.8 R(x-v)-.15
E .145(alue `0x)-.25 F F2(V)A F4(RR)A F2(T)A F4(LL)A F0 2.645('w)C .145
(hich describes the current)-2.645 F F1 -6.108(PP)2.644 G -3.328(tt)
6.108 G -5.558(hh)3.328 G F0 .144(library v)8.202 F(ersion.)-.15 E F2(V)
2.644 E F0 .144(is the)2.644 F -.15(ve)128 556.8 S(rsion,).15 E F4(RR)
3.583 E F0 1.083(the re)3.583 F(visions,)-.25 E F4(LL)3.583 E F0 1.083
(the le)3.583 F -.15(ve)-.25 G 3.583(la).15 G(nd)-3.583 E F2(T)3.583 E
F0 1.084(the type of the le)3.583 F -.15(ve)-.25 G 3.584(l\().15 G
(alphale)-3.584 E -.15(ve)-.25 G 1.084(l=0, betale).15 F -.15(ve)-.25 G
1.084(l=1, patch-).15 F(le)128 568.8 Q -.15(ve)-.25 G 1.289
(l=2, etc\). F).15 F 1.289(or instance)-.15 F F1 -6.108(PP)3.789 G
-3.328(tt)6.108 G -5.558(hh)3.328 G F0 -.15(ve)9.347 G 1.289
(rsion 1.0b1 is encoded as 0x100101.).15 F 1.289
(The reason for this unusual)6.289 F .886(mapping is that this w)128
580.8 R .887(ay the v)-.1 F .887(ersion number is steadily)-.15 F F2
(incr)3.387 E(easing)-.37 E F0 3.387(.T)C .887(he same v)-3.387 F .887
(alue is also a)-.25 F -.25(va)-.2 G(ilable).25 E(under compile time as)
128 592.8 Q F3(PTH_VERSION)2.5 E F0(.)A F1 -6.668(TT)108 615.6 S -5.558
(hh)6.668 G 6.196 -4.438(rr ee)5.558 H -4.998(aa)4.438 G 11.116 -5.558
(dd A)4.998 H(At)-1.66 E(tt)-3.328 E(tr)-3.328 E(ri)-4.438 E(ib)-2.778 E
-.2(bu)-5.558 G(ut)-5.358 E(te)-3.328 E 2.5(eH)-4.438 G(Ha)-10.278 E(an)
-4.998 E(nd)-5.558 E(dl)-5.558 E(li)-2.778 E(in)-2.778 E(ng)-5.558 E(g)
-4.998 E F0(Attrib)108 632.4 Q 1.41(ute objects are used in)-.2 F F1
-6.108(PP)3.91 G -3.328(tt)6.108 G -5.558(hh)3.328 G F0 1.41(for tw)
9.468 F 3.91(ot)-.1 G 1.409(hings: First stand-alone/unbound attrib)
-3.91 F 1.409(ute objects are used to)-.2 F 2.02(store attrib)108 644.4
R 2.02(utes for to be spa)-.2 F 2.021(wned threads.)-.15 F 2.021
(Bounded attrib)7.021 F 2.021(ute objects are used to modify attrib)-.2
F 2.021(utes of)-.2 F(already e)108 656.4 Q(xisting threads. The follo)
-.15 E(wing attrib)-.25 E(ute \214elds e)-.2 E(xists in attrib)-.15 E
(ute objects:)-.2 E F3(PTH_ATTR_PRIO)108 673.2 Q F0(\(read-write\) [)2.5
E F3(int)A F0(])A(Thread Priority between)128 685.2 Q F3(PTH_PRIO_MIN)
2.5 E F0(and)2.5 E F3(PTH_PRIO_MAX)2.5 E F0 5(.T)C(he def)-5 E(ault is)
-.1 E F3(PTH_PRIO_STD)2.5 E F0(.)A 139.425(10/Mar/2000 perl)72 768 R
(5.005, patch 03)2.5 E(7)189.145 E EP
%%Page: 8 8
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/Times-Roman@0 SF(PTH-MANU)72 48 Q 78.275(AL\(1\) User)-.4 F
(Contrib)2.5 E(uted Perl Documentation)-.2 E(PTH-MANU)80.775 E(AL\(1\))
-.4 E/F1 10/Courier@0 SF(PTH_ATTR_NAME)108 84 Q F0(\(read-write\) [)2.5
E F1(char *)A F0(])A
(Name of thread \(up to 40 characters are stored only\), mainly for deb)
128 96 Q(ugging purposes.)-.2 E F1(PTH_ATTR_JOINABLE)108 112.8 Q F0
(\(read-write> [)2.5 E F1(int)A F0(])A 1.263
(The thread detachment type,)128 124.8 R F1(TRUE)3.763 E F0 1.263
(indicates a joinable thread,)3.763 F F1(FALSE)3.763 E F0 1.263
(indicates a detached thread.)3.763 F .241
(When a the is detached after termination it is immediately kick)128
136.8 R .241(ed out of the system instead of inserted)-.1 F
(into the dead queue.)128 148.8 Q F1(PTH_ATTR_CANCEL_STATE)108 165.6 Q
F0(\(read-write\) [)2.5 E F1(unsigned int)A F0(])A 4.149
(The thread cancellation state, i.e., a combination of)128 177.6 R F1
(PTH_CANCEL_ENABLE)6.649 E F0(or)6.649 E F1(PTH_CAN-)6.649 E
(CEL_DISABLE)128 189.6 Q F0(and)2.5 E F1(PTH_CANCEL_DEFERRED)2.5 E F0
(or)2.5 E F1(PTH_CANCEL_ASYNCHRONOUS)2.5 E F0(.)A F1
(PTH_ATTR_STACK_SIZE)108 206.4 Q F0(\(read-write\) [)2.5 E F1
(unsigned int)A F0(])A(The thread stack size in bytes. Use lo)128 218.4
Q(wer v)-.25 E(alues than 64)-.25 E/F2 9/Times-Roman@0 SF(KB)2.5 E F0
(with great care!)2.5 E F1(PTH_ATTR_STACK_ADDR)108 235.2 Q F0
(\(read-write\) [)2.5 E F1(char *)A F0(])A 2.5(Ap)128 247.2 S
(ointer to the lo)-2.5 E(wer address of a chunk of)-.25 E/F3 10
/Times-Italic@0 SF(malloc)2.5 E F0(\(3\)'ed memory for the stack.)1.666
E F1(PTH_ATTR_TIME_SPAWN)108 264 Q F0(\(read-only\) [)2.5 E F1
(pth_time_t)A F0(])A .589(The time when the thread w)128 276 R .589
(as spa)-.1 F 3.089(wned. This)-.15 F .59
(can be queried only when the attrib)3.089 F .59(ute object is bound)-.2
F(to a thread.)128 288 Q F1(PTH_ATTR_TIME_LAST)108 304.8 Q F0
(\(read-only\) [)2.5 E F1(pth_time_t)A F0(])A .777
(The time when the thread w)128 316.8 R .777(as last dispatched.)-.1 F
.776(This can be queried only when the attrib)5.777 F .776
(ute object is)-.2 F(bound to a thread.)128 328.8 Q F1
(PTH_ATTR_TIME_RAN)108 345.6 Q F0(\(read-only\) [)2.5 E F1(pth_time_t)A
F0(])A .021(The total time the thread w)128 357.6 R .021(as running.)-.1
F .022(This can be queried only when the attrib)5.021 F .022
(ute object is bound to a)-.2 F(thread.)128 369.6 Q F1
(PTH_ATTR_START_FUNC)108 386.4 Q F0(\(read-only\) [)2.5 E F1
(void *\(*\)\(void *\))A F0(])A(The thread start function.)128 398.4 Q
(This can be queried only when the attrib)5 E
(ute object is bound to a thread.)-.2 E F1(PTH_ATTR_START_ARG)108 415.2
Q F0(\(read-only\) [)2.5 E F1(void *)A F0(])A(The thread start ar)128
427.2 Q 2.5(gument. This)-.18 F(can be queried only when the attrib)2.5
E(ute object is bound to a thread.)-.2 E F1(PTH_ATTR_STATE)108 444 Q F0
(\(read-only\) [)2.5 E F1(pth_state_t)A F0(])A 5.973
(The scheduling state of the thread, i.e., either)128 456 R F1
(PTH_STATE_NEW)8.473 E F0(,)A F1(PTH_STATE_READY)8.473 E F0(,)A F1
(PTH_STATE_WAITING)128 468 Q F0 3.168(,o)C(r)-3.168 E F1(PTH_STATE_DEAD)
3.168 E F0 .668(This can be queried only when the attrib)3.168 F .669
(ute object)-.2 F(is bound to a thread.)128 480 Q F1(PTH_ATTR_EVENTS)108
496.8 Q F0(\(read-only\) [)2.5 E F1(pth_event_t)A F0(])A .102(The e)128
508.8 R -.15(ve)-.25 G .101(nt ring the thread is w).15 F .101
(aiting for)-.1 F 5.101(.T)-.55 G .101
(his can be queried only when the attrib)-5.101 F .101
(ute object is bound to)-.2 F 2.5(at)128 520.8 S(hread.)-2.5 E F1
(PTH_ATTR_BOUND)108 537.6 Q F0(\(read-only\) [)2.5 E F1(int)A F0(])A
(Whether the attrib)128 549.6 Q(ute object is bound \()-.2 E F1(TRUE)A
F0 2.5(\)t)C 2.5(oat)-2.5 G(hread or not \()-2.5 E F1(FALSE)A F0(\).)A
(The follo)108 566.4 Q(wing)-.25 E F2(API)2.5 E F0(functions e)2.5 E
(xists to handle the attrib)-.15 E(ute objects:)-.2 E(pth_attr_t)108
583.2 Q/F4 10/Times-Bold@0 SF -5.558(pp)2.5 G -3.328(tt)5.558 G -5.558
(hh)3.328 G -4.998(__)5.558 G -4.998(aa)4.998 G -3.328(tt)4.998 G -3.328
(tt)3.328 G -4.438(rr)3.328 G -4.998(__)4.438 G -4.998(oo)4.998 G -3.328
(ff)4.998 G F0(\(pth_t)3.328 E F3(tid)2.5 E F0(\);)A 1.832
(This returns a ne)128 595.2 R 4.332(wa)-.25 G(ttrib)-4.332 E 1.832
(ute object)-.2 F F3(bound)4.332 E F0 1.832(to thread)4.332 F F3(tid)
4.333 E F0 6.833(.A)C 2.133 -.15(ny q)-6.833 H 1.833
(ueries on this object directly fetch).15 F(attrib)128 607.2 Q .466
(utes from)-.2 F F3(tid)2.966 E F0 2.966(.A)C .466(nd attrib)-2.966 F
.466(ute modi\214cations directly change)-.2 F F3(tid)2.966 E F0 2.966
(.U)C .466(se such attrib)-2.966 F .465(ute objects to mod-)-.2 F(ify e)
128 619.2 Q(xisting threads.)-.15 E(pth_attr_t)108 636 Q F4 -5.558(pp)
2.5 G -3.328(tt)5.558 G -5.558(hh)3.328 G -4.998(__)5.558 G -4.998(aa)
4.998 G -3.328(tt)4.998 G -3.328(tt)3.328 G -4.438(rr)3.328 G -4.998(__)
4.438 G -5.558(nn)4.998 G -4.438(ee)5.558 G -7.218(ww)4.438 G F0(\(v)
7.218 E(oid\);)-.2 E .615(This returns a ne)128 648 R(w)-.25 E F3
(unbound)3.115 E F0(attrib)3.115 E .615(ute object. An implicit)-.2 F F3
(pth_attr_init\(\))3.115 E F0 .615(is done on it. An)3.115 F 3.115(yq)
-.15 G .615(ueries on)-3.115 F 1.999
(this object just fetch stored attrib)128 660 R 1.999(utes from it.)-.2
F 1.998(And attrib)6.999 F 1.998
(ute modi\214cations just change the stored)-.2 F(attrib)128 672 Q 2.5
(utes. Use)-.2 F(such attrib)2.5 E
(ute objects to pre-con\214gure attrib)-.2 E(utes for to be spa)-.2 E
(wned threads.)-.15 E(int)108 688.8 Q F4 -5.558(pp)2.5 G -3.328(tt)5.558
G -5.558(hh)3.328 G -4.998(__)5.558 G -4.998(aa)4.998 G -3.328(tt)4.998
G -3.328(tt)3.328 G -4.438(rr)3.328 G -4.998(__)4.438 G -2.778(ii)4.998
G -5.558(nn)2.778 G -2.778(ii)5.558 G -3.328(tt)2.778 G F0(\(pth_attr_t)
3.328 E F3(attr)2.5 E F0(\);)A .6(This initializes an attrib)128 700.8 R
.6(ute object)-.2 F F3(attr)3.1 E F0 .6(to the def)3.1 F .6(ault v)-.1 F
(alues:)-.25 E F1(PTH_ATTR_PRIO)3.1 E F0(:=)3.1 E F1(PTH_PRIO_STD)3.1 E
F0(,)A F1(PTH_ATTR_NAME)128 712.8 Q F0 .417(:= `)2.917 F F1(unknown)A F0
(',)A F1(PTH_ATTR_JOINABLE)2.917 E F0(:=)2.917 E F1(TRUE)2.916 E F0(,)A
F1(PTH_ATTR_CANCELSTATE)2.916 E F0(:=)128 724.8 Q F1(PTH_CANCEL_DEFAULT)
24.244 E F0(,)A F1(PTH_ATTR_STACK_SIZE)24.244 E F0 21.744
(:= 64*1024 and)24.244 F 139.425(10/Mar/2000 perl)72 768 R
(5.005, patch 03)2.5 E(8)189.145 E EP
%%Page: 9 9
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/Times-Roman@0 SF(PTH-MANU)72 48 Q 78.275(AL\(1\) User)-.4 F
(Contrib)2.5 E(uted Perl Documentation)-.2 E(PTH-MANU)80.775 E(AL\(1\))
-.4 E/F1 10/Courier@0 SF(PTH_ATTR_STACK_ADDR)128 84 Q F0(:=)3.074 E F1
(NULL)3.074 E F0 3.074(.A)C .574(ll other)-3.074 F F1(PTH_ATTR_*)3.074 E
F0(attrib)3.074 E .574(utes are read-only attrib)-.2 F .574(utes and)-.2
F(don')128 96 Q 2.5(tr)-.18 G(ecei)-2.5 E .3 -.15(ve d)-.25 H(ef).15 E
(ault v)-.1 E(alues in)-.25 E/F2 10/Times-Italic@0 SF(attr)2.5 E F0 2.5
(,b)C(ecause the)-2.5 E 2.5(ye)-.15 G(xists only for bounded attrib)
-2.65 E(ute objects.)-.2 E(int)108 112.8 Q/F3 10/Times-Bold@0 SF -5.558
(pp)2.5 G -3.328(tt)5.558 G -5.558(hh)3.328 G -4.998(__)5.558 G -4.998
(aa)4.998 G -3.328(tt)4.998 G -3.328(tt)3.328 G -4.438(rr)3.328 G -4.998
(__)4.438 G -3.888(ss)4.998 G -4.438(ee)3.888 G -3.328(tt)4.438 G F0
(\(pth_attr_t)3.328 E F2(attr)2.5 E F0 2.5(,i)C(nt)-2.5 E F2(\214eld)2.5
E F0 2.5(,.)C(..\);)-2.5 E .717(This sets the attrib)128 124.8 R .717
(ute \214eld)-.2 F F2(\214eld)3.218 E F0(in)3.218 E F2(attr)3.218 E F0
.718(to a v)3.218 F .718(alue speci\214ed as an additional ar)-.25 F
.718(gument on the v)-.18 F(ariable)-.25 E(ar)128 136.8 Q
(gument list. The follo)-.18 E(wing attrib)-.25 E(ute)-.2 E F2(\214elds)
2.5 E F0(and ar)2.5 E(gument pairs can be used:)-.18 E F1 60
(PTH_ATTR_PRIO int)134 154.8 R 60(PTH_ATTR_NAME char)134 166.8 R(*)6 E
36(PTH_ATTR_JOINABLE int)134 178.8 R 12(PTH_ATTR_CANCEL_STATE unsigned)
134 190.8 R(int)6 E 24(PTH_ATTR_STACK_SIZE unsigned)134 202.8 R(int)6 E
24(PTH_ATTR_STACK_ADDR char)134 214.8 R(*)6 E F0(int)108 243.6 Q F3
-5.558(pp)2.5 G -3.328(tt)5.558 G -5.558(hh)3.328 G -4.998(__)5.558 G
-4.998(aa)4.998 G -3.328(tt)4.998 G -3.328(tt)3.328 G -4.438(rr)3.328 G
-4.998(__)4.438 G -4.998(gg)4.998 G -4.438(ee)4.998 G -3.328(tt)4.438 G
F0(\(pth_attr_t)3.328 E F2(attr)2.5 E F0 2.5(,i)C(nt)-2.5 E F2(\214eld)
2.5 E F0 2.5(,.)C(..\);)-2.5 E 1.378(This retrie)128 255.6 R -.15(ve)
-.25 G 3.878(st).15 G 1.378(he attrib)-3.878 F 1.378(ute \214eld)-.2 F
F2(\214eld)3.878 E F0(in)3.878 E F2(attr)3.878 E F0 1.378
(and stores its v)3.878 F 1.377(alue in the v)-.25 F 1.377
(ariable speci\214ed through a)-.25 F 1.43(pointer in an additional ar)
128 267.6 R 1.431(gument on the v)-.18 F 1.431(ariable ar)-.25 F 1.431
(gument list. The follo)-.18 F(wing)-.25 E F2(\214elds)3.931 E F0 1.431
(and ar)3.931 F(gument)-.18 E(pairs can be used:)128 279.6 Q F1 60
(PTH_ATTR_PRIO int)134 297.6 R(*)6 E 60(PTH_ATTR_NAME char)134 309.6 R
(**)6 E 36(PTH_ATTR_JOINABLE int)134 321.6 R(*)6 E 12
(PTH_ATTR_CANCEL_STATE unsigned)134 333.6 R(int *)6 E 24
(PTH_ATTR_STACK_SIZE unsigned)134 345.6 R(int *)6 E 24
(PTH_ATTR_STACK_ADDR char)134 357.6 R(**)6 E 24
(PTH_ATTR_TIME_SPAWN pth_time_t)134 369.6 R(*)6 E 30
(PTH_ATTR_TIME_LAST pth_time_t)134 381.6 R(*)6 E 36
(PTH_ATTR_TIME_RAN pth_time_t)134 393.6 R(*)6 E 24
(PTH_ATTR_START_FUNC void)134 405.6 R(*\(**\)\(void *\))6 E 30
(PTH_ATTR_START_ARG void)134 417.6 R(**)6 E 54
(PTH_ATTR_STATE pth_state_t)134 429.6 R(*)6 E 48
(PTH_ATTR_EVENTS pth_event_t)134 441.6 R(*)6 E 54(PTH_ATTR_BOUND int)134
453.6 R(*)6 E F0(int)108 482.4 Q F3 -5.558(pp)2.5 G -3.328(tt)5.558 G
-5.558(hh)3.328 G -4.998(__)5.558 G -4.998(aa)4.998 G -3.328(tt)4.998 G
-3.328(tt)3.328 G -4.438(rr)3.328 G -4.998(__)4.438 G -5.558(dd)4.998 G
-4.438(ee)5.558 G -3.888(ss)4.438 G -3.328(tt)3.888 G 6.196 -4.438(rr o)
3.328 H(oy)-.56 E(y)-4.998 E F0(\(pth_attr_t)A F2(attr)2.5 E F0(\);)A
(This destro)128 494.4 Q(ys a attrib)-.1 E(ute object)-.2 E F2(attr)2.5
E F0 2.5(.A)C(fter this)-2.5 E F2(attr)2.5 E F0(is no longer a v)2.5 E
(alid attrib)-.25 E(ute object.)-.2 E F3 -6.668(TT)108 517.2 S -5.558
(hh)6.668 G 6.196 -4.438(rr ee)5.558 H -4.998(aa)4.438 G 11.116 -5.558
(dd C)4.998 H(Co)-1.66 E(on)-4.998 E(nt)-5.558 E(tr)-3.328 E -.18(ro)
-4.438 G(ol)-4.818 E(l)-2.778 E F0(The follo)108 534 Q
(wing functions control the threading itself and form the main)-.25 E/F4
9/Times-Roman@0 SF(API)2.5 E F0(of the)2.5 E F3 -6.108(PP)2.5 G -3.328
(tt)6.108 G -5.558(hh)3.328 G F0(library)8.058 E(.)-.65 E(pth_t)108
550.8 Q F3 -5.558(pp)2.5 G -3.328(tt)5.558 G -5.558(hh)3.328 G -4.998
(__)5.558 G -3.888(ss)4.998 G -5.558(pp)3.888 G -4.998(aa)5.558 G -7.218
(ww)4.998 G -5.558(nn)7.218 G F0(\(pth_attr_t)5.558 E F2(attr)2.5 E F0
2.5(,v)C(oid *\(*)-2.7 E F2(entry)A F0(\)\(v)A(oid *\), v)-.2 E(oid *)
-.2 E F2(ar)A(g)-.37 E F0(\);)A 1.86(This spa)128 562.8 R 1.86(wns a ne)
-.15 F 4.36(wt)-.25 G 1.859(hread with the attrib)-4.36 F 1.859(utes gi)
-.2 F -.15(ve)-.25 G 4.359(ni).15 G(n)-4.359 E F2(attr)4.359 E F0(\(or)
4.359 E F1(PTH_ATTR_DEFAULT)4.359 E F0 1.859(for def)4.359 F(ault)-.1 E
(attrib)128 574.8 Q .189(utes \255 which means that thread priority)-.2
F 2.689(,j)-.65 G .19
(oinability and cancel state are inherited from the current)-2.689 F
1.161(thread\) with the starting point at routine)128 586.8 R F2(entry)
3.66 E F0 3.66(.T)C 1.16(his entry routine is called as `)-3.66 F F2
(pth_e)A(xit)-.2 E F0(\()1.666 E F2(entry)A F0(\()A F2(ar)A(g)-.37 E F0
(\)\)')A .199(inside the ne)128 598.8 R 2.699(wt)-.25 G .199
(hread unit, i.e.,)-2.699 F F2(entry)2.699 E F0 1.299 -.55('s r)D .199
(eturn v).55 F .199(alue is fed to an implicit)-.25 F F2(pth_e)2.699 E
(xit)-.2 E F0 .199(\(3\). So the thread usu-)1.666 F .866(ally can e)128
610.8 R .866(xit by just returning. Ne)-.15 F -.15(ve)-.25 G .866
(rtheless the thread can also e).15 F .866(xit e)-.15 F .866
(xplicitly at an)-.15 F 3.366(yt)-.15 G .865(ime by calling)-3.366 F F2
(pth_e)128 622.8 Q(xit)-.2 E F0 .102(\(3\). But k)1.666 F .102
(eep in mind that calling the)-.1 F F4(POSIX)2.602 E F0(function)2.603 E
F2 -.2(ex)2.603 G(it).2 E F0 .103
(\(3\) still terminates the complete pro-)1.666 F
(cess and not just the current thread.)128 634.8 Q .048(There is no)128
652.8 R F3 -6.108(PP)2.548 G -3.328(tt)6.108 G -5.558(hh)3.328 G F0 .048
(\255internal limit on the number of threads one can spa)5.558 F .048
(wn, e)-.15 F .048(xcept the limit implied by the)-.15 F -.2(av)128
664.8 S .114(ailable virtual memory)-.05 F(.)-.65 E F3 -6.108(PP)2.614 G
-3.328(tt)6.108 G -5.558(hh)3.328 G F0 .114(internally k)8.172 F .115
(eeps track of thread in dynamic data structures. The function)-.1 F
(returns)128 676.8 Q F1(NULL)2.5 E F0(on error)2.5 E(.)-.55 E(int)108
693.6 Q F3 -5.558(pp)2.5 G -3.328(tt)5.558 G -5.558(hh)3.328 G -4.998
(__)5.558 G -4.998(oo)4.998 G -5.558(nn)4.998 G -4.438(cc)5.558 G -4.438
(ee)4.438 G F0(\(pth_once_t *)4.438 E F2(ctrlvar)A F0 2.5(,v)C(oid \(*)
-2.7 E F2(func)A F0(\)\(v)A(oid *\), v)-.2 E(oid *)-.2 E F2(ar)A(g)-.37
E F0(\);)A 1.124(This is a con)128 705.6 R -.15(ve)-.4 G 1.123
(nience function which uses a control v).15 F 1.123(ariable of type)-.25
F F1(pth_once_t)3.623 E F0 1.123(to mak)3.623 F 3.623(es)-.1 G 1.123
(ure a)-3.623 F .017(constructor function)128 717.6 R F2(func)2.517 E F0
.017(is called only once as `)2.517 F F2(func)A F0(\()A F2(ar)A(g)-.37 E
F0 .018(\)' in the system. In other w)B .018(ords: Only the \214rst)-.1
F .759(call to)128 729.6 R F2(pth_once)3.259 E F0 .759(\(3\) by an)1.666
F 3.259(yt)-.15 G .759(hread in the system succeeds. The v)-3.259 F .759
(ariable referenced via)-.25 F F2(ctrlvar)3.259 E F0(should)3.258 E
139.425(10/Mar/2000 perl)72 768 R(5.005, patch 03)2.5 E(9)189.145 E EP
%%Page: 10 10
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/Times-Roman@0 SF(PTH-MANU)72 48 Q 78.275(AL\(1\) User)-.4 F
(Contrib)2.5 E(uted Perl Documentation)-.2 E(PTH-MANU)80.775 E(AL\(1\))
-.4 E(be declared as `)128 84 Q/F1 10/Courier@0 SF(pth_once_t)A/F2 10
/Times-Italic@0 SF(variable-name)2.5 E F0(=)2.5 E F1(PTH_ONCE_INIT)2.5 E
F0(;' before calling this function.)A(pth_t)108 100.8 Q/F3 10
/Times-Bold@0 SF -5.558(pp)2.5 G -3.328(tt)5.558 G -5.558(hh)3.328 G
-4.998(__)5.558 G -3.888(ss)4.998 G -4.438(ee)3.888 G -2.778(ll)4.438 G
-3.328(ff)2.778 G F0(\(v)3.328 E(oid\);)-.2 E .333(This just returns th\
e unique thread handle of the currently running thread.)128 112.8 R .334
(This handle itself has to be)5.334 F .181
(treated as an opaque entity by the application.)128 124.8 R(It')5.181 E
2.681(su)-.55 G .18(sually used as an ar)-2.681 F .18
(gument to other functions who)-.18 F(require an ar)128 136.8 Q
(gument of type)-.18 E F1(pth_t)2.5 E F0(.)A(int)108 153.6 Q F3 -5.558
(pp)2.5 G -3.328(tt)5.558 G -5.558(hh)3.328 G -4.998(__)5.558 G -3.888
(ss)4.998 G -5.558(uu)3.888 G -3.888(ss)5.558 G -5.558(pp)3.888 G -4.438
(ee)5.558 G -5.558(nn)4.438 G -5.558(dd)5.558 G F0(\(pth_t)5.558 E F2
(tid)2.5 E F0(\);)A .202(This suspends a thread)128 165.6 R F2(tid)2.702
E F0 .202(until it is manually resumed ag)2.702 F .202(ain via)-.05 F F2
(pth_r)2.702 E(esume)-.37 E F0 .202(\(3\). F)1.666 F .202
(or this, the thread is)-.15 F(mo)128 177.6 Q -.15(ve)-.15 G 2.632(dt)
.15 G 2.631(ot)-2.632 G(he)-2.631 E/F4 9/Times-Bold@0 SF -5.002(SS)2.631
G -6.496(UU)5.002 G -5.002(SS)6.496 G -5.497(PP)5.002 G -6.001(EE)5.497
G -6.496(NN)6.001 G -6.496(DD)6.496 G -6.001(EE)6.496 G -6.496(DD)6.001
G F0 .131(queue and this w)9.127 F .131
(ay is completely out of the scheduler')-.1 F 2.631(se)-.55 G -.15(ve)
-2.881 G .131(nt handling and).15 F .137
(thread dispatching scope. Suspending the current thread is not allo)128
189.6 R 2.637(wed. The)-.25 F .137(function returns)2.637 F F1(TRUE)
2.638 E F0(on)2.638 E(success and)128 201.6 Q F1(FALSE)2.5 E F0
(on errors.)2.5 E(int)108 218.4 Q F3 -5.558(pp)2.5 G -3.328(tt)5.558 G
-5.558(hh)3.328 G -4.998(__)5.558 G 6.196 -4.438(rr ee)4.998 H -3.888
(ss)4.438 G -5.558(uu)3.888 G -8.328(mm)5.558 G -4.438(ee)8.328 G F0
(\(pth_t)4.438 E F2(tid)2.5 E F0(\);)A 1.918
(This function resumes a pre)128 230.4 R 1.917(viously suspended thread)
-.25 F F2(tid)4.417 E F0 4.417(,i)C(.e.)-4.417 E F2(tid)4.417 E F0 1.917
(has to stay on the)4.417 F F4 -5.002(SS)4.417 G -6.496(UU)5.002 G
-5.002(SS)6.496 G -5.497(PP)5.002 G -6.001(EE)5.497 G -6.496(NN)6.001 G
-6.496(DD)6.496 G -6.001(EE)6.496 G -6.496(DD)6.001 G F0 .181
(queue. The thread is mo)128 242.4 R -.15(ve)-.15 G 2.682(dt).15 G 2.682
(ot)-2.682 G(he)-2.682 E F4 -6.496(NN)2.682 G -6.001(EE)6.496 G -8.998
(WW)6.001 G F0(,)8.998 E F4 -6.496(RR)2.682 G -6.001(EE)6.496 G -6.496
(AA)6.001 G 10.382 -6.496(DD YY)6.496 H F0(or)9.178 E F4 14.666 -8.998
(WW A)2.682 H(AI)2.502 E(IT)-3.499 E(TI)-6.001 E(IN)-3.499 E(NG)-6.496 E
(G)-7 E F0 .182(queue \(dependent on what its state w)2.682 F(as)-.1 E
.131(when the)128 254.4 R F2(pth_suspend)2.631 E F0 .13
(\(3\) call were made\) and this w)1.666 F .13(ay ag)-.1 F .13
(ain enters the e)-.05 F -.15(ve)-.25 G .13(nt handling and thread dis-)
.15 F(patching scope of the scheduler)128 266.4 Q 2.5(.T)-.55 G
(he function returns)-2.5 E F1(TRUE)2.5 E F0(on success and)2.5 E F1
(FALSE)2.5 E F0(on errors.)2.5 E(int)108 283.2 Q F3 -5.558(pp)2.5 G
-3.328(tt)5.558 G -5.558(hh)3.328 G -4.998(__)5.558 G -4.438(rr)4.998 G
-4.998(aa)4.438 G -2.778(ii)4.998 G -3.888(ss)2.778 G -4.438(ee)3.888 G
F0(\(pth_t)4.438 E F2(tid)2.5 E F0 2.5(,i)C(nt)-2.5 E F2(sig)2.5 E F0
(\))A .335(This function raises a signal for deli)128 295.2 R -.15(ve)
-.25 G .335(ry to thread).15 F F2(tid)2.835 E F0(only)2.835 E 5.335(.W)
-.65 G .335(hen one just raises a signal via)-5.335 F F2 -.15(ra)2.836 G
(ise).15 E F0(\(3\))1.666 E(or)128 307.2 Q F2(kill)2.608 E F0 .108
(\(2\), its deli)1.666 F -.15(ve)-.25 G .107
(red to an arbitrary thread which has this signal not block).15 F 2.607
(ed. W)-.1 F(ith)-.4 E F2(pth_r)2.607 E(aise)-.15 E F0 .107(\(3\) one)
1.666 F .164(can send a signal to a thread and its guarantees that only\
 this thread gets the signal deli)128 319.2 R -.15(ve)-.25 G .165
(red. But k).15 F(eep)-.1 E 1.686(in mind that ne)128 331.2 R -.15(ve)
-.25 G 1.686(rtheless the signals).15 F F2(action)4.185 E F0 1.685
(is still con\214gured)4.185 F F2(pr)4.185 E(ocess)-.45 E F0 4.185
(\255wide. When)B F2(sig)4.185 E F0 1.685(is 0 plain)4.185 F .007
(thread checking is performed, i.e., `)128 343.2 R F1 .007
(pth_raise\(tid, 0\))B F0 2.507('r)C(eturns)-2.507 E F1(TRUE)2.507 E F0
.007(when thread)2.507 F F2(tid)2.507 E F0 .007(still e)2.507 F(xists)
-.15 E(in the)128 355.2 Q F4 -5.497(PP)2.5 G -6.001(TT)5.497 G -7(HH)
6.001 G F0(system b)9.5 E(ut doesn')-.2 E 2.5(ts)-.18 G(end an)-2.5 E
2.5(ys)-.15 G(ignal to it.)-2.5 E(int)108 372 Q F3 -5.558(pp)2.5 G
-3.328(tt)5.558 G -5.558(hh)3.328 G -4.998(__)5.558 G -4.998(yy)4.998 G
-2.778(ii)4.998 G -4.438(ee)2.778 G -2.778(ll)4.438 G -5.558(dd)2.778 G
F0(\(pth_t)5.558 E F2(tid)2.5 E F0(\);)A 1.629(This e)128 384 R 1.629
(xplicitly yields back the e)-.15 F -.15(xe)-.15 G 1.629
(cution control to the scheduler thread.).15 F 1.628(Usually the e)6.628
F -.15(xe)-.15 G 1.628(cution is).15 F .221
(implicitly transferred back to the scheduler when a thread w)128 396 R
.221(aits for an e)-.1 F -.15(ve)-.25 G .221
(nt. But when a thread has to).15 F .25(do lar)128 408 R(ger)-.18 E/F5 9
/Times-Roman@0 SF(CPU)2.75 E F0 -.2(bu)2.75 G .25
(rsts, it can be reasonable to interrupt it e).2 F .25
(xplicitly by doing a fe)-.15 F(w)-.25 E F2(pth_yield)2.75 E F0 .25
(\(3\) calls to)1.666 F(gi)128 420 Q 1.092 -.15(ve o)-.25 H .792
(ther threads a chance to e).15 F -.15(xe)-.15 G .792(cute, too.).15 F
.793(This ob)5.793 F .793(viously is the cooperating part of)-.15 F F3
-6.108(PP)3.293 G -3.328(tt)6.108 G -5.558(hh)3.328 G F0 5.793(.A)5.558
G(thread)-2.5 E F2 .823(has not)128 432 R F0 .823(to yield e)3.323 F
-.15(xe)-.15 G .823(cution, of course. But when you w).15 F .823
(ant to program a serv)-.1 F .823(er application with good)-.15 F 1.296
(response times the threads should be cooperati)128 444 R -.15(ve)-.25 G
3.796(,i).15 G 1.296(.e., when the)-3.796 F 3.796(ys)-.15 G 1.297
(hould split their)-3.796 F F5(CPU)3.797 E F0 -.2(bu)3.797 G 1.297
(rsts into).2 F(smaller units with this call.)128 456 Q .294
(Usually one speci\214es)128 474 R F2(tid)2.794 E F0(as)2.794 E F1(NULL)
2.794 E F0 .294
(to indicate to the scheduler that it can freely decide which thread to)
2.794 F .541(dispatch ne)128 486 R 3.041(xt. But)-.15 F .541(if one w)
3.041 F .542
(ants to indicate to the scheduler that a particular thread should be f)
-.1 F -.2(avo)-.1 G(red).2 E 1.025(on the ne)128 498 R 1.024
(xt dispatching step, one can specify this thread e)-.15 F(xplicitly)
-.15 E 3.524(.T)-.65 G 1.024(his allo)-3.524 F 1.024
(ws the usage of the old)-.25 F .798(concept of)128 510 R F2(cor)3.298 E
(outines)-.45 E F0 .799
(where a thread/routine switches to a particular cooperating thread. If)
3.298 F F2(tid)3.299 E F0 .799(is not)3.299 F F1(NULL)128 522 Q F0 .612
(and points to a)3.112 F F2(ne)3.112 E(w)-.15 E F0(or)3.112 E F2 -.37
(re)3.112 G(ady).37 E F0 .612
(thread, it is guaranteed that this thread recei)3.112 F -.15(ve)-.25 G
3.111(se).15 G -.15(xe)-3.261 G .611(cution control).15 F 2.498
(on the ne)128 534 R 2.499(xt dispatching step. If)-.15 F F2(tid)4.999 E
F0 2.499(is in a dif)4.999 F 2.499(ferent state \(that is, not in)-.25 F
F1(PTH_STATE_NEW)4.999 E F0(or)4.999 E F1(PTH_STATE_READY)128 546 Q F0
2.5(\)a)C 2.5(ne)-2.5 G(rror is reported.)-2.5 E .787
(The function usually returns)128 564 R F1(TRUE)3.287 E F0 .787
(for success and only)3.287 F F1(FALSE)3.287 E F0(\(with)3.287 E F1
(errno)3.287 E F0 .787(set to)3.287 F F1(EINVAL)3.287 E F0 3.286(\)i)C
(f)-3.286 E F2(tid)3.286 E F0(speci\214ed and in)128 576 Q -.25(va)-.4 G
(lid or still not ne).25 E 2.5(wo)-.25 G 2.5(rr)-2.5 G(eady thread.)-2.5
E(int)108 592.8 Q F3 -5.558(pp)2.5 G -3.328(tt)5.558 G -5.558(hh)3.328 G
-4.998(__)5.558 G -5.558(nn)4.998 G -4.998(aa)5.558 G -5.558(pp)4.998 G
F0(\(pth_time_t)5.558 E F2(naptime)2.5 E F0(\);)A .129
(This functions suspends the e)128 604.8 R -.15(xe)-.15 G .129
(cution of the current thread until).15 F F2(naptime)2.629 E F0 .13
(is elapsed.)2.63 F F2(naptime)2.63 E F0 .13(is of type)2.63 F F1
(pth_time_t)128 616.8 Q F0 .413(and this w)2.913 F .412(ay has theoreti\
cally a resolution of one microsecond. In practice you should)-.1 F .217
(neither rely on this nor that the thread is a)128 628.8 R -.1(wa)-.15 G
-.1(ke).1 G .218(ned e).1 F .218(xactly after)-.15 F F2(naptime)2.718 E
F0 .218(has elapsed. It')2.718 F 2.718(so)-.55 G .218(nly guaran-)-2.718
F .307(tees that the thread will sleep at least)128 640.8 R F2(naptime)
2.807 E F0 2.807(.B)C .307(ut because of the non-preempti)-2.807 F .607
-.15(ve n)-.25 H .307(ature of).15 F F3 -6.108(PP)2.807 G -3.328(tt)
6.108 G -5.558(hh)3.328 G F0 .306(it can)8.364 F .724
(last longer \(when another thread k)128 652.8 R .725(ept the)-.1 F F5
(CPU)3.225 E F0 .725
(for a long time\). Additionally the resolution is depen-)3.225 F .358(\
dent of the implementation of timers by the operating system and these \
usually ha)128 664.8 R .657 -.15(ve o)-.2 H .357(nly a resolution).15 F
.826(of 10 microseconds or lar)128 676.8 R(ger)-.18 E 3.326(.B)-.55 G
.826(ut usually this isn')-3.326 F 3.326(ti)-.18 G .827
(mportant for an application unless it tries to use)-3.326 F(this f)128
688.8 Q(acility for real time tasks.)-.1 E 139.425(10/Mar/2000 perl)72
768 R(5.005, patch 03)2.5 E(10)184.145 E EP
%%Page: 11 11
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/Times-Roman@0 SF(PTH-MANU)72 48 Q 78.275(AL\(1\) User)-.4 F
(Contrib)2.5 E(uted Perl Documentation)-.2 E(PTH-MANU)80.775 E(AL\(1\))
-.4 E(int)108 84 Q/F1 10/Times-Bold@0 SF -5.558(pp)2.5 G -3.328(tt)5.558
G -5.558(hh)3.328 G -4.998(__)5.558 G -7.218(ww)4.998 G -4.998(aa)7.218
G -2.778(ii)4.998 G -3.328(tt)2.778 G F0(\(pth_e)3.328 E -.15(ve)-.25 G
(nt_t).15 E/F2 10/Times-Italic@0 SF -.15(ev)2.5 G F0(\);).15 E .168
(This is the link between the scheduler and the e)128 96 R -.15(ve)-.25
G .168(nt f).15 F .168(acility \(see belo)-.1 F 2.668(wf)-.25 G .168
(or the v)-2.668 F(arious)-.25 E F2(pth_e)2.668 E(vent_xxx\(\))-.15 E F0
1.095(functions\). It')128 108 R 3.595(sm)-.55 G 1.095(odeled lik)-3.595
F(e)-.1 E F2(select)3.595 E F0 1.095(\(2\), i.e., one gi)1.666 F -.15
(ve)-.25 G 3.595(st).15 G 1.095(his function one or more e)-3.595 F -.15
(ve)-.25 G 1.096(nts \(in the e).15 F -.15(ve)-.25 G(nt).15 E .051
(ring speci\214ed by)128 120 R F2 -.15(ev)2.551 G F0 2.551(\)o).15 G
2.551(nw)-2.551 G .051(hich the current thread w)-2.551 F .051
(ants to w)-.1 F 2.55(ait. The)-.1 F .05(scheduler a)2.55 F -.1(wa)-.15
G -.1(ke).1 G 2.55(st).1 G .05(he thread when)-2.55 F 1.261
(one ore more of them occurred after tagging them as occurred. The)128
132 R F2 -.15(ev)3.762 G F0(ar)3.912 E 1.262(gument is a)-.18 F F2
(pointer)3.762 E F0 1.262(to an)3.762 F -2.15 -.25(ev e)128 144 T 1.411
(nt ring which isn').25 F 3.911(tc)-.18 G 1.411(hanged e)-3.911 F 1.411
(xcept for the tagging.)-.15 F F2(pth_wait)3.911 E F0 1.411
(\(3\) returns the number of occurred)1.666 F -2.15 -.25(ev e)128 156 T
(nts and the application can use).25 E F2(pth_e)2.5 E(vent_occurr)-.15 E
(ed)-.37 E F0(\(3\) to test which e)1.666 E -.15(ve)-.25 G
(nts occurred.).15 E(int)108 172.8 Q F1 -5.558(pp)2.5 G -3.328(tt)5.558
G -5.558(hh)3.328 G -4.998(__)5.558 G -4.438(cc)4.998 G -4.998(aa)4.438
G -5.558(nn)4.998 G -4.438(cc)5.558 G -4.438(ee)4.438 G -2.778(ll)4.438
G F0(\(pth_t)2.778 E F2(tid)2.5 E F0(\);)A .528(This cancels a thread)
128 184.8 R F2(tid)3.029 E F0 3.029(.H)C 1.029 -.25(ow t)-3.029 H .529
(he cancellation is done depends on the cancellation state of).25 F F2
(tid)3.029 E F0(which)3.029 E 1.039
(the thread can con\214gure itself. When its state is)128 196.8 R/F3 10
/Courier@0 SF(PTH_CANCEL_DISABLE)3.538 E F0 3.538(ac)3.538 G 1.038
(ancellation request is)-3.538 F .954(just made pending.)128 208.8 R
.954(When it is)5.954 F F3(PTH_CANCEL_ENABLE)3.454 E F0 .955
(it depends on the cancellation type what is)3.454 F .409
(performed. When its)128 220.8 R F3(PTH_CANCEL_DEFERRED)2.908 E F0(ag)
2.908 E .408(ain the cancellation request is just made pending.)-.05 F
5.726(But when its)128 232.8 R F3(PTH_CANCEL_ASYNCHRONOUS)8.226 E F0
5.727(the thread is immediately canceled before)8.227 F F2(pth_cancel)
128 244.8 Q F0 .934(\(3\) returns. The ef)1.666 F .934(fect of a thread\
 cancellation is equal to implicitly forcing the thread to)-.25 F .411
(call `)128 256.8 R F3(pth_exit\(PTH_CANCELED\))A F0 2.911('a)C 2.911
(to)-2.911 G .411(ne of his cancellation points.)-2.911 F(In)5.411 E F1
-6.108(PP)2.911 G -3.328(tt)6.108 G -5.558(hh)3.328 G F0 .411
(thread enter a cancel-)8.469 F(lation point either e)128 268.8 Q
(xplicitly via)-.15 E F2(pth_cancel_point)2.5 E F0
(\(3\) or implicitly by w)1.666 E(aiting for an e)-.1 E -.15(ve)-.25 G
(nt.).15 E(int)108 285.6 Q F1 -5.558(pp)2.5 G -3.328(tt)5.558 G -5.558
(hh)3.328 G -4.998(__)5.558 G -4.998(aa)4.998 G -5.558(bb)4.998 G -4.998
(oo)5.558 G -4.438(rr)4.998 G -3.328(tt)4.438 G F0(\(pth_t)3.328 E F2
(tid)2.5 E F0(\);)A .04(This is the cruel w)128 297.6 R .039
(ay to cancel a thread)-.1 F F2(tid)2.539 E F0 2.539(.W)C .039(hen it')
-2.539 F 2.539(sa)-.55 G .039(lready dead and w)-2.539 F .039
(aits to be joined it just joins it)-.1 F .557(\(via `)128 309.6 R F3
(pth_join\()A F2(tid)A F3 6.557(,N)C(ULL\))-6.557 E F0 .557
('\) and this w)B .557(ay kicks it out of the system.)-.1 F .557
(Else it forces the thread to)5.557 F(be not joinable and to allo)128
321.6 Q 2.5(wa)-.25 G
(synchronous cancellation and then cancels it via `)-2.5 E F3
(pth_cancel\()A F2(tid)A F3(\))A F0('.)A(int)108 338.4 Q F1 -5.558(pp)
2.5 G -3.328(tt)5.558 G -5.558(hh)3.328 G -4.998(__)5.558 G -3.328(jj)
4.998 G -4.998(oo)3.328 G -2.778(ii)4.998 G -5.558(nn)2.778 G F0
(\(pth_t)5.558 E F2(tid)2.5 E F0 2.5(,v)C(oid **)-2.7 E F2(value)A F0
(\);)A .398
(This joins the current thread with the thread speci\214ed via)128 350.4
R F2(tid)2.898 E F0 5.398(.I)C 2.898<748c>-5.398 G .398
(rst suspends the current thread until)-2.898 F(the)128 362.4 Q F2(tid)
3.583 E F0 1.083(thread has terminated. Then it is a)3.583 F -.1(wa)-.15
G -.1(ke).1 G 1.083(ned and stores the v).1 F 1.083(alue of)-.25 F F2
(tid)3.583 E F0 -.55('s)C F2(pth_e)4.134 E(xit)-.2 E F0 1.084
(\(3\) call into)1.666 F(*)128 374.4 Q F2(value)A F0(\(if)2.853 E F2
(value)2.853 E F0 .353(and not)2.853 F F3(NULL)2.853 E F0 2.853(\)a)C
.353(nd returns to the caller)-2.853 F 5.353(.A)-.55 G .353
(thread can be joined only when it w)-2.5 F(as)-.1 E F2(not)2.853 E F0
(spa)128 386.4 Q .416(wned with)-.15 F F3(PTH_FLAG_NOJOIN)2.916 E F0
2.916(.At)C .416(hread can only be joined once, i.e., after the)-2.916 F
F2(pth_join)2.916 E F0 .416(\(3\) call)1.666 F(the thread)128 398.4 Q F2
(tid)2.5 E F0(is remo)2.5 E -.15(ve)-.15 G 2.5(df).15 G(rom the system.)
-2.5 E -.2(vo)108 415.2 S(id).2 E F1 -5.558(pp)2.5 G -3.328(tt)5.558 G
-5.558(hh)3.328 G -4.998(__)5.558 G -4.438(ee)4.998 G -4.998(xx)4.438 G
-2.778(ii)4.998 G -3.328(tt)2.778 G F0(\(v)3.328 E(oid *)-.2 E F2(value)
A F0(\);)A .228(This terminates the current thread. Whether it')128
427.2 R 2.728(si)-.55 G .228(mmediately remo)-2.728 F -.15(ve)-.15 G
2.728(df).15 G .228(rom the system or inserted into)-2.728 F .332
(the dead queue of the scheduler depends on its join type which w)128
439.2 R .333(as speci\214ed at spa)-.1 F .333(wning time. When)-.15 F
.861(it w)128 451.2 R .861(as spa)-.1 F .861(wned with)-.15 F F3
(PTH_FLAG_NOJOIN)3.361 E F0(it')3.361 E 3.361(si)-.55 G .861
(mmediately remo)-3.361 F -.15(ve)-.15 G 3.361(da).15 G(nd)-3.361 E F2
(value)3.361 E F0 .86(is ignored.)3.361 F .86(Else the)5.86 F
(thread is inserted into the dead queue and)128 463.2 Q F2(value)2.5 E
F0(remembered for a)2.5 E F2(pth_join)2.5 E F0
(\(3\) call by another thread.)1.666 E F1 -7.218(UU)108 486 S -3.328(tt)
7.218 G -2.778(ii)3.328 G -2.778(ll)2.778 G -2.778(ii)2.778 G -3.328(tt)
2.778 G -2.778(ii)3.328 G -4.438(ee)2.778 G -3.888(ss)4.438 G F0
(The follo)108 502.8 Q(wing functions are utility functions.)-.25 E(int)
108 519.6 Q F1 -5.558(pp)2.5 G -3.328(tt)5.558 G -5.558(hh)3.328 G
-4.998(__)5.558 G -3.328(ff)4.998 G -5.558(dd)3.328 G -8.328(mm)5.558 G
-4.998(oo)8.328 G -5.558(dd)4.998 G -4.438(ee)5.558 G F0(\(int)4.438 E
F2(fd)2.5 E F0 2.5(,i)C(nt)-2.5 E F2(mode)2.5 E F0(\);)A 3.453
(This switches the non-blocking mode \215ag on \214le descriptor)128
531.6 R F2(fd)5.953 E F0 8.453(.T)C 3.453(he ar)-8.453 F(gument)-.18 E
F2(mode)5.953 E F0 3.453(can be)5.953 F F3(PTH_FDMODE_BLOCK)128 543.6 Q
F0 2.323(for switching)4.823 F F2(fd)4.822 E F0 2.322
(into blocking I/O mode,)4.822 F F3(PTH_FDMODE_NONBLOCK)4.822 E F0(for)
4.822 E(switching)128 555.6 Q F2(fd)3.296 E F0 .796
(into non-blocking I/O mode or)3.296 F F3(PTH_FDMODE_POLL)3.296 E F0
.796(for just polling the current mode.)3.296 F 3.037
(The current mode is returned \(either)128 567.6 R F3(PTH_FDMODE_BLOCK)
5.537 E F0(or)5.536 E F3(PTH_FDMODE_NONBLOCK)5.536 E F0 5.536(\)o)C(r)
-5.536 E F3(PTH_FDMODE_ERROR)128 579.6 Q F0 .601(on error)3.101 F 3.101
(.K)-.55 G .601(eep in mind that since)-3.351 F F1 -6.108(PP)3.101 G
-3.328(tt)6.108 G -5.558(hh)3.328 G F0 .602
(1.1 there is no longer a requirement to)8.66 F .248(manually switch a \
\214le descriptor into non-blocking mode in order to use it. This is au\
tomatically done)128 591.6 R 1.276(temporarily inside)128 603.6 R F1
-6.108(PP)3.776 G -3.328(tt)6.108 G -5.558(hh)3.328 G F0 6.276(.I)5.558
G 1.276(nstead when you no)-6.276 F 3.776(ws)-.25 G 1.277
(witch a \214le descriptor e)-3.776 F 1.277(xplicitly into non-blocking)
-.15 F(mode,)128 615.6 Q F2(pth_r)2.5 E(ead)-.37 E F0(\(3\) or)1.666 E
F2(pth_write)2.5 E F0(\(3\) will ne)1.666 E -.15(ve)-.25 G 2.5(rb).15 G
(lock the current thread.)-2.5 E(pth_time_t)108 632.4 Q F1 -5.558(pp)2.5
G -3.328(tt)5.558 G -5.558(hh)3.328 G -4.998(__)5.558 G -3.328(tt)4.998
G -2.778(ii)3.328 G -8.328(mm)2.778 G -4.438(ee)8.328 G F0(\(long)4.438
E F2(sec)2.5 E F0 2.5(,l)C(ong)-2.5 E F2(usec)2.5 E F0(\);)A .442
(This is a constructor for a)128 644.4 R F3(pth_time_t)2.941 E F0 .441
(structure which is a con)2.941 F -.15(ve)-.4 G .441
(nient function to a).15 F -.2(vo)-.2 G .441(id temporary).2 F .43
(structure v)128 656.4 R .43(alues. It returns a)-.25 F F2(pth_time_t)
2.93 E F0 .43(structure which holds the absolute time v)2.93 F .43
(alue speci\214ed by)-.25 F F2(sec)2.93 E F0(and)128 668.4 Q F2(usec)2.5
E F0(.)A(pth_time_t)108 685.2 Q F1 -5.558(pp)2.5 G -3.328(tt)5.558 G
-5.558(hh)3.328 G -4.998(__)5.558 G -3.328(tt)4.998 G -2.778(ii)3.328 G
-8.328(mm)2.778 G -4.438(ee)8.328 G -4.998(oo)4.438 G -5.558(uu)4.998 G
-3.328(tt)5.558 G F0(\(long)3.328 E F2(sec)2.5 E F0 2.5(,l)C(ong)-2.5 E
F2(usec)2.5 E F0(\);)A .442(This is a constructor for a)128 697.2 R F3
(pth_time_t)2.941 E F0 .441(structure which is a con)2.941 F -.15(ve)-.4
G .441(nient function to a).15 F -.2(vo)-.2 G .441(id temporary).2 F
1.016(structure v)128 709.2 R 3.516(alues. It)-.25 F 1.016(returns a)
3.516 F F2(pth_time_t)3.516 E F0 1.017
(structure which holds the absolute time v)3.516 F 1.017
(alue calculated by)-.25 F(adding)128 721.2 Q F2(sec)2.5 E F0(and)2.5 E
F2(usec)2.5 E F0(to the current time.)2.5 E 139.425(10/Mar/2000 perl)72
768 R(5.005, patch 03)2.5 E(11)184.145 E EP
%%Page: 12 12
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/Times-Roman@0 SF(PTH-MANU)72 48 Q 78.275(AL\(1\) User)-.4 F
(Contrib)2.5 E(uted Perl Documentation)-.2 E(PTH-MANU)80.775 E(AL\(1\))
-.4 E(Sfdisc_t *)108 84 Q/F1 10/Times-Bold@0 SF -5.558(pp)C -3.328(tt)
5.558 G -5.558(hh)3.328 G -4.998(__)5.558 G -3.888(ss)4.998 G -5.558
<8c8c>3.888 G -4.998(oo)5.558 G -5.558(dd)4.998 G -2.778(ii)5.558 G
-3.888(ss)2.778 G -4.438(cc)3.888 G F0(\(v)4.438 E(oid\);)-.2 E .915
(This functions is al)128 96 R -.1(wa)-.1 G .915(ys a).1 F -.25(va)-.2 G
.915(ilable, b).25 F .915(ut only reasonably usable when)-.2 F F1 -6.108
(PP)3.414 G -3.328(tt)6.108 G -5.558(hh)3.328 G F0 -.1(wa)8.972 G 3.414
(sb).1 G .914(uilt with)-3.614 F F1 -5.558(SS)3.414 G -5.558<8c8c>5.558
G -4.998(oo)5.558 G F0(support)8.412 E(\()128 108 Q/F2 10/Courier@0 SF
(--with-sfio)A F0 .138(option\) and)2.638 F F2(PTH_EXT_SFIO)2.638 E F0
.138(is then de\214ned by)2.638 F F2(pth.h)2.639 E F0 2.639(.I)C 2.639
(ti)-2.639 G 2.639(su)-2.639 G .139(seful for applications)-2.639 F .703
(which w)128 120 R .703(ant to use the comprehensi)-.1 F -.15(ve)-.25 G
F1 -5.558(SS)3.353 G -5.558<8c8c>5.558 G -4.998(oo)5.558 G F0 .703
(I/O library with the)8.201 F F1 -6.108(PP)3.203 G -3.328(tt)6.108 G
-5.558(hh)3.328 G F0 .703(threading library)8.761 F 3.203(.T)-.65 G .703
(hen this func-)-3.203 F 1.918(tion can be used to get an)128 132 R F1
-5.558(SS)4.418 G -5.558<8c8c>5.558 G -4.998(oo)5.558 G F0 1.918
(discipline structure \()9.416 F F2(Sfdisc_t)A F0 4.418(\)w)C 1.918
(hich can be pushed onto)-4.418 F F1 -5.558(SS)4.418 G -5.558<8c8c>5.558
G -4.998(oo)5.558 G F0 6.366(streams \()128 144 R F2(Sfio_t)A F0 8.866
(\)i)C 8.866(no)-8.866 G 6.365(rder to let this stream use)-8.866 F/F3
10/Times-Italic@0 SF(pth_r)8.865 E(ead)-.37 E F0(\(3\)/)1.666 E F3
(pth_write)A F0 6.365(\(2\) instead of)1.666 F F3 -.37(re)128 156 S(ad)
.37 E F0(\(2\)/)1.666 E F3(write)A F0 .082
(\(2\). The bene\214t is that this w)1.666 F .082(ay I/O on the)-.1 F F1
-5.558(SS)2.583 G -5.558<8c8c>5.558 G -4.998(oo)5.558 G F0 .083
(stream does only block the current thread)7.581 F 1.093
(instead of the whole process. The application has to)128 168 R F3(fr)
3.593 E(ee)-.37 E F0 1.093(\(3\) the)1.666 F F2(Sfdisc_t)3.593 E F0
1.092(structure when it is no)3.593 F
(longer needed. The S\214o package can be found at http://www)128 180 Q
(.research.att.com/sw/tools/s\214o/.)-.65 E F1 -7.218(CC)108 202.8 S
-4.998(aa)7.218 G -5.558(nn)4.998 G -4.438(cc)5.558 G -4.438(ee)4.438 G
-2.778(ll)4.438 G -2.778(ll)2.778 G -4.998(aa)2.778 G -3.328(tt)4.998 G
-2.778(ii)3.328 G -4.998(oo)2.778 G 11.116 -5.558(nn M)4.998 H(Ma)-3.88
E(an)-4.998 E(na)-5.558 E(ag)-4.998 E(ge)-4.998 E(em)-4.438 E(me)-8.328
E(en)-4.438 E(nt)-5.558 E(t)-3.328 E -6.108(PP)108 219.6 S -3.328(tt)
6.108 G -5.558(hh)3.328 G F0(supports)8.058 E/F4 9/Times-Roman@0 SF
(POSIX)2.5 E F0(style thread cancellation via)2.5 E F3(pth_cancel)2.5 E
F0(\(3\) and the follo)1.666 E(wing tw)-.25 E 2.5(or)-.1 G
(elated functions:)-2.5 E -.2(vo)108 236.4 S(id).2 E F1 -5.558(pp)2.5 G
-3.328(tt)5.558 G -5.558(hh)3.328 G -4.998(__)5.558 G -4.438(cc)4.998 G
-4.998(aa)4.438 G -5.558(nn)4.998 G -4.438(cc)5.558 G -4.438(ee)4.438 G
-2.778(ll)4.438 G -4.998(__)2.778 G -3.888(ss)4.998 G -3.328(tt)3.888 G
-4.998(aa)3.328 G -3.328(tt)4.998 G -4.438(ee)3.328 G F0(\(int)4.438 E
F3(ne)2.5 E(wstate)-.15 E F0 2.5(,i)C(nt *)-2.5 E F3(oldstate)A F0(\);)A
1.296(This manages the cancellation state of the current thread.)128
248.4 R(When)6.297 E F3(oldstate)3.797 E F0 1.297(is not)3.797 F F2
(NULL)3.797 E F0 1.297(the function)3.797 F .934
(stores the old cancellation state under the v)128 260.4 R .934
(ariable pointed to by)-.25 F F3(oldstate)3.434 E F0 3.434(.W)C(hen)
-3.434 E F3(ne)3.434 E(wstate)-.15 E F0 .934(is not)3.434 F F2(0)3.434 E
F0(it)3.434 E .667(sets the ne)128 272.4 R 3.167(wc)-.25 G .667
(ancellation state.)-3.167 F F3(oldstate)3.167 E F0 .668
(is created before)3.167 F F3(ne)3.168 E(wstate)-.15 E F0 .668(is set.)
3.168 F 3.168(As)5.668 G .668(tate is a combination of)-3.168 F F2
(PTH_CANCEL_ENABLE)128 284.4 Q F0(or)11.38 E F2(PTH_CANCEL_DISABLE)11.38
E F0(and)11.38 E F2(PTH_CANCEL_DEFERRED)11.38 E F0(or)11.38 E F2
(PTH_CANCEL_ASYNCHRONOUS)128 296.4 Q F0(.)A F2(PTH_CANCEL_ENABLE)20.7 E
/F5 10/Symbol SF<ef>A F2(PTH_CANCEL_DEFERRED)A F0(\(or)18.2 E F2
(PTH_CANCEL_DEFAULT)128 308.4 Q F0 3.14(\)i)C 3.14(st)-3.14 G .64
(he def)-3.14 F .64(ault state where cancellation is possible b)-.1 F
.64(ut only at cancellation)-.2 F 3.125(points. Use)128 320.4 R F2
(PTH_CANCEL_DISABLE)3.125 E F0 .626
(to complete disable cancellation for a thread and)3.125 F F2(PTH_CAN-)
3.126 E(CEL_ASYNCHRONOUS)128 332.4 Q F0 .363(for allo)2.863 F .362
(wing asynchronous cancellations, i.e., cancellations which can happen)
-.25 F(at an)128 344.4 Q 2.5(yt)-.15 G(ime.)-2.5 E -.2(vo)108 361.2 S
(id).2 E F1 -5.558(pp)2.5 G -3.328(tt)5.558 G -5.558(hh)3.328 G -4.998
(__)5.558 G -4.438(cc)4.998 G -4.998(aa)4.438 G -5.558(nn)4.998 G -4.438
(cc)5.558 G -4.438(ee)4.438 G -2.778(ll)4.438 G -4.998(__)2.778 G -5.558
(pp)4.998 G -4.998(oo)5.558 G -2.778(ii)4.998 G -5.558(nn)2.778 G -3.328
(tt)5.558 G F0(\(v)3.328 E(oid\);)-.2 E .253(This e)128 373.2 R .253(xp\
licitly enter a cancellation point. When the current cancellation state\
 is)-.15 F F2(PTH_CANCEL_DIS-)2.754 E(ABLE)128 385.2 Q F0 1.134
(or no cancellation request is pending, this has no side-ef)3.634 F
1.134(fect and returns immediately)-.25 F 3.634(.E)-.65 G 1.134(lse it)
-3.634 F(calls `)128 397.2 Q F2(pth_exit\(PTH_CANCELED\))A F0('.)A F1
-6.668(EE)108 420 S 7.396 -4.998(vv e)6.668 H(en).56 E(nt)-5.558 E 2.5
(tH)-3.328 G(Ha)-10.278 E(an)-4.998 E(nd)-5.558 E(dl)-5.558 E(li)-2.778
E(in)-2.778 E(ng)-5.558 E(g)-4.998 E -6.108(PP)108 436.8 S -3.328(tt)
6.108 G -5.558(hh)3.328 G F0 .791(has a v)8.849 F .791(ery \215e)-.15 F
.791(xible e)-.15 F -.15(ve)-.25 G .791(nt f).15 F .791
(acility which is link)-.1 F .791(ed into the scheduler through the)-.1
F F3(pth_wait)3.292 E F0 .792(\(3\) function.)1.666 F(The follo)108
448.8 Q(wing functions pro)-.25 E(vide the handling of e)-.15 E -.15(ve)
-.25 G(nt rings.).15 E(pth_e)108 465.6 Q -.15(ve)-.25 G(nt_t).15 E F1
-5.558(pp)2.5 G -3.328(tt)5.558 G -5.558(hh)3.328 G -4.998(__)5.558 G
6.226 -4.438(ee v)4.998 H -.1(ve)-.56 G(en)-4.338 E(nt)-5.558 E(t)-3.328
E F0(\(unsigned long)A F3(spec)2.5 E F0 2.5(,.)C(..\);)-2.5 E .906
(This creates a ne)128 477.6 R 3.406(we)-.25 G -.15(ve)-3.656 G .906
(nt ring consisting of a single initial e).15 F -.15(ve)-.25 G 3.405
(nt. The).15 F .905(type of the generated e)3.405 F -.15(ve)-.25 G .905
(nt is).15 F(speci\214ed by)128 489.6 Q F3(spec)2.5 E F0 2.5(.T)C
(he follo)-2.5 E(wing types are a)-.25 E -.25(va)-.2 G(ilable:).25 E F2
(PTH_EVENT_FD)108 506.4 Q F0 7.921(This is a \214le descriptor e)148
518.4 R -.15(ve)-.25 G 7.921(nt. One or more of).15 F F2
(PTH_UNTIL_FD_READABLE)10.421 E F0(,)A F2(PTH_UNTIL_FD_WRITEABLE)148
530.4 Q F0(or)2.877 E F2(PTH_UNTIL_FD_EXECPTION)2.876 E F0(ha)2.876 E
.676 -.15(ve t)-.2 H 2.876(ob).15 G(e)-2.876 E F4(OR)2.876 E F0 .376
(\255ed into)B F3(spec)2.876 E F0 .588
(to specify on which state of the \214le descriptor you w)148 542.4 R
.588(ant to w)-.1 F 3.088(ait. The)-.1 F .588
(\214le descriptor itself has to)3.088 F 34.509(be gi)148 554.4 R -.15
(ve)-.25 G 37.009(na).15 G 37.008(sa)-37.009 G 37.008(na)-37.008 G
34.508(dditional ar)-37.008 F 37.008(gument. Example:)-.18 F(`)148 566.4
Q F2(pth_event\(PTH_EVENT_FD)A F5<ef>A F2(PTH_UNTIL_FD_READABLE, fd\))A
F0('.)A F2(PTH_EVENT_SELECT)108 583.2 Q F0 .396
(This is a multiple \214le descriptor e)148 595.2 R -.15(ve)-.25 G .396
(nt modeled directly after the).15 F F3(select)2.897 E F0 .397
(\(2\) call \(actually it is also)1.666 F .778(used to implement)148
607.2 R F3(pth_select)3.277 E F0 .777(\(3\) internally\).)1.666 F(It')
5.777 E 3.277(sac)-.55 G(on)-3.277 E -.15(ve)-.4 G .777(nient w).15 F
.777(ay to w)-.1 F .777(ait for a lar)-.1 F .777(ge set of \214le)-.18 F
.595(descriptors at once and at each \214le descriptor for a dif)148
619.2 R .596(ferent type of state. Additionally as a nice)-.25 F
(side-ef)148 631.2 Q 1.734(fect one recei)-.25 F -.15(ve)-.25 G 4.234
(st).15 G 1.734(he number of \214le descriptors which causes the e)
-4.234 F -.15(ve)-.25 G 1.733(nt to be occurred).15 F(\(using)148 643.2
Q F4(BSD)3.625 E F0 1.125
(semantics, i.e., when a \214le descriptor occurred in tw)3.625 F 3.625
(os)-.1 G 1.125(ets it')-3.625 F 3.625(sc)-.55 G 1.125
(ounted twice\). The)-3.625 F(ar)148 655.2 Q .305
(guments correspond directly to the)-.18 F F3(select)2.805 E F0 .305
(\(2\) function ar)1.666 F .305(guments e)-.18 F .305
(xcept that there is no timeout)-.15 F(ar)148 667.2 Q
(gument \(because timeouts already can be handled via)-.18 E F2
(PTH_EVENT_TIME)2.5 E F0 -2.15 -.25(ev e)2.5 H(nts\).).25 E 2.418
(Example: `)148 685.2 R F2 2.418
(pth_event\(PTH_EVENT_SELECT, &rc, nfd, rfds, wfds, efds\))B F0(')A
(where)148 697.2 Q F2(rc)3.034 E F0 .534(has to be of type `)3.034 F F2
.534(int *)B F0(',)A F2(nfd)3.034 E F0 .533(has to be of type `)3.034 F
F2(int)A F0 3.033('a)C(nd)-3.033 E F2(rfds)3.033 E F0(,)A F2(wfds)3.033
E F0(and)3.033 E F2(efds)3.033 E F0(ha)148 709.2 Q 1.948 -.15(ve t)-.2 H
4.149(ob).15 G 4.149(eo)-4.149 G 4.149(ft)-4.149 G 1.649(ype `)-4.149 F
F2 1.649(fd_set *)B F0 4.149('\()C(see)-4.149 E F3(select)4.149 E F0
1.649(\(2\)\). The number of occurred \214le descriptors are)1.666 F
(stored in)148 721.2 Q F2(rc)2.5 E F0(.)A 139.425(10/Mar/2000 perl)72
768 R(5.005, patch 03)2.5 E(12)184.145 E EP
%%Page: 13 13
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/Times-Roman@0 SF(PTH-MANU)72 48 Q 78.275(AL\(1\) User)-.4 F
(Contrib)2.5 E(uted Perl Documentation)-.2 E(PTH-MANU)80.775 E(AL\(1\))
-.4 E/F1 10/Courier@0 SF(PTH_EVENT_SIGS)108 84 Q F0 .455
(This is a signal set e)148 96 R -.15(ve)-.25 G .454(nt. The tw).15 F
2.954(oa)-.1 G .454(dditional ar)-2.954 F .454(guments ha)-.18 F .754
-.15(ve t)-.2 H 2.954(ob).15 G 2.954(eap)-2.954 G .454
(ointer to a signal set \(type)-2.954 F(`)148 108 Q F1 1.206(sigset_t *)
B F0 1.206('\) and a pointer to a signal number v)B 1.206
(ariable \(type `)-.25 F F1 1.206(int *)B F0 3.706('\). This)B -2.15
-.25(ev e)3.706 H 1.206(nt w).25 F(aits)-.1 E .022
(until one of the signals in the signal set occurred.)148 120 R .021
(As a result the occurred signal number is stored)5.022 F 1.438
(in the second additional ar)148 132 R 1.439(gument. K)-.18 F 1.439
(eep in mind that the)-.25 F/F2 10/Times-Bold@0 SF -6.108(PP)3.939 G
-3.328(tt)6.108 G -5.558(hh)3.328 G F0 1.439(scheduler doesn')9.497 F
3.939(tb)-.18 G 1.439(lock signals)-3.939 F(automatically)148 144 Q
6.816(.S)-.65 G 4.316(ow)-6.816 G 1.816(hen you w)-4.316 F 1.816
(ant to w)-.1 F 1.816(ait for a signal with this e)-.1 F -.15(ve)-.25 G
1.816(nt you').15 F 2.116 -.15(ve t)-.5 H 4.316(ob).15 G 1.815
(lock it via)-4.316 F/F3 10/Times-Italic@0 SF(sigpr)148 156 Q(ocmask)
-.45 E F0 .238(\(2\) or it will be deli)1.666 F -.15(ve)-.25 G .239
(red without your notice. Example: `).15 F F1(sigemptyset\(&set\);)A
(sigaddset\(&set, SIGINT\); pth_event\(PTH_EVENT_SIG, &set, &sig\);)148
168 Q F0('.)A F1(PTH_EVENT_TIME)108 184.8 Q F0 .389
(This is a time point e)148 196.8 R -.15(ve)-.25 G .389
(nt. The additional ar).15 F .389(gument has to be of type)-.18 F F1
(pth_time_t)2.888 E F0 .388(\(usually on-)2.888 F 1.071
(the-\215y generated via)148 208.8 R F3(pth_time)3.572 E F0 1.072
(\(3\)\). This e)1.666 F -.15(ve)-.25 G 1.072(nts w).15 F 1.072
(aits until the speci\214ed time point has elapsed.)-.1 F -.25(Ke)148
220.8 S .742(ep in mind that the v).25 F .742
(alue is an absolute time point and not an of)-.25 F .742
(fset. When you w)-.25 F .742(ant to w)-.1 F(ait)-.1 E 1.243
(for a speci\214ed amount of time, you')148 232.8 R 1.544 -.15(ve t)-.5
H 3.744(oa).15 G 1.244(dd the current time to the of)-3.744 F 1.244
(fset \(usually on-the-\215y)-.25 F(achie)148 244.8 Q -.15(ve)-.25 G
5.209(dv).15 G(ia)-5.209 E F3(pth_timeout)5.209 E F0 5.209
(\(3\)\). Example:)1.666 F(`)5.209 E F1 2.708
(pth_event\(PTH_EVENT_TIME, pth_time-)B(out\(2,0\)\))148 256.8 Q F0('.)A
F1(PTH_EVENT_MSG)108 273.6 Q F0 .289(This is a message port e)148 285.6
R -.15(ve)-.25 G .289(nt. The additional ar).15 F .29
(gument has to be of type)-.18 F F1(pth_msgport_t)2.79 E F0 2.79(.T)C
(his)-2.79 E -2.15 -.25(ev e)148 297.6 T .53(nts w).25 F .53
(aits until one or more messages were recei)-.1 F -.15(ve)-.25 G 3.03
(do).15 G 3.03(nt)-3.03 G .53(he speci\214ed message port.)-3.03 F
(Example:)5.53 E(`)148 309.6 Q F1(pth_event\(PTH_EVENT_MSG, mp\))A F0
('.)A F1(PTH_EVENT_TID)108 326.4 Q F0 4.508(This is a thread e)148 338.4
R -.15(ve)-.25 G 4.509(nt. The additional ar).15 F 4.509
(gument has to be of type)-.18 F F1(pth_t)7.009 E F0 9.509(.O)C 4.509
(ne of)-9.509 F F1(PTH_UNTIL_TID_NEW)148 350.4 Q F0(,)A F1
(PTH_UNTIL_TID_READY)12.224 E F0(,)A F1(PTH_UNTIL_TID_WAITING)12.223 E
F0(or)12.223 E F1(PTH_UNTIL_TID_DEAD)148 362.4 Q F0 .338(has to be)2.837
F/F4 9/Times-Roman@0 SF(OR)2.838 E F0 .338(\255ed into)B F3(spec)2.838 E
F0 .338(to specify on which state of the thread you)2.838 F -.1(wa)148
374.4 S 8.54(nt to w).1 F 11.04(ait. Example:)-.1 F(`)11.04 E F1
(pth_event\(PTH_EVENT_TID)A/F5 10/Symbol SF<ef>A F1(PTH_UNTIL_TID_DEAD,)
A(tid\))148 386.4 Q F0('.)A F1(PTH_EVENT_FUNC)108 403.2 Q F0 .929
(This is a custom callback function e)148 415.2 R -.15(ve)-.25 G .929
(nt. Three additional ar).15 F .929(guments ha)-.18 F 1.23 -.15(ve t)-.2
H 3.43(ob).15 G 3.43(eg)-3.43 G -2.15 -.25(iv e)-3.43 H 3.43(nw).25 G
.93(ith the)-3.43 F(follo)148 427.2 Q .27(wing types: `)-.25 F F1 .27
(int \(*\)\(void *\))B F0 .269(', `)B F1 .269(void *)B F0 2.769('a)C
.269(nd `)-2.769 F F1(pth_time_t)A F0 .269('. The \214rst is a function)
B 1.245(pointer to a check function and the second ar)148 439.2 R 1.245
(gument is a user)-.18 F 1.246(-supplied conte)-.2 F 1.246(xt v)-.15 F
1.246(alue which is)-.25 F .275
(passed to this function. The scheduler calls this function on a re)148
451.2 R .275(gular basis \(on his o)-.15 F .275(wn scheduler)-.25 F .041
(stack, so be v)148 463.2 R .042(ery careful!\) and the thread is k)-.15
F .042(ept sleeping while the function returns)-.1 F F1(FALSE)2.542 E F0
2.542(.O)C(nce)-2.542 E .172(it returned)148 475.2 R F1(TRUE)2.672 E F0
.171(the thread will be a)2.672 F -.1(wa)-.15 G -.1(ke).1 G .171
(nd. The check interv).1 F .171(al is de\214ned by the third ar)-.25 F
(gument,)-.18 E 3.402(i.e., the check function is polled ag)148 487.2 R
3.402(ain not until this amount of time elapsed. Example:)-.05 F(`)148
499.2 Q F1(pth_event\(PTH_EVENT_FUNC, func, arg, pth_time\(0,500000\)\))
A F0('.)A(unsigned long)108 516 Q F2 -5.558(pp)2.5 G -3.328(tt)5.558 G
-5.558(hh)3.328 G -4.998(__)5.558 G 6.226 -4.438(ee v)4.998 H -.1(ve)
-.56 G(en)-4.338 E(nt)-5.558 E(t_)-3.328 E(_t)-4.998 E(ty)-3.328 E(yp)
-4.998 E(pe)-5.558 E(eo)-4.438 E(of)-4.998 E(f)-3.328 E F0(\(pth_e)A
-.15(ve)-.25 G(nt_t).15 E F3 -.15(ev)2.5 G F0(\);).15 E 3.237
(This returns the type of e)128 528 R -.15(ve)-.25 G(nt).15 E F3 -.15
(ev)5.737 G F0 5.737(.I).15 G(t')-5.737 E 5.737(sac)-.55 G 3.237
(ombination of the describing)-5.737 F F1(PTH_EVENT_XX)5.737 E F0(and)
5.737 E F1(PTH_UNTIL_XX)128 540 Q F0 -.25(va)2.793 G .293
(lue. This is especially useful to kno).25 F 2.793(ww)-.25 G .293
(hich ar)-2.793 F .293(guments ha)-.18 F .594 -.15(ve t)-.2 H 2.794(ob)
.15 G 2.794(es)-2.794 G .294(upplied to the)-2.794 F F3(pth_e)128 552 Q
(vent_e)-.15 E(xtr)-.2 E(act)-.15 E F0(\(3\) function.)1.666 E(int)108
568.8 Q F2 -5.558(pp)2.5 G -3.328(tt)5.558 G -5.558(hh)3.328 G -4.998
(__)5.558 G 6.226 -4.438(ee v)4.998 H -.1(ve)-.56 G(en)-4.338 E(nt)
-5.558 E(t_)-3.328 E(_e)-4.998 E(ex)-4.438 E(xt)-4.998 E(tr)-3.328 E(ra)
-4.438 E(ac)-4.998 E(ct)-4.438 E(t)-3.328 E F0(\(pth_e)A -.15(ve)-.25 G
(nt_t).15 E F3 -.15(ev)2.5 G F0 2.5(,.).15 G(..\);)-2.5 E(When)128 580.8
Q F3(pth_e)2.778 E(vent)-.15 E F0 .278(\(3\) is treated lik)1.666 F(e)
-.1 E F3(sprintf)2.778 E F0 .278(\(3\), then this function is)1.666 F F3
(sscanf)2.778 E F0 .277(\(3\), i.e., it is the in)1.666 F -.15(ve)-.4 G
.277(rse oper).15 F(-)-.2 E .2(ation of)128 592.8 R F3(pth_e)2.7 E(vent)
-.15 E F0 .201(\(3\). This means that it can be used to e)1.666 F .201
(xtract the ingredients of an e)-.15 F -.15(ve)-.25 G 2.701(nt. The).15
F(ingre-)2.701 E .093(dients are stored into v)128 604.8 R .093
(ariables which are gi)-.25 F -.15(ve)-.25 G 2.593(na).15 G 2.592(sp)
-2.593 G .092(ointers on the v)-2.592 F .092(ariable ar)-.25 F .092
(gument list.)-.18 F .092(Which point-)5.092 F 1.187(ers ha)128 616.8 R
1.487 -.15(ve t)-.2 H 3.688(ob).15 G 3.688(ep)-3.688 G 1.188
(resent depends on the e)-3.688 F -.15(ve)-.25 G 1.188
(nt type and has to be determined by the caller before via).15 F F3
(pth_e)128 628.8 Q(vent_typeof)-.15 E F0(\(3\).)1.666 E 1.96 -.8(To m)
128 646.8 T(ak).8 E 2.86(ei)-.1 G 2.86(tc)-2.86 G(lear)-2.86 E 2.859(,w)
-.4 G .359(hen you constructed)-2.859 F F3 -.15(ev)2.859 G F0 .359
(via `)3.009 F F1 .359(ev = pth_event\(PTH_EVENT_FD, fd\);)B F0 2.859
('y)C(ou)-2.859 E(ha)128 658.8 Q .603 -.15(ve t)-.2 H 2.803(oe).15 G
.303(xtract it via `)-2.953 F F1 .303(pth_event_extract\(ev, &fd\))B F0
.303(', etc. F)B .303(or multiple ar)-.15 F .303(guments of an e)-.18 F
-.15(ve)-.25 G(nt).15 E .567(the order of the pointer ar)128 670.8 R
.566(guments is the same as for)-.18 F F3(pth_e)3.066 E(vent)-.15 E F0
.566(\(3\). But al)1.666 F -.1(wa)-.1 G .566(ys k).1 F .566
(eep in mind that you)-.1 F(ha)128 682.8 Q 1.595 -.15(ve t)-.2 H 3.795
(oa).15 G -.1(lwa)-3.795 G 1.295(ys supply).1 F F3(pointer)3.795 E(s)-.1
E F0(to)3.795 E F3(variables)3.795 E F0 1.295(and these v)3.795 F 1.295
(ariables ha)-.25 F 1.595 -.15(ve t)-.2 H 3.795(ob).15 G 3.795(eo)-3.795
G 3.795(ft)-3.795 G 1.295(he same type as the)-3.795 F(ar)128 694.8 Q
(gument of)-.18 E F3(pth_e)2.5 E(vent)-.15 E F0(\(3\) required.)1.666 E
139.425(10/Mar/2000 perl)72 768 R(5.005, patch 03)2.5 E(13)184.145 E EP
%%Page: 14 14
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/Times-Roman@0 SF(PTH-MANU)72 48 Q 78.275(AL\(1\) User)-.4 F
(Contrib)2.5 E(uted Perl Documentation)-.2 E(PTH-MANU)80.775 E(AL\(1\))
-.4 E(pth_e)108 84 Q -.15(ve)-.25 G(nt_t).15 E/F1 10/Times-Bold@0 SF
-5.558(pp)2.5 G -3.328(tt)5.558 G -5.558(hh)3.328 G -4.998(__)5.558 G
6.226 -4.438(ee v)4.998 H -.1(ve)-.56 G(en)-4.338 E(nt)-5.558 E(t_)
-3.328 E(_c)-4.998 E(co)-4.438 E(on)-4.998 E(nc)-5.558 E(ca)-4.438 E(at)
-4.998 E(t)-3.328 E F0(\(pth_e)A -.15(ve)-.25 G(nt_t).15 E/F2 10
/Times-Italic@0 SF -.15(ev)2.5 G F0 2.5(,.).15 G(..\);)-2.5 E .051
(This concatenates one or more additional e)128 96 R -.15(ve)-.25 G .051
(nt rings to the e).15 F -.15(ve)-.25 G .051(nt ring).15 F F2 -.15(ev)
2.551 G F0 .051(and returns)2.701 F F2 -.15(ev)2.551 G F0 2.551(.T).15 G
.051(he end of the)-2.551 F(ar)128 108 Q .14(gument list has to be mark)
-.18 F .14(ed with a)-.1 F/F3 10/Courier@0 SF(NULL)2.64 E F0(ar)2.641 E
.141(gument. Use this function to create real e)-.18 F -.15(ve)-.25 G
.141(nts rings out).15 F(of the single-e)128 120 Q -.15(ve)-.25 G
(nt rings created by).15 E F2(pth_e)2.5 E(vent)-.15 E F0(\(3\).)1.666 E
(pth_e)108 136.8 Q -.15(ve)-.25 G(nt_t).15 E F1 -5.558(pp)2.5 G -3.328
(tt)5.558 G -5.558(hh)3.328 G -4.998(__)5.558 G 6.226 -4.438(ee v)4.998
H -.1(ve)-.56 G(en)-4.338 E(nt)-5.558 E(t_)-3.328 E(_i)-4.998 E(is)
-2.778 E(so)-3.888 E(ol)-4.998 E(la)-2.778 E(at)-4.998 E(te)-3.328 E(e)
-4.438 E F0(\(pth_e)A -.15(ve)-.25 G(nt_t).15 E F2 -.15(ev)2.5 G F0(\);)
.15 E .252(This isolates the e)128 148.8 R -.15(ve)-.25 G(nt).15 E F2
-.15(ev)2.751 G F0 .251(from possibly appended e)2.901 F -.15(ve)-.25 G
.251(nts in the e).15 F -.15(ve)-.25 G .251(nt ring.).15 F .251(When in)
5.251 F F2 -.15(ev)2.751 G F0 .251(only one e)2.901 F -.15(ve)-.25 G(nt)
.15 E -.15(ex)128 160.8 S .111(ists, this returns).15 F F3(NULL)2.611 E
F0 2.611(.W)C .111(hen remaining e)-2.611 F -.15(ve)-.25 G .111(nts e)
.15 F .111(xists, the)-.15 F 2.611(yf)-.15 G .111(orm a ne)-2.611 F
2.611(we)-.25 G -.15(ve)-2.861 G .112(nt ring which is returned.).15 F
(pth_e)108 177.6 Q -.15(ve)-.25 G(nt_t).15 E F1 -5.558(pp)2.5 G -3.328
(tt)5.558 G -5.558(hh)3.328 G -4.998(__)5.558 G 6.226 -4.438(ee v)4.998
H -.1(ve)-.56 G(en)-4.338 E(nt)-5.558 E(t_)-3.328 E(_w)-4.998 E(wa)
-7.218 E(al)-4.998 E(lk)-2.778 E(k)-5.558 E F0(\(pth_e)A -.15(ve)-.25 G
(nt_t).15 E F2 -.15(ev)2.5 G F0 2.5(,i).15 G(nt)-2.5 E F2(dir)2.5 E
(ection)-.37 E F0(\);)A 3.182(This w)128 189.6 R 3.182(alks to the ne)
-.1 F 3.182(xt \(when)-.15 F F2(dir)5.682 E(ection)-.37 E F0(is)5.682 E
F3(PTH_WALK_NEXT)5.681 E F0 5.681(\)o)C 5.681(rp)-5.681 G(re)-5.681 E
(vie)-.25 E 3.181(ws \(when)-.25 F F2(dir)5.681 E(ection)-.37 E F0(is)
5.681 E F3(PTH_WALK_PREV)128 201.6 Q F0 4.986(\)e)C -.15(ve)-5.236 G
2.487(nt in the e).15 F -.15(ve)-.25 G 2.487(nt ring).15 F F2 -.15(ev)
4.987 G F0 2.487(and returns this ne)5.137 F 4.987(wr)-.25 G 2.487
(eached e)-4.987 F -.15(ve)-.25 G 2.487(nt. Additionally).15 F F3
(PTH_UNTIL_OCCURRED)128 213.6 Q F0 .317(can be)2.817 F/F4 9
/Times-Roman@0 SF(OR)2.817 E F0 .317(\255ed into)B F2(dir)2.817 E
(ection)-.37 E F0 .317(to w)2.817 F .317(alk to the ne)-.1 F(xt/pre)-.15
E .317(vious occurred e)-.25 F -.15(ve)-.25 G .316(nt in).15 F(the ring)
128 225.6 Q F2 -.15(ev)2.5 G F0(.).15 E(int)108 242.4 Q F1 -5.558(pp)2.5
G -3.328(tt)5.558 G -5.558(hh)3.328 G -4.998(__)5.558 G 6.226 -4.438
(ee v)4.998 H -.1(ve)-.56 G(en)-4.338 E(nt)-5.558 E(t_)-3.328 E(_o)
-4.998 E(oc)-4.998 E(cc)-4.438 E(cu)-4.438 E(ur)-5.558 E(rr)-4.438 E
-.18(re)-4.438 G(ed)-4.258 E(d)-5.558 E F0(\(pth_e)A -.15(ve)-.25 G
(nt_t).15 E F2 -.15(ev)2.5 G F0(\);).15 E .129
(This checks whether the e)128 254.4 R -.15(ve)-.25 G(nt).15 E F2 -.15
(ev)2.629 G F0 .129(occurred. This is a f)2.779 F .13
(ast operation because only a tag on)-.1 F F2 -.15(ev)2.63 G F0 .13
(is check)2.78 F(ed)-.1 E 1.315(which w)128 266.4 R 1.315
(as either set or still not set by the scheduler)-.1 F 3.815(.I)-.55 G
3.815(no)-3.815 G 1.315(ther w)-3.815 F 1.315(ords: This doesn')-.1 F
3.815(tc)-.18 G 1.315(heck the e)-3.815 F -.15(ve)-.25 G(nt).15 E
(itself, it just checks the last kno)128 278.4 Q
(wledge of the scheduler)-.25 E(.)-.55 E(int)108 295.2 Q F1 -5.558(pp)
2.5 G -3.328(tt)5.558 G -5.558(hh)3.328 G -4.998(__)5.558 G 6.226 -4.438
(ee v)4.998 H -.1(ve)-.56 G(en)-4.338 E(nt)-5.558 E(t_)-3.328 E(_f)
-4.998 E(fr)-3.328 E -.18(re)-4.438 G(ee)-4.258 E(e)-4.438 E F0(\(pth_e)
A -.15(ve)-.25 G(nt_t).15 E F2 -.15(ev)2.5 G F0 2.5(,i).15 G(nt)-2.5 E
F2(mode)2.5 E F0(\);)A .824(This deallocates the e)128 307.2 R -.15(ve)
-.25 G(nt).15 E F2 -.15(ev)3.324 G F0(\(when)3.474 E F2(mode)3.325 E F0
(is)3.325 E F3(PTH_FREE_THIS)3.325 E F0 3.325(\)o)C 3.325(ra)-3.325 G
.825(ll e)-3.325 F -.15(ve)-.25 G .825(nts appended to the e).15 F -.15
(ve)-.25 G(nt).15 E(ring under)128 319.2 Q F2 -.15(ev)2.5 G F0(\(when)
2.65 E F2(mode)2.5 E F0(is)2.5 E F3(PTH_FREE_ALL)2.5 E F0(\).)A F1
12.806 -7.778(KK e)108 342 T(ey)3.34 E(y-)-4.998 E(-B)-3.328 E(Ba)-6.668
E(as)-4.998 E(se)-3.888 E(ed)-4.438 E 2.5(dS)-5.558 G(St)-8.058 E(to)
-3.328 E(or)-4.998 E(ra)-4.438 E(ag)-4.998 E(ge)-4.998 E(e)-4.438 E F0
1.276(The follo)108 358.8 R 1.276(wing functions pro)-.25 F 1.276
(vide thread-local storage through unique k)-.15 F -.15(ey)-.1 G 3.776
(ss).15 G 1.276(imilar to the)-3.776 F F4(POSIX)3.775 E F1 -6.108(PP)
3.775 G -3.328(tt)6.108 G -5.558(hh)3.328 G 6.196 -4.438(rr ee)5.558 H
-4.998(aa)4.438 G -5.558(dd)4.998 G F4(API)108 370.8 Q F0 2.5(.U)C
(se this for thread speci\214c global data.)-2.5 E(int)108 387.6 Q F1
-5.558(pp)2.5 G -3.328(tt)5.558 G -5.558(hh)3.328 G -4.998(__)5.558 G
8.516 -5.558(kk e)4.998 H(ey)1.12 E(y_)-4.998 E(_c)-4.998 E(cr)-4.438 E
-.18(re)-4.438 G(ea)-4.258 E(at)-4.998 E(te)-3.328 E(e)-4.438 E F0
(\(pth_k)A -.15(ey)-.1 G(_t *).15 E F2 -.1(ke)C(y)-.2 E F0 2.5(,v)C
(oid \(*)-2.7 E F2(func)A F0(\)\(v)A(oid *\)\);)-.2 E .191
(This created a ne)128 399.6 R 2.691(wu)-.25 G .192(nique k)-2.691 F
.492 -.15(ey a)-.1 H .192(nd stores it in).15 F F2 -.1(ke)2.692 G(y)-.2
E F0 5.192(.A)C(dditionally)-5.192 E F2(func)2.692 E F0 .192
(can specify a destructor function)2.692 F
(which is called on the current threads termination with the)128 411.6 Q
F2 -.1(ke)2.5 G(y)-.2 E F0(.)A(int)108 428.4 Q F1 -5.558(pp)2.5 G -3.328
(tt)5.558 G -5.558(hh)3.328 G -4.998(__)5.558 G 8.516 -5.558(kk e)4.998
H(ey)1.12 E(y_)-4.998 E(_d)-4.998 E(de)-5.558 E(el)-4.438 E(le)-2.778 E
(et)-4.438 E(te)-3.328 E(e)-4.438 E F0(\(pth_k)A -.15(ey)-.1 G(_t).15 E
F2 -.1(ke)2.5 G(y)-.2 E F0(\);)A(This e)128 440.4 Q(xplicitly destro)
-.15 E(ys a k)-.1 E -.15(ey)-.1 G F2 -.1(ke)2.65 G(y)-.2 E F0(.)A(int)
108 457.2 Q F1 -5.558(pp)2.5 G -3.328(tt)5.558 G -5.558(hh)3.328 G
-4.998(__)5.558 G 8.516 -5.558(kk e)4.998 H(ey)1.12 E(y_)-4.998 E(_s)
-4.998 E(se)-3.888 E(et)-4.438 E(td)-3.328 E(da)-5.558 E(at)-4.998 E(ta)
-3.328 E(a)-4.998 E F0(\(pth_k)A -.15(ey)-.1 G(_t).15 E F2 -.1(ke)2.5 G
(y)-.2 E F0 2.5(,c)C(onst v)-2.5 E(oid *)-.2 E F2(value)A F0(\);)A
(This stores)128 469.2 Q F2(value)2.5 E F0(under)2.5 E F2 -.1(ke)2.5 G
(y)-.2 E F0(.)A -.2(vo)108 486 S(id *).2 E F1 -5.558(pp)C -3.328(tt)
5.558 G -5.558(hh)3.328 G -4.998(__)5.558 G 8.516 -5.558(kk e)4.998 H
(ey)1.12 E(y_)-4.998 E(_g)-4.998 E(ge)-4.998 E(et)-4.438 E(td)-3.328 E
(da)-5.558 E(at)-4.998 E(ta)-3.328 E(a)-4.998 E F0(\(pth_k)A -.15(ey)-.1
G(_t).15 E F2 -.1(ke)2.5 G(y)-.2 E F0(\);)A(This retrie)128 498 Q -.15
(ve)-.25 G 2.5(st).15 G(he v)-2.5 E(alue under)-.25 E F2 -.1(ke)2.5 G(y)
-.2 E F0(.)A F1 -9.438(MM)108 520.8 S -4.438(ee)9.438 G -3.888(ss)4.438
G -3.888(ss)3.888 G -4.998(aa)3.888 G -4.998(gg)4.998 G 8.876 -4.438
(ee P)4.998 H -.2(Po)-1.67 G(or)-4.798 E(rt)-4.438 E 2.5(tC)-3.328 G(Co)
-9.718 E(om)-4.998 E(mm)-8.328 E(mu)-8.328 E(un)-5.558 E(ni)-5.558 E(ic)
-2.778 E(ca)-4.438 E(at)-4.998 E(ti)-3.328 E(io)-2.778 E(on)-4.998 E(n)
-5.558 E F0 1.45(The follo)108 537.6 R 1.45(wing functions pro)-.25 F
1.45(vide message ports which can be used for ef)-.15 F 1.45
(\214cient and \215e)-.25 F 1.45(xible inter)-.15 F(-thread)-.2 E
(communication.)108 549.6 Q(pth_msgport_t)108 566.4 Q F1 -5.558(pp)2.5 G
-3.328(tt)5.558 G -5.558(hh)3.328 G -4.998(__)5.558 G -8.328(mm)4.998 G
-3.888(ss)8.328 G -4.998(gg)3.888 G -5.558(pp)4.998 G -4.998(oo)5.558 G
-4.438(rr)4.998 G -3.328(tt)4.438 G -4.998(__)3.328 G -4.438(cc)4.998 G
6.196 -4.438(rr ee)4.438 H -4.998(aa)4.438 G -3.328(tt)4.998 G -4.438
(ee)3.328 G F0(\(const char *)4.438 E F2(name)A F0(\);)A .298
(This returns a pointer to a ne)128 578.4 R 2.798(wm)-.25 G .298
(essage port with name)-2.798 F F2(name)2.798 E F0 2.799(.T)C(he)-2.799
E F2(name)2.799 E F0 .299(can be used by other threads)2.799 F(via)128
590.4 Q F2(pth_msgport_\214nd)3.085 E F0 .585
(\(3\) to \214nd the message port in case the)1.666 F 3.084(yd)-.15 G
3.084(on)-3.084 G .584(ot kno)-3.084 F 3.084(wd)-.25 G .584
(irectly the pointer to the)-3.084 F(message port.)128 602.4 Q -.2(vo)
108 619.2 S(id).2 E F1 -5.558(pp)2.5 G -3.328(tt)5.558 G -5.558(hh)3.328
G -4.998(__)5.558 G -8.328(mm)4.998 G -3.888(ss)8.328 G -4.998(gg)3.888
G -5.558(pp)4.998 G -4.998(oo)5.558 G -4.438(rr)4.998 G -3.328(tt)4.438
G -4.998(__)3.328 G -5.558(dd)4.998 G -4.438(ee)5.558 G -3.888(ss)4.438
G -3.328(tt)3.888 G 6.196 -4.438(rr o)3.328 H(oy)-.56 E(y)-4.998 E F0
(\(pth_msgport_t)A F2(mp)2.5 E F0(\);)A .16(This destro)128 631.2 R .16
(ys a message port)-.1 F F2(mp)2.66 E F0 2.66(.B)C .16
(efore all pending messages on it are replied to their origin message)
-2.66 F(port.)128 643.2 Q(pth_msgport_t)108 660 Q F1 -5.558(pp)2.5 G
-3.328(tt)5.558 G -5.558(hh)3.328 G -4.998(__)5.558 G -8.328(mm)4.998 G
-3.888(ss)8.328 G -4.998(gg)3.888 G -5.558(pp)4.998 G -4.998(oo)5.558 G
-4.438(rr)4.998 G -3.328(tt)4.438 G -4.998(__)3.328 G -5.558<8c8c>4.998
G -5.558(nn)5.558 G -5.558(dd)5.558 G F0(\(const char *)5.558 E F2(name)
A F0(\);)A(This \214nds a message port in the system by)128 672 Q F2
(name)2.5 E F0(and returns the pointer to it.)2.5 E(int)108 688.8 Q F1
-5.558(pp)2.5 G -3.328(tt)5.558 G -5.558(hh)3.328 G -4.998(__)5.558 G
-8.328(mm)4.998 G -3.888(ss)8.328 G -4.998(gg)3.888 G -5.558(pp)4.998 G
-4.998(oo)5.558 G -4.438(rr)4.998 G -3.328(tt)4.438 G -4.998(__)3.328 G
-5.558(pp)4.998 G -4.438(ee)5.558 G -5.558(nn)4.438 G -5.558(dd)5.558 G
-2.778(ii)5.558 G -5.558(nn)2.778 G -4.998(gg)5.558 G F0
(\(pth_msgport_t)4.998 E F2(mp)2.5 E F0(\);)A
(This returns the number of pending messages on message port)128 700.8 Q
F2(mp)2.5 E F0(.)A 139.425(10/Mar/2000 perl)72 768 R(5.005, patch 03)2.5
E(14)184.145 E EP
%%Page: 15 15
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/Times-Roman@0 SF(PTH-MANU)72 48 Q 78.275(AL\(1\) User)-.4 F
(Contrib)2.5 E(uted Perl Documentation)-.2 E(PTH-MANU)80.775 E(AL\(1\))
-.4 E(int)108 84 Q/F1 10/Times-Bold@0 SF -5.558(pp)2.5 G -3.328(tt)5.558
G -5.558(hh)3.328 G -4.998(__)5.558 G -8.328(mm)4.998 G -3.888(ss)8.328
G -4.998(gg)3.888 G -5.558(pp)4.998 G -4.998(oo)5.558 G -4.438(rr)4.998
G -3.328(tt)4.438 G -4.998(__)3.328 G -5.558(pp)4.998 G -5.558(uu)5.558
G -3.328(tt)5.558 G F0(\(pth_msgport_t)3.328 E/F2 10/Times-Italic@0 SF
(mp)2.5 E F0 2.5(,p)C(th_message_t *)-2.5 E F2(m)A F0(\);)A
(This puts \(or sends\) a message)128 96 Q F2(m)2.5 E F0
(to message port)2.5 E F2(mp)2.5 E F0(.)A(pth_message_t *)108 112.8 Q F1
-5.558(pp)C -3.328(tt)5.558 G -5.558(hh)3.328 G -4.998(__)5.558 G -8.328
(mm)4.998 G -3.888(ss)8.328 G -4.998(gg)3.888 G -5.558(pp)4.998 G -4.998
(oo)5.558 G -4.438(rr)4.998 G -3.328(tt)4.438 G -4.998(__)3.328 G -4.998
(gg)4.998 G -4.438(ee)4.998 G -3.328(tt)4.438 G F0(\(pth_msgport_t)3.328
E F2(mp)2.5 E F0(\);)A .279(This gets \(or recei)128 124.8 R -.15(ve)
-.25 G .278(s\) the top message from message port).15 F F2(mp)2.778 E F0
5.278(.I)C .278(ncoming messages are al)-5.278 F -.1(wa)-.1 G .278(ys k)
.1 F .278(ept in)-.1 F 2.5(aq)128 136.8 S
(ueue, so there can be more pending messages, of course.)-2.5 E(int)108
153.6 Q F1 -5.558(pp)2.5 G -3.328(tt)5.558 G -5.558(hh)3.328 G -4.998
(__)5.558 G -8.328(mm)4.998 G -3.888(ss)8.328 G -4.998(gg)3.888 G -5.558
(pp)4.998 G -4.998(oo)5.558 G -4.438(rr)4.998 G -3.328(tt)4.438 G -4.998
(__)3.328 G 6.196 -4.438(rr ee)4.998 H -5.558(pp)4.438 G -2.778(ll)5.558
G -4.998(yy)2.778 G F0(\(pth_message_t *)4.998 E F2(m)A F0(\);)A
(This replies a message)128 165.6 Q F2(m)2.5 E F0
(to the message port of the sender)2.5 E(.)-.55 E F1 -6.668(TT)108 188.4
S -5.558(hh)6.668 G 6.196 -4.438(rr ee)5.558 H -4.998(aa)4.438 G 11.116
-5.558(dd C)4.998 H(Cl)-1.66 E(le)-2.778 E(ea)-4.438 E(an)-4.998 E(nu)
-5.558 E(up)-5.558 E(ps)-5.558 E(s)-3.888 E F0(The follo)108 205.2 Q
(wing functions pro)-.25 E(vide per)-.15 E(-thread cleanup functions.)
-.2 E(int)108 222 Q F1 -5.558(pp)2.5 G -3.328(tt)5.558 G -5.558(hh)3.328
G -4.998(__)5.558 G -4.438(cc)4.998 G -2.778(ll)4.438 G -4.438(ee)2.778
G -4.998(aa)4.438 G -5.558(nn)4.998 G -5.558(uu)5.558 G -5.558(pp)5.558
G -4.998(__)5.558 G -5.558(pp)4.998 G -5.558(uu)5.558 G -3.888(ss)5.558
G -5.558(hh)3.888 G F0(\(v)5.558 E(oid \(*)-.2 E F2(handler)A F0(\)\(v)A
(oid *\), v)-.2 E(oid *)-.2 E F2(ar)A(g)-.37 E F0(\);)A .65
(This pushes the routine)128 234 R F2(handler)3.15 E F0 .651
(onto the stack of cleanup routines for the current thread.)3.15 F .651
(These rou-)5.651 F(tines are called in)128 246 Q/F3 9/Times-Roman@0 SF
(LIFO)2.5 E F0(order when the thread terminates.)2.5 E(int)108 262.8 Q
F1 -5.558(pp)2.5 G -3.328(tt)5.558 G -5.558(hh)3.328 G -4.998(__)5.558 G
-4.438(cc)4.998 G -2.778(ll)4.438 G -4.438(ee)2.778 G -4.998(aa)4.438 G
-5.558(nn)4.998 G -5.558(uu)5.558 G -5.558(pp)5.558 G -4.998(__)5.558 G
-5.558(pp)4.998 G -4.998(oo)5.558 G -5.558(pp)4.998 G F0(\(int)5.558 E
F2 -.2(ex)2.5 G(ecute).2 E F0(\);)A .126(This pops the top-most routine\
 from the stack of cleanup routines for the current thread. When)128
274.8 R F2 -.2(ex)2.625 G(ecute).2 E F0(is)128 286.8 Q/F4 10/Courier@0
SF(TRUE)2.5 E F0(the routine is additionally called.)2.5 E F1 -6.108(PP)
108 309.6 S 6.196 -4.438(rr o)6.108 H(oc)-.56 E(ce)-4.438 E(es)-4.438 E
(ss)-3.888 E 2.5(sF)-3.888 G -.25(Fo)-8.608 G(or)-4.748 E(rk)-4.438 E
(ki)-5.558 E(in)-2.778 E(ng)-5.558 E(g)-4.998 E F0 1.192(The follo)108
326.4 R 1.192(wing functions pro)-.25 F 1.192(vide some special support\
 for process forking situations inside the threading)-.15 F(en)108 338.4
Q(vironment.)-.4 E(int)108 355.2 Q F1 -5.558(pp)2.5 G -3.328(tt)5.558 G
-5.558(hh)3.328 G -4.998(__)5.558 G -4.998(aa)4.998 G -3.328(tt)4.998 G
3.906 -3.328(ff o)3.328 H(or)-1.67 E(rk)-4.438 E(k_)-5.558 E(_p)-4.998 E
(pu)-5.558 E(us)-5.558 E(sh)-3.888 E(h)-5.558 E F0(\(v)A(oid \(*)-.2 E
F2(pr)A(epar)-.37 E(e)-.37 E F0(\)\(v)A(oid *\), v)-.2 E(oid \(*\)\(v)
-.2 E(oid *)-.2 E F2(par)A(ent)-.37 E F0(\), v)A(oid \(*\)\(v)-.2 E
(oid *)-.2 E F2 -.15(ch)C(ild).15 E F0(\), v)A(oid *)-.2 E F2(ar)A(g)
-.37 E F0(\);)A .366
(This function declares forking handlers to be called before and after)
128 367.2 R F2(pth_fork)2.866 E F0 .366(\(3\), in the conte)1.666 F .365
(xt of the)-.15 F 1.162(thread that called)128 379.2 R F2(pth_fork)3.662
E F0 1.162(\(3\). The)1.666 F F2(pr)3.662 E(epar)-.37 E(e)-.37 E F0
1.162(handler is called before)3.662 F F2(fork)3.663 E F0 1.163
(\(2\) processing commences.)1.666 F(The)128 391.2 Q F2(par)2.73 E(ent)
-.37 E F0 .23(handler is called)2.73 F(after)7.73 E F2(fork)2.73 E F0
.23(\(2\) processing completes in the parent process.)1.666 F(The)5.229
E F2 -.15(ch)2.729 G(ild).15 E F0(han-)2.729 E .579
(dler is called after)128 403.2 R F2(fork)3.079 E F0 .58(\(2\) processi\
ng completed in the child process. If no handling is desired at one)
1.666 F .14
(or more of these three points, the corresponding handler can be gi)128
415.2 R -.15(ve)-.25 G 2.64(na).15 G(s)-2.64 E F4(NULL)2.64 E F0 5.14
(.E)C .14(ach handler is called)-5.14 F(with)128 427.2 Q F2(ar)2.5 E(g)
-.37 E F0(as the ar)2.5 E(gument.)-.18 E .352(The order of calls to)128
445.2 R F2(pth_atfork_push)2.852 E F0 .352(\(3\) is signi\214cant. The)
1.666 F F2(par)2.852 E(ent)-.37 E F0(and)2.852 E F2 -.15(ch)2.852 G(ild)
.15 E F0 .352(handlers are called in the)2.852 F .342
(order in which the)128 457.2 R 2.842(yw)-.15 G .342
(ere established by calls to)-2.842 F F2(pth_atfork_push)2.841 E F0 .341
(\(3\), i.e.,)1.666 F F3(FIFO)2.841 E F0 2.841(.T)C(he)-2.841 E F2(pr)
2.841 E(epar)-.37 E(e)-.37 E F0 .341(fork han-)2.841 F
(dlers are called in the opposite order)128 469.2 Q 2.5(,i)-.4 G(.e.,)
-2.5 E F3(LIFO)2.5 E F0(.)A(int)108 486 Q F1 -5.558(pp)2.5 G -3.328(tt)
5.558 G -5.558(hh)3.328 G -4.998(__)5.558 G -4.998(aa)4.998 G -3.328(tt)
4.998 G 3.906 -3.328(ff o)3.328 H(or)-1.67 E(rk)-4.438 E(k_)-5.558 E(_p)
-4.998 E(po)-5.558 E(op)-4.998 E(p)-5.558 E F0(\(v)A(oid\);)-.2 E .472
(This remo)128 498 R -.15(ve)-.15 G 2.972(st).15 G .472(he top-most han\
dlers on the forking handler stack which were established with the last)
-2.972 F F2(pth_atfork_push)128 510 Q F0 1.905(\(3\) call. It returns)
1.666 F F4(FALSE)4.405 E F0 1.905(when no more handlers couldn')4.405 F
4.405(tb)-.18 G 4.405(er)-4.405 G(emo)-4.405 E -.15(ve)-.15 G 4.405(df)
.15 G 1.904(rom the)-4.405 F(stack.)128 522 Q(pid_t)108 538.8 Q F1
-5.558(pp)2.5 G -3.328(tt)5.558 G -5.558(hh)3.328 G -4.998(__)5.558 G
3.906 -3.328(ff o)4.998 H(or)-1.67 E(rk)-4.438 E(k)-5.558 E F0(\(v)A
(oid\);)-.2 E 1.044(This is a v)128 550.8 R 1.044(ariant of)-.25 F F2
(fork)3.544 E F0 1.045(\(2\) with the dif)1.666 F 1.045
(ference that the current thread only is fork)-.25 F 1.045
(ed into a separate)-.1 F 1.519(process, i.e., in the parent process no\
thing changes while in the child process all threads are gone)128 562.8
R -.15(ex)128 574.8 S .922
(cept for the scheduler and the calling thread. When you really w).15 F
.922(ant to duplicate all threads in the)-.1 F 1.025
(current process you should use)128 586.8 R F2(fork)3.525 E F0 1.025
(\(2\) directly)1.666 F 3.525(.B)-.65 G 1.024
(ut this is usually not reasonable. Additionally this)-3.525 F
(function tak)128 598.8 Q(es care of forking handlers as established by)
-.1 E F2(pth_fork_push)2.5 E F0(\(3\).)1.666 E F1 -5.558(SS)108 621.6 S
-4.998(yy)5.558 G -5.558(nn)4.998 G -4.438(cc)5.558 G -5.558(hh)4.438 G
6.196 -4.438(rr o)5.558 H(on)-.56 E(ni)-5.558 E(iz)-2.778 E(za)-4.438 E
(at)-4.998 E(ti)-3.328 E(io)-2.778 E(on)-4.998 E(n)-5.558 E F0 1.145
(The follo)108 638.4 R 1.145(wing functions pro)-.25 F 1.145
(vide synchronization support via mutual e)-.15 F 1.146
(xclusion locks \()-.15 F F1 -8.328(mm)C -5.558(uu)8.328 G -3.328(tt)
5.558 G -4.438(ee)3.328 G -4.998(xx)4.438 G F0 1.146(\), read-write)
4.998 F .846(locks \()108 650.4 R F1 -4.438(rr)C -7.218(ww)4.438 G
-2.778(ll)7.218 G -4.998(oo)2.778 G -4.438(cc)4.998 G -5.558(kk)4.438 G
F0 .846(\), condition v)5.558 F .846(ariables \()-.25 F F1 -4.438(cc)C
-4.998(oo)4.438 G -5.558(nn)4.998 G -5.558(dd)5.558 G F0 3.346(\)a)5.558
G .846(nd barriers \()-3.346 F F1 -5.558(bb)C -4.998(aa)5.558 G -4.438
(rr)4.998 G -4.438(rr)4.438 G -2.778(ii)4.438 G -4.438(ee)2.778 G -4.438
(rr)4.438 G F0 .845(\). K)4.438 F .845
(eep in mind that in a non-preempti)-.25 F -.15(ve)-.25 G .509
(threading system lik)108 662.4 R(e)-.1 E F1 -6.108(PP)3.009 G -3.328
(tt)6.108 G -5.558(hh)3.328 G F0 .51(this might sound unnecessary at th\
e \214rst look, because a thread isn')8.567 F 3.01(ti)-.18 G(nterrupted)
-3.01 E .885(by the system. Actually when you ha)108 674.4 R 1.185 -.15
(ve a c)-.2 H .885(ritical code section which doesn').15 F 3.385(tc)-.18
G .885(ontain an)-3.385 F(y)-.15 E F2(pth_xxx\(\))3.385 E F0(func-)3.385
E(tions, you don')108 686.4 Q 2.5(tn)-.18 G(eed an)-2.5 E 2.5(ym)-.15 G
(ute)-2.5 E 2.5(xt)-.15 G 2.5(op)-2.5 G(rotect it, of course.)-2.5 E
.291(But when your critical code section contains an)108 703.2 R(y)-.15
E F2(pth_xxx\(\))2.791 E F0 .292
(function the chance is high that these temporar)2.791 F(-)-.2 E .421
(ily switch to the scheduler)108 715.2 R 2.921(.A)-.55 G .421(nd this w)
-2.921 F .421(ay other threads can mak)-.1 F 2.92(ep)-.1 G .42
(rogress and enter your critical code sec-)-2.92 F 1.845(tion, too.)108
727.2 R 1.846(This is especially true for critical code sections which \
implicitly or e)6.845 F 1.846(xplicitly use the e)-.15 F -.15(ve)-.25 G
(nt).15 E 139.425(10/Mar/2000 perl)72 768 R(5.005, patch 03)2.5 E(15)
184.145 E EP
%%Page: 16 16
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/Times-Roman@0 SF(PTH-MANU)72 48 Q 78.275(AL\(1\) User)-.4 F
(Contrib)2.5 E(uted Perl Documentation)-.2 E(PTH-MANU)80.775 E(AL\(1\))
-.4 E(mechanism.)108 84 Q(int)108 100.8 Q/F1 10/Times-Bold@0 SF -5.558
(pp)2.5 G -3.328(tt)5.558 G -5.558(hh)3.328 G -4.998(__)5.558 G -8.328
(mm)4.998 G -5.558(uu)8.328 G -3.328(tt)5.558 G -4.438(ee)3.328 G -4.998
(xx)4.438 G -4.998(__)4.998 G -2.778(ii)4.998 G -5.558(nn)2.778 G -2.778
(ii)5.558 G -3.328(tt)2.778 G F0(\(pth_mute)3.328 E(x_t *)-.15 E/F2 10
/Times-Italic@0 SF(mute)A(x)-.2 E F0(\);)A 1.22
(This dynamically initializes a mute)128 112.8 R 3.719(xv)-.15 G 1.219
(ariable of type `)-3.969 F/F3 10/Courier@0 SF(pth_mutex_t)A F0 3.719
('. Alternati)B -.15(ve)-.25 G 1.219(ly one can also).15 F
(use static initialization via `)128 124.8 Q F3
(pth_mutex_t mutex = PTH_MUTEX_INIT)A F0('.)A(int)108 141.6 Q F1 -5.558
(pp)2.5 G -3.328(tt)5.558 G -5.558(hh)3.328 G -4.998(__)5.558 G -8.328
(mm)4.998 G -5.558(uu)8.328 G -3.328(tt)5.558 G -4.438(ee)3.328 G -4.998
(xx)4.438 G -4.998(__)4.998 G -4.998(aa)4.998 G -4.438(cc)4.998 G -5.558
(qq)4.438 G -5.558(uu)5.558 G -2.778(ii)5.558 G 6.196 -4.438(rr ee)2.778
H F0(\(pth_mute)4.438 E(x_t *)-.15 E F2(mute)A(x)-.2 E F0 2.5(,i)C(nt)
-2.5 E F2(try)2.5 E F0 2.5(,p)C(th_e)-2.5 E -.15(ve)-.25 G(nt_t).15 E F2
-.15(ev)2.5 G F0(\);).15 E 1.227(This acquires a mute)128 153.6 R(x)-.15
E F2(mute)3.727 E(x)-.2 E F0 6.227(.I)C 3.727(ft)-6.227 G 1.227(he mute)
-3.727 F 3.727(xi)-.15 G 3.728(sa)-3.727 G 1.228(lready lock)-3.728 F
1.228(ed by another thread, the current threads)-.1 F -.15(exe)128 165.6
S .002(cution is suspended until the mute).15 F 2.502(xi)-.15 G 2.502
(su)-2.502 G(nlock)-2.502 E .002(ed ag)-.1 F .002
(ain or additionally the e)-.05 F .002(xtra e)-.15 F -.15(ve)-.25 G .002
(nts in).15 F F2 -.15(ev)2.501 G F0(occurred)2.651 E(\(when)128 177.6 Q
F2 -.15(ev)2.752 G F0 .252(is not)2.902 F F3(NULL)2.752 E F0 2.752
(\). Recursi)B .552 -.15(ve l)-.25 H .252(ocking is e).15 F .252
(xplicitly supported, i.e., a thread is allo)-.15 F .253
(wed to acquire a)-.25 F(mute)128 189.6 Q 3.226(xm)-.15 G .726(ore than\
 once before its released. But it then also has be released the same nu\
mber of times)-3.226 F .159(until the mute)128 201.6 R 2.659(xi)-.15 G
2.659(sa)-2.659 G -.05(ga)-2.659 G .159(in lockable by others.).05 F
(When)5.159 E F2(try)2.659 E F0(is)2.659 E F3(TRUE)2.66 E F0 .16
(this function ne)2.66 F -.15(ve)-.25 G 2.66(rs).15 G .16(uspends e)
-2.66 F -.15(xe)-.15 G(cution.).15 E(Instead it returns)128 213.6 Q F3
(FALSE)2.5 E F0(with)2.5 E F3(errno)2.5 E F0(set to)2.5 E F3(EBUSY)2.5 E
F0(.)A(int)108 230.4 Q F1 -5.558(pp)2.5 G -3.328(tt)5.558 G -5.558(hh)
3.328 G -4.998(__)5.558 G -8.328(mm)4.998 G -5.558(uu)8.328 G -3.328(tt)
5.558 G -4.438(ee)3.328 G -4.998(xx)4.438 G -4.998(__)4.998 G 6.196
-4.438(rr ee)4.998 H -2.778(ll)4.438 G -4.438(ee)2.778 G -4.998(aa)4.438
G -3.888(ss)4.998 G -4.438(ee)3.888 G F0(\(pth_mute)4.438 E(x_t *)-.15 E
F2(mute)A(x)-.2 E F0(\);)A .286
(This decrements the recursion locking count on)128 242.4 R F2(mute)
2.785 E(x)-.2 E F0 .285(and when it is zero it releases the mute)2.785 F
(x)-.15 E F2(mute)2.785 E(x)-.2 E F0(.)A(int)108 259.2 Q F1 -5.558(pp)
2.5 G -3.328(tt)5.558 G -5.558(hh)3.328 G -4.998(__)5.558 G -4.438(rr)
4.998 G -7.218(ww)4.438 G -2.778(ll)7.218 G -4.998(oo)2.778 G -4.438(cc)
4.998 G -5.558(kk)4.438 G -4.998(__)5.558 G -2.778(ii)4.998 G -5.558(nn)
2.778 G -2.778(ii)5.558 G -3.328(tt)2.778 G F0(\(pth_rwlock_t *)3.328 E
F2(rwloc)A(k)-.2 E F0(\);)A .696
(This dynamically initializes a read-write lock v)128 271.2 R .697
(ariable of type `)-.25 F F3(pth_rwlock_t)A F0 3.197('. Alternati)B -.15
(ve)-.25 G .697(ly one).15 F(can also use static initialization via `)
128 283.2 Q F3(pth_rwlock_t rwlock = PTH_RWLOCK_INIT)A F0('.)A(int)108
300 Q F1 -5.558(pp)2.5 G -3.328(tt)5.558 G -5.558(hh)3.328 G -4.998(__)
5.558 G -4.438(rr)4.998 G -7.218(ww)4.438 G -2.778(ll)7.218 G -4.998(oo)
2.778 G -4.438(cc)4.998 G -5.558(kk)4.438 G -4.998(__)5.558 G -4.998(aa)
4.998 G -4.438(cc)4.998 G -5.558(qq)4.438 G -5.558(uu)5.558 G -2.778(ii)
5.558 G 6.196 -4.438(rr ee)2.778 H F0(\(pth_rwlock_t *)4.438 E F2(rwloc)
A(k)-.2 E F0 2.5(,i)C(nt)-2.5 E F2(op)2.5 E F0 2.5(,i)C(nt)-2.5 E F2
(try)2.5 E F0 2.5(,p)C(th_e)-2.5 E -.15(ve)-.25 G(nt_t).15 E F2 -.15(ev)
2.5 G F0(\);).15 E 5.164(This acquires a read-only \(when)128 312 R F2
(op)7.664 E F0(is)7.664 E F3(PTH_RWLOCK_RD)7.664 E F0 7.664(\)o)C 7.664
(rar)-7.664 G 5.164(ead-write \(when)-7.664 F F2(op)7.663 E F0(is)7.663
E F3(PTH_RWLOCK_RW)128 324 Q F0 3.525(\)l)C(ock)-3.525 E F2(rwloc)3.525
E(k)-.2 E F0 3.525(.W)C 1.025(hen the lock is only lock)-3.525 F 1.025
(ed by other threads in read-only mode,)-.1 F .334(the lock succeeds.)
128 336 R .333(But when one thread holds a read-write lock, all locking\
 attempts suspend the cur)5.333 F(-)-.2 E .864
(rent thread until this lock is released ag)128 348 R .864
(ain. Additionally in)-.05 F F2 -.15(ev)3.364 G F0 -2.15 -.25(ev e)3.514
H .864(nts can be gi).25 F -.15(ve)-.25 G 3.364(nt).15 G 3.364(ol)-3.364
G .864(et the locking)-3.364 F .324(timeout, etc. When)128 360 R F2(try)
2.824 E F0(is)2.824 E F3(TRUE)2.824 E F0 .323(this function ne)2.823 F
-.15(ve)-.25 G 2.823(rs).15 G .323(uspends e)-2.823 F -.15(xe)-.15 G
.323(cution. Instead it returns).15 F F3(FALSE)2.823 E F0(with)2.823 E
F3(errno)128 372 Q F0(set to)2.5 E F3(EBUSY)2.5 E F0(.)A(int)108 388.8 Q
F1 -5.558(pp)2.5 G -3.328(tt)5.558 G -5.558(hh)3.328 G -4.998(__)5.558 G
-4.438(rr)4.998 G -7.218(ww)4.438 G -2.778(ll)7.218 G -4.998(oo)2.778 G
-4.438(cc)4.998 G -5.558(kk)4.438 G -4.998(__)5.558 G 6.196 -4.438
(rr ee)4.998 H -2.778(ll)4.438 G -4.438(ee)2.778 G -4.998(aa)4.438 G
-3.888(ss)4.998 G -4.438(ee)3.888 G F0(\(pth_rwlock_t *)4.438 E F2
(rwloc)A(k)-.2 E F0(\);)A(This releases a pre)128 400.8 Q
(viously acquired \(read-only or read-write\) lock.)-.25 E(int)108 417.6
Q F1 -5.558(pp)2.5 G -3.328(tt)5.558 G -5.558(hh)3.328 G -4.998(__)5.558
G -4.438(cc)4.998 G -4.998(oo)4.438 G -5.558(nn)4.998 G -5.558(dd)5.558
G -4.998(__)5.558 G -2.778(ii)4.998 G -5.558(nn)2.778 G -2.778(ii)5.558
G -3.328(tt)2.778 G F0(\(pth_cond_t *)3.328 E F2(cond)A F0(\);)A .748
(This dynamically initializes a condition v)128 429.6 R .748(ariable v)
-.25 F .748(ariable of type `)-.25 F F3(pth_cond_t)A F0 3.249
('. Alternati)B -.15(ve)-.25 G .749(ly one).15 F
(can also use static initialization via `)128 441.6 Q F3
(pth_cond_t cond = PTH_COND_INIT)A F0('.)A(int)108 458.4 Q F1 -5.558(pp)
2.5 G -3.328(tt)5.558 G -5.558(hh)3.328 G -4.998(__)5.558 G -4.438(cc)
4.998 G -4.998(oo)4.438 G -5.558(nn)4.998 G -5.558(dd)5.558 G -4.998(__)
5.558 G -4.998(aa)4.998 G -7.218(ww)4.998 G -4.998(aa)7.218 G -2.778(ii)
4.998 G -3.328(tt)2.778 G F0(\(pth_cond_t *)3.328 E F2(cond)A F0 2.5(,p)
C(th_mute)-2.5 E(x_t *)-.15 E F2(mute)A(x)-.2 E F0 2.5(,p)C(th_e)-2.5 E
-.15(ve)-.25 G(nt_t).15 E F2 -.15(ev)2.5 G F0(\);).15 E .65(This a)128
470.4 R -.1(wa)-.15 G .65
(its a condition situation. The caller has to follo).1 F 3.15(wt)-.25 G
.65(he semantics of the)-3.15 F/F4 9/Times-Roman@0 SF(POSIX)3.15 E F0
.649(condition v)3.15 F(ari-)-.25 E(ables:)128 482.4 Q F2(mute)3.469 E
(x)-.2 E F0 .969
(has to be acquired before this function is called. The e)3.469 F -.15
(xe)-.15 G .97(cution of the current thread is).15 F .771
(then suspended either until the e)128 494.4 R -.15(ve)-.25 G .771
(nts in).15 F F2 -.15(ev)3.271 G F0 .771(occurred \(when)3.421 F F2 -.15
(ev)3.271 G F0 .77(is not)3.42 F F3(NULL)3.27 E F0 3.27(\)o)C(r)-3.27 E
F2(cond)3.27 E F0 -.1(wa)3.27 G 3.27(sn).1 G .77(oti\214ed by)-3.27 F
2.298(another thread via)128 506.4 R F2(pth_cond_notify)4.798 E F0 4.798
(\(3\). While)1.666 F 2.298(the thread is w)4.798 F(aiting,)-.1 E F2
(mute)4.798 E(x)-.2 E F0 2.298(is released. Before it)4.798 F(returns)
128 518.4 Q F2(mute)2.5 E(x)-.2 E F0(is reacquired.)2.5 E(int)108 535.2
Q F1 -5.558(pp)2.5 G -3.328(tt)5.558 G -5.558(hh)3.328 G -4.998(__)5.558
G -4.438(cc)4.998 G -4.998(oo)4.438 G -5.558(nn)4.998 G -5.558(dd)5.558
G -4.998(__)5.558 G -5.558(nn)4.998 G -4.998(oo)5.558 G -3.328(tt)4.998
G -2.778(ii)3.328 G -3.328(ff)2.778 G -4.998(yy)3.328 G F0
(\(pth_cond_t *)4.998 E F2(cond)A F0 2.5(,i)C(nt)-2.5 E F2(br)2.5 E
(oadcast)-.45 E F0(\);)A 1.013
(This noti\214ed one or all threads which are w)128 547.2 R 1.013
(aiting on)-.1 F F2(cond)3.513 E F0 6.013(.W)C(hen)-6.013 E F2(br)3.513
E(oadcast)-.45 E F0(is)3.513 E F3(TRUE)3.513 E F0 1.013(all thread are)
3.513 F(noti\214ed, else only a single \(unspeci\214ed\) one.)128 559.2
Q(int)108 576 Q F1 -5.558(pp)2.5 G -3.328(tt)5.558 G -5.558(hh)3.328 G
-4.998(__)5.558 G -5.558(bb)4.998 G -4.998(aa)5.558 G -4.438(rr)4.998 G
-4.438(rr)4.438 G -2.778(ii)4.438 G -4.438(ee)2.778 G -4.438(rr)4.438 G
-4.998(__)4.438 G -2.778(ii)4.998 G -5.558(nn)2.778 G -2.778(ii)5.558 G
-3.328(tt)2.778 G F0(\(pth_barrier_t *)3.328 E F2(barrier)A F0 2.5(,i)C
(nt I<threshold\);)-2.5 E .069(This dynamically initializes a barrier v)
128 588 R .069(ariable of type `)-.25 F F3(pth_barrier_t)A F0 2.569
('. Alternati)B -.15(ve)-.25 G .07(ly one can also).15 F .015
(use static initialization via `)128 600 R F3 .014
(pth_barrier_t barrier = PTH_BARRIER_INIT\()B F2(thr)A(eadhold)-.37 E F3
(\))A F0('.)A(int)108 616.8 Q F1 -5.558(pp)2.5 G -3.328(tt)5.558 G
-5.558(hh)3.328 G -4.998(__)5.558 G -5.558(bb)4.998 G -4.998(aa)5.558 G
-4.438(rr)4.998 G -4.438(rr)4.438 G -2.778(ii)4.438 G -4.438(ee)2.778 G
-4.438(rr)4.438 G -4.998(__)4.438 G 6.196 -4.438(rr ee)4.998 H -4.998
(aa)4.438 G -4.438(cc)4.998 G -5.558(hh)4.438 G F0(\(pth_barrier_t *)
5.558 E F2(barrier)A F0(\);)A 1.014(This function reaches a barrier)128
628.8 R F2(barrier)3.514 E F0 3.514(.I)C 3.514(ft)-3.514 G 1.015
(his is the last thread \(as speci\214ed by)-3.514 F F2(thr)3.515 E
(eshold)-.37 E F0 1.015(on init of)3.515 F F2(barrier)128 640.8 Q F0
2.515(\)a)C .015(ll threads are a)-2.515 F -.1(wa)-.15 G -.1(ke).1 G
2.515(ned. Else).1 F .014
(the current thread is suspended until the last thread reached the)2.515
F .22(barrier and this w)128 652.8 R .22(ay a)-.1 F -.1(wa)-.15 G -.1
(ke).1 G 2.72(sa).1 G .22(ll threads. The function returns \(beside)
-2.72 F F3(FALSE)2.72 E F0 .22(on error\) the v)2.72 F(alue)-.25 E F3
(TRUE)2.72 E F0 3.338(for an)128 664.8 R 5.838(yt)-.15 G 3.338(hread wh\
ich neither reached the barrier as the \214rst nor the last thread;)
-5.838 F F3(PTH_BAR-)5.838 E(RIER_HEADLIGHT)128 676.8 Q F0 2.207
(for the thread which reached the barrier as the \214rst thread and)
4.706 F F3(PTH_BAR-)4.707 E(RIER_TAILLIGHT)128 688.8 Q F0
(for the thread which reached the barrier as the last thread.)2.5 E
139.425(10/Mar/2000 perl)72 768 R(5.005, patch 03)2.5 E(16)184.145 E EP
%%Page: 17 17
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/Times-Roman@0 SF(PTH-MANU)72 48 Q 78.275(AL\(1\) User)-.4 F
(Contrib)2.5 E(uted Perl Documentation)-.2 E(PTH-MANU)80.775 E(AL\(1\))
-.4 E/F1 10/Times-Bold@0 SF -7.778(GG)108 84 S -4.438(ee)7.778 G -5.558
(nn)4.438 G -4.438(ee)5.558 G -4.438(rr)4.438 G -4.998(aa)4.438 G -2.778
(ll)4.998 G -2.778(ii)2.778 G -4.438(zz)2.778 G -4.438(ee)4.438 G -5.558
(dd)4.438 G/F2 9/Times-Bold@0 SF -5.497(PP)8.058 G -7(OO)5.497 G -5.002
(SS)7 G -3.499(II)5.002 G -6.496(XX)3.499 G F1 -7.218(RR)8.996 G -4.438
(ee)7.218 G -5.558(pp)4.438 G -2.778(ll)5.558 G -4.998(aa)2.778 G -4.438
(cc)4.998 G -4.438(ee)4.438 G -8.328(mm)4.438 G -4.438(ee)8.328 G -5.558
(nn)4.438 G -3.328(tt)5.558 G F2 -6.496(AA)5.828 G -5.497(PP)6.496 G
-3.499(II)5.497 G F0 .558(The follo)108 100.8 R .558
(wing functions are generalized replacements functions for the)-.25 F/F3
9/Times-Roman@0 SF .808(POSIX API)3.058 F F0 3.058(,i)C .558(.e., the)
-3.058 F 3.058(ya)-.15 G .558(re similar to)-3.058 F .406
(the functions under `)108 112.8 R F1 -5.558(SS)C -3.328(tt)5.558 G
-4.998(aa)3.328 G -5.558(nn)4.998 G -5.558(dd)5.558 G -4.998(aa)5.558 G
-4.438(rr)4.998 G -5.558(dd)4.438 G F2 -5.497(PP)8.464 G -7(OO)5.497 G
-5.002(SS)7 G -3.499(II)5.002 G -6.496(XX)3.499 G F1 -7.218(RR)9.402 G
-4.438(ee)7.218 G -5.558(pp)4.438 G -2.778(ll)5.558 G -4.998(aa)2.778 G
-4.438(cc)4.998 G -4.438(ee)4.438 G -8.328(mm)4.438 G -4.438(ee)8.328 G
-5.558(nn)4.438 G -3.328(tt)5.558 G F2 -6.496(AA)6.234 G -5.497(PP)6.496
G -3.499(II)5.497 G F0 2.906('b)3.499 G .406(ut all ha)-3.106 F .706
-.15(ve a)-.2 H 2.906(na).15 G .406(dditional e)-2.906 F -.15(ve)-.25 G
.406(nt ar).15 F .406(gument which)-.18 F
(can be used for timeouts, etc.)108 124.8 Q(int)108 141.6 Q F1 -5.558
(pp)2.5 G -3.328(tt)5.558 G -5.558(hh)3.328 G -4.998(__)5.558 G -3.888
(ss)4.998 G -2.778(ii)3.888 G -4.998(gg)2.778 G -7.218(ww)4.998 G -4.998
(aa)7.218 G -2.778(ii)4.998 G -3.328(tt)2.778 G -4.998(__)3.328 G 6.226
-4.438(ee v)4.998 H(v)-.56 E F0(\(const sigset_t *)A/F4 10
/Times-Italic@0 SF(set)A F0 2.5(,i)C(nt *)-2.5 E F4(sig)A F0 2.5(,p)C
(th_e)-2.5 E -.15(ve)-.25 G(nt_t).15 E F4 -.15(ev)2.5 G F0(\);).15 E
3.406(This is equal to)128 153.6 R F4(pth_sigwait)5.906 E F0 3.405
(\(3\) \(see belo)1.666 F 3.405(w\), b)-.25 F 3.405
(ut has an additional e)-.2 F -.15(ve)-.25 G 3.405(nt ar).15 F(gument)
-.18 E F4 -.15(ev)5.905 G F0 5.905(.W).15 G(hen)-5.905 E F4(pth_sigwait)
128 165.6 Q F0 .978(\(3\) suspends the current threads e)1.666 F -.15
(xe)-.15 G .978(cution it usually only uses the signal e).15 F -.15(ve)
-.25 G .979(nt on).15 F F4(set)3.479 E F0(to)3.479 E -2.3 -.15(aw a)128
177.6 T -.1(ke).15 G 2.6(.W).1 G .1(ith this function an)-3 F 2.6(yn)
-.15 G .1(umber of e)-2.6 F .099(xtra e)-.15 F -.15(ve)-.25 G .099
(nts can be used to a).15 F -.1(wa)-.15 G .299 -.1(ke t).1 H .099
(he current thread \(remem-).1 F(ber that)128 189.6 Q F4 -.15(ev)2.5 G
F0(actually is an e)2.65 E -.15(ve)-.25 G(nt).15 E F4(ring)2.5 E F0(\).)
A(int)108 206.4 Q F1 -5.558(pp)2.5 G -3.328(tt)5.558 G -5.558(hh)3.328 G
-4.998(__)5.558 G -4.438(cc)4.998 G -4.998(oo)4.438 G -5.558(nn)4.998 G
-5.558(nn)5.558 G -4.438(ee)5.558 G -4.438(cc)4.438 G -3.328(tt)4.438 G
-4.998(__)3.328 G 6.226 -4.438(ee v)4.998 H(v)-.56 E F0(\(int)A F4(s)2.5
E F0 2.5(,c)C(onst struct sockaddr *)-2.5 E F4(addr)A F0 2.5(,s)C
(ocklen_t)-2.5 E F4(addrlen)2.5 E F0 2.5(,p)C(th_e)-2.5 E -.15(ve)-.25 G
(nt_t).15 E F4 -.15(ev)2.5 G F0(\);).15 E 3.248(This is equal to)128
218.4 R F4(pth_connect)5.748 E F0 3.248(\(3\) \(see belo)1.666 F 3.248
(w\), b)-.25 F 3.248(ut has an additional e)-.2 F -.15(ve)-.25 G 3.248
(nt ar).15 F(gument)-.18 E F4 -.15(ev)5.749 G F0 5.749(.W).15 G(hen)
-5.749 E F4(pth_connect)128 230.4 Q F0 1.758
(\(3\) suspends the current threads e)1.666 F -.15(xe)-.15 G 1.758
(cution it usually only uses the I/O e).15 F -.15(ve)-.25 G 1.757(nt on)
.15 F F4(fd)4.257 E F0(to)4.257 E -2.3 -.15(aw a)128 242.4 T -.1(ke).15
G 2.599(.W).1 G .099(ith this function an)-2.999 F 2.599(yn)-.15 G .099
(umber of e)-2.599 F .099(xtra e)-.15 F -.15(ve)-.25 G .1
(nts can be used to a).15 F -.1(wa)-.15 G .3 -.1(ke t).1 H .1
(he current thread \(remem-).1 F(ber that)128 254.4 Q F4 -.15(ev)2.5 G
F0(actually is an e)2.65 E -.15(ve)-.25 G(nt).15 E F4(ring)2.5 E F0(\).)
A(int)108 271.2 Q F1 -5.558(pp)2.5 G -3.328(tt)5.558 G -5.558(hh)3.328 G
-4.998(__)5.558 G -4.998(aa)4.998 G -4.438(cc)4.998 G -4.438(cc)4.438 G
-4.438(ee)4.438 G -5.558(pp)4.438 G -3.328(tt)5.558 G -4.998(__)3.328 G
6.226 -4.438(ee v)4.998 H(v)-.56 E F0(\(int)A F4(s)2.5 E F0 2.5(,s)C
(truct sockaddr *)-2.5 E F4(addr)A F0 2.5(,s)C(ocklen_t *)-2.5 E F4
(addrlen)A F0 2.5(,p)C(th_e)-2.5 E -.15(ve)-.25 G(nt_t).15 E F4 -.15(ev)
2.5 G F0(\);).15 E 3.606(This is equal to)128 283.2 R F4(pth_accept)
6.106 E F0 3.605(\(3\) \(see belo)1.666 F 3.605(w\), b)-.25 F 3.605
(ut has an additional e)-.2 F -.15(ve)-.25 G 3.605(nt ar).15 F(gument)
-.18 E F4 -.15(ev)6.105 G F0 6.105(.W).15 G(hen)-6.105 E F4(pth_accept)
128 295.2 Q F0 .073(\(3\) suspends the current threads e)1.666 F -.15
(xe)-.15 G .073(cution it usually only uses the I/O e).15 F -.15(ve)-.25
G .074(nt on).15 F F4(fd)2.574 E F0 .074(to a)2.574 F -.1(wa)-.15 G -.1
(ke).1 G(.).1 E -.4(Wi)128 307.2 S .291(th this function an).4 F 2.791
(yn)-.15 G .291(umber of e)-2.791 F .291(xtra e)-.15 F -.15(ve)-.25 G
.291(nts can be used to a).15 F -.1(wa)-.15 G .49 -.1(ke t).1 H .29
(he current thread \(remember that).1 F F4 -.15(ev)128 319.2 S F0
(actually is an e)2.65 E -.15(ve)-.25 G(nt).15 E F4(ring)2.5 E F0(\).)A
(int)108 336 Q F1 -5.558(pp)2.5 G -3.328(tt)5.558 G -5.558(hh)3.328 G
-4.998(__)5.558 G -3.888(ss)4.998 G -4.438(ee)3.888 G -2.778(ll)4.438 G
-4.438(ee)2.778 G -4.438(cc)4.438 G -3.328(tt)4.438 G -4.998(__)3.328 G
6.226 -4.438(ee v)4.998 H(v)-.56 E F0(\(int)A F4(nfd)2.5 E F0 2.5(,f)C
(d_set *)-2.5 E F4(rfds)A F0 2.5(,f)C(d_set *)-2.5 E F4(wfds)A F0 2.5
(,f)C(d_set *)-2.5 E F4(efds)A F0 2.5(,s)C(truct time)-2.5 E -.25(va)
-.25 G 2.5(l*).25 G F4(timeout)-2.5 E F0 2.5(,p)C(th_e)-2.5 E -.15(ve)
-.25 G(nt_t).15 E F4 -.15(ev)2.5 G F0(\);).15 E 3.843(This is equal to)
128 348 R F4(pth_select)6.343 E F0 3.843(\(3\) \(see belo)1.666 F 3.843
(w\), b)-.25 F 3.843(ut has an additional e)-.2 F -.15(ve)-.25 G 3.843
(nt ar).15 F(gument)-.18 E F4 -.15(ev)6.344 G F0 6.344(.W).15 G(hen)
-6.344 E F4(pth_select)128 360 Q F0 .924
(\(3\) suspends the current threads e)1.666 F -.15(xe)-.15 G .924
(cution it usually only uses the I/O e).15 F -.15(ve)-.25 G .923(nt on)
.15 F F4(rfds)3.423 E F0(,)A F4(wfds)3.423 E F0(and)128 372 Q F4(efds)
3.626 E F0 1.126(to a)3.626 F -.1(wa)-.15 G -.1(ke).1 G 3.626(.W).1 G
1.126(ith this function an)-4.026 F 3.627(yn)-.15 G 1.127(umber of e)
-3.627 F 1.127(xtra e)-.15 F -.15(ve)-.25 G 1.127(nts can be used to a)
.15 F -.1(wa)-.15 G 1.327 -.1(ke t).1 H 1.127(he current).1 F
(thread \(remember that)128 384 Q F4 -.15(ev)2.5 G F0(actually is an e)
2.65 E -.15(ve)-.25 G(nt).15 E F4(ring)2.5 E F0(\).)A(int)108 400.8 Q F1
-5.558(pp)2.5 G -3.328(tt)5.558 G -5.558(hh)3.328 G -4.998(__)5.558 G
-5.558(pp)4.998 G -4.998(oo)5.558 G -2.778(ll)4.998 G -2.778(ll)2.778 G
-4.998(__)2.778 G 6.226 -4.438(ee v)4.998 H(v)-.56 E F0
(\(struct pollfd *)A F4(fds)A F0 2.5(,u)C(nsigned int)-2.5 E F4(nfd)2.5
E F0 2.5(,i)C(nt)-2.5 E F4(timeout)2.5 E F0 2.5(,p)C(th_e)-2.5 E -.15
(ve)-.25 G(nt_t).15 E F4 -.15(ev)2.5 G F0(\);).15 E .79
(This is equal to)128 412.8 R F4(pth_poll)3.29 E F0 .79
(\(3\) \(see belo)1.666 F .79(w\), b)-.25 F .79(ut has an additional e)
-.2 F -.15(ve)-.25 G .79(nt ar).15 F(gument)-.18 E F4 -.15(ev)3.29 G F0
3.289(.W).15 G(hen)-3.289 E F4(pth_poll)3.289 E F0(\(3\))1.666 E 1.055
(suspends the current threads e)128 424.8 R -.15(xe)-.15 G 1.055
(cution it usually only uses the I/O e).15 F -.15(ve)-.25 G 1.055(nt on)
.15 F F4(fds)3.556 E F0 1.056(to a)3.556 F -.1(wa)-.15 G -.1(ke).1 G
3.556(.W).1 G 1.056(ith this)-3.956 F .605(function an)128 436.8 R 3.105
(yn)-.15 G .604(umber of e)-3.105 F .604(xtra e)-.15 F -.15(ve)-.25 G
.604(nts can be used to a).15 F -.1(wa)-.15 G .804 -.1(ke t).1 H .604
(he current thread \(remember that).1 F F4 -.15(ev)3.104 G F0(actu-)
3.254 E(ally is an e)128 448.8 Q -.15(ve)-.25 G(nt).15 E F4(ring)2.5 E
F0(\).)A(ssize_t)108 465.6 Q F1 -5.558(pp)2.5 G -3.328(tt)5.558 G -5.558
(hh)3.328 G -4.998(__)5.558 G 6.196 -4.438(rr ee)4.998 H -4.998(aa)4.438
G -5.558(dd)4.998 G -4.998(__)5.558 G 6.226 -4.438(ee v)4.998 H(v)-.56 E
F0(\(int)A F4(fd)2.5 E F0 2.5(,v)C(oid *)-2.7 E F4 -.2(bu)C(f).2 E F0
2.5(,s)C(ize_t)-2.5 E F4(nbytes)2.5 E F0 2.5(,p)C(th_e)-2.5 E -.15(ve)
-.25 G(nt_t).15 E F4 -.15(ev)2.5 G F0(\);).15 E .469(This is equal to)
128 477.6 R F4(pth_r)2.97 E(ead)-.37 E F0 .47(\(3\) \(see belo)1.666 F
.47(w\), b)-.25 F .47(ut has an additional e)-.2 F -.15(ve)-.25 G .47
(nt ar).15 F(gument)-.18 E F4 -.15(ev)2.97 G F0 2.97(.W).15 G(hen)-2.97
E F4(pth_r)2.97 E(ead)-.37 E F0(\(3\))1.666 E 1.285
(suspends the current threads e)128 489.6 R -.15(xe)-.15 G 1.284
(cution it usually only uses the I/O e).15 F -.15(ve)-.25 G 1.284(nt on)
.15 F F4(fd)3.784 E F0 1.284(to a)3.784 F -.1(wa)-.15 G -.1(ke).1 G
3.784(.W).1 G 1.284(ith this)-4.184 F .604(function an)128 501.6 R 3.104
(yn)-.15 G .604(umber of e)-3.104 F .604(xtra e)-.15 F -.15(ve)-.25 G
.604(nts can be used to a).15 F -.1(wa)-.15 G .804 -.1(ke t).1 H .604
(he current thread \(remember that).1 F F4 -.15(ev)3.105 G F0(actu-)
3.255 E(ally is an e)128 513.6 Q -.15(ve)-.25 G(nt).15 E F4(ring)2.5 E
F0(\).)A(ssize_t)108 530.4 Q F1 -5.558(pp)2.5 G -3.328(tt)5.558 G -5.558
(hh)3.328 G -4.998(__)5.558 G 6.196 -4.438(rr ee)4.998 H -4.998(aa)4.438
G -5.558(dd)4.998 G -4.998(vv)5.558 G -4.998(__)4.998 G 6.226 -4.438
(ee v)4.998 H(v)-.56 E F0(\(int)A F4(fd)2.5 E F0 2.5(,c)C
(onst struct io)-2.5 E -.15(ve)-.15 G 2.5(c*).15 G F4(io)-2.5 E(vec)-.1
E F0 2.5(,i)C(nt)-2.5 E F4(io)2.5 E(vcnt)-.1 E F0 2.5(,p)C(th_e)-2.5 E
-.15(ve)-.25 G(nt_t).15 E F4 -.15(ev)2.5 G F0(\);).15 E 3.87
(This is equal to)128 542.4 R F4(pth_r)6.37 E(eadv)-.37 E F0 3.87
(\(3\) \(see belo)1.666 F 3.87(w\), b)-.25 F 3.869
(ut has an additional e)-.2 F -.15(ve)-.25 G 3.869(nt ar).15 F(gument)
-.18 E F4 -.15(ev)6.369 G F0 6.369(.W).15 G(hen)-6.369 E F4(pth_r)128
554.4 Q(eadv)-.37 E F0 .304(\(3\) suspends the current threads e)1.666 F
-.15(xe)-.15 G .305(cution it usually only uses the I/O e).15 F -.15(ve)
-.25 G .305(nt on).15 F F4(fd)2.805 E F0 .305(to a)2.805 F -.1(wa)-.15 G
-.1(ke).1 G(.).1 E -.4(Wi)128 566.4 S .291(th this function an).4 F
2.791(yn)-.15 G .291(umber of e)-2.791 F .291(xtra e)-.15 F -.15(ve)-.25
G .291(nts can be used to a).15 F -.1(wa)-.15 G .49 -.1(ke t).1 H .29
(he current thread \(remember that).1 F F4 -.15(ev)128 578.4 S F0
(actually is an e)2.65 E -.15(ve)-.25 G(nt).15 E F4(ring)2.5 E F0(\).)A
(ssize_t)108 595.2 Q F1 -5.558(pp)2.5 G -3.328(tt)5.558 G -5.558(hh)
3.328 G -4.998(__)5.558 G -7.218(ww)4.998 G -4.438(rr)7.218 G -2.778(ii)
4.438 G -3.328(tt)2.778 G -4.438(ee)3.328 G -4.998(__)4.438 G 6.226
-4.438(ee v)4.998 H(v)-.56 E F0(\(int)A F4(fd)2.5 E F0 2.5(,c)C(onst v)
-2.5 E(oid *)-.2 E F4 -.2(bu)C(f).2 E F0 2.5(,s)C(ize_t)-2.5 E F4
(nbytes)2.5 E F0 2.5(,p)C(th_e)-2.5 E -.15(ve)-.25 G(nt_t).15 E F4 -.15
(ev)2.5 G F0(\);).15 E .123(This is equal to)128 607.2 R F4(pth_write)
2.623 E F0 .123(\(3\) \(see belo)1.666 F .123(w\), b)-.25 F .123
(ut has an additional e)-.2 F -.15(ve)-.25 G .123(nt ar).15 F(gument)
-.18 E F4 -.15(ev)2.624 G F0 2.624(.W).15 G(hen)-2.624 E F4(pth_write)
2.624 E F0(\(3\))1.666 E 1.285(suspends the current threads e)128 619.2
R -.15(xe)-.15 G 1.284(cution it usually only uses the I/O e).15 F -.15
(ve)-.25 G 1.284(nt on).15 F F4(fd)3.784 E F0 1.284(to a)3.784 F -.1(wa)
-.15 G -.1(ke).1 G 3.784(.W).1 G 1.284(ith this)-4.184 F .604
(function an)128 631.2 R 3.104(yn)-.15 G .604(umber of e)-3.104 F .604
(xtra e)-.15 F -.15(ve)-.25 G .604(nts can be used to a).15 F -.1(wa)
-.15 G .804 -.1(ke t).1 H .604(he current thread \(remember that).1 F F4
-.15(ev)3.105 G F0(actu-)3.255 E(ally is an e)128 643.2 Q -.15(ve)-.25 G
(nt).15 E F4(ring)2.5 E F0(\).)A(ssize_t)108 660 Q F1 -5.558(pp)2.5 G
-3.328(tt)5.558 G -5.558(hh)3.328 G -4.998(__)5.558 G -7.218(ww)4.998 G
-4.438(rr)7.218 G -2.778(ii)4.438 G -3.328(tt)2.778 G 6.226 -4.438(ee v)
3.328 H(v_)-.56 E(_e)-4.998 E -.15(ev)-4.438 G(v)-4.848 E F0(\(int)A F4
(fd)2.5 E F0 2.5(,c)C(onst struct io)-2.5 E -.15(ve)-.15 G 2.5(c*).15 G
F4(io)-2.5 E(vec)-.1 E F0 2.5(,i)C(nt)-2.5 E F4(io)2.5 E(vcnt)-.1 E F0
2.5(,p)C(th_e)-2.5 E -.15(ve)-.25 G(nt_t).15 E F4 -.15(ev)2.5 G F0(\);)
.15 E 3.695(This is equal to)128 672 R F4(pth_write)6.195 E(v)-.15 E F0
3.695(\(3\) \(see belo)1.666 F 3.695(w\), b)-.25 F 3.694
(ut has an additional e)-.2 F -.15(ve)-.25 G 3.694(nt ar).15 F(gument)
-.18 E F4 -.15(ev)6.194 G F0 6.194(.W).15 G(hen)-6.194 E F4(pth_write)
128 684 Q(v)-.15 E F0 .151(\(3\) suspends the current threads e)1.666 F
-.15(xe)-.15 G .152(cution it usually only uses the I/O e).15 F -.15(ve)
-.25 G .152(nt on).15 F F4(fd)2.652 E F0 .152(to a)2.652 F -.1(wa)-.15 G
-.1(ke).1 G(.).1 E -.4(Wi)128 696 S .291(th this function an).4 F 2.791
(yn)-.15 G .291(umber of e)-2.791 F .291(xtra e)-.15 F -.15(ve)-.25 G
.291(nts can be used to a).15 F -.1(wa)-.15 G .49 -.1(ke t).1 H .29
(he current thread \(remember that).1 F F4 -.15(ev)128 708 S F0
(actually is an e)2.65 E -.15(ve)-.25 G(nt).15 E F4(ring)2.5 E F0(\).)A
139.425(10/Mar/2000 perl)72 768 R(5.005, patch 03)2.5 E(17)184.145 E EP
%%Page: 18 18
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/Times-Roman@0 SF(PTH-MANU)72 48 Q 78.275(AL\(1\) User)-.4 F
(Contrib)2.5 E(uted Perl Documentation)-.2 E(PTH-MANU)80.775 E(AL\(1\))
-.4 E/F1 10/Times-Bold@0 SF -5.558(SS)108 84 S -3.328(tt)5.558 G -4.998
(aa)3.328 G -5.558(nn)4.998 G -5.558(dd)5.558 G -4.998(aa)5.558 G -4.438
(rr)4.998 G -5.558(dd)4.438 G/F2 9/Times-Bold@0 SF -5.497(PP)8.058 G -7
(OO)5.497 G -5.002(SS)7 G -3.499(II)5.002 G -6.496(XX)3.499 G F1 -7.218
(RR)8.996 G -4.438(ee)7.218 G -5.558(pp)4.438 G -2.778(ll)5.558 G -4.998
(aa)2.778 G -4.438(cc)4.998 G -4.438(ee)4.438 G -8.328(mm)4.438 G -4.438
(ee)8.328 G -5.558(nn)4.438 G -3.328(tt)5.558 G F2 -6.496(AA)5.828 G
-5.497(PP)6.496 G -3.499(II)5.497 G F0 .704(The follo)108 100.8 R .704
(wing functions are standard replacements functions for the)-.25 F/F3 9
/Times-Roman@0 SF .954(POSIX API)3.204 F F0 5.705(.T)C .705(he dif)
-5.705 F .705(ference is mainly)-.25 F .108(that the)108 112.8 R 2.608
(ys)-.15 G .108(uspend the current thread only instead of the whole pro\
cess in case the \214le descriptors will block.)-2.608 F(int)108 129.6 Q
F1 -5.558(pp)2.5 G -3.328(tt)5.558 G -5.558(hh)3.328 G -4.998(__)5.558 G
-5.558(uu)4.998 G -3.888(ss)5.558 G -2.778(ll)3.888 G -4.438(ee)2.778 G
-4.438(ee)4.438 G -5.558(pp)4.438 G F0(\(unsigned int)5.558 E/F4 10
/Times-Italic@0 SF(usec)2.5 E F0(\);)A .128(This is a v)128 141.6 R .128
(ariant of the 4.3BSD)-.25 F F4(usleep)2.628 E F0 .129
(\(3\) function. It suspends the current threads e)1.666 F -.15(xe)-.15
G .129(cution until).15 F F4(usec)2.629 E F0 .436(microsecond \(=)128
153.6 R F4(usec)2.936 E F0 2.936(*1)2.936 G .436
(/1000000 sec\) elapsed.)-2.936 F .435
(The thread is guaranteed to not a)5.435 F -.1(wa)-.15 G -.1(ke).1 G
.435(ned before this).1 F .284(time, b)128 165.6 R .284
(ut because of the non-preempti)-.2 F .584 -.15(ve s)-.25 H .285
(cheduling nature of).15 F F1 -6.108(PP)2.785 G -3.328(tt)6.108 G -5.558
(hh)3.328 G F0 2.785(,i)5.558 G 2.785(tc)-2.785 G .285(an be a)-2.785 F
-.1(wa)-.15 G -.1(ke).1 G .285(ned later).1 F 2.785(,o)-.4 G 2.785(fc)
-2.785 G(ourse.)-2.785 E 1.954(The dif)128 177.6 R 1.954
(ference between)-.25 F F4(usleep)4.454 E F0 1.954(\(3\) and)1.666 F F4
(pth_usleep)4.454 E F0 1.953(\(3\) is that that)1.666 F F4(pth_usleep)
4.453 E F0 1.953(\(3\) suspends only the)1.666 F -.15(exe)128 189.6 S
(cution of the current thread and not the whole process.).15 E
(unsigned int)108 206.4 Q F1 -5.558(pp)2.5 G -3.328(tt)5.558 G -5.558
(hh)3.328 G -4.998(__)5.558 G -3.888(ss)4.998 G -2.778(ll)3.888 G -4.438
(ee)2.778 G -4.438(ee)4.438 G -5.558(pp)4.438 G F0(\(unsigned int)5.558
E F4(sec)2.5 E F0(\);)A 1.125(This is a v)128 218.4 R 1.125
(ariant of the)-.25 F F3(POSIX)3.625 E F4(sleep)3.625 E F0 1.125
(\(3\) function. It suspends the current threads e)1.666 F -.15(xe)-.15
G 1.126(cution until).15 F F4(sec)3.626 E F0 .669(seconds elapsed.)128
230.4 R .669(The thread is guaranteed to not a)5.669 F -.1(wa)-.15 G -.1
(ke).1 G .669(ned before this time, b).1 F .668(ut because of the non-)
-.2 F(preempti)128 242.4 Q 1.821 -.15(ve s)-.25 H 1.521
(cheduling nature of).15 F F1 -6.108(PP)4.021 G -3.328(tt)6.108 G -5.558
(hh)3.328 G F0 4.021(,i)5.558 G 4.021(tc)-4.021 G 1.521(an be a)-4.021 F
-.1(wa)-.15 G -.1(ke).1 G 1.521(ned later).1 F 4.021(,o)-.4 G 4.021(fc)
-4.021 G 4.021(ourse. The)-4.021 F(dif)4.021 E 1.521(ference between)
-.25 F F4(sleep)128 254.4 Q F0 .726(\(3\) and)1.666 F F4(pth_sleep)3.226
E F0 .725(\(3\) is that that)1.666 F F4(pth_sleep)3.225 E F0 .725
(\(3\) suspends only the e)1.666 F -.15(xe)-.15 G .725
(cution of the current thread).15 F(and not the whole process.)128 266.4
Q(pid_t)108 283.2 Q F1 -5.558(pp)2.5 G -3.328(tt)5.558 G -5.558(hh)3.328
G -4.998(__)5.558 G -7.218(ww)4.998 G -4.998(aa)7.218 G -2.778(ii)4.998
G -3.328(tt)2.778 G -5.558(pp)3.328 G -2.778(ii)5.558 G -5.558(dd)2.778
G F0(\(pid_t)5.558 E F4(pid)2.5 E F0 2.5(,i)C(nt *)-2.5 E F4(status)A F0
2.5(,i)C(nt)-2.5 E F4(options)2.5 E F0(\);)A .394(This is a v)128 295.2
R .394(ariant of the)-.25 F F3(POSIX)2.894 E F4(waitpid)2.894 E F0 .395
(\(2\) function. It suspends the current threads e)1.666 F -.15(xe)-.15
G .395(cution until).15 F F4(sta-)2.895 E(tus)128 307.2 Q F0 .159
(information is a)2.659 F -.25(va)-.2 G .159
(ilable for a terminated child process).25 F F4(pid)2.659 E F0 5.159(.T)
C .159(he dif)-5.159 F .159(ference between)-.25 F F4(waitpid)2.658 E F0
.158(\(2\) and)1.666 F F4(pth_waitpid)128 319.2 Q F0 .88
(\(3\) is that that)1.666 F F4(pth_waitpid)3.38 E F0 .88
(\(3\) suspends only the e)1.666 F -.15(xe)-.15 G .881
(cution of the current thread and not).15 F(the whole process.)128 331.2
Q -.15(Fo)5 G 2.5(rm).15 G(ore details about the ar)-2.5 E
(guments and return code semantics see)-.18 E F4(waitpid)2.5 E F0
(\(2\).)1.666 E(int)108 348 Q F1 -5.558(pp)2.5 G -3.328(tt)5.558 G
-5.558(hh)3.328 G -4.998(__)5.558 G -3.888(ss)4.998 G -2.778(ii)3.888 G
-4.998(gg)2.778 G -8.328(mm)4.998 G -4.998(aa)8.328 G -3.888(ss)4.998 G
-5.558(kk)3.888 G F0(\(int)5.558 E F4(how)2.5 E F0 2.5(,c)C
(onst sigset_t *)-2.5 E F4(set)A F0 2.5(,s)C(igset_t *)-2.5 E F4(oset)A
F0(\))A .918(This is the)128 360 R F1 -6.108(PP)3.417 G -3.328(tt)6.108
G -5.558(hh)3.328 G F0 .917(thread-related equi)8.975 F -.25(va)-.25 G
.917(lent of).25 F F3(POSIX)3.417 E F4(sigpr)3.417 E(ocmask)-.45 E F0
.917(\(2\) respecti)1.666 F -.15(ve)-.25 G(ly).15 E F4(pthr)3.417 E
(ead_sigmask)-.37 E F0(\(3\).)1.666 E 1.144(The ar)128 372 R(guments)
-.18 E F4(how)3.644 E F0(,)A F4(set)3.644 E F0(and)3.644 E F4(oset)3.644
E F0 1.144(directly relate to)3.644 F F4(sigpr)3.644 E(ocmask)-.45 E F0
1.144(\(2\), because)1.666 F F1 -6.108(PP)3.644 G -3.328(tt)6.108 G
-5.558(hh)3.328 G F0 1.145(internally just uses)9.202 F F4(sigpr)128 384
Q(ocmask)-.45 E F0 1.005(\(2\) here. So alternati)1.666 F -.15(ve)-.25 G
1.005(ly you can also directly call).15 F F4(sigpr)3.505 E(ocmask)-.45 E
F0 1.005(\(2\), b)1.666 F 1.004(ut for consistenc)-.2 F(y)-.15 E
(reasons you should use this function)128 396 Q F4(pth_sigmask)2.5 E F0
(\(3\).)1.666 E(int)108 412.8 Q F1 -5.558(pp)2.5 G -3.328(tt)5.558 G
-5.558(hh)3.328 G -4.998(__)5.558 G -3.888(ss)4.998 G -2.778(ii)3.888 G
-4.998(gg)2.778 G -7.218(ww)4.998 G -4.998(aa)7.218 G -2.778(ii)4.998 G
-3.328(tt)2.778 G F0(\(const sigset_t *)3.328 E F4(set)A F0 2.5(,i)C
(nt *)-2.5 E F4(sig)A F0(\);)A .377(This is a v)128 424.8 R .377
(ariant of the)-.25 F F3(POSIX)2.878 E F0(.1c)A F4(sigwait)2.878 E F0
.378(\(3\) function. It suspends the current threads e)1.666 F -.15(xe)
-.15 G .378(cution until a).15 F .428(signal in)128 436.8 R F4(set)2.928
E F0 .428(occurred and stores the signal number in)2.928 F F4(sig)2.928
E F0 2.928(.T)C .428(he important point is that the signal is not)-2.928
F(deli)128 448.8 Q -.15(ve)-.25 G .688(red to a signal handler).15 F
3.188(.I)-.55 G .688(nstead it')-3.188 F 3.188(sc)-.55 G .688
(aught by the scheduler only in order to a)-3.188 F -.1(wa)-.15 G .889
-.1(ke t).1 H(he).1 E F4(pth_sig-)3.189 E(wait\(\))128 460.8 Q F0 .078
(call. The trick and noticeable point here is that this w)2.578 F .077
(ay you get an asynchronous a)-.1 F -.1(wa)-.15 G .077(re applica-).1 F
.015(tion that is written completely synchronously)128 472.8 R 2.516(.W)
-.65 G .016(hen you think about the problem of)-2.516 F F4(async)2.516 E
(hr)-.15 E .016(onous safe)-.45 F F0
(functions you should recognize that this is a great bene\214t.)128
484.8 Q(int)108 501.6 Q F1 -5.558(pp)2.5 G -3.328(tt)5.558 G -5.558(hh)
3.328 G -4.998(__)5.558 G -4.438(cc)4.998 G -4.998(oo)4.438 G -5.558(nn)
4.998 G -5.558(nn)5.558 G -4.438(ee)5.558 G -4.438(cc)4.438 G -3.328(tt)
4.438 G F0(\(int)3.328 E F4(s)2.5 E F0 2.5(,c)C(onst struct sockaddr *)
-2.5 E F4(addr)A F0 2.5(,s)C(ocklen_t)-2.5 E F4(addrlen)2.5 E F0(\);)A
.33(This is a v)128 513.6 R .329(ariant of the 4.2BSD)-.25 F F4(connect)
2.829 E F0 .329(\(2\) function. It establishes a connection on a sock)
1.666 F(et)-.1 E F4(s)2.829 E F0 .329(to tar)2.829 F(get)-.18 E 1.526
(speci\214ed in)128 525.6 R F4(addr)4.026 E F0(and)4.026 E F4(addrlen)
4.026 E F0 6.526(.T)C 1.526(he dif)-6.526 F 1.526(ference between)-.25 F
F4(connect)4.026 E F0 1.526(\(2\) and)1.666 F F4(pth_connect)4.026 E F0
1.526(\(3\) is that that)1.666 F F4(pth_connect)128 537.6 Q F0 .039
(\(3\) suspends only the e)1.666 F -.15(xe)-.15 G .039
(cution of the current thread and not the whole process.).15 F -.15(Fo)
5.039 G 2.538(rm).15 G(ore)-2.538 E(details about the ar)128 549.6 Q
(guments and return code semantics see)-.18 E F4(connect)2.5 E F0
(\(2\).)1.666 E(int)108 566.4 Q F1 -5.558(pp)2.5 G -3.328(tt)5.558 G
-5.558(hh)3.328 G -4.998(__)5.558 G -4.998(aa)4.998 G -4.438(cc)4.998 G
-4.438(cc)4.438 G -4.438(ee)4.438 G -5.558(pp)4.438 G -3.328(tt)5.558 G
F0(\(int)3.328 E F4(s)2.5 E F0 2.5(,s)C(truct sockaddr *)-2.5 E F4(addr)
A F0 2.5(,s)C(ocklen_t *)-2.5 E F4(addrlen)A F0(\);)A .69(This is a v)
128 578.4 R .691(ariant of the 4.2BSD)-.25 F F4(accept)3.191 E F0 .691
(\(2\) function. It accepts a connection on a sock)1.666 F .691(et by e)
-.1 F(xtracting)-.15 E .343(the \214rst connection request on the queue\
 of pending connections, creating a ne)128 590.4 R 2.842(ws)-.25 G(ock)
-2.842 E .342(et with the same)-.1 F .968(properties of)128 602.4 R F4
(s)3.468 E F0 .968(and allocates a ne)3.468 F 3.468<778c>-.25 G .968
(le descriptor for the sock)-3.468 F .968(et \(which is returned\).)-.1
F .969(The dif)5.969 F(ference)-.25 E(between)128 614.4 Q F4(accept)
3.731 E F0 1.231(\(2\) and)1.666 F F4(pth_accept)3.73 E F0 1.23
(\(3\) is that that)1.666 F F4(pth_accept)3.73 E F0 1.23
(\(3\) suspends only the e)1.666 F -.15(xe)-.15 G 1.23(cution of the).15
F 1.92(current thread and not the whole process.)128 626.4 R -.15(Fo)
6.92 G 4.42(rm).15 G 1.92(ore details about the ar)-4.42 F 1.92
(guments and return code)-.18 F(semantics see)128 638.4 Q F4(accept)2.5
E F0(\(2\).)1.666 E(int)108 655.2 Q F1 -5.558(pp)2.5 G -3.328(tt)5.558 G
-5.558(hh)3.328 G -4.998(__)5.558 G -3.888(ss)4.998 G -4.438(ee)3.888 G
-2.778(ll)4.438 G -4.438(ee)2.778 G -4.438(cc)4.438 G -3.328(tt)4.438 G
F0(\(int)3.328 E F4(nfd)2.5 E F0 2.5(,f)C(d_set *)-2.5 E F4(rfds)A F0
2.5(,f)C(d_set *)-2.5 E F4(wfds)A F0 2.5(,f)C(d_set *)-2.5 E F4(efds)A
F0 2.5(,s)C(truct time)-2.5 E -.25(va)-.25 G 2.5(l*).25 G F4(timeout)
-2.5 E F0(\);)A .033(This is a v)128 667.2 R .033(ariant of the 4.2BSD)
-.25 F F4(select)2.533 E F0 .033(\(2\) function.)1.666 F .033(It e)5.033
F .032(xamines the I/O descriptor sets whose addresses)-.15 F .147
(are passed in)128 679.2 R F4(rfds)2.647 E F0(,)A F4(wfds)2.647 E F0
2.647(,a)C(nd)-2.647 E F4(efds)2.647 E F0 .147(to see if some of their \
descriptors are ready for reading, are ready for)2.647 F .367
(writing, or ha)128 691.2 R .667 -.15(ve a)-.2 H 2.867(ne).15 G .367
(xceptional condition pending, respecti)-3.017 F -.15(ve)-.25 G(ly).15 E
5.367(.F)-.65 G .367(or more details about the ar)-5.517 F(guments)-.18
E(and return code semantics see)128 703.2 Q F4(select)2.5 E F0(\(2\).)
1.666 E 139.425(10/Mar/2000 perl)72 768 R(5.005, patch 03)2.5 E(18)
184.145 E EP
%%Page: 19 19
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/Times-Roman@0 SF(PTH-MANU)72 48 Q 78.275(AL\(1\) User)-.4 F
(Contrib)2.5 E(uted Perl Documentation)-.2 E(PTH-MANU)80.775 E(AL\(1\))
-.4 E(int)108 84 Q/F1 10/Times-Bold@0 SF -5.558(pp)2.5 G -3.328(tt)5.558
G -5.558(hh)3.328 G -4.998(__)5.558 G -5.558(pp)4.998 G -4.998(oo)5.558
G -2.778(ll)4.998 G -2.778(ll)2.778 G F0(\(struct pollfd *)2.778 E/F2 10
/Times-Italic@0 SF(fds)A F0 2.5(,u)C(nsigned int)-2.5 E F2(nfd)2.5 E F0
2.5(,i)C(nt)-2.5 E F2(timeout)2.5 E F0(\);)A .399(This is a v)128 96 R
.399(ariant of the SysV)-.25 F F2(poll)2.899 E F0 .399
(\(2\) function. It e)1.666 F .399
(xamines the I/O descriptors which are passed in the)-.15 F(array)128
108 Q F2(fds)3.443 E F0 .942(to see if some of them are ready for readi\
ng, are ready for writing, or ha)3.443 F 1.242 -.15(ve a)-.2 H 3.442(ne)
.15 G(xceptional)-3.592 E .884(condition pending, respecti)128 120 R
-.15(ve)-.25 G(ly).15 E 3.384(.F)-.65 G .885
(or more details about the ar)-3.534 F .885
(guments and return code semantics see)-.18 F F2(poll)128 132 Q F0
(\(2\).)1.666 E(ssize_t)108 148.8 Q F1 -5.558(pp)2.5 G -3.328(tt)5.558 G
-5.558(hh)3.328 G -4.998(__)5.558 G 6.196 -4.438(rr ee)4.998 H -4.998
(aa)4.438 G -5.558(dd)4.998 G F0(\(int)5.558 E F2(fd)2.5 E F0 2.5(,v)C
(oid *)-2.7 E F2 -.2(bu)C(f).2 E F0 2.5(,s)C(ize_t)-2.5 E F2(nbytes)2.5
E F0(\);)A .128(This is a v)128 160.8 R .128(ariant of the)-.25 F/F3 9
/Times-Roman@0 SF(POSIX)2.628 E F2 -.37(re)2.628 G(ad).37 E F0 .128
(\(2\) function. It reads up to)1.666 F F2(nbytes)2.627 E F0 .127
(bytes into)2.627 F F2 -.2(bu)2.627 G(f).2 E F0 .127
(from \214le descriptor)2.627 F F2(fd)128 172.8 Q F0 6.078(.T)C 1.078
(he dif)-6.078 F 1.078(ference between)-.25 F F2 -.37(re)3.578 G(ad).37
E F0 1.078(\(2\) and)1.666 F F2(pth_r)3.579 E(ead)-.37 E F0 1.079
(\(2\) is that that)1.666 F F2(pth_r)3.579 E(ead)-.37 E F0 1.079
(\(2\) suspends e)1.666 F -.15(xe)-.15 G 1.079(cution of).15 F .862
(the current thread until the \214le descriptor is ready for reading. F)
128 184.8 R .862(or more details about the ar)-.15 F(guments)-.18 E
(and return code semantics see)128 196.8 Q F2 -.37(re)2.5 G(ad).37 E F0
(\(2\).)1.666 E(ssize_t)108 213.6 Q F1 -5.558(pp)2.5 G -3.328(tt)5.558 G
-5.558(hh)3.328 G -4.998(__)5.558 G 6.196 -4.438(rr ee)4.998 H -4.998
(aa)4.438 G -5.558(dd)4.998 G -4.998(vv)5.558 G F0(\(int)4.998 E F2(fd)
2.5 E F0 2.5(,c)C(onst struct io)-2.5 E -.15(ve)-.15 G 2.5(c*).15 G F2
(io)-2.5 E(vec)-.1 E F0 2.5(,i)C(nt)-2.5 E F2(io)2.5 E(vcnt)-.1 E F0
(\);)A 1.404(This is a v)128 225.6 R 1.404(ariant of the)-.25 F F3
(POSIX)3.904 E F2 -.37(re)3.904 G(adv).37 E F0 1.405
(\(2\) function. It reads data from \214le descriptor)1.666 F F2(fd)
3.905 E F0 1.405(into the \214rst)3.905 F F2(io)128 237.6 Q(vcnt)-.1 E
F0(ro)5.502 E 3.002(ws of the)-.25 F F2(io)5.502 E(v)-.1 E F0 -.15(ve)
5.501 G(ctor).15 E 8.001(.T)-.55 G 3.001(he dif)-8.001 F 3.001
(ference between)-.25 F F2 -.37(re)5.501 G(adv).37 E F0 3.001(\(2\) and)
1.666 F F2(pth_r)5.501 E(eadv)-.37 E F0 3.001(\(2\) is that that)1.666 F
F2(pth_r)128 249.6 Q(eadv)-.37 E F0 .156(\(2\) suspends e)1.666 F -.15
(xe)-.15 G .156(cution of the current thread until the \214le descripto\
r is ready for reading. F).15 F(or)-.15 E(more details about the ar)128
261.6 Q(guments and return code semantics see)-.18 E F2 -.37(re)2.5 G
(adv).37 E F0(\(2\).)1.666 E(ssize_t)108 278.4 Q F1 -5.558(pp)2.5 G
-3.328(tt)5.558 G -5.558(hh)3.328 G -4.998(__)5.558 G -7.218(ww)4.998 G
-4.438(rr)7.218 G -2.778(ii)4.438 G -3.328(tt)2.778 G -4.438(ee)3.328 G
F0(\(int)4.438 E F2(fd)2.5 E F0 2.5(,c)C(onst v)-2.5 E(oid *)-.2 E F2
-.2(bu)C(f).2 E F0 2.5(,s)C(ize_t)-2.5 E F2(nbytes)2.5 E F0(\);)A .793
(This is a v)128 290.4 R .793(ariant of the)-.25 F F3(POSIX)3.293 E F2
(write)3.293 E F0 .792(\(2\) function. It writes)1.666 F F2(nbytes)3.292
E F0 .792(bytes from)3.292 F F2 -.2(bu)3.292 G(f).2 E F0 .792
(to \214le descriptor)3.292 F F2(fd)3.292 E F0(.)A .521(The dif)128
302.4 R .521(ference between)-.25 F F2(write)3.021 E F0 .521(\(2\) and)
1.666 F F2(pth_write)3.022 E F0 .522(\(2\) is that that)1.666 F F2
(pth_write)3.022 E F0 .522(\(2\) suspends e)1.666 F -.15(xe)-.15 G .522
(cution of the).15 F .636
(current thread until the \214le descriptor is ready for writing.)128
314.4 R -.15(Fo)5.636 G 3.135(rm).15 G .635(ore details about the ar)
-3.135 F .635(guments and)-.18 F(return code semantics see)128 326.4 Q
F2(write)2.5 E F0(\(2\).)1.666 E(ssize_t)108 343.2 Q F1 -5.558(pp)2.5 G
-3.328(tt)5.558 G -5.558(hh)3.328 G -4.998(__)5.558 G -7.218(ww)4.998 G
-4.438(rr)7.218 G -2.778(ii)4.438 G -3.328(tt)2.778 G 6.226 -4.438(ee v)
3.328 H(v)-.56 E F0(\(int)A F2(fd)2.5 E F0 2.5(,c)C(onst struct io)-2.5
E -.15(ve)-.15 G 2.5(c*).15 G F2(io)-2.5 E(vec)-.1 E F0 2.5(,i)C(nt)-2.5
E F2(io)2.5 E(vcnt)-.1 E F0(\);)A .022(This is a v)128 355.2 R .022
(ariant of the)-.25 F F3(POSIX)2.523 E F2(write)2.523 E(v)-.15 E F0 .023
(\(2\) function. It writes data to \214le descriptor)1.666 F F2(fd)2.523
E F0 .023(from the \214rst)2.523 F F2(io)2.523 E(vcnt)-.1 E F0(ro)128
367.2 Q .393(ws of the)-.25 F F2(io)2.893 E(v)-.1 E F0 -.15(ve)2.893 G
(ctor).15 E 5.393(.T)-.55 G .393(he dif)-5.393 F .393(ference between)
-.25 F F2(write)2.893 E(v)-.15 E F0 .393(\(2\) and)1.666 F F2(pth_write)
2.893 E(v)-.15 E F0 .393(\(2\) is that that)1.666 F F2(pth_write)2.893 E
(v)-.15 E F0(\(2\))1.666 E .418(suspends e)128 379.2 R -.15(xe)-.15 G
.418(cution of the current thread until the \214le descriptor is ready \
for reading. F).15 F .419(or more details)-.15 F(about the ar)128 391.2
Q(guments and return code semantics see)-.18 E F2(write)2.5 E(v)-.15 E
F0(\(2\).)1.666 E(ssize_t)108 408 Q F1 -5.558(pp)2.5 G -3.328(tt)5.558 G
-5.558(hh)3.328 G -4.998(__)5.558 G -5.558(pp)4.998 G 6.196 -4.438
(rr ee)5.558 H -4.998(aa)4.438 G -5.558(dd)4.998 G F0(\(int)5.558 E F2
(fd)2.5 E F0 2.5(,v)C(oid *)-2.7 E F2 -.2(bu)C(f).2 E F0 2.5(,s)C(ize_t)
-2.5 E F2(nbytes)2.5 E F0 2.5(,o)C -.25(ff)-2.5 G(_t).25 E F2(of)2.5 E
(fset)-.18 E F0(\);)A 1.046(This is a v)128 420 R 1.046(ariant of the)
-.25 F F3(POSIX)3.546 E F2(pr)3.546 E(ead)-.37 E F0 1.046
(\(3\) function.)1.666 F 1.045(It performs the same action as a re)6.046
F(gular)-.15 E F2 -.37(re)3.545 G(ad).37 E F0(\(2\),)1.666 E -.15(ex)128
432 S .699(cept that it reads from a gi).15 F -.15(ve)-.25 G 3.199(np)
.15 G .699(osition in the \214le without changing the \214le pointer)
-3.199 F 5.699(.T)-.55 G .699(he \214rst three)-5.699 F(ar)128 444 Q
.127(guments are the same as for)-.18 F F2(pth_r)2.627 E(ead)-.37 E F0
.127(\(3\) with the addition of a fourth ar)1.666 F(gument)-.18 E F2(of)
2.626 E(fset)-.18 E F0 .126(for the desired)2.626 F
(position inside the \214le.)128 456 Q(ssize_t)108 472.8 Q F1 -5.558(pp)
2.5 G -3.328(tt)5.558 G -5.558(hh)3.328 G -4.998(__)5.558 G -5.558(pp)
4.998 G -7.218(ww)5.558 G -4.438(rr)7.218 G -2.778(ii)4.438 G -3.328(tt)
2.778 G -4.438(ee)3.328 G F0(\(int)4.438 E F2(fd)2.5 E F0 2.5(,c)C
(onst v)-2.5 E(oid *)-.2 E F2 -.2(bu)C(f).2 E F0 2.5(,s)C(ize_t)-2.5 E
F2(nbytes)2.5 E F0 2.5(,o)C -.25(ff)-2.5 G(_t).25 E F2(of)2.5 E(fset)
-.18 E F0(\);)A .739(This is a v)128 484.8 R .74(ariant of the)-.25 F F3
(POSIX)3.24 E F2(pwrite)3.24 E F0 .74(\(3\) function.)1.666 F .74
(It performs the same action as a re)5.74 F(gular)-.15 E F2(write)3.24 E
F0(\(2\),)1.666 E -.15(ex)128 496.8 S 1.3(cept that it writes to a gi)
.15 F -.15(ve)-.25 G 3.8(np).15 G 1.3
(osition in the \214le without changing the \214le pointer)-3.8 F 3.8
(.T)-.55 G 1.3(he \214rst three)-3.8 F(ar)128 508.8 Q 1.933
(guments are the same as for)-.18 F F2(pth_write)4.433 E F0 1.933
(\(3\) with the addition of a fourth ar)1.666 F(gument)-.18 E F2(of)
4.434 E(fset)-.18 E F0 1.934(for the)4.434 F
(desired position inside the \214le.)128 520.8 Q/F4 9/Times-Bold@0 SF
-6.001(EE)72 537.6 S -6.496(XX)6.001 G -6.496(AA)6.496 G -8.494(MM)6.496
G -5.497(PP)8.494 G -6.001(LL)5.497 G -6.001(EE)6.001 G F0 .496
(The follo)108 549.6 R .496(wing e)-.25 F .496(xample is a useless serv)
-.15 F .495
(er which does nothing more than listening on TCP port 12345 and)-.15 F
.198(displaying the current time to the sock)108 561.6 R .198
(et when a connection w)-.1 F .198(as established. F)-.1 F .198
(or each incoming connection)-.15 F 3.247(at)108 573.6 S .747
(hread is spa)-3.247 F .747(wned. Additionally)-.15 F 3.247(,t)-.65 G
3.247(os)-3.247 G .746(ee more multithreading, a useless tick)-3.247 F
.746(er thread runs simultaneously)-.1 F .193
(which outputs the current time to)108 585.6 R/F5 10/Courier@0 SF
(stderr)2.693 E F0 -2.15 -.25(ev e)2.693 H .194(ry 5 seconds. The e).25
F .194(xample contains)-.15 F F2(no)2.694 E F0 .194
(error checking and is)2.694 F F2(only)108 597.6 Q F0(intended to sho)
2.5 E 2.5(wy)-.25 G(ou the look and feel of)-2.5 E F1 -6.108(PP)2.5 G
-3.328(tt)6.108 G -5.558(hh)3.328 G F0(.)5.558 E 139.425
(10/Mar/2000 perl)72 768 R(5.005, patch 03)2.5 E(19)184.145 E EP
%%Page: 20 20
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/Times-Roman@0 SF(PTH-MANU)72 48 Q 78.275(AL\(1\) User)-.4 F
(Contrib)2.5 E(uted Perl Documentation)-.2 E(PTH-MANU)80.775 E(AL\(1\))
-.4 E/F1 10/Courier@0 SF(#include <stdio.h>)114 84 Q
(#include <stdlib.h>)114 96 Q(#include <errno.h>)114 108 Q
(#include <sys/types.h>)114 120 Q(#include <sys/socket.h>)114 132 Q
(#include <netinet/in.h>)114 144 Q(#include <arpa/inet.h>)114 156 Q
(#include <signal.h>)114 168 Q(#include <netdb.h>)114 180 Q
(#include <unistd.h>)114 192 Q(#include "pth.h")114 204 Q
(#define PORT 12345)114 228 Q
(/* the socket connection handler thread */)114 252 Q
(static void *handler\(void *_arg\))114 264 Q({)114 276 Q
(int fd = \(int\)_arg;)138 288 Q(time_t now;)138 300 Q(char *ct;)138 312
Q(now = time\(NULL\);)138 336 Q(ct = ctime\(&now\);)138 348 Q
(pth_write\(fd, ct, strlen\(ct\)\);)138 360 Q(close\(fd\);)138 372 Q
(return NULL;)138 384 Q(})114 396 Q(/* the stderr time ticker thread */)
114 420 Q(static void *ticker\(void *_arg\))114 432 Q({)114 444 Q
(time_t now;)138 456 Q(char *ct;)138 468 Q(float load;)138 480 Q
(for \(;;\) {)138 504 Q(pth_sleep\(5\);)162 516 Q(now = time\(NULL\);)
162 528 Q(ct = ctime\(&now\);)162 540 Q(ct[strlen\(ct\)-1] = '\\0';)162
552 Q(pth_ctrl\(PTH_CTRL_GETAVLOAD, &load\);)162 564 Q
(printf\("ticker: time: %s, average load: %.2f\\n", ct, load\);)162 576
Q(})138 588 Q(})114 600 Q F0 139.425(10/Mar/2000 perl)72 768 R
(5.005, patch 03)2.5 E(20)184.145 E EP
%%Page: 21 21
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/Times-Roman@0 SF(PTH-MANU)72 48 Q 78.275(AL\(1\) User)-.4 F
(Contrib)2.5 E(uted Perl Documentation)-.2 E(PTH-MANU)80.775 E(AL\(1\))
-.4 E/F1 10/Courier@0 SF(/* the main thread/procedure */)114 84 Q
(int main\(int argc, char *argv[]\))114 96 Q({)114 108 Q
(pth_attr_t attr;)138 120 Q(struct sockaddr_in sar;)138 132 Q
(struct protoent *pe;)138 144 Q(struct sockaddr_in peer_addr;)138 156 Q
(int peer_len;)138 168 Q(int sa, sw;)138 180 Q(int port;)138 192 Q
(pth_init\(\);)138 216 Q(signal\(SIGPIPE, SIG_IGN\);)138 228 Q
(attr = pth_attr_new\(\);)138 252 Q
(pth_attr_set\(attr, PTH_ATTR_NAME, "ticker"\);)138 264 Q
(pth_attr_set\(attr, PTH_ATTR_STACK_SIZE, 64*1024\);)138 276 Q
(pth_attr_set\(attr, PTH_ATTR_JOINABLE, FALSE\);)138 288 Q
(pth_spawn\(attr, ticker, NULL\);)138 300 Q
(pe = getprotobyname\("tcp"\);)138 324 Q
(sa = socket\(AF_INET, SOCK_STREAM, pe->p_proto\);)138 336 Q
(sar.sin_family = AF_INET;)138 348 Q(sar.sin_addr.s_addr = INADDR_ANY;)
138 360 Q(sar.sin_port = htons\(PORT\);)138 372 Q
(bind\(sa, \(struct sockaddr *\)&sar, sizeof\(struct sockaddr_in\)\);)
138 384 Q(listen\(sa, 10\);)138 396 Q
(pth_attr_set\(attr, PTH_ATTR_NAME, "handler"\);)138 420 Q(for \(;;\) {)
138 432 Q(peer_len = sizeof\(peer_addr\);)162 444 Q
(sw = pth_accept\(sa, \(struct sockaddr *\)&peer_addr, &peer_len\);)162
456 Q(pth_spawn\(attr, handler, \(void *\)sw\);)162 468 Q(})138 480 Q(})
114 492 Q/F2 9/Times-Bold@0 SF 9.662 -6.001(BB U)72 520.8 T(UI)-.495 E
(IL)-3.499 E(LD)-6.001 E 2.25(DE)-6.496 G(EN)-8.251 E(NV)-6.496 E(VI)
-6.496 E(IR)-3.499 E -.27(RO)-6.496 G(ON)-6.73 E(NM)-6.496 E(ME)-8.494 E
(EN)-6.001 E(NT)-6.496 E(TS)-6.001 E(S)-5.002 E F0 .708
(In this section we will discuss the canonical w)108 532.8 R .708
(ays to establish the b)-.1 F .708(uild en)-.2 F .708(vironment for a)
-.4 F/F3 10/Times-Bold@0 SF -6.108(PP)3.208 G -3.328(tt)6.108 G -5.558
(hh)3.328 G F0 .708(based pro-)8.766 F
(gram. The possibilities supported by)108 544.8 Q F3 -6.108(PP)2.5 G
-3.328(tt)6.108 G -5.558(hh)3.328 G F0(range from v)8.058 E
(ery simple en)-.15 E(vironments to rather comple)-.4 E 2.5(xo)-.15 G
(nes.)-2.5 E F3 -9.438(MM)108 567.6 S -4.998(aa)9.438 G -5.558(nn)4.998
G -5.558(uu)5.558 G -4.998(aa)5.558 G 5.556 -2.778(ll B)4.998 H(Bu)-3.89
E(ui)-5.558 E(il)-2.778 E(ld)-2.778 E 2.5(dE)-5.558 G(En)-9.168 E -.4
(nv)-5.558 G(vi)-4.598 E(ir)-2.778 E -.18(ro)-4.438 G(on)-4.818 E(nm)
-5.558 E(me)-8.328 E(en)-4.438 E(nt)-5.558 E 2.5(t\()-3.328 G(\(N)-5.828
E(No)-7.218 E -.1(ov)-4.998 G(vi)-4.898 E(ic)-2.778 E(ce)-4.438 E(e\))
-4.438 E(\))-3.328 E F0 .4(As a \214rst e)108 584.4 R .4
(xample, assume we ha)-.15 F .7 -.15(ve t)-.2 H .4(he abo).15 F .7 -.15
(ve t)-.15 H .4(est program staying in the source \214le).15 F F1(foo.c)
2.9 E F0 2.9(.T)C .4(hen we can)-2.9 F(create a v)108 596.4 Q
(ery simple b)-.15 E(uild en)-.2 E(vironment by just adding the follo)
-.4 E(wing)-.25 E F1(Makefile)2.5 E F0(:)A 139.425(10/Mar/2000 perl)72
768 R(5.005, patch 03)2.5 E(21)184.145 E EP
%%Page: 22 22
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/Times-Roman@0 SF(PTH-MANU)72 48 Q 78.275(AL\(1\) User)-.4 F
(Contrib)2.5 E(uted Perl Documentation)-.2 E(PTH-MANU)80.775 E(AL\(1\))
-.4 E/F1 10/Courier@0 SF 6($v)114 84 S 6(iM)-6 G(akefile)-6 E/F2 10
/Symbol SF<ef>114 96 Q F1 30(CC =)6 F(cc)6 E F2<ef>114 108 Q F1 6
(CFLAGS =)6 F(`pth-config --cflags`)6 E F2<ef>114 120 Q F1
(LDFLAGS = `pth-config --ldflags`)6 E F2<ef>114 132 Q F1 18(LIBS =)6 F
(`pth-config --libs`)6 E F2<ef>114 144 Q<ef>114 156 Q F1(all: foo)6 E F2
<ef>114 168 Q F1(foo: foo.o)6 E F2<ef>114 180 Q F1
($\(CC\) $\(LDFLAGS\) -o foo foo.o $\(LIBS\))30 E F2<ef>114 192 Q F1
(foo.o: foo.c)6 E F2<ef>114 204 Q F1($\(CC\) $\(CFLAGS\) -c foo.c)30 E
F2<ef>114 216 Q F1(clean:)6 E F2<ef>114 228 Q F1(rm -f foo foo.o)30 E F0
.183(This imports the necessary compiler and link)108 252 R .182
(er \215ags on-the-\215y from the)-.1 F/F3 10/Times-Bold@0 SF -6.108(PP)
2.682 G -3.328(tt)6.108 G -5.558(hh)3.328 G F0 .182
(installation via its)8.24 F F1(pth-con-)2.682 E(fig)108 264 Q F0
(program. This approach is straight-fore)2.5 E -.1(wa)-.25 G(rd and w).1
E(orks \214ne for small projects.)-.1 E F3 11.436 -7.218(AA u)108 286.8
T(ut)1.66 E(to)-3.328 E(oc)-4.998 E(co)-4.438 E(on)-4.998 E(nf)-5.558 E
2.5(fB)-3.328 G(Bu)-9.168 E(ui)-5.558 E(il)-2.778 E(ld)-2.778 E 2.5(dE)
-5.558 G(En)-9.168 E -.4(nv)-5.558 G(vi)-4.598 E(ir)-2.778 E -.18(ro)
-4.438 G(on)-4.818 E(nm)-5.558 E(me)-8.328 E(en)-4.438 E(nt)-5.558 E 2.5
(t\()-3.328 G(\(A)-5.828 E(Ad)-7.218 E(dv)-5.558 E -.1(va)-4.998 G(an)
-4.898 E(nc)-5.558 E(ce)-4.438 E(ed)-4.438 E(d\))-5.558 E(\))-3.328 E F0
.525(The pre)108 303.6 R .525(vious approach is simple b)-.25 F .525
(ut un\215e)-.2 F .526(xible. First, to speed up b)-.15 F .526
(uilding, it w)-.2 F .526(ould be nice to not e)-.1 F(xpand)-.15 E .022
(the compiler and link)108 315.6 R .022(er \215ags e)-.1 F -.15(ve)-.25
G .022(ry time the compiler is started. Second, it w).15 F .021
(ould be useful to also be able to)-.1 F -.2(bu)108 327.6 S .542(ild ag)
.2 F .542(ainst an uninstalled)-.05 F F3 -6.108(PP)3.042 G -3.328(tt)
6.108 G -5.558(hh)3.328 G F0 3.042(,t)5.558 G .542(hat is, ag)-3.042 F
.543(ainst a)-.05 F F3 -6.108(PP)3.043 G -3.328(tt)6.108 G -5.558(hh)
3.328 G F0 .543(source tree which w)8.601 F .543
(as just con\214gured and b)-.1 F .543(uilt, b)-.2 F(ut)-.2 E .171
(not installed. Third, it w)108 339.6 R .17(ould be also useful to allo)
-.1 F 2.67(wc)-.25 G .17(hecking of the)-2.67 F F3 -6.108(PP)2.67 G
-3.328(tt)6.108 G -5.558(hh)3.328 G F0 -.15(ve)8.228 G .17(rsion to mak)
.15 F 2.67(es)-.1 G .17(ure it is at least a)-2.67 F .936
(minimum required v)108 351.6 R 3.436(ersion. And)-.15 F(\214nally)3.436
E 3.436(,i)-.65 G 3.436(tw)-3.436 G .936(ould be also great to mak)
-3.536 F 3.436(es)-.1 G(ure)-3.436 E F3 -6.108(PP)3.436 G -3.328(tt)
6.108 G -5.558(hh)3.328 G F0 -.1(wo)8.994 G .937
(rks correctly by \214rst).1 F .096(performing some sanity compile and \
run-time checks. All this can be done if we use)108 363.6 R/F4 9
/Times-Roman@0 SF(GNU)2.595 E F3 -4.998(aa)2.595 G -5.558(uu)4.998 G
-3.328(tt)5.558 G -4.998(oo)3.328 G -4.438(cc)4.998 G -4.998(oo)4.438 G
-5.558(nn)4.998 G -3.328(ff)5.558 G F0 .095(and the)5.923 F F1
(AC_CHECK_PTH)108 375.6 Q F0(macro pro)2.5 E(vided by)-.15 E F3 -6.108
(PP)2.5 G -3.328(tt)6.108 G -5.558(hh)3.328 G F0 2.5(.F)5.558 G
(or this, we establish the follo)-2.65 E(wing three \214les:)-.25 E .284
(First we ag)108 392.4 R .285(ain need the)-.05 F F1(Makefile)2.785 E F0
2.785(,b)C .285(ut this time it contains)-2.985 F F3 -4.998(aa)2.785 G
-5.558(uu)4.998 G -3.328(tt)5.558 G -4.998(oo)3.328 G -4.438(cc)4.998 G
-4.998(oo)4.438 G -5.558(nn)4.998 G -3.328(ff)5.558 G F0 .285
(placeholders and additional cleanup)6.113 F(tar)108 404.4 Q
(gets. And we create it under the name)-.18 E F1(Makefile.in)2.5 E F0
2.5(,b)C(ecause it is no)-2.5 E 2.5(wa)-.25 G 2.5(ni)-2.5 G
(nput \214le for)-2.5 E F3 -4.998(aa)2.5 G -5.558(uu)4.998 G -3.328(tt)
5.558 G -4.998(oo)3.328 G -4.438(cc)4.998 G -4.998(oo)4.438 G -5.558(nn)
4.998 G -3.328(ff)5.558 G F0(:)3.328 E F1 6($v)114 421.2 S 6(iM)-6 G
(akefile.in)-6 E F2<ef>114 433.2 Q F1 30(CC =)6 F(@CC@)6 E F2<ef>114
445.2 Q F1 6(CFLAGS =)6 F(@CFLAGS@)6 E F2<ef>114 457.2 Q F1
(LDFLAGS = @LDFLAGS@)6 E F2<ef>114 469.2 Q F1 18(LIBS =)6 F(@LIBS@)6 E
F2<ef>114 481.2 Q<ef>114 493.2 Q F1(all: foo)6 E F2<ef>114 505.2 Q F1
(foo: foo.o)6 E F2<ef>114 517.2 Q F1
($\(CC\) $\(LDFLAGS\) -o foo foo.o $\(LIBS\))30 E F2<ef>114 529.2 Q F1
(foo.o: foo.c)6 E F2<ef>114 541.2 Q F1($\(CC\) $\(CFLAGS\) -c foo.c)30 E
F2<ef>114 553.2 Q F1(clean:)6 E F2<ef>114 565.2 Q F1(rm -f foo foo.o)30
E F2<ef>114 577.2 Q F1(distclean:)6 E F2<ef>114 589.2 Q F1
(rm -f foo foo.o)30 E F2<ef>114 601.2 Q F1
(rm -f config.log config.status config.cache)30 E F2<ef>114 613.2 Q F1
(rm -f Makefile)30 E F0(Because)108 637.2 Q F3 -4.998(aa)2.558 G -5.558
(uu)4.998 G -3.328(tt)5.558 G -4.998(oo)3.328 G -4.438(cc)4.998 G -4.998
(oo)4.438 G -5.558(nn)4.998 G -3.328(ff)5.558 G F0 .057
(generates additional \214les, we added a canonical)5.886 F F1
(distclean)2.557 E F0(tar)2.557 E .057(get which cleanups this,)-.18 F
(too. Second, we write a \(minimalistic\))108 649.2 Q F3 -4.998(aa)2.5 G
-5.558(uu)4.998 G -3.328(tt)5.558 G -4.998(oo)3.328 G -4.438(cc)4.998 G
-4.998(oo)4.438 G -5.558(nn)4.998 G -3.328(ff)5.558 G F0
(script speci\214cation in a \214le)5.828 E F1(configure.in)2.5 E F0(:)A
F1 6($v)114 666 S 6(ic)-6 G(onfigure.in)-6 E F2<ef>114 678 Q F1
(AC_INIT\(Makefile.in\))6 E F2<ef>114 690 Q F1(AC_CHECK_PTH\(1.3.0\))6 E
F2<ef>114 702 Q F1(AC_OUTPUT\(Makefile\))6 E F0 2.843(Then we let)108
726 R F3 -4.998(aa)5.343 G -5.558(uu)4.998 G -3.328(tt)5.558 G -4.998
(oo)3.328 G -4.438(cc)4.998 G -4.998(oo)4.438 G -5.558(nn)4.998 G -3.328
(ff)5.558 G F0 -.55('s)3.328 G F1(aclocal)5.893 E F0 2.844
(program generate for us an)5.344 F F1(aclocal.m4)5.344 E F0 2.844
(\214le containing)5.344 F F3 -6.108(PP)5.344 G -3.328(tt)6.108 G -5.558
(hh)3.328 G F0 -.55('s)5.558 G 139.425(10/Mar/2000 perl)72 768 R
(5.005, patch 03)2.5 E(22)184.145 E EP
%%Page: 23 23
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/Times-Roman@0 SF(PTH-MANU)72 48 Q 78.275(AL\(1\) User)-.4 F
(Contrib)2.5 E(uted Perl Documentation)-.2 E(PTH-MANU)80.775 E(AL\(1\))
-.4 E/F1 10/Courier@0 SF(AC_CHECK_PTH)108 84 Q F0 .174
(macro. Then we generate the \214nal)2.674 F F1(configure)2.674 E F0
.173(script out of this)2.674 F F1(aclocal.m4)2.673 E F0 .173
(\214le and)2.673 F(the)108 96 Q F1(configure.in)2.5 E F0(\214le:)2.5 E
F1 6($a)114 112.8 S(clocal --acdir=`pth-config --acdir`)-6 E 6($a)114
124.8 S(utoconf)-6 E F0(After these steps, the w)108 148.8 Q
(orking directory should look similar to this:)-.1 E F1 6($l)114 165.6 S
6(s-)-6 G(l)-6 E 6(-rw-r--r-- 1)114 177.6 R 6(rse users)6 F(176 Nov)24 E
6(31)12 G(1:11 Makefile.in)-6 E 6(-rw-r--r-- 1)114 189.6 R 6
(rse users 15314)6 F 6(Nov 3)6 F(11:16 aclocal.m4)6 E 6(-rwxr-xr-x 1)114
201.6 R 6(rse users 52045)6 F 6(Nov 3)6 F(11:16 configure)6 E 6
(-rw-r--r-- 1)114 213.6 R 6(rse users)6 F(63 Nov)30 E 6(31)12 G
(1:11 configure.in)-6 E 6(-rw-r--r-- 1)114 225.6 R 6(rse users)6 F
(4227 Nov)18 E 6(31)12 G(1:11 foo.c)-6 E F0 1.21(If we no)108 249.6 R
3.71(wr)-.25 G(un)-3.71 E F1(configure)3.71 E F0 1.21(we get a correct)
3.71 F F1(Makefile)3.71 E F0 1.21(which immediately can be used to b)
3.71 F(uild)-.2 E F1(foo)3.71 E F0(\(assuming that)108 261.6 Q/F2 10
/Times-Bold@0 SF -6.108(PP)2.5 G -3.328(tt)6.108 G -5.558(hh)3.328 G F0
(is already installed some)8.058 E(where, so that)-.25 E F1(pth-config)
2.5 E F0(is in)2.5 E F1($PATH)2.5 E F0(\):)A F1 6($.)114 278.4 S
(/configure)-6 E(creating cache ./config.cache)114 290.4 Q
(checking for gcc... gcc)114 302.4 Q
(checking whether the C compiler \(gcc)114 314.4 Q 6(\)w)18 G
(orks... yes)-6 E(checking whether the C compiler \(gcc)114 326.4 Q 6
(\)i)18 G 6(sac)-6 G(ross-compiler... no)-6 E
(checking whether we are using GNU C... yes)114 338.4 Q
(checking whether gcc accepts -g... yes)114 350.4 Q
(checking how to run the C preprocessor... gcc -E)114 362.4 Q
(checking for GNU Pth... version 1.3.0, installed under /usr/local)114
374.4 Q(updating cache ./config.cache)114 386.4 Q
(creating ./config.status)114 398.4 Q(creating Makefile)114 410.4 Q
(rse@en1:/e/gnu/pth/ac)114 422.4 Q 6($m)114 434.4 S(ake)-6 E
(gcc -g -O2 -I/usr/local/include -c foo.c)114 446.4 Q
(gcc -L/usr/local/lib -o foo foo.o -lpth)114 458.4 Q F0(If)108 482.4 Q
F2 -6.108(PP)3.615 G -3.328(tt)6.108 G -5.558(hh)3.328 G F0 1.115
(is installed in non-standard locations or)9.173 F F1(pth-config)3.615 E
F0 1.115(is not in)3.615 F F1($PATH)3.615 E F0 3.614(,o)C 1.114
(ne just has to drop the)-3.614 F F1(configure)108 494.4 Q F0 .509
(script a note about the location by running)3.009 F F1(configure)3.009
E F0 .51(with the option)3.009 F F1(--with-pth=)3.01 E/F3 10
/Times-Italic@0 SF(dir)A F0(\(where)108 506.4 Q F3(dir)2.5 E F0
(is the ar)2.5 E(gument which w)-.18 E(as used with the)-.1 E F1
(--prefix)2.5 E F0(option when)2.5 E F2 -6.108(PP)2.5 G -3.328(tt)6.108
G -5.558(hh)3.328 G F0 -.1(wa)8.058 G 2.5(si).1 G(nstalled\).)-2.5 E F2
11.436 -7.218(AA u)108 529.2 T(ut)1.66 E(to)-3.328 E(oc)-4.998 E(co)
-4.438 E(on)-4.998 E(nf)-5.558 E 2.5(fB)-3.328 G(Bu)-9.168 E(ui)-5.558 E
(il)-2.778 E(ld)-2.778 E 2.5(dE)-5.558 G(En)-9.168 E -.4(nv)-5.558 G(vi)
-4.598 E(ir)-2.778 E -.18(ro)-4.438 G(on)-4.818 E(nm)-5.558 E(me)-8.328
E(en)-4.438 E(nt)-5.558 E 2.5(tw)-3.328 G(wi)-9.718 E(it)-2.778 E(th)
-3.328 E 2.5(hL)-5.558 G(Lo)-9.168 E(oc)-4.998 E(ca)-4.438 E(al)-4.998 E
2.5(lC)-2.778 G(Co)-9.718 E(op)-4.998 E(py)-5.558 E 2.5(yo)-4.998 G(of)
-7.498 E 2.5(fP)-3.328 G(Pt)-8.608 E(th)-3.328 E 2.5(h\()-5.558 G(\(E)
-5.828 E(Ex)-6.668 E(xp)-4.998 E(pe)-5.558 E(er)-4.438 E(rt)-4.438 E
(t\))-3.328 E(\))-3.328 E F0 .544(Finally let us assume the)108 546 R F1
(foo)3.044 E F0 .544(program stays under either a)3.044 F/F4 9
/Times-Italic@0 SF(GPL)3.043 E F0(or)3.043 E F4(LGPL)3.043 E F0(distrib)
3.043 E .543(ution license and we w)-.2 F(ant)-.1 E 1.168(to mak)108 558
R 3.668(ei)-.1 G 3.668(tas)-3.668 G 1.168
(tand-alone package for easier distrib)-3.668 F 1.168
(ution and installation.)-.2 F 1.168(That is, we don')6.168 F 3.669(tw)
-.18 G 1.169(ant that the)-3.769 F .547(end-user \214rst has to install)
108 570 R F2 -6.108(PP)3.047 G -3.328(tt)6.108 G -5.558(hh)3.328 G F0
.547(just to allo)8.605 F 3.047(wo)-.25 G(ur)-3.047 E F1(foo)3.047 E F0
.547(package to compile. F)3.047 F .546(or this, it is a con)-.15 F .546
(vinient prac-)-.4 F .752(tice to include the required libraries \(here)
108 582 R F2 -6.108(PP)3.252 G -3.328(tt)6.108 G -5.558(hh)3.328 G F0
3.252(\)i)5.558 G .752(nto the source tree of the package \(here)-3.252
F F1(foo)3.252 E F0(\).)A F2 -6.108(PP)5.753 G -3.328(tt)6.108 G -5.558
(hh)3.328 G F0(ships)8.811 E .656(with all necessary support to allo)108
594 R 3.155(wu)-.25 G 3.155(st)-3.155 G 3.155(oe)-3.155 G .655
(asily achie)-3.155 F .955 -.15(ve t)-.25 H .655(his approach. Say).15 F
3.155(,w)-.65 G 3.155(ew)-3.155 G(ant)-3.255 E F2 -6.108(PP)3.155 G
-3.328(tt)6.108 G -5.558(hh)3.328 G F0 .655(in a subdirectory)8.713 F
(named)108 606 Q F1(pth/)2.856 E F0 .356
(and this directory should be seamlessly inte)2.856 F .356
(grated into the con\214guration and b)-.15 F .356(uild process of)-.2 F
F1(foo)108 618 Q F0(.)A .883(First we ag)108 634.8 R .883
(ain start with the)-.05 F F1(Makefile.in)3.383 E F0 3.383(,b)C .883
(ut this time it is a more adv)-3.583 F .883(anced v)-.25 F .883
(ersion which supports)-.15 F(subdirectory mo)108 646.8 Q -.15(ve)-.15 G
(ment:).15 E 139.425(10/Mar/2000 perl)72 768 R(5.005, patch 03)2.5 E(23)
184.145 E EP
%%Page: 24 24
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/Times-Roman@0 SF(PTH-MANU)72 48 Q 78.275(AL\(1\) User)-.4 F
(Contrib)2.5 E(uted Perl Documentation)-.2 E(PTH-MANU)80.775 E(AL\(1\))
-.4 E/F1 10/Courier@0 SF 6($v)114 84 S 6(iM)-6 G(akefile.in)-6 E/F2 10
/Symbol SF<ef>114 96 Q F1 30(CC =)6 F(@CC@)6 E F2<ef>114 108 Q F1 6
(CFLAGS =)6 F(@CFLAGS@)6 E F2<ef>114 120 Q F1(LDFLAGS = @LDFLAGS@)6 E F2
<ef>114 132 Q F1 18(LIBS =)6 F(@LIBS@)6 E F2<ef>114 144 Q<ef>114 156 Q
F1(SUBDIRS = pth)6 E F2<ef>114 168 Q<ef>114 180 Q F1
(all: subdirs_all foo)6 E F2<ef>114 192 Q<ef>114 204 Q F1(subdirs_all:)6
E F2<ef>114 216 Q F1(@$\(MAKE\) $\(MFLAGS\) subdirs TARGET=all)30 E F2
<ef>114 228 Q F1(subdirs_clean:)6 E F2<ef>114 240 Q F1
(@$\(MAKE\) $\(MFLAGS\) subdirs TARGET=clean)30 E F2<ef>114 252 Q F1
(subdirs_distclean:)6 E F2<ef>114 264 Q F1
(@$\(MAKE\) $\(MFLAGS\) subdirs TARGET=distclean)30 E F2<ef>114 276 Q F1
(subdirs:)6 E F2<ef>114 288 Q F1(@for subdir in $\(SUBDIRS\); do \\)30 E
F2<ef>114 300 Q F1(echo "===> $$subdir \($\(TARGET\)\)"; \\)54 E F2<ef>
114 312 Q F1(\(cd $$subdir; $\(MAKE\) $\(MFLAGS\) $\(TARGET\))54 E F2
<efef>6 E F1(exit 1\))6 E F2<efef>6 E F1(exit 1; \\)6 E F2<ef>114 324 Q
F1(echo "<=== $$subdir"; \\)54 E F2<ef>114 336 Q F1(done)30 E F2<ef>114
348 Q<ef>114 360 Q F1(foo: foo.o)6 E F2<ef>114 372 Q F1
($\(CC\) $\(LDFLAGS\) -o foo foo.o $\(LIBS\))30 E F2<ef>114 384 Q F1
(foo.o: foo.c)6 E F2<ef>114 396 Q F1($\(CC\) $\(CFLAGS\) -c foo.c)30 E
F2<ef>114 408 Q<ef>114 420 Q F1(clean: subdirs_clean)6 E F2<ef>114 432 Q
F1(rm -f foo foo.o)30 E F2<ef>114 444 Q F1(distclean: subdirs_distclean)
6 E F2<ef>114 456 Q F1(rm -f foo foo.o)30 E F2<ef>114 468 Q F1
(rm -f config.log config.status config.cache)30 E F2<ef>114 480 Q F1
(rm -f Makefile)30 E F0(Then we create a slightly dif)108 504 Q(ferent)
-.25 E/F3 10/Times-Bold@0 SF -4.998(aa)2.5 G -5.558(uu)4.998 G -3.328
(tt)5.558 G -4.998(oo)3.328 G -4.438(cc)4.998 G -4.998(oo)4.438 G -5.558
(nn)4.998 G -3.328(ff)5.558 G F0(script)5.828 E F1(configure.in)2.5 E F0
(:)A F1 6($v)114 520.8 S 6(ic)-6 G(onfigure.in)-6 E F2<ef>114 532.8 Q F1
(AC_INIT\(Makefile.in\))6 E F2<ef>114 544.8 Q F1
(AC_CONFIG_AUX_DIR\(pth\))6 E F2<ef>114 556.8 Q F1
(AC_CHECK_PTH\(1.3.0, subdir:pth --disable-tests\))6 E F2<ef>114 568.8 Q
F1(AC_CONFIG_SUBDIRS\(pth\))6 E F2<ef>114 580.8 Q F1
(AC_OUTPUT\(Makefile\))6 E F0 4.386(Here we pro)108 604.8 R 4.386
(vided a def)-.15 F 4.386(ault v)-.1 F 4.386(alue for)-.25 F F1(foo)
6.886 E F0 -.55('s)C F1(--with-pth)7.436 E F0 4.387
(option as the second ar)6.887 F 4.387(gument to)-.18 F F1(AC_CHECK_PTH)
108 616.8 Q F0 .214(which indicates that)2.714 F F3 -6.108(PP)2.713 G
-3.328(tt)6.108 G -5.558(hh)3.328 G F0 .213
(can be found in the subdirectory named)8.271 F F1(pth/)2.713 E F0 2.713
(.A)C .213(dditionally we)-2.713 F .362(speci\214ed that the)108 628.8 R
F1(--disable-tests)2.862 E F0 .362(option of)2.862 F F3 -6.108(PP)2.862
G -3.328(tt)6.108 G -5.558(hh)3.328 G F0 .363(should be passed to the)
8.42 F F1(pth/)2.863 E F0(subdirectory)2.863 E 2.863(,b)-.65 G(ecause)
-2.863 E .074(we need only to b)108 640.8 R .073(uild the)-.2 F F3
-6.108(PP)2.573 G -3.328(tt)6.108 G -5.558(hh)3.328 G F0 .073
(library itself. And we added a)8.131 F F1(AC_CONFIG_SUBDIR)2.573 E F0
.073(call which indicates to)2.573 F F3 -4.998(aa)108 652.8 S -5.558(uu)
4.998 G -3.328(tt)5.558 G -4.998(oo)3.328 G -4.438(cc)4.998 G -4.998(oo)
4.438 G -5.558(nn)4.998 G -3.328(ff)5.558 G F0 .736
(that it should con\214gure the)6.564 F F1(pth/)3.236 E F0(subdirectory)
3.236 E 3.236(,t)-.65 G .736(oo. The)-3.236 F F1(AC_CONFIG_AUX_DIR)3.236
E F0(directi)3.237 E 1.037 -.15(ve w)-.25 H(as).05 E 2.502
(added just to mak)108 664.8 R(e)-.1 E F3 -4.998(aa)5.002 G -5.558(uu)
4.998 G -3.328(tt)5.558 G -4.998(oo)3.328 G -4.438(cc)4.998 G -4.998(oo)
4.438 G -5.558(nn)4.998 G -3.328(ff)5.558 G F0(happ)8.33 E 3.802 -.65
(y, b)-.1 H 2.502(ecause it w).65 F 2.501(ants to \214nd a)-.1 F F1
(install.sh)5.001 E F0(or)5.001 E F1(shtool)5.001 E F0 2.501(script if)
5.001 F F1(AC_CONFIG_SUBDIRS)108 676.8 Q F0(is used.)2.5 E(No)108 693.6
Q 2.59(ww)-.25 G 2.59(el)-2.59 G(et)-2.59 E F3 -4.998(aa)2.591 G -5.558
(uu)4.998 G -3.328(tt)5.558 G -4.998(oo)3.328 G -4.438(cc)4.998 G -4.998
(oo)4.438 G -5.558(nn)4.998 G -3.328(ff)5.558 G F0 -.55('s)3.328 G F1
(aclocal)3.141 E F0 .091(program ag)2.591 F .091(ain generate for us an)
-.05 F F1(aclocal.m4)2.591 E F0 .091(\214le with the contents of)2.591 F
F3 -6.108(PP)108 705.6 S -3.328(tt)6.108 G -5.558(hh)3.328 G F0 -.55('s)
5.558 G F1(AC_CHECK_PTH)3.449 E F0 2.899(macro. Finally)2.899 F .399
(we generate the)2.899 F F1(configure)2.899 E F0 .399
(script out of this)2.899 F F1(aclocal.m4)2.898 E F0(\214le)2.898 E
(and the)108 717.6 Q F1(configure.in)2.5 E F0(\214le.)2.5 E 139.425
(10/Mar/2000 perl)72 768 R(5.005, patch 03)2.5 E(24)184.145 E EP
%%Page: 25 25
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/Times-Roman@0 SF(PTH-MANU)72 48 Q 78.275(AL\(1\) User)-.4 F
(Contrib)2.5 E(uted Perl Documentation)-.2 E(PTH-MANU)80.775 E(AL\(1\))
-.4 E/F1 10/Courier@0 SF 6($a)114 84 S
(clocal --acdir=`pth-config --acdir`)-6 E 6($a)114 96 S(utoconf)-6 E F0
(No)108 120 Q 3.428(ww)-.25 G 3.428(eh)-3.428 G -2.25 -.2(av e)-3.428 H
.928(to create the)3.628 F F1(pth/)3.428 E F0 .928
(subdirectory itself. F)3.428 F .928(or this, we e)-.15 F .928
(xtract the)-.15 F/F2 10/Times-Bold@0 SF -6.108(PP)3.428 G -3.328(tt)
6.108 G -5.558(hh)3.328 G F0(distrib)8.986 E .928(ution to the)-.2 F F1
(foo)3.428 E F0(source tree and just rename it to)108 132 Q F1(pth/)2.5
E F0(:)A F1 6($g)114 148.8 S(unzip <pth-X.Y.Z.tar.gz)-6 E/F3 10/Symbol
SF<ef>6 E F1(tar xvf -)6 E 6($m)114 160.8 S 6(vp)-6 G(th-X.Y.Z pth)-6 E
F0 .667(Optionally to reduce the size of the)108 184.8 R F1(pth/)3.167 E
F0(subdirectory)3.167 E 3.167(,w)-.65 G 3.167(ec)-3.167 G .667
(an strip do)-3.167 F .667(wn the)-.25 F F2 -6.108(PP)3.167 G -3.328(tt)
6.108 G -5.558(hh)3.328 G F0 .666(sources to a minimum)8.725 F(with the)
108 196.8 Q/F4 10/Times-Italic@0 SF(striptease)2.5 E F0(feature:)2.5 E
F1 6($c)114 213.6 S 6(dp)-6 G(th)-6 E 6($.)114 225.6 S(/configure)-6 E 6
($m)114 237.6 S(ake striptease)-6 E 6($c)114 249.6 S 6(d.)-6 G(.)-6 E F0
(After this the source tree of)108 273.6 Q F1(foo)2.5 E F0
(should look similar to this:)2.5 E F1 6($l)114 290.4 S 6(s-)-6 G(l)-6 E
6(-rw-r--r-- 1)114 302.4 R 6(rse users)6 F(709 Nov)24 E 6(31)12 G
(1:51 Makefile.in)-6 E 6(-rw-r--r-- 1)114 314.4 R 6(rse users 16431)6 F
6(Nov 3)6 F(12:20 aclocal.m4)6 E 6(-rwxr-xr-x 1)114 326.4 R 6
(rse users 57403)6 F 6(Nov 3)6 F(12:21 configure)6 E 6(-rw-r--r-- 1)114
338.4 R 6(rse users)6 F(129 Nov)24 E 6(31)12 G(2:21 configure.in)-6 E 6
(-rw-r--r-- 1)114 350.4 R 6(rse users)6 F(4227 Nov)18 E 6(31)12 G
(1:11 foo.c)-6 E 6(drwxr-xr-x 2)114 362.4 R 6(rse users)6 F(3584 Nov)18
E 6(31)12 G(2:36 pth)-6 E 6($l)114 374.4 S 6(s-)-6 G 6(lp)-6 G(th/)-6 E
6(-rw-rw-r-- 1)114 386.4 R 6(rse users)6 F(26344 Nov)18 E 6(12)12 G
(0:12 COPYING)-6 E 6(-rw-rw-r-- 1)114 398.4 R 6(rse users)6 F(2042 Nov)
24 E 6(31)12 G(2:36 Makefile.in)-6 E 6(-rw-rw-r-- 1)114 410.4 R 6
(rse users)6 F(3967 Nov)24 E 6(11)12 G(9:48 README)-6 E 6(-rw-rw-r-- 1)
114 422.4 R 6(rse users)6 F(340 Nov)30 E 6(31)12 G(2:36 README.1st)-6 E
6(-rw-rw-r-- 1)114 434.4 R 6(rse users)6 F
(28719 Oct 31 17:06 config.guess)18 E 6(-rw-rw-r-- 1)114 446.4 R 6
(rse users)6 F(24274 Aug 18 13:31 config.sub)18 E 6(-rwxrwxr-x 1)114
458.4 R 6(rse users 155141)6 F 6(Nov 3)6 F(12:36 configure)6 E 6
(-rw-rw-r-- 1)114 470.4 R 6(rse users 162021)6 F 6(Nov 3)6 F
(12:36 pth.c)6 E 6(-rw-rw-r-- 1)114 482.4 R 6(rse users)6 F(18687 Nov)18
E 6(21)12 G(5:19 pth.h.in)-6 E 6(-rw-rw-r-- 1)114 494.4 R 6(rse users)6
F(5251 Oct 31 12:46 pth_acdef.h.in)24 E 6(-rw-rw-r-- 1)114 506.4 R 6
(rse users)6 F(2120 Nov)24 E 6(11)12 G(1:27 pth_acmac.h.in)-6 E 6
(-rw-rw-r-- 1)114 518.4 R 6(rse users)6 F(2323 Nov)24 E 6(11)12 G
(1:27 pth_p.h.in)-6 E 6(-rw-rw-r-- 1)114 530.4 R 6(rse users)6 F
(946 Nov)30 E 6(11)12 G(1:27 pth_vers.c)-6 E 6(-rw-rw-r-- 1)114 542.4 R
6(rse users)6 F(26848 Nov)18 E 6(11)12 G(1:27 pthread.c)-6 E 6
(-rw-rw-r-- 1)114 554.4 R 6(rse users)6 F(18772 Nov)18 E 6(11)12 G
(1:27 pthread.h.in)-6 E 6(-rwxrwxr-x 1)114 566.4 R 6(rse users)6 F
(26188 Nov)18 E 6(31)12 G(2:36 shtool)-6 E F0(No)108 590.4 Q 2.5(ww)-.25
G(hen we con\214gure and b)-2.5 E(uild the)-.2 E F1(foo)2.5 E F0
(package it looks similar to this:)2.5 E 139.425(10/Mar/2000 perl)72 768
R(5.005, patch 03)2.5 E(25)184.145 E EP
%%Page: 26 26
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/Times-Roman@0 SF(PTH-MANU)72 48 Q 78.275(AL\(1\) User)-.4 F
(Contrib)2.5 E(uted Perl Documentation)-.2 E(PTH-MANU)80.775 E(AL\(1\))
-.4 E/F1 10/Courier@0 SF 6($.)114 84 S(/configure)-6 E
(creating cache ./config.cache)114 96 Q(checking for gcc... gcc)114 108
Q(checking whether the C compiler \(gcc)114 120 Q 6(\)w)18 G
(orks... yes)-6 E(checking whether the C compiler \(gcc)114 132 Q 6(\)i)
18 G 6(sac)-6 G(ross-compiler... no)-6 E
(checking whether we are using GNU C... yes)114 144 Q
(checking whether gcc accepts -g... yes)114 156 Q
(checking how to run the C preprocessor... gcc -E)114 168 Q
(checking for GNU Pth... version 1.3.0, local under pth)114 180 Q
(updating cache ./config.cache)114 192 Q(creating ./config.status)114
204 Q(creating Makefile)114 216 Q(configuring in pth)114 228 Q
(running /bin/sh ./configure)114 240 Q(--enable-subdir --enable-batch)12
E(--disable-tests --cache-file=.././config.cache --srcdir=.)114 252 Q
(loading cache .././config.cache)114 264 Q
(checking for gcc... \(cached\) gcc)114 276 Q
(checking whether the C compiler \(gcc)114 288 Q 6(\)w)18 G(orks... yes)
-6 E(checking whether the C compiler \(gcc)114 300 Q 6(\)i)18 G 6(sac)-6
G(ross-compiler... no)-6 E([...])114 312 Q 6($m)114 324 S(ake)-6 E
(===> pth \(all\))114 336 Q
(./shtool scpp -o pth_p.h -t pth_p.h.in -Dcpp -Cintern -M '==#==' pth.c)
114 348 Q(pth_vers.c)114 360 Q(gcc -c -I. -O2 -pipe pth.c)114 372 Q
(gcc -c -I. -O2 -pipe pth_vers.c)114 384 Q
(ar rc libpth.a pth.o pth_vers.o)114 396 Q(ranlib libpth.a)114 408 Q
(<=== pth)114 420 Q(gcc -g -O2 -Ipth -c foo.c)114 432 Q
(gcc -Lpth -o foo foo.o -lpth)114 444 Q F0 .22(As you can see,)108 468 R
/F2 10/Times-Bold@0 SF -4.998(aa)2.72 G -5.558(uu)4.998 G -3.328(tt)
5.558 G -4.998(oo)3.328 G -4.438(cc)4.998 G -4.998(oo)4.438 G -5.558(nn)
4.998 G -3.328(ff)5.558 G F0(no)6.048 E 2.72(wa)-.25 G .22
(utomatically con\214gures the local \(stripped do)-2.72 F .221
(wn\) cop)-.25 F 2.721(yo)-.1 G(f)-2.721 E F2 -6.108(PP)2.721 G -3.328
(tt)6.108 G -5.558(hh)3.328 G F0 .221(in the subdi-)8.279 F(rectory)108
480 Q F1(pth/)2.5 E F0(and the)2.5 E F1(Makefile)2.5 E F0
(automatically b)2.5 E(uilds the subdirectory)-.2 E 2.5(,t)-.65 G(oo.)
-2.5 E/F3 9/Times-Bold@0 SF -5.002(SS)72 496.8 S -6.496(YY)5.002 G
-5.002(SS)6.496 G -6.001(TT)5.002 G -6.001(EE)6.001 G 16.988 -8.494
(MM C)6.001 H(CA)1.998 E(AL)-6.496 E(LL)-6.001 E 2.25(LW)-6.001 G(WR)
-11.248 E(RA)-6.496 E(AP)-6.496 E(PP)-5.497 E(PE)-5.497 E(ER)-6.001 E
2.25(RF)-6.496 G -.81(FA)-7.747 G -.495(AC)-5.686 G(CI)-6.001 E(IL)
-3.499 E(LI)-6.001 E(IT)-3.499 E(TY)-6.001 E(Y)-6.496 E F2 -6.108(PP)108
508.8 S -3.328(tt)6.108 G -5.558(hh)3.328 G F0 1.904(per def)9.962 F
1.904(ault uses an e)-.1 F 1.903
(xplicit API, including the system calls. F)-.15 F 1.903
(or instance you')-.15 F 2.203 -.15(ve t)-.5 H 4.403(oe).15 G 1.903
(xplicitly use)-4.553 F/F4 10/Times-Italic@0 SF(pth_r)108 520.8 Q(ead)
-.37 E F0 .295(\(3\) when you need a thread-a)1.666 F -.1(wa)-.15 G(re)
.1 E F4 -.37(re)2.795 G(ad).37 E F0 .295(\(3\) and cannot e)1.666 F .295
(xpect that by just calling)-.15 F F4 -.37(re)2.795 G(ad).37 E F0 .296
(\(3\) only the)1.666 F 1.208(current thread is block)108 532.8 R 1.207
(ed. Instead with the standard)-.1 F F4 -.37(re)3.707 G(ad).37 E F0
1.207(\(3\) call the whole process will be block)1.666 F 1.207(ed. But)
-.1 F .153(because for some applications \(mainly those consisting of l\
ots of third-party stuf)108 544.8 R .154(f\) this can be incon)-.25 F
-.15(ve)-.4 G(nient.).15 E 1.548(Here it')108 556.8 R 4.048(sr)-.55 G
1.548(equired that a call to)-4.048 F F4 -.37(re)4.048 G(ad).37 E F0
1.548(\(3\) `magically' means)1.666 F F4(pth_r)4.048 E(ead)-.37 E F0
1.548(\(3\). The problem here is that such)1.666 F(magic)108 568.8 Q F2
-6.108(PP)2.616 G -3.328(tt)6.108 G -5.558(hh)3.328 G F0 .116
(cannot pro)8.174 F .116(vide per def)-.15 F .116(ault because it')-.1 F
2.616(sn)-.55 G .116(ot really portable.)-2.616 F(Ne)5.116 E -.15(ve)
-.25 G(rtheless).15 E F2 -6.108(PP)2.616 G -3.328(tt)6.108 G -5.558(hh)
3.328 G F0(pro)8.174 E .116(vides a tw)-.15 F 2.617(os)-.1 G(tep)-2.617
E(approach to solv)108 580.8 Q 2.5(et)-.15 G(his problem:)-2.5 E F2
-5.558(SS)108 603.6 S -4.998(oo)5.558 G -3.328(ff)4.998 G 6.656 -3.328
(tt S)3.328 H(Sy)-2.23 E(ys)-4.998 E(st)-3.888 E(te)-3.328 E(em)-4.438 E
2.5(mC)-8.328 G(Ca)-9.718 E(al)-4.998 E(ll)-2.778 E 2.5(lM)-2.778 G(Ma)
-11.938 E(ap)-4.998 E(pp)-5.558 E(pi)-5.558 E(in)-2.778 E(ng)-5.558 E(g)
-4.998 E F0 1.218(This v)108 620.4 R 1.218(ariant is a)-.25 F -.25(va)
-.2 G 1.218(ilable on all platforms and can).25 F F4(always)3.718 E F0
1.218(be enabled by b)3.718 F(uilding)-.2 E F2 -6.108(PP)3.717 G -3.328
(tt)6.108 G -5.558(hh)3.328 G F0(with)9.275 E F1(--enable-)3.717 E
(syscall-soft)108 632.4 Q F0 4.571(.T)C 2.071(his then triggers some)
-4.571 F F1(#define)4.571 E F0 3.171 -.55('s i)D 4.572(nt).55 G(he)
-4.572 E F1(pth.h)4.572 E F0 2.072(header which map for instance)4.572 F
F4 -.37(re)108 644.4 S(ad).37 E F0 .718(\(3\) to)1.666 F F4(pth_r)3.218
E(ead)-.37 E F0 .718(\(3\), etc.)1.666 F .718(Currently the follo)5.718
F .717(wing functions are mapped:)-.25 F F4(fork)3.217 E F0(\(2\),)1.666
E F4(sleep)3.217 E F0(\(3\),)1.666 E F4(sigwait)3.217 E F0(\(3\),)1.666
E F4(waitpid)108 656.4 Q F0(\(2\),)1.666 E F4(select)2.5 E F0(\(2\),)
1.666 E F4(poll)2.5 E F0(\(2\),)1.666 E F4(connect)2.5 E F0(\(2\),)1.666
E F4(accept)2.5 E F0(\(2\),)1.666 E F4 -.37(re)2.5 G(ad).37 E F0(\(2\),)
1.666 E F4(write)2.5 E F0(\(2\).)1.666 E(The dra)108 673.2 Q(wback of t\
his approach is just that really all source \214les of the application \
where these function calls)-.15 E .325(occur ha)108 685.2 R .625 -.15
(ve t)-.2 H 2.825(oi).15 G(nclude)-2.825 E F1(pth.h)2.825 E F0 2.825(,o)
C 2.825(fc)-2.825 G .325(ourse. And this also means that e)-2.825 F .325
(xisting libraries, including the v)-.15 F(endor')-.15 E(s)-.55 E F2
-3.888(ss)108 697.2 S -3.328(tt)3.888 G -5.558(dd)3.328 G -2.778(ii)
5.558 G -4.998(oo)2.778 G F0 2.5(,u)4.998 G(sually will still block the\
 whole process if one of its I/O functions block.)-2.5 E 139.425
(10/Mar/2000 perl)72 768 R(5.005, patch 03)2.5 E(26)184.145 E EP
%%Page: 27 27
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/Times-Roman@0 SF(PTH-MANU)72 48 Q 78.275(AL\(1\) User)-.4 F
(Contrib)2.5 E(uted Perl Documentation)-.2 E(PTH-MANU)80.775 E(AL\(1\))
-.4 E/F1 10/Times-Bold@0 SF -7.778(HH)108 84 S -4.998(aa)7.778 G -4.438
(rr)4.998 G 11.116 -5.558(dd SS)4.438 H -4.998(yy)5.558 G -3.888(ss)
4.998 G -3.328(tt)3.888 G -4.438(ee)3.328 G 16.656 -8.328(mm C)4.438 H
(Ca)1.11 E(al)-4.998 E(ll)-2.778 E 2.5(lM)-2.778 G(Ma)-11.938 E(ap)
-4.998 E(pp)-5.558 E(pi)-5.558 E(in)-2.778 E(ng)-5.558 E(g)-4.998 E F0
1.07(This v)108 100.8 R 1.07(ariant is a)-.25 F -.25(va)-.2 G 1.07
(ilable only on those platforms where the).25 F/F2 10/Times-Italic@0 SF
(syscall)3.57 E F0 1.07(\(2\) function e)1.666 F 1.071
(xists and there it can be)-.15 F 2.251(enabled by b)108 112.8 R
(uilding)-.2 E F1 -6.108(PP)4.751 G -3.328(tt)6.108 G -5.558(hh)3.328 G
F0(with)10.309 E/F3 10/Courier@0 SF(--enable-syscall-hard)4.75 E F0 4.75
(.T)C 2.25(his then b)-4.75 F 2.25(uilds wrapper functions \(for)-.2 F
(instances)108 124.8 Q F2 -.37(re)6.597 G(ad).37 E F0 4.097
(\(3\)\) into the)1.666 F F1 -6.108(PP)6.597 G -3.328(tt)6.108 G -5.558
(hh)3.328 G F0 4.097(library which internally call the real)12.155 F F1
-6.108(PP)6.597 G -3.328(tt)6.108 G -5.558(hh)3.328 G F0 4.098
(replacement functions)12.155 F(\()108 136.8 Q F2(pth_r)A(ead)-.37 E F0
4.547(\(3\)\). Currently)1.666 F 2.047(the follo)4.547 F 2.047
(wing functions are mapped:)-.25 F F2(fork)4.547 E F0(\(2\),)1.666 E F2
(sleep)4.547 E F0(\(3\),)1.666 E F2(waitpid)4.547 E F0(\(2\),)1.666 E F2
(select)4.547 E F0(\(2\),)1.666 E F2(poll)108 148.8 Q F0(\(2\),)1.666 E
F2(connect)2.5 E F0(\(2\),)1.666 E F2(accept)2.5 E F0(\(2\),)1.666 E F2
-.37(re)2.5 G(ad).37 E F0(\(2\),)1.666 E F2(write)2.5 E F0(\(2\).)1.666
E .632(The dra)108 165.6 R .633
(wback of this approach is that it depends on)-.15 F F2(syscall)3.133 E
F0 .633(\(2\) interf)1.666 F .633
(ace and prototype con\215icts can occur)-.1 F .444(while b)108 177.6 R
.444(uilding the wrapper functions due to dif)-.2 F .444
(ferent function signatures in the v)-.25 F .443
(endor C header \214les.)-.15 F(But)5.443 E .788(the adv)108 189.6 R
.788(antage of this mapping v)-.25 F .788(ariant is that the source \
\214les of the application where these function calls)-.25 F 2.374
(occur ha)108 201.6 R 2.674 -.15(ve n)-.2 H 2.374(ot to include).15 F F3
(pth.h)4.874 E F0 2.374(and that e)4.874 F 2.373
(xisting libraries, including the v)-.15 F(endor')-.15 E(s)-.55 E F1
-3.888(ss)4.873 G -3.328(tt)3.888 G -5.558(dd)3.328 G -2.778(ii)5.558 G
-4.998(oo)2.778 G F0 4.873(,m)4.998 G(agically)-4.873 E(become thread-a)
108 213.6 Q -.1(wa)-.15 G
(re \(and then block only the current thread\).).1 E/F4 9/Times-Bold@0
SF -3.499(II)72 230.4 S -8.494(MM)3.499 G -5.497(PP)8.494 G -6.001(LL)
5.497 G -6.001(EE)6.001 G -8.494(MM)6.001 G -6.001(EE)8.494 G -6.496(NN)
6.001 G 8.942 -6.001(TT A)6.496 H -.855(AT)-.495 G(TI)-5.146 E(IO)-3.499
E(ON)-7 E 2.25(NN)-6.496 G(NO)-8.746 E -.36(OT)-7 G(TE)-5.641 E(ES)
-6.001 E(S)-5.002 E F1 -6.108(PP)108 242.4 S -3.328(tt)6.108 G -5.558
(hh)3.328 G F0 1.285(is v)9.342 F 1.285(ery portable because it has onl\
y one part which perhaps has to be ported to ne)-.15 F 3.785(wp)-.25 G
1.285(latforms \(the)-3.785 F .434(machine conte)108 254.4 R .434
(xt initialization\). But it is written in a w)-.15 F .433(ay which w)
-.1 F .433(orks on mostly all Unix platforms which)-.1 F(support)108
266.4 Q F2(mak)2.939 E(econte)-.1 E(xt)-.2 E F0 .439(\(2\) or at least)
1.666 F F2(sigstac)2.939 E(k)-.2 E F0 .439(\(2\) or)1.666 F F2
(sigaltstac)2.939 E(k)-.2 E F0 .439(\(2\) [see)1.666 F F3(pth_mctx.c)
2.94 E F0 .44(for details]. An)2.94 F 2.94(yo)-.15 G(ther)-2.94 E F1
-6.108(PP)108 278.4 S -3.328(tt)6.108 G -5.558(hh)3.328 G F0
(code is POSIX and ANSI C based only)8.058 E(.)-.65 E 2.904(The conte)
108 295.2 R 2.903(xt switching is done via either SUSv2)-.15 F F2(mak)
5.403 E(econte)-.1 E(xt)-.2 E F0 2.903(\(2\) or POSIX mak)1.666 F
(e[sig])-.1 E F2(setjmp)A F0 2.903(\(3\) and)1.666 F([sig])108 307.2 Q
F2(longjmp)A F0 .298(\(3\). Here all CPU re)1.666 F .298(gisters, the p\
rogram counter and the stack pointer are switched. Addition-)-.15 F .654
(ally the)108 319.2 R F1 -6.108(PP)3.154 G -3.328(tt)6.108 G -5.558(hh)
3.328 G F0 .654(dispatcher switches also the global Unix)8.712 F F3
(errno)3.154 E F0 -.25(va)3.153 G .653(riable [see).25 F F3(pth_mctx.c)
3.153 E F0 .653(for details] and)3.153 F .072
(the signal mask \(either implicitly via)108 331.2 R F2(sigsetjmp)2.572
E F0 .073(\(3\) or in an emulated w)1.666 F .073(ay via e)-.1 F(xplicit)
-.15 E F2(setpr)2.573 E(ocmask)-.45 E F0 .073(\(2\) calls\).)1.666 F
(The)108 348 Q F1 -6.108(PP)3.079 G -3.328(tt)6.108 G -5.558(hh)3.328 G
F0 -2.15 -.25(ev e)8.637 H .579(nt manager is mainly).25 F F2(select)
3.078 E F0 .578(\(2\) and)1.666 F F2 -.1(ge)3.078 G(ttimeofday).1 E F0
.578(\(2\) based, i.e., the current time is fetched via)1.666 F F2 -.1
(ge)108 360 S(ttimeofday).1 E F0 .24(\(2\) once per conte)1.666 F .24
(xt switch for time calculations and all I/O e)-.15 F -.15(ve)-.25 G
.241(nts are implemented via a sin-).15 F(gle central)108 372 Q F2
(select)2.5 E F0(\(2\) call [see)1.666 E F3(pth_sched.c)2.5 E F0
(for details].)2.5 E .388(The thread control block management is done v\
ia virtual priority queues without an)108 388.8 R 2.888(ya)-.15 G .388
(dditional data struc-)-2.888 F .276(ture o)108 400.8 R -.15(ve)-.15 G
.276(rhead. F).15 F .276(or this, the queue linkage attrib)-.15 F .276
(utes are part of the thread control blocks and the queues are)-.2 F
3.75(actually implemented as rings with a selected element as the entry\
 point [see)108 412.8 R F3(pth_tcb.h)6.25 E F0(and)6.25 E F3
(pth_pqueue.c)108 424.8 Q F0(for details].)2.5 E .999
(Most time critical code sections \(especially the dispatcher and e)108
441.6 R -.15(ve)-.25 G 1(nt manager\) are speeded up by inlined).15 F
.503(functions \(implemented as ANSI C pre-processor macros\). Addition\
ally an)108 453.6 R 3.002(yd)-.15 G(eb)-3.002 E .502(ugging code is)-.2
F F2(completely)3.002 E F0(remo)108 465.6 Q -.15(ve)-.15 G 2.827(df).15
G .327(rom the source when not b)-2.827 F .328(uilt with)-.2 F F3
(-DPTH_DEBUG)2.828 E F0 .328(\(see Autoconf)2.828 F F3(--enable-debug)
2.828 E F0(option\),)2.828 E(i.e., not only stub functions remain [see)
108 477.6 Q F3(pth_debug.h)2.5 E F0(for details].)2.5 E F4 -6.496(RR)72
494.4 S -6.001(EE)6.496 G -5.002(SS)6.001 G -6.001(TT)5.002 G -6.496(RR)
6.001 G -3.499(II)6.496 G -6.496(CC)3.499 G -6.001(TT)6.496 G -3.499(II)
6.001 G -7(OO)3.499 G -6.496(NN)7 G -5.002(SS)6.496 G F1 -6.108(PP)108
506.4 S -3.328(tt)6.108 G -5.558(hh)3.328 G F0 1.722
(\(intentionally\) pro)9.78 F 1.722
(vides no replacements for non-thread-safe functions \(lik)-.15 F(e)-.1
E F2(strtok)4.221 E F0 1.721(\(3\) which uses a)1.666 F 1.18
(static internal b)108 518.4 R(uf)-.2 E 1.18
(fer\) or synchronous system functions \(lik)-.25 F(e)-.1 E F2 -.1(ge)
3.68 G(thostbyname).1 E F0 1.181(\(3\) which doesn')1.666 F 3.681(tp)
-.18 G(ro)-3.681 E 1.181(vide an)-.15 F .452
(asynchronous mode where it doesn')108 530.4 R 2.952(tb)-.18 G .452
(lock\). When you w)-2.952 F .452
(ant to use those functions in your serv)-.1 F .451(er applica-)-.15 F
.814(tion together with threads, you')108 542.4 R 1.114 -.15(ve t)-.5 H
3.314(oe).15 G .814(ither link the application ag)-3.314 F .814
(ainst special third-party libraries \(or for)-.05 F .591
(thread-safe/reentrant functions possibly ag)108 554.4 R .591
(ainst an e)-.05 F(xisting)-.15 E F3(libc_r)3.091 E F0 .591
(of the platform v)3.091 F .59(endor\). F)-.15 F .59(or an asyn-)-.15 F
.178(chronous DNS resolv)108 566.4 R .178(er library use the GNU)-.15 F
F1 -4.998(aa)2.678 G -5.558(dd)4.998 G -5.558(nn)5.558 G -3.888(ss)5.558
G F0 .178(package from Ian Jackson \( see http://www)6.566 F(.gnu.or)
-.65 E(g/soft-)-.18 E -.1(wa)108 578.4 S(re/adns/adns.html \).).1 E F4
-7(HH)72 595.2 S -3.499(II)7 G -5.002(SS)3.499 G 9.59 -6.001(TT O)5.002
H(OR)-.999 E -.315(RY)-6.496 G(Y)-6.181 E F0(The)108 607.2 Q F1 -6.108
(PP)3.697 G -3.328(tt)6.108 G -5.558(hh)3.328 G F0 1.197(library w)9.255
F 1.197(as designed and implemented between February and July 1999 by)
-.1 F F2 1.197(Ralf S. Eng)3.697 F(elsc)-.1 E(hall)-.15 E F0 1.18
(after e)108 619.2 R -.25(va)-.25 G 1.181
(luating numerous \(mostly preempti).25 F -.15(ve)-.25 G 3.681(\)t).15 G
1.181(hread libraries and after intensi)-3.681 F 1.481 -.15(ve d)-.25 H
1.181(iscussions with).15 F F2 -.8(Pe)3.681 G(ter).8 E(Simons)108 631.2
Q F0(,)A F2 .61(Martin Kr)3.11 F(aemer)-.15 E F0(,)A F2(Lar)3.11 E 3.11
(sE)-.1 G(ilebr)-3.11 E(ec)-.37 E(ht)-.15 E F0(and)3.109 E F2 .609
(Ralph Babel)3.109 F F0 .609(related to an e)3.109 F .609
(xperimental \(matrix based\) non-)-.15 F(preempti)108 643.2 Q .3 -.15
(ve C)-.25 H/F5 8/Times-Roman@0 SF -1(++)-.85 -1.2 O F0
(scheduler class written by)2.5 1.2 M F2 -.8(Pe)2.5 G(ter Simons).8 E F0
(.)A F1 -6.108(PP)108 660 S -3.328(tt)6.108 G -5.558(hh)3.328 G F0 -.1
(wa)8.279 G 2.721(st).1 G .221(hen implemented in order to combine the)
-2.721 F F2(non-pr)2.721 E(eemptive)-.37 E F0 .221
(approach of multithreading \(which pro-)2.721 F .244(vides better port\
ability and performance\) with an API similar to the popular one found \
in)108 672 R F1 -6.108(PP)2.743 G -3.328(tt)6.108 G -5.558(hh)3.328 G
6.196 -4.438(rr ee)5.558 H -4.998(aa)4.438 G -5.558(dd)4.998 G F0
(libraries)8.301 E(\(which pro)108 684 Q(vides easy programming\).)-.15
E .254(So the essential idea of the non-preempti)108 700.8 R .554 -.15
(ve a)-.25 H .254(pproach w).15 F .254(as tak)-.1 F .254(en o)-.1 F -.15
(ve)-.15 G 2.755(rf).15 G(rom)-2.755 E F2 -.8(Pe)2.755 G .255
(ter Simons).8 F F0(scheduler)2.755 E 2.755(.T)-.55 G .255(he pri-)
-2.755 F .105(ority based scheduling algorithm w)108 712.8 R .104
(as suggested by)-.1 F F2 .104(Martin Kr)2.604 F(aemer)-.15 E F0 2.604
(.S)C .104(ome code inspiration also came from)-2.604 F .28(an e)108
724.8 R .28(xperimental threading library \()-.15 F F1 -4.438(rr)C
-3.888(ss)4.438 G -3.328(tt)3.888 G -5.558(hh)3.328 G 6.196 -4.438
(rr ee)5.558 H -4.998(aa)4.438 G -5.558(dd)4.998 G -3.888(ss)5.558 G F0
2.78(\)w)3.888 G .28(ritten by)-2.78 F F2 .28(Robert S. Thau)2.78 F F0
.28(for an ancient internal test v)2.78 F(ersion)-.15 E 139.425
(10/Mar/2000 perl)72 768 R(5.005, patch 03)2.5 E(27)184.145 E EP
%%Page: 28 28
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/Times-Roman@0 SF(PTH-MANU)72 48 Q 78.275(AL\(1\) User)-.4 F
(Contrib)2.5 E(uted Perl Documentation)-.2 E(PTH-MANU)80.775 E(AL\(1\))
-.4 E .131(of the Apache webserv)108 84 R(er)-.15 E 5.131(.T)-.55 G .131
(he concept and API of message ports w)-5.131 F .131(as borro)-.1 F .13
(wed from Amig)-.25 F(aOS')-.05 E/F1 10/Times-Bold@0 SF -6.668(EE)2.63 G
-4.998(xx)6.668 G -4.438(ee)4.998 G -4.438(cc)4.438 G F0(sub-)7.068 E
.188(system. The concept and idea for the \215e)108 96 R .188(xible e)
-.15 F -.15(ve)-.25 G .188(nt mechanism came from).15 F/F2 10
/Times-Italic@0 SF -.8(Pa)2.689 G .189(ul V).8 F(ixie)-.74 E F0 -.55('s)
C F1 6.226 -4.438(ee v)3.239 H -.1(ve)-.56 G(en)-4.338 E(nt)-5.558 E(tl)
-3.328 E(li)-2.778 E(ib)-2.778 E(b)-5.558 E F0 .189(\(which can)2.689 F
(be found as a part of)108 108 Q F1 -6.668(BB)2.5 G -3.888(II)6.668 G
-7.218(NN)3.888 G -7.218(DD)7.218 G F0(v8\).)9.718 E/F3 9/Times-Bold@0
SF 9.662 -6.001(BB U)72 124.8 T(UG)-.495 E 2.25(GR)-7 G(RE)-8.746 E(EP)
-6.001 E(PO)-5.497 E(OR)-7 E -.36(RT)-6.496 G(TS)-5.641 E 2.25(SA)-5.002
G(AN)-8.746 E(ND)-6.496 E 2.25(DS)-6.496 G(SU)-7.252 E(UP)-6.496 E(PP)
-5.497 E(PO)-5.497 E(OR)-7 E -.36(RT)-6.496 G(T)-5.641 E F0 1.904
(If you think you ha)108 136.8 R 2.203 -.15(ve f)-.2 H 1.903(ound a b)
.15 F 1.903(ug in)-.2 F F1 -6.108(PP)4.403 G -3.328(tt)6.108 G -5.558
(hh)3.328 G F0 4.403(,y)5.558 G 1.903
(ou should send a report as complete as possible to)-4.403 F F2 -.2(bu)
4.403 G(g-).2 E(pth@gnu.or)108 148.8 Q(g)-.37 E F0 3.561(.I)C 3.561(fy)
-3.561 G 1.062(ou can, please try to \214x the problem and include a pa\
tch, made with `)-3.561 F/F4 10/Courier@0 SF 1.062(diff -u3)B F0 1.062
(', in)B .41(your report. Al)108 160.8 R -.1(wa)-.1 G .41(ys, at least,\
 include a reasonable amount of description in your report to allo).1 F
2.91(wt)-.25 G .41(he author)-2.91 F
(to deterministically reproduce the b)108 172.8 Q(ug.)-.2 E -.15(Fo)108
189.6 S 3.995(rf).15 G 1.496
(urther support you additionally can subscribe to the)-3.995 F F2
(pth-user)3.996 E(s@gnu.or)-.1 E(g)-.37 E F0 1.496
(mailing list by sending an)3.996 F 1.02(Email to)108 201.6 R F2
(pth-user)3.52 E(s-r)-.1 E(equest@gnu.or)-.37 E(g)-.37 E F0 1.02(with `)
3.52 F F4 1.02(subscribe pth-users)B F0 3.52('\()C 1.02(or `)-3.52 F F4
1.02(subscribe pth-users)B F2(addr)108 213.6 Q(ess)-.37 E F0 2.959('i)C
2.959(fy)-2.959 G .459(ou w)-2.959 F .459
(ant to subscribe from a particular Email)-.1 F F2(addr)2.959 E(ess)-.37
E F0 2.96(\)i)C 2.96(nt)-2.96 G .46(he body)-2.96 F 2.96(.T)-.65 G .46
(hen you can discuss your)-2.96 F .165(issues with other)108 225.6 R F1
-6.108(PP)2.665 G -3.328(tt)6.108 G -5.558(hh)3.328 G F0 .165
(users by sending messages to)8.223 F F2(pth-user)2.665 E(s@gnu.or)-.1 E
(g)-.37 E F0 2.665(.C)C .165(urrently \(as of January 2000\) you)-2.665
F(can reach about 50 Pth users on this mailing list.)108 237.6 Q F3
-5.002(SS)72 254.4 S -6.001(EE)5.002 G 12.002 -6.001(EE A)6.001 H(AL)
-.495 E(LS)-6.001 E(SO)-5.002 E(O)-7 E F1 -7.218(RR)108 266.4 S -4.438
(ee)7.218 G -2.778(ll)4.438 G -4.998(aa)2.778 G -3.328(tt)4.998 G -4.438
(ee)3.328 G 11.116 -5.558(dd W)4.438 H -.65(We)-4.44 G(eb)-3.788 E 2.5
(bL)-5.558 G(Lo)-9.168 E(oc)-4.998 E(ca)-4.438 E(at)-4.998 E(ti)-3.328 E
(io)-2.778 E(on)-4.998 E(ns)-5.558 E(s)-3.888 E F0 29.543
(`comp.programming.threads Ne)108 283.2 R 29.543(wsgroup Archi)-.25 F
-.15(ve)-.25 G 29.544(', http://www).15 F(.deja.com/topics_if.xp?)-.65 E
(search=topic&group=comp.programming.threads)108 295.2 Q 5.27
(`comp.programming.threads Frequently Ask)108 312 R 5.27
(ed Questions \(F)-.1 F 5.27(.A.Q.\)', http://www)-.8 F
(.lambdacs.com/ne)-.65 E(ws-)-.25 E(group/)108 324 Q/F5 9/Times-Roman@0
SF -1.413 -.666(FA Q)D F0(.html).666 E(`)108 340.8 Q F2(Multithr)A 5.977
(eading \255 De\214nitions and Guidelines)-.37 F F0 5.978
(', Numeric Quest Inc 1998; http://www)B(.numeric-)-.65 E
(quest.com/lang/multi-frame.html)108 352.8 Q(`)108 369.6 Q F2 3.992
(The Single)B/F6 9/Times-Italic@0 SF(UNIX)6.492 E F2 3.992
(Speci\214cation, V)6.492 F(er)-1.11 E 3.992(sion 2 \255 Thr)-.1 F(eads)
-.37 E F0 3.992(', The Open Group 1997; http://www)B(.open-)-.65 E
(group.or)108 381.6 Q(g/onlinepubs /007908799/xsh/threads.html)-.18 E F5
(SMI)108 398.4 Q F0(Thread Resources, Sun Microsystems Inc; http://www)
2.5 E(.sun.com/w)-.65 E(orkshop/threads/)-.1 E(Bibliograph)108 415.2 Q
6.614(yo)-.05 G 6.614(nt)-6.614 G 4.114(hreads and multithreading, T)
-6.614 F 4.115(orsten Amundsen; http://liinwww)-.8 F
(.ira.uka.de/bibliogra-)-.65 E(ph)108 427.2 Q(y/Os/threads.html)-.05 E
F1 -7.218(RR)108 450 S -4.438(ee)7.218 G -2.778(ll)4.438 G -4.998(aa)
2.778 G -3.328(tt)4.998 G -4.438(ee)3.328 G 11.116 -5.558(dd B)4.438 H
(Bo)-1.11 E(oo)-4.998 E(ok)-4.998 E(ks)-5.558 E(s)-3.888 E F0 1.067
(B. Nichols, D. Buttlar)108 466.8 R 3.566(,J)-.4 G(.P)-3.566 E 3.566(.F)
-1.11 G 1.066(arrel: `)-3.716 F F2(Pthr)A 1.066(eads Pr)-.37 F -.1(og)
-.45 G -.15(ra).1 G 1.066(mming \255 A).15 F F6(POSIX)3.566 E F2
(Standar)3.566 E 3.566(df)-.37 G 1.066(or Better Multipr)-3.566 F
(ocess-)-.45 E(ing)108 478.8 Q F0(', O'Reilly 1996;)A F5(ISBN)2.5 E F0
(1-56592-115-1)2.5 E .448(B. Le)108 495.6 R .448(wis, D. J. Ber)-.25 F
.448(g: `)-.18 F F2(Multithr)A .448(eaded Pr)-.37 F -.1(og)-.45 G -.15
(ra).1 G .448(mming with Pthr).15 F(eads)-.37 E F0 .449
(', Sun Microsystems Press, Prentice Hall)B(1998;)108 507.6 Q F5(ISBN)
2.5 E F0(0-13-680729-1)2.5 E 1.242(B. Le)108 524.4 R 1.242
(wis, D. J. Ber)-.25 F 1.242(g: `)-.18 F F2(Thr)A 1.241
(eads Primer \255 A Guide T)-.37 F 3.741(oM)-.92 G(ultithr)-3.741 E
1.241(eaded Pr)-.37 F -.1(og)-.45 G -.15(ra).1 G(mming).15 E F0 1.241
(', Prentice Hall 1996;)B F5(ISBN)108 536.4 Q F0(0-13-443698-9)2.5 E
1.233(S. J. Norton, M. D. Dipasquale: `)108 553.2 R F2(Thr)A 1.234
(ead T)-.37 F 1.234(ime \255 The Multithr)-.55 F 1.234(eaded Pr)-.37 F
-.1(og)-.45 G -.15(ra).1 G 1.234(mming Guide).15 F F0 1.234
(', Prentice Hall)B(1997;)108 565.2 Q F5(ISBN)2.5 E F0(0-13-190067-6)2.5
E(D. R. Butenhof: `)108 582 Q F2(Pr)A -.1(og)-.45 G -.15(ra).1 G
(mming with).15 E F6(POSIX)2.5 E F2(Thr)2.5 E(eads)-.37 E F0
(', Addison W)A(esle)-.8 E 2.5(y1)-.15 G(997;)-2.5 E F5(ISBN)2.5 E F0
(0-201-63392-2)2.5 E F1 -7.218(RR)108 604.8 S -4.438(ee)7.218 G -2.778
(ll)4.438 G -4.998(aa)2.778 G -3.328(tt)4.998 G -4.438(ee)3.328 G 11.116
-5.558(dd M)4.438 H(Ma)-3.88 E(an)-4.998 E(np)-5.558 E(pa)-5.558 E(ag)
-4.998 E(ge)-4.998 E(es)-4.438 E(s)-3.888 E F0(pth-)108 621.6 Q F2
(con\214g)A F0(\(1\),)1.666 E F2(pthr)2.5 E(ead)-.37 E F0(\(3\).)1.666 E
F2 -.1(ge)108 638.4 S(tconte).1 E(xt)-.2 E F0(\(2\),)1.666 E F2
(setconte)5.073 E(xt)-.2 E F0(\(2\),)1.666 E F2(mak)5.073 E(econte)-.1 E
(xt)-.2 E F0(\(2\),)1.666 E F2(swapconte)5.073 E(xt)-.2 E F0(\(2\),)
1.666 E F2(sigstac)5.073 E(k)-.2 E F0(\(2\),)1.666 E F2(sigaltstac)5.073
E(k)-.2 E F0(\(2\),)1.666 E F2(sigaction)5.073 E F0(\(2\),)1.666 E F2
(sig)108 650.4 Q(emptyset)-.1 E F0(\(2\),)1.666 E F2(sigaddset)5.758 E
F0(\(2\),)1.666 E F2(sigpr)5.758 E(ocmask)-.45 E F0(\(2\),)1.666 E F2
(sigsuspend)5.758 E F0(\(2\),)1.666 E F2(sigsetjmp)5.758 E F0(\(3\),)
1.666 E F2(siglongjmp)5.758 E F0(\(3\),)1.666 E F2(setjmp)5.758 E F0
(\(3\),)1.666 E F2(longjmp)108 662.4 Q F0(\(3\),)1.666 E F2(select)2.5 E
F0(\(2\),)1.666 E F2 -.1(ge)2.5 G(ttimeofday).1 E F0(\(2\).)1.666 E F3
10.292 -6.496(AA UU)72 679.2 T -6.001(TT)6.496 G -7(HH)6.001 G -7(OO)7 G
-6.496(RR)7 G F4(Ralf S. Engelschall)114 691.2 Q(rse@engelschall.com)114
703.2 Q(www.engelschall.com)114 715.2 Q F0 139.425(10/Mar/2000 perl)72
768 R(5.005, patch 03)2.5 E(28)184.145 E EP
%%Page: 29 29
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/Times-Roman@0 SF(PTH-MANU)72 48 Q 78.275(AL\(1\) User)-.4 F
(Contrib)2.5 E(uted Perl Documentation)-.2 E(PTH-MANU)80.775 E(AL\(1\))
-.4 E 139.425(10/Mar/2000 perl)72 768 R(5.005, patch 03)2.5 E(29)184.145
E EP
%%Trailer
end
%%EOF
