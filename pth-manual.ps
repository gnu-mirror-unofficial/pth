%!PS-Adobe-3.0
%%Creator: groff version 1.19.1
%%CreationDate: Fri Dec  3 18:17:35 2004
%%DocumentNeededResources: font Times-Roman
%%+ font Times-Bold
%%+ font Courier
%%+ font Symbol
%%+ font Times-Italic
%%DocumentSuppliedResources: procset grops 1.19 1
%%Pages: 31
%%PageOrder: Ascend
%%DocumentMedia: Default 612 792 0 () ()
%%Orientation: Portrait
%%EndComments
%%BeginDefaults
%%PageMedia: Default
%%EndDefaults
%%BeginProlog
%%BeginResource: procset grops 1.19 1
%!PS-Adobe-3.0 Resource-ProcSet
/setpacking where{
pop
currentpacking
true setpacking
}if
/grops 120 dict dup begin
/SC 32 def
/A/show load def
/B{0 SC 3 -1 roll widthshow}bind def
/C{0 exch ashow}bind def
/D{0 exch 0 SC 5 2 roll awidthshow}bind def
/E{0 rmoveto show}bind def
/F{0 rmoveto 0 SC 3 -1 roll widthshow}bind def
/G{0 rmoveto 0 exch ashow}bind def
/H{0 rmoveto 0 exch 0 SC 5 2 roll awidthshow}bind def
/I{0 exch rmoveto show}bind def
/J{0 exch rmoveto 0 SC 3 -1 roll widthshow}bind def
/K{0 exch rmoveto 0 exch ashow}bind def
/L{0 exch rmoveto 0 exch 0 SC 5 2 roll awidthshow}bind def
/M{rmoveto show}bind def
/N{rmoveto 0 SC 3 -1 roll widthshow}bind def
/O{rmoveto 0 exch ashow}bind def
/P{rmoveto 0 exch 0 SC 5 2 roll awidthshow}bind def
/Q{moveto show}bind def
/R{moveto 0 SC 3 -1 roll widthshow}bind def
/S{moveto 0 exch ashow}bind def
/T{moveto 0 exch 0 SC 5 2 roll awidthshow}bind def
/SF{
findfont exch
[exch dup 0 exch 0 exch neg 0 0]makefont
dup setfont
[exch/setfont cvx]cvx bind def
}bind def
/MF{
findfont
[5 2 roll
0 3 1 roll
neg 0 0]makefont
dup setfont
[exch/setfont cvx]cvx bind def
}bind def
/level0 0 def
/RES 0 def
/PL 0 def
/LS 0 def
/MANUAL{
statusdict begin/manualfeed true store end
}bind def
/PLG{
gsave newpath clippath pathbbox grestore
exch pop add exch pop
}bind def
/BP{
/level0 save def
1 setlinecap
1 setlinejoin
72 RES div dup scale
LS{
90 rotate
}{
0 PL translate
}ifelse
1 -1 scale
}bind def
/EP{
level0 restore
showpage
}bind def
/DA{
newpath arcn stroke
}bind def
/SN{
transform
.25 sub exch .25 sub exch
round .25 add exch round .25 add exch
itransform
}bind def
/DL{
SN
moveto
SN
lineto stroke
}bind def
/DC{
newpath 0 360 arc closepath
}bind def
/TM matrix def
/DE{
TM currentmatrix pop
translate scale newpath 0 0 .5 0 360 arc closepath
TM setmatrix
}bind def
/RC/rcurveto load def
/RL/rlineto load def
/ST/stroke load def
/MT/moveto load def
/CL/closepath load def
/Fr{
setrgbcolor fill
}bind def
/setcmykcolor where{
pop
/Fk{
setcmykcolor fill
}bind def
}if
/Fg{
setgray fill
}bind def
/FL/fill load def
/LW/setlinewidth load def
/Cr/setrgbcolor load def
/setcmykcolor where{
pop
/Ck/setcmykcolor load def
}if
/Cg/setgray load def
/RE{
findfont
dup maxlength 1 index/FontName known not{1 add}if dict begin
{
1 index/FID ne{def}{pop pop}ifelse
}forall
/Encoding exch def
dup/FontName exch def
currentdict end definefont pop
}bind def
/DEFS 0 def
/EBEGIN{
moveto
DEFS begin
}bind def
/EEND/end load def
/CNT 0 def
/level1 0 def
/PBEGIN{
/level1 save def
translate
div 3 1 roll div exch scale
neg exch neg exch translate
0 setgray
0 setlinecap
1 setlinewidth
0 setlinejoin
10 setmiterlimit
[]0 setdash
/setstrokeadjust where{
pop
false setstrokeadjust
}if
/setoverprint where{
pop
false setoverprint
}if
newpath
/CNT countdictstack def
userdict begin
/showpage{}def
/setpagedevice{}def
}bind def
/PEND{
clear
countdictstack CNT sub{end}repeat
level1 restore
}bind def
end def
/setpacking where{
pop
setpacking
}if
%%EndResource
%%EndProlog
%%BeginSetup
%%BeginFeature: *PageSize Default
<< /PageSize [ 612 792 ] /ImagingBBox null >> setpagedevice
%%EndFeature
%%IncludeResource: font Times-Roman
%%IncludeResource: font Times-Bold
%%IncludeResource: font Courier
%%IncludeResource: font Symbol
%%IncludeResource: font Times-Italic
grops begin/DEFS 1 dict def DEFS begin/u{.001 mul}bind def end/RES 72
def/PL 792 def/LS false def/ENC0[/asciicircum/asciitilde/Scaron/Zcaron
/scaron/zcaron/Ydieresis/trademark/quotesingle/Euro/.notdef/.notdef
/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef
/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef
/.notdef/.notdef/space/exclam/quotedbl/numbersign/dollar/percent
/ampersand/quoteright/parenleft/parenright/asterisk/plus/comma/hyphen
/period/slash/zero/one/two/three/four/five/six/seven/eight/nine/colon
/semicolon/less/equal/greater/question/at/A/B/C/D/E/F/G/H/I/J/K/L/M/N/O
/P/Q/R/S/T/U/V/W/X/Y/Z/bracketleft/backslash/bracketright/circumflex
/underscore/quoteleft/a/b/c/d/e/f/g/h/i/j/k/l/m/n/o/p/q/r/s/t/u/v/w/x/y
/z/braceleft/bar/braceright/tilde/.notdef/quotesinglbase/guillemotleft
/guillemotright/bullet/florin/fraction/perthousand/dagger/daggerdbl
/endash/emdash/ff/fi/fl/ffi/ffl/dotlessi/dotlessj/grave/hungarumlaut
/dotaccent/breve/caron/ring/ogonek/quotedblleft/quotedblright/oe/lslash
/quotedblbase/OE/Lslash/.notdef/exclamdown/cent/sterling/currency/yen
/brokenbar/section/dieresis/copyright/ordfeminine/guilsinglleft
/logicalnot/minus/registered/macron/degree/plusminus/twosuperior
/threesuperior/acute/mu/paragraph/periodcentered/cedilla/onesuperior
/ordmasculine/guilsinglright/onequarter/onehalf/threequarters
/questiondown/Agrave/Aacute/Acircumflex/Atilde/Adieresis/Aring/AE
/Ccedilla/Egrave/Eacute/Ecircumflex/Edieresis/Igrave/Iacute/Icircumflex
/Idieresis/Eth/Ntilde/Ograve/Oacute/Ocircumflex/Otilde/Odieresis
/multiply/Oslash/Ugrave/Uacute/Ucircumflex/Udieresis/Yacute/Thorn
/germandbls/agrave/aacute/acircumflex/atilde/adieresis/aring/ae/ccedilla
/egrave/eacute/ecircumflex/edieresis/igrave/iacute/icircumflex/idieresis
/eth/ntilde/ograve/oacute/ocircumflex/otilde/odieresis/divide/oslash
/ugrave/uacute/ucircumflex/udieresis/yacute/thorn/ydieresis]def
/Times-Italic@0 ENC0/Times-Italic RE/Courier@0 ENC0/Courier RE
/Times-Bold@0 ENC0/Times-Bold RE/Times-Roman@0 ENC0/Times-Roman RE
%%EndSetup
%%Page: 1 1
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/Times-Roman@0 SF(PTH-MANU)72 48 Q 78.275(AL\(1\) User)-.4 F
(Contrib)2.5 E(uted Perl Documentation)-.2 E(PTH-MANU)80.775 E(AL\(1\))
-.4 E/F1 10.95/Times-Bold@0 SF -.219(NA)72 84 S(ME).219 E/F2 10
/Times-Bold@0 SF(pth)108 96 Q F0 2.5<ad47>2.5 G(NU Portable Threads)-2.5
E F1(VERSION)72 112.8 Q/F3 9/Times-Roman@0 SF(GNU)108 124.8 Q F0(Pth)2.5
E F3(PTH_VERSION_STR)2.5 E F1(SYNOPSIS)72 141.6 Q F2
(Global Library Management)108 153.6 Q F0
(pth_init, pth_kill, pth_ctrl, pth_v)128 165.6 Q(ersion.)-.15 E F2(Thr)
108 182.4 Q(ead Attrib)-.18 E(ute Handling)-.2 E F0
(pth_attr_of, pth_attr_ne)128 194.4 Q 1.3 -.65(w, p)-.25 H
(th_attr_init, pth_attr_set, pth_attr_get, pth_attr_destro).65 E -.65
(y.)-.1 G F2(Thr)108 211.2 Q(ead Contr)-.18 E(ol)-.18 E F0(pth_spa)128
223.2 Q 1.57(wn, pth_once, pth_self, pth_suspend, pth_resume, pth_yield\
, pth_nap, pth_w)-.15 F 1.57(ait, pth_cancel,)-.1 F
(pth_abort, pth_raise, pth_join, pth_e)128 235.2 Q(xit.)-.15 E F2
(Utilities)108 252 Q F0
(pth_fdmode, pth_time, pth_timeout, pth_s\214odisc.)128 264 Q F2
(Cancellation Management)108 280.8 Q F0
(pth_cancel_point, pth_cancel_state.)128 292.8 Q F2(Ev)108 309.6 Q
(ent Handling)-.1 E F0(pth_e)128 321.6 Q -.15(ve)-.25 G .22(nt, pth_e)
.15 F -.15(ve)-.25 G .22(nt_typeof, pth_e).15 F -.15(ve)-.25 G(nt_e).15
E .22(xtract, pth_e)-.15 F -.15(ve)-.25 G .22(nt_concat, pth_e).15 F
-.15(ve)-.25 G .22(nt_isolate, pth_e).15 F -.15(ve)-.25 G(nt_w).15 E
(alk,)-.1 E(pth_e)128 333.6 Q -.15(ve)-.25 G(nt_status, pth_e).15 E -.15
(ve)-.25 G(nt_free.).15 E F2 -.25(Ke)108 350.4 S(y-Based Storage).25 E
F0(pth_k)128 362.4 Q -.15(ey)-.1 G(_create, pth_k).15 E -.15(ey)-.1 G
(_delete, pth_k).15 E -.15(ey)-.1 G(_setdata, pth_k).15 E -.15(ey)-.1 G
(_getdata.).15 E F2(Message P)108 379.2 Q(ort Communication)-.2 E F0
7.91(pth_msgport_create, pth_msgport_destro)128 391.2 R 9.21 -.65(y, p)
-.1 H 7.91(th_msgport_\214nd, pth_msgport_pending, pth_msg-).65 F
(port_put, pth_msgport_get, pth_msgport_reply)128 403.2 Q(.)-.65 E F2
(Thr)108 420 Q(ead Cleanups)-.18 E F0
(pth_cleanup_push, pth_cleanup_pop.)128 432 Q F2(Pr)108 448.8 Q(ocess F)
-.18 E(orking)-.25 E F0(pth_atfork_push, pth_atfork_pop, pth_fork.)128
460.8 Q F2(Synchr)108 477.6 Q(onization)-.18 E F0(pth_mute)128 489.6 Q
8.052(x_init, pth_mute)-.15 F 8.052(x_acquire, pth_mute)-.15 F 8.053
(x_release, pth_rwlock_init, pth_rwlock_acquire,)-.15 F 5.518
(pth_rwlock_release, pth_cond_init, pth_cond_a)128 501.6 R -.1(wa)-.15 G
5.518(it, pth_cond_notify).1 F 8.018(,p)-.65 G 5.518
(th_barrier_init, pth_bar)-8.018 F(-)-.2 E(rier_reach.)128 513.6 Q F2
(User)108 530.4 Q(-Space Context)-.37 E F0
(pth_uctx_create, pth_uctx_mak)128 542.4 Q
(e, pth_uctx_switch, pth_uctx_destro)-.1 E -.65(y.)-.1 G F2(Generalized)
108 559.2 Q/F4 9/Times-Bold@0 SF(POSIX)2.5 E F2(Replacement)2.5 E F4
(API)2.5 E F0(pth_sigw)128 571.2 Q(ait_e)-.1 E 12.422 -.65(v, p)-.25 H
(th_accept_e).65 E 12.422 -.65(v, p)-.25 H(th_connect_e).65 E 12.422
-.65(v, p)-.25 H(th_select_e).65 E 12.422 -.65(v, p)-.25 H(th_poll_e).65
E 12.422 -.65(v, p)-.25 H(th_read_e).65 E -.65(v,)-.25 G(pth_readv_e)128
583.2 Q 12.566 -.65(v, p)-.25 H(th_write_e).65 E 12.566 -.65(v, p)-.25 H
(th_write).65 E(v_e)-.25 E 12.566 -.65(v, p)-.25 H(th_recv_e).65 E
12.566 -.65(v, p)-.25 H(th_recvfrom_e).65 E 12.566 -.65(v, p)-.25 H
(th_send_e).65 E -.65(v,)-.25 G(pth_sendto_e)128 595.2 Q -.65(v.)-.25 G
F2(Standard)108 612 Q F4(POSIX)2.5 E F2(Replacement)2.5 E F4(API)2.5 E
F0 .197(pth_nanosleep, pth_usleep, pth_sleep, pth_w)128 624 R .197
(aitpid, pth_system, pth_sigmask, pth_sigw)-.1 F .198(ait, pth_accept,)
-.1 F .763
(pth_connect, pth_select, pth_pselect, pth_poll, pth_read, pth_readv)128
636 R 3.262(,p)-.65 G .762(th_write, pth_write)-3.262 F 2.062 -.65(v, p)
-.25 H(th_pread,).65 E(pth_pwrite, pth_recv)128 648 Q 2.5(,p)-.65 G
(th_recvfrom, pth_send, pth_sendto.)-2.5 E F1(DESCRIPTION)72 664.8 Q F0
(perl v5.8.6)72 768 Q 203.17(2004-12-03 1)167.62 F 0 Cg EP
%%Page: 2 2
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/Times-Roman@0 SF(PTH-MANU)72 48 Q 78.275(AL\(1\) User)-.4 F
(Contrib)2.5 E(uted Perl Documentation)-.2 E(PTH-MANU)80.775 E(AL\(1\))
-.4 E/F1 10/Courier@0 SF 6(____ _)120 84 R(_)18 E/F2 10/Symbol SF<ef>114
96 Q F1 6(_\\)12 G F2 6<efef>-6 G F1(_)-6 E F2 6<efef>C F1(__)-6 E F2 6
<efef>114 108 S F1(_\))-6 E F2<ef>6 E F1(__)6 E F2<ef>A F1('_ \\)6 E
(``Only those who attempt)54 E F2<ef>114 120 Q F1(__/)12 E F2 6<efef>C
F1(_)-6 E F2 6<efefefef>C F1(the absurd can achieve)54 E F2<ef>114 132 Q
F1(_)A F2<ef>A F1(\\__)24 E F2<ef>A F1(_)A F2 6<efef>C F1(_)-6 E F2<ef>A
F1(the impossible.'')60 E/F3 10/Times-Bold@0 SF(Pth)108 148.8 Q F0 .315
(is a v)2.815 F .315(ery portable)-.15 F/F4 9/Times-Roman@0 SF
(POSIX/ANSI\255C)2.815 E F0 .315
(based library for Unix platforms which pro)2.815 F .315
(vides non-preempti)-.15 F .616 -.15(ve p)-.25 H(ri-).15 E .315
(ority-based scheduling for multiple threads of e)108 160.8 R -.15(xe)
-.15 G .314(cution \(aka `multithreading'\) inside e).15 F -.15(ve)-.25
G(nt-dri).15 E -.15(ve)-.25 G 2.814(na).15 G(pplica-)-2.814 E .147(tion\
s. All threads run in the same address space of the application process\
, b)108 172.8 R .148(ut each thread has its o)-.2 F .148(wn indi-)-.25 F
(vidual program counter)108 184.8 Q 2.5(,r)-.4 G
(un-time stack, signal mask and)-2.5 E F1(errno)2.5 E F0 -.25(va)2.5 G
(riable.).25 E .243(The thread scheduling itself is done in a cooperati)
108 201.6 R .542 -.15(ve w)-.25 H(ay).05 E 2.742(,i)-.65 G .242
(.e., the threads are managed and dispatched by a)-2.742 F .806
(priority\255 and e)108 213.6 R -.15(ve)-.25 G(nt-dri).15 E -.15(ve)-.25
G 3.306(nn).15 G(on-preempti)-3.306 E 1.106 -.15(ve s)-.25 H(cheduler)
.15 E 3.306(.T)-.55 G .806(he intention is that this w)-3.306 F .807
(ay both better portability)-.1 F .2(and run-time performance is achie)
108 225.6 R -.15(ve)-.25 G 2.7(dt).15 G .2(han with preempti)-2.7 F .5
-.15(ve s)-.25 H .2(cheduling. The e).15 F -.15(ve)-.25 G .2(nt f).15 F
.2(acility allo)-.1 F .2(ws threads to)-.25 F -.1(wa)108 237.6 S 1.427
(it until v).1 F 1.427(arious types of internal and e)-.25 F 1.427
(xternal e)-.15 F -.15(ve)-.25 G 1.427(nts occur).15 F 3.927(,i)-.4 G
1.428(ncluding pending I/O on \214le descriptors,)-3.927 F .949(asynchr\
onous signals, elapsed timers, pending I/O on message ports, thread and\
 process termination, and)108 249.6 R -2.15 -.25(ev e)108 261.6 T 2.5
(nr).25 G(esults of customized callback functions.)-2.5 E F3(Pth)108
278.4 Q F0 .23(also pro)2.73 F .23(vides an optional emulation)-.15 F F4
(API)2.73 E F0(for)2.73 E F4(POSIX)2.73 E F0 .23
(.1c threads \(`Pthreads'\) which can be used for back-)B -.1(wa)108
290.4 S(rd compatibility to e).1 E
(xisting multithreaded applications. See)-.15 E F3(Pth)2.5 E F0 -.55('s)
C/F5 10/Times-Italic@0 SF(pthr)3.05 E(ead)-.37 E F0
(\(3\) manual page for details.)1.666 E F3(Thr)108 313.2 Q
(eading Backgr)-.18 E(ound)-.18 E F0 1.19(When programming e)108 330 R
-.15(ve)-.25 G(nt-dri).15 E -.15(ve)-.25 G 3.69(na).15 G 1.19
(pplications, usually serv)-3.69 F 1.19(ers, lots of re)-.15 F 1.19
(gular jobs and one-shot requests)-.15 F(ha)108 342 Q .726 -.15(ve t)-.2
H 2.926(ob).15 G 2.926(ep)-2.926 G .426(rocessed in parallel.)-2.926 F
2.026 -.8(To e)5.426 H -.25<668c>.8 G .427
(ciently simulate this parallel processing on uniprocessor machines,).25
F 1.773(we use `multitasking')108 354 R 5.939<8a74>5.939 G 1.773
(hat is, we ha)-5.939 F 2.073 -.15(ve t)-.2 H 1.773
(he application ask the operating system to spa).15 F 1.773(wn multiple)
-.15 F 1.53(instances of itself. On Unix, typically the k)108 366 R 1.53
(ernel implements multitasking in a preempti)-.1 F 1.83 -.15(ve a)-.25 H
1.53(nd priority-).15 F .539(based w)108 378 R .539(ay through hea)-.1 F
.539(vy-weight processes spa)-.2 F .539(wned with)-.15 F F5(fork)3.039 E
F0 3.039(\(2\). These)1.666 F .539(processes usually do)3.039 F F5(not)
3.039 E F0 .538(share a)3.038 F .029(common address space. Instead the)
108 390 R 2.529(ya)-.15 G .029(re clearly separated from each other)
-2.529 F 2.53(,a)-.4 G .03(nd are created by direct cloning)-2.53 F
2.539(ap)108 402 S .039(rocess address space \(although modern k)-2.539
F .038(ernels use memory se)-.1 F .038(gment mapping and cop)-.15 F .038
(y-on-write seman-)-.1 F(tics to a)108 414 Q -.2(vo)-.2 G
(id unnecessary cop).2 E(ying of ph)-.1 E(ysical memory\).)-.05 E 1.048
(The dra)108 430.8 R 1.048(wbacks are ob)-.15 F 1.048(vious: Sharing da\
ta between the processes is complicated, and can usually only be)-.15 F
.527(done ef)108 442.8 R .527(\214ciently through shared memory \(b)-.25
F .526(ut which itself is not v)-.2 F .526
(ery portable\). Synchronization is compli-)-.15 F 1.863
(cated because of the preempti)108 454.8 R 2.163 -.15(ve n)-.25 H 1.863
(ature of the Unix scheduler \(one has to use).15 F F5(atomic)4.363 E F0
1.863(locks, etc\). The)4.363 F(machine')108 466.8 Q 2.644(sr)-.55 G
.143(esources can be e)-2.644 F .143(xhausted v)-.15 F .143
(ery quickly when the serv)-.15 F .143(er application has to serv)-.15 F
2.643(et)-.15 G .143(oo man)-2.643 F 2.643(yl)-.15 G(ong-)-2.643 E .566
(running requests \(hea)108 478.8 R .566
(vy\255weight processes cost memory\). And when each request spa)-.2 F
.567(wns a sub-process to)-.15 F 1.964(handle it, the serv)108 490.8 R
1.964(er performance and responsi)-.15 F -.15(ve)-.25 G 1.964
(ness is horrible \(hea).15 F 1.964(vy\255weight processes cost time to)
-.2 F(spa)108 502.8 Q .141(wn\). Finally)-.15 F 2.641(,t)-.65 G .142
(he serv)-2.641 F .142(er application doesn')-.15 F 2.642(ts)-.18 G .142
(cale v)-2.642 F .142
(ery well with the load because of these resource prob-)-.15 F .093
(lems. In practice, lots of tricks are usually used to o)108 514.8 R
-.15(ve)-.15 G .092(rcome these problems \255 ranging from pre-fork).15
F .092(ed sub-)-.1 F(process pools to semi-serialized processing, etc.)
108 526.8 Q .343(One of the most ele)108 543.6 R -.05(ga)-.15 G .343
(nt w).05 F .343(ays to solv)-.1 F 2.843(et)-.15 G .343
(hese resource\255 and data-sharing problems is to ha)-2.843 F .643 -.15
(ve m)-.2 H(ultiple).15 E F5(light-)2.843 E(weight)108 555.6 Q F0 1.907
(threads of e)4.407 F -.15(xe)-.15 G 1.906(cution inside a single \(hea)
.15 F 1.906(vy\255weight\) process, i.e., to use)-.2 F F5(multithr)4.406
E(eading)-.37 E F0 6.906(.T)C(hose)-6.906 E F5(thr)108 567.6 Q(eads)-.37
E F0 .178(usually impro)2.678 F .478 -.15(ve r)-.15 H(esponsi).15 E -.15
(ve)-.25 G .178(ness and performance of the application, often impro).15
F .479 -.15(ve a)-.15 H .179(nd simplify the).15 F .306(internal progra\
m structure, and most important, require less system resources than hea)
108 579.6 R .305(vy-weight processes.)-.2 F .292
(Threads are neither the optimal run-time f)108 591.6 R .293
(acility for all types of applications, nor can all applications bene-)
-.1 F(\214t from them. But at least e)108 603.6 Q -.15(ve)-.25 G(nt-dri)
.15 E -.15(ve)-.25 G 2.5(ns).15 G(erv)-2.5 E
(er applications usually bene\214t greatly from using threads.)-.15 E F3
(The W)108 626.4 Q(orld of Thr)-.75 E(eading)-.18 E F0(Ev)108 643.2 Q
.327(en though lots of documents e)-.15 F .327
(xists which describe and de\214ne the w)-.15 F .327
(orld of threading, to understand)-.1 F F3(Pth)2.826 E F0(,)A .162
(you need only basic kno)108 655.2 R .163
(wledge about threading. The follo)-.25 F .163
(wing de\214nitions of thread-related terms should at)-.25 F
(least help you understand thread programming enough to allo)108 667.2 Q
2.5(wy)-.25 G(ou to use)-2.5 E F3(Pth)2.5 E F0(.)A F3 2.5(op)108 684 S
-.18(ro)-2.5 G(cess).18 E F0(vs.)2.5 E F3(thr)2.5 E(ead)-.18 E F0 2.634
(Ap)118 696 S .134
(rocess on Unix systems consists of at least the follo)-2.634 F .134
(wing fundamental ingredients:)-.25 F F5 .134(virtual memory ta-)2.634 F
(ble)118 708 Q F0(,)A F5(pr)2.954 E -.1(og)-.45 G -.15(ra).1 G 2.954(mc)
.15 G(ode)-2.954 E F0(,)A F5(pr)2.954 E -.1(og)-.45 G -.15(ra).1 G 2.954
(mc).15 G(ounter)-2.954 E F0(,)A F5 .454(heap memory)2.954 F F0(,)A F5
(stac)2.954 E 2.954(km)-.2 G(emory)-2.954 E F0(,)A F5(stac)2.954 E 2.954
(kp)-.2 G(ointer)-2.954 E F0(,)A F5 .455(\214le descriptor set)2.955 F
F0(,)A F5(sig-)2.955 E 1.564(nal table)118 720 R F0 4.064(.O)C 4.064(ne)
-4.064 G -.15(ve)-4.314 G 1.564(ry process switch, the k).15 F 1.563
(ernel sa)-.1 F -.15(ve)-.2 G 4.063(sa).15 G 1.563
(nd restores these ingredients for the indi)-4.063 F(vidual)-.25 E
(perl v5.8.6)72 768 Q 203.17(2004-12-03 2)167.62 F 0 Cg EP
%%Page: 3 3
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/Times-Roman@0 SF(PTH-MANU)72 48 Q 78.275(AL\(1\) User)-.4 F
(Contrib)2.5 E(uted Perl Documentation)-.2 E(PTH-MANU)80.775 E(AL\(1\))
-.4 E .817
(processes. On the other hand, a thread consists of only a pri)118 84 R
-.25(va)-.25 G .818(te program counter).25 F 3.318(,s)-.4 G .818
(tack memory)-3.318 F 3.318(,s)-.65 G(tack)-3.318 E .776(pointer and si\
gnal table. All other ingredients, in particular the virtual memory)118
96 R 3.276(,i)-.65 G 3.276(ts)-3.276 G .776(hares with the other)-3.276
F(threads of the same process.)118 108 Q/F1 10/Times-Bold@0 SF 2.5(ok)
108 124.8 S(er)-2.6 E(nel-space)-.15 E F0(vs.)2.5 E F1(user)2.5 E
(-space)-.37 E F0(threading)2.5 E .888(Threads on a Unix platform tradi\
tionally can be implemented either inside k)118 136.8 R .889
(ernel-space or user\255space.)-.1 F 1.053
(When threads are implemented by the k)118 148.8 R 1.053
(ernel, the thread conte)-.1 F 1.052(xt switches are performed by the k)
-.15 F(ernel)-.1 E .494(without the application')118 160.8 R 2.994(sk)
-.55 G(no)-2.994 E .494(wledge. Similarly)-.25 F 2.994(,w)-.65 G .494
(hen threads are implemented in user\255space, the thread)-2.994 F
(conte)118 172.8 Q .351
(xt switches are performed by an application library)-.15 F 2.851(,w)
-.65 G .351(ithout the k)-2.851 F(ernel')-.1 E 2.85(sk)-.55 G(no)-2.85 E
.35(wledge. There also are)-.25 F -.05(hy)118 184.8 S .61
(brid threading approaches where, typically).05 F 3.111(,au)-.65 G(ser)
-3.111 E .611(-space library binds one or more user)-.2 F .611
(-space threads)-.2 F(to one or more k)118 196.8 Q(ernel-space threads \
\(there usually called light-weight processes \255 or in short L)-.1 E
(WPs\).)-.74 E(User)118 214.8 Q .899
(-space threads are usually more portable and can perform f)-.2 F .899
(aster and cheaper conte)-.1 F .899(xt switches \(for)-.15 F .228
(instance via)118 226.8 R/F2 10/Times-Italic@0 SF(swapconte)2.728 E(xt)
-.2 E F0 .228(\(2\) or)1.666 F F2(setjmp)2.728 E F0(\(3\)/)1.666 E F2
(longjmp)A F0 .228(\(3\)\) than k)1.666 F .229
(ernel based threads. On the other hand, k)-.1 F(er)-.1 E(-)-.2 E .304
(nel-space threads can tak)118 238.8 R 2.804(ea)-.1 G(dv)-2.804 E .304
(antage of multiprocessor machines and don')-.25 F 2.803(th)-.18 G -2.25
-.2(av e)-2.803 H(an)3.003 E 2.803(yi)-.15 G .303(nherent I/O block-)
-2.803 F .063(ing problems. K)118 250.8 R .063
(ernel-space threads are usually scheduled in preempti)-.25 F .363 -.15
(ve w)-.25 H .063(ay side-by-side with the under).05 F(-)-.2 E .538
(lying processes. User)118 262.8 R .538
(-space threads on the other hand use either preempti)-.2 F .837 -.15
(ve o)-.25 H 3.037(rn).15 G(on-preempti)-3.037 E .837 -.15(ve s)-.25 H
(chedul-).15 E(ing.)118 274.8 Q F1 2.5(op)108 291.6 S -.18(re)-2.5 G
(empti).18 E -.1(ve)-.1 G F0(vs.)2.6 E F1(non-pr)2.5 E(eempti)-.18 E -.1
(ve)-.1 G F0(thread scheduling)2.6 E .444(In preempti)118 303.6 R .744
-.15(ve s)-.25 H .444(cheduling, the scheduler lets a thread e).15 F
-.15(xe)-.15 G .444(cute until a blocking situation occurs \(usually a)
.15 F 1.478(function call which w)118 315.6 R 1.477(ould block\) or the\
 assigned timeslice elapses. Then it detracts control from the)-.1 F
1.952(thread without a chance for the thread to object. This is usually\
 realized by interrupting the thread)118 327.6 R 1.299(through a hardw)
118 339.6 R 1.299(are interrupt signal \(for k)-.1 F 1.299
(ernel-space threads\) or a softw)-.1 F 1.298
(are interrupt signal \(for user)-.1 F(-)-.2 E 1.207
(space threads\), lik)118 351.6 R(e)-.1 E/F3 10/Courier@0 SF(SIGALRM)
3.707 E F0(or)3.707 E F3(SIGVTALRM)3.707 E F0 3.707(.I)C 3.708(nn)-3.707
G(on-preempti)-3.708 E 1.508 -.15(ve s)-.25 H 1.208
(cheduling, once a thread recei).15 F -.15(ve)-.25 G(d).15 E .277
(control from the scheduler it k)118 363.6 R .277
(eeps it until either a blocking situation occurs \(ag)-.1 F .277
(ain a function call which)-.05 F -.1(wo)118 375.6 S .022
(uld block and instead switches back to the scheduler\) or the thread e)
.1 F .022(xplicitly yields control back to the)-.15 F
(scheduler in a cooperati)118 387.6 Q .3 -.15(ve w)-.25 H(ay).05 E(.)
-.65 E F1 2.5(oc)108 404.4 S(oncurr)-2.5 E(ency)-.18 E F0(vs.)2.5 E F1
(parallelism)2.5 E F0(Concurrenc)118 416.4 Q 2.709(ye)-.15 G .209
(xists when at least tw)-2.859 F 2.708(ot)-.1 G .208(hreads are)-2.708 F
F2 .208(in pr)2.708 F -.1(og)-.45 G -.37(re).1 G(ss).37 E F0 .208
(at the same time. P)2.708 F .208(arallelism arises when at)-.15 F .476
(least tw)118 428.4 R 2.977(ot)-.1 G .477(hreads are)-2.977 F F2 -.2(ex)
2.977 G(ecuting).2 E F0(simultaneously)2.977 E 2.977(.R)-.65 G .477
(eal parallelism can be only achie)-2.977 F -.15(ve)-.25 G 2.977(do).15
G 2.977(nm)-2.977 G(ultiprocessor)-2.977 E 1.134
(machines, of course. But one also usually speaks of parallelism or)118
440.4 R F2 1.134(high concurr)3.634 F(ency)-.37 E F0 1.133(in the conte)
3.633 F 1.133(xt of)-.15 F(preempti)118 452.4 Q 1.096 -.15(ve t)-.25 H
.796(hread scheduling and of).15 F F2 .796(low concurr)3.296 F(ency)-.37
E F0 .796(in the conte)3.296 F .796(xt of non-preempti)-.15 F 1.097 -.15
(ve t)-.25 H .797(hread schedul-).15 F(ing.)118 464.4 Q F1 2.5(or)108
481.2 S(esponsi)-2.68 E -.1(ve)-.1 G(ness).1 E F0 .586(The responsi)118
493.2 R -.15(ve)-.25 G .586(ness of a system can be described by the us\
er visible delay until the system responses to).15 F .678(an e)118 505.2
R .678
(xternal request. When this delay is small enough and the user doesn')
-.15 F 3.178(tr)-.18 G .679(ecognize a noticeable delay)-3.178 F(,)-.65
E .11(the responsi)118 517.2 R -.15(ve)-.25 G .11(ness of the system is\
 considered good. When the user recognizes or is e).15 F -.15(ve)-.25 G
2.61(na).15 G(nno)-2.61 E .11(yed by the)-.1 F(delay)118 529.2 Q 2.5(,t)
-.65 G(he responsi)-2.5 E -.15(ve)-.25 G
(ness of the system is considered bad.).15 E F1 2.5(or)108 546 S
(eentrant)-2.68 E F0(,)A F1(thr)2.5 E(ead-safe)-.18 E F0(and)2.5 E F1
(asynchr)2.5 E(onous-safe)-.18 E F0(functions)2.5 E 3.648(Ar)118 558 S
1.148(eentrant function is one that beha)-3.648 F -.15(ve)-.2 G 3.649
(sc).15 G 1.149(orrectly if it is called simultaneously by se)-3.649 F
-.15(ve)-.25 G 1.149(ral threads and).15 F .126(then also e)118 570 R
-.15(xe)-.15 G .126(cutes simultaneously).15 F 5.126(.F)-.65 G .126(unc\
tions that access global state, such as memory or \214les, of course,)
-5.126 F .04(need to be carefully designed in order to be reentrant. T)
118 582 R .24 -.1(wo t)-.8 H .04(raditional approaches to solv).1 F 2.54
(et)-.15 G .04(hese problems)-2.54 F(are caller)118 594 Q
(-supplied states and thread-speci\214c data.)-.2 E .127
(Thread-safety is the a)118 612 R -.2(vo)-.2 G .127(idance of).2 F F2
.127(data r)2.627 F(aces)-.15 E F0 2.627(,i)C .126
(.e., situations in which data is set to either correct or incor)-2.627
F(-)-.2 E 1.357(rect v)118 624 R 1.357(alue depending upon the \(unpred\
ictable\) order in which multiple threads access and modify the)-.25 F
.709(data. So a function is thread-safe when it still beha)118 636 R
-.15(ve)-.2 G 3.208(ss).15 G .708
(emantically correct when called simultaneously)-3.208 F 1.764(by se)118
648 R -.15(ve)-.25 G 1.764
(ral threads \(it is not required that the functions also e).15 F -.15
(xe)-.15 G 1.765(cute simultaneously\). The traditional).15 F .304
(approach to achie)118 660 R .604 -.15(ve t)-.25 H .304
(hread-safety is to wrap a function body with an internal mutual e).15 F
.303(xclusion lock \(aka)-.15 F(`mute)118 672 Q .306
(x'\). As you should recognize, reentrant is a stronger attrib)-.15 F
.306(ute than thread\255safe, because it is harder)-.2 F .924(to achie)
118 684 R 1.224 -.15(ve a)-.25 H .924(nd results especially in no run-t\
ime contention between threads. So, a reentrant function is).15 F(al)118
696 Q -.1(wa)-.1 G(ys thread\255safe, b).1 E(ut not vice v)-.2 E(ersa.)
-.15 E .766(Additionally there is a related attrib)118 714 R .766
(ute for functions named asynchronous\255safe, which comes into play)-.2
F 2.202(in conjunction with signal handlers. This is v)118 726 R 2.202
(ery related to the problem of reentrant functions. An)-.15 F
(perl v5.8.6)72 768 Q 203.17(2004-12-03 3)167.62 F 0 Cg EP
%%Page: 4 4
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/Times-Roman@0 SF(PTH-MANU)72 48 Q 78.275(AL\(1\) User)-.4 F
(Contrib)2.5 E(uted Perl Documentation)-.2 E(PTH-MANU)80.775 E(AL\(1\))
-.4 E .878(asynchronous-safe function is one that can be called safe an\
d without side-ef)118 84 R .878(fects from within a signal)-.25 F .626
(handler conte)118 96 R .626(xt. Usually v)-.15 F .626(ery fe)-.15 F
3.126(wf)-.25 G .626
(unctions are of this type, because an application is v)-3.126 F .625
(ery restricted in)-.15 F .332(what it can perform from within a signal\
 handler \(especially what system functions it is allo)118 108 R .332
(wed to call\).)-.25 F .811(The reason mainly is, because only a fe)118
120 R 3.311(ws)-.25 G .811(ystem functions are of)-3.311 F .811
(\214cially declared by)-.25 F/F1 9/Times-Roman@0 SF(POSIX)3.311 E F0
.811(as guaran-)3.311 F(teed to be asynchronous\255safe. Asynchronous-s\
afe functions usually ha)118 132 Q .3 -.15(ve t)-.2 H 2.5(ob).15 G 2.5
(ea)-2.5 G(lready reentrant.)-2.5 E/F2 10/Times-Bold@0 SF(User)108 154.8
Q(-Space Thr)-.37 E(eads)-.18 E F0(User)108 171.6 Q
(-space threads can be implemented in v)-.2 E(arious w)-.25 E(ay)-.1 E
2.5(.T)-.65 G(he tw)-2.5 E 2.5(ot)-.1 G(raditional approaches are:)-2.5
E F2 5(1. Matrix-based)108 188.4 R
(explicit dispatching between small units of execution:)2.5 E F0 .123
(Here the global procedures of the application are split into small e)
123 206.4 R -.15(xe)-.15 G .123(cution units \(each is required to not)
.15 F .736(run for more than a fe)123 218.4 R 3.236(wm)-.25 G .736
(illiseconds\) and those units are implemented by separate functions.)
-3.236 F .735(Then a)5.735 F 1.004
(global matrix is de\214ned which describes the e)123 230.4 R -.15(xe)
-.15 G 1.004(cution \(and perhaps e).15 F -.15(ve)-.25 G 3.505(nd).15 G
(ependenc)-3.505 E 1.005(y\) order of these)-.15 F .774
(functions. The main serv)123 242.4 R .773(er procedure then just dispa\
tches between these units by calling one function)-.15 F .461(after eac\
h other controlled by this matrix. The threads are created by more than\
 one jump-trail through)123 254.4 R(this matrix and by switching betwee\
n these jump-trails controlled by corresponding occurred e)123 266.4 Q
-.15(ve)-.25 G(nts.).15 E .657(This approach gi)123 284.4 R -.15(ve)-.25
G 3.157(st).15 G .656(he best possible performance, because one can \
\214ne-tune the threads of e)-3.157 F -.15(xe)-.15 G(cution).15 E 1.035
(by adjusting the matrix, and the scheduling is done e)123 296.4 R 1.036
(xplicitly by the application itself. It is also v)-.15 F(ery)-.15 E .93
(portable, because the matrix is just an ordinary data structure, and f\
unctions are a standard feature of)123 308.4 R F1(ANSI)123 320.4 Q F0
(C.)2.5 E 2.738(The disadv)123 338.4 R 2.739
(antage of this approach is that it is complicated to write lar)-.25 F
2.739(ge applications with this)-.18 F .388(approach, because in those \
applications one quickly gets hundreds\(!\) of e)123 350.4 R -.15(xe)
-.15 G .388(cution units and the control).15 F<8d6f>123 362.4 Q 2.827
(wi)-.25 G .327(nside such an application is v)-2.827 F .328
(ery hard to understand \(because it is interrupted by function borders)
-.15 F 1.043(and one al)123 374.4 R -.1(wa)-.1 G 1.043
(ys has to remember the global dispatching matrix to follo).1 F 3.542
(wi)-.25 G 1.042(t\). Additionally)-3.542 F 3.542(,a)-.65 G 1.042
(ll threads)-3.542 F .372(operate on the same e)123 386.4 R -.15(xe)-.15
G .372(cution stack. Although this sa).15 F -.15(ve)-.2 G 2.873(sm).15 G
(emory)-2.873 E 2.873(,i)-.65 G 2.873(ti)-2.873 G 2.873(so)-2.873 G .373
(ften nasty)-2.873 F 2.873(,b)-.65 G .373(ecause one cannot)-2.873 F
.784(switch between threads in the middle of a function. Thus the sched\
uling borders are the function bor)123 398.4 R(-)-.2 E(ders.)123 410.4 Q
F2 5(2. Context-based)108 427.2 R(implicit scheduling between thr)2.5 E
(eads of execution:)-.18 E F0 .223
(Here the idea is that one programs the application as with fork)123
445.2 R .223(ed processes, i.e., one spa)-.1 F .223(wns a thread of)-.15
F -.15(exe)123 457.2 S .886(cution and this runs from the be).15 F .885
(gin to the end without an interrupted control \215o)-.15 F 2.185 -.65
(w. B)-.25 H .885(ut the control).65 F<8d6f>123 469.2 Q 2.581(wc)-.25 G
.081(an be still interrupted \255 e)-2.581 F -.15(ve)-.25 G 2.581(ni).15
G 2.581(nt)-2.581 G .081(he middle of a function.)-2.581 F .081
(Actually in a preempti)5.081 F .381 -.15(ve w)-.25 H(ay).05 E 2.581(,s)
-.65 G .082(imilar to)-2.581 F .432(what the k)123 481.2 R .432
(ernel does for the hea)-.1 F .431(vy-weight processes, i.e., e)-.2 F
-.15(ve)-.25 G .431(ry fe).15 F 2.931(wm)-.25 G .431
(illiseconds the user)-2.931 F .431(-space sched-)-.2 F .54
(uler switches between the threads of e)123 493.2 R -.15(xe)-.15 G .541
(cution. But the thread itself doesn').15 F 3.041(tr)-.18 G .541
(ecognize this and usually)-3.041 F(\(e)123 505.2 Q
(xcept for synchronization issues\) doesn')-.15 E 2.5(th)-.18 G -2.25
-.2(av e)-2.5 H(to care about this.)2.7 E .083(The adv)123 523.2 R .083
(antage of this approach is that it')-.25 F 2.583(sv)-.55 G .083
(ery easy to program, because the control \215o)-2.733 F 2.582(wa)-.25 G
.082(nd conte)-2.582 F .082(xt of)-.15 F 3.048(at)123 535.2 S .548
(hread directly follo)-3.048 F .548
(ws a procedure without forced interrupts through function borders.)-.25
F(Additionally)5.549 E(,)-.65 E(the programming is v)123 547.2 Q
(ery similar to a traditional and well understood)-.15 E/F3 10
/Times-Italic@0 SF(fork)2.5 E F0(\(2\) based approach.)1.666 E .566
(The disadv)123 565.2 R .565(antage is that although the general perfor\
mance is increased, compared to using approaches)-.25 F .606
(based on hea)123 577.2 R .607(vy-weight processes, it is decreased com\
pared to the matrix-approach abo)-.2 F -.15(ve)-.15 G 3.107(.B).15 G
.607(ecause the)-3.107 F 2.086(implicit preempti)123 589.2 R 2.386 -.15
(ve s)-.25 H 2.086(cheduling does usually a lot more conte).15 F 2.086
(xt switches \(e)-.15 F -.15(ve)-.25 G 2.085(ry user).15 F 2.085
(-space conte)-.2 F(xt)-.15 E .904(switch costs some o)123 601.2 R -.15
(ve)-.15 G .904(rhead e).15 F -.15(ve)-.25 G 3.404(nw).15 G .905
(hen it is a lot cheaper than a k)-3.404 F(ernel-le)-.1 E -.15(ve)-.25 G
3.405(lc).15 G(onte)-3.405 E .905(xt switch\) than the)-.15 F -.15(ex)
123 613.2 S 2.122(plicit cooperati).15 F -.15(ve)-.25 G
(/non\255preempti).15 E 2.422 -.15(ve s)-.25 H 4.621(cheduling. Finally)
.15 F 4.621(,t)-.65 G 2.121(here is no really portable)-4.621 F F1
(POSIX/ANSI\255C)4.621 E F0 1.09(based w)123 625.2 R 1.09
(ay to implement user)-.1 F 1.091(-space preempti)-.2 F 1.391 -.15(ve t)
-.25 H 1.091(hreading. Either the platform already has threads, or).15 F
.657(one has to hope that some semi-portable package e)123 637.2 R .657
(xists for it. And e)-.15 F -.15(ve)-.25 G 3.156(nt).15 G .656
(hose semi-portable packages)-3.156 F .227(usually ha)123 649.2 R .527
-.15(ve t)-.2 H 2.727(od).15 G .227(eal with assembler code and other n\
asty internals and are not easy to port to forthcom-)-2.727 F
(ing platforms.)123 661.2 Q .061
(So, in short: the matrix-dispatching approach is portable and f)108 678
R .061(ast, b)-.1 F .06(ut nasty to program. The thread schedul-)-.2 F
.908(ing approach is easy to program, b)108 690 R .908(ut suf)-.2 F .908
(fers from synchronization and portability problems caused by its)-.25 F
(preempti)108 702 Q .3 -.15(ve n)-.25 H(ature.).15 E(perl v5.8.6)72 768
Q 203.17(2004-12-03 4)167.62 F 0 Cg EP
%%Page: 5 5
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/Times-Roman@0 SF(PTH-MANU)72 48 Q 78.275(AL\(1\) User)-.4 F
(Contrib)2.5 E(uted Perl Documentation)-.2 E(PTH-MANU)80.775 E(AL\(1\))
-.4 E/F1 10/Times-Bold@0 SF(The Compr)108 84 Q(omise of Pth)-.18 E F0
.066(But wh)108 100.8 R 2.566(yn)-.05 G .066
(ot combine the good aspects of both approaches while a)-2.566 F -.2(vo)
-.2 G .066(iding their bad aspects? That').2 F 2.565(st)-.55 G .065
(he goal)-2.565 F(of)108 112.8 Q F1(Pth)4.574 E F0(.)A F1(Pth)4.574 E F0
2.074(implements easy-to-program threads of e)4.574 F -.15(xe)-.15 G
2.075(cution, b).15 F 2.075(ut a)-.2 F -.2(vo)-.2 G 2.075
(ids the problems of preempti).2 F -.15(ve)-.25 G
(scheduling by using non-preempti)108 124.8 Q .3 -.15(ve s)-.25 H
(cheduling instead.).15 E .48(This sounds lik)108 141.6 R .48
(e, and is, a useful approach. Ne)-.1 F -.15(ve)-.25 G .479
(rtheless, one has to k).15 F .479(eep the implications of non-preemp-)
-.1 F(ti)108 153.6 Q 1.984 -.15(ve t)-.25 H 1.684
(hread scheduling in mind when w).15 F 1.684(orking with)-.1 F F1(Pth)
4.184 E F0 4.184(.T)C 1.684(he follo)-4.184 F 1.684
(wing list summarizes a fe)-.25 F 4.184(we)-.25 G(ssential)-4.184 E
(points:)108 165.6 Q F1 5(oP)108 182.4 S(th pr)-5 E -.1(ov)-.18 G
(ides maximum portability).1 E 2.5(,b)-.55 G(ut)-2.7 E/F2 9/Times-Bold@0
SF(NO)2.5 E(T)-.36 E F1(the fanciest featur)2.5 E(es)-.18 E F0(.)A .951
(This is, because it uses a nifty and portable)118 200.4 R/F3 9
/Times-Roman@0 SF(POSIX/ANSI\255C)3.451 E F0 .95
(approach for thread creation \(and this w)3.451 F(ay)-.1 E(doesn')118
212.4 Q 3.615(tr)-.18 G 1.115(equire an)-3.615 F 3.615(yp)-.15 G 1.115(\
latform dependent assembler hacks\) and schedules the threads in non-pr\
eempti)-3.615 F -.15(ve)-.25 G -.1(wa)118 224.4 S 3.169(y\().1 G .669
(which doesn')-3.169 F 3.169(tr)-.18 G .669(equire unportable f)-3.169 F
.669(acilities lik)-.1 F(e)-.1 E/F4 10/Courier@0 SF(SIGVTALRM)3.169 E F0
.669(\). On the other hand, this w)B .668(ay not all)-.1 F -.1(fa)118
236.4 S(nc).1 E 2.83(yt)-.15 G .33
(hreading features can be implemented.)-2.83 F(Ne)5.33 E -.15(ve)-.25 G
.33(rtheless the a).15 F -.25(va)-.2 G .33(ilable f).25 F .33
(acilities are enough to pro)-.1 F(vide)-.15 E 2.5(ar)118 248.4 S(ob)
-2.5 E(ust and full-featured threading system.)-.2 E F1 5(oP)108 265.2 S
.243(th incr)-5 F .242(eases the r)-.18 F(esponsi)-.18 E -.1(ve)-.1 G
.242(ness and concurr).1 F .242(ency of an e)-.18 F -.1(ve)-.15 G
(nt-dri).1 E -.1(ve)-.1 G 2.742(na).1 G .242(pplication, b)-2.742 F(ut)
-.2 E F2(NO)2.742 E(T)-.36 E F1 .242(the con-)2.742 F(curr)118 277.2 Q
(ency of number)-.18 E(-crunching applications)-.37 E F0(.)A .169
(The reason is the non-preempti)118 295.2 R .469 -.15(ve s)-.25 H .169
(cheduling. Number).15 F .169
(-crunching applications usually require preempti)-.2 F -.15(ve)-.25 G
.474(scheduling to achie)118 307.2 R .774 -.15(ve c)-.25 H(oncurrenc).15
E 2.974(yb)-.15 G .474(ecause of their long)-2.974 F F3(CPU)2.973 E F0
-.2(bu)2.973 G .473(rsts. F).2 F .473(or them, non-preempti)-.15 F .773
-.15(ve s)-.25 H(chedul-).15 E 1.406(ing \(e)118 319.2 R -.15(ve)-.25 G
3.906(nt).15 G 1.406(ogether with e)-3.906 F 1.406
(xplicit yielding\) pro)-.15 F 1.406
(vides only the old concept of `coroutines'. On the other)-.15 F 1.286
(hand, e)118 331.2 R -.15(ve)-.25 G 1.286(nt dri).15 F -.15(ve)-.25 G
3.786(na).15 G 1.286(pplications bene\214t greatly from non-preempti)
-3.786 F 1.586 -.15(ve s)-.25 H 1.286(cheduling. The).15 F 3.786(yh)-.15
G -2.25 -.2(av e)-3.786 H 1.285(only short)3.985 F F3(CPU)118 343.2 Q F0
-.2(bu)4.445 G 1.945(rsts and lots of e).2 F -.15(ve)-.25 G 1.945
(nts to w).15 F 1.945(ait on, and this w)-.1 F 1.946(ay run f)-.1 F
1.946(aster under non-preempti)-.1 F 2.246 -.15(ve s)-.25 H(cheduling)
.15 E .198(because no unnecessary conte)118 355.2 R .197
(xt switching occurs, as it is the case for preempti)-.15 F .497 -.15
(ve s)-.25 H .197(cheduling. That').15 F 2.697(sw)-.55 G -.05(hy)-2.697
G F1(Pth)118 367.2 Q F0(is mainly intended for serv)2.5 E
(er type applications, although there is no technical restriction.)-.15
E F1 5(oP)108 384 S(th r)-5 E(equir)-.18 E(es thr)-.18 E
(ead-safe functions, b)-.18 E(ut)-.2 E F2(NO)2.5 E(T)-.36 E F1 -.18(re)
2.5 G(entrant functions).18 E F0(.)A 1.124(This nice f)118 402 R 1.124
(act e)-.1 F 1.124(xists ag)-.15 F 1.124
(ain because of the nature of non-preempti)-.05 F 1.424 -.15(ve s)-.25 H
1.124(cheduling, where a function isn').15 F(t)-.18 E .034
(interrupted and this w)118 414 R .033(ay cannot be reentered before it\
 returned. This is a great portability bene\214t, because)-.1 F 1.01
(thread-safety can be achie)118 426 R -.15(ve)-.25 G 3.511(dm).15 G
1.011(ore easily than reentrance possibility)-3.511 F 3.511(.E)-.65 G
1.011(specially this means that under)-3.511 F F1(Pth)118 438 Q F0 .121
(more e)2.621 F .121
(xisting third-party libraries can be used without side-ef)-.15 F .121
(fects than it')-.25 F 2.62(st)-.55 G .12(he case for other thread-)
-2.62 F(ing systems.)118 450 Q F1 5(oP)108 466.8 S(th doesn't r)-5 E
(equir)-.18 E 2.5(ea)-.18 G(ny k)-2.5 E(er)-.1 E(nel support, b)-.15 E
(ut can)-.2 E F2(NO)2.5 E(T)-.36 E F1(bene\214t fr)2.5 E(om multipr)-.18
E(ocessor machines)-.18 E F0(.)A .168(This means that)118 484.8 R F1
(Pth)2.668 E F0 .168(runs on almost all Unix k)2.668 F .168
(ernels, because the k)-.1 F .168(ernel does not need to be a)-.1 F -.1
(wa)-.15 G .168(re of the).1 F F1(Pth)118 496.8 Q F0 .607
(threads \(because the)3.107 F 3.107(ya)-.15 G .607(re implemented enti\
rely in user\255space\). On the other hand, it cannot bene\214t)-3.107 F
.292(from the e)118 508.8 R .292
(xistence of multiprocessors, because for this, k)-.15 F .292
(ernel support w)-.1 F .292(ould be needed. In practice, this)-.1 F
1.099(is no problem, because multiprocessor systems are rare, and porta\
bility is almost more important than)118 520.8 R(highest concurrenc)118
532.8 Q -.65(y.)-.15 G F1(The life cycle of a thr)108 555.6 Q(ead)-.18 E
F0 1.635 -.8(To u)108 572.4 T .035(nderstand the).8 F F1(Pth)2.535 E F0
.035(Application Programming Interf)2.535 F .035(ace \()-.1 F F3(API)A
F0 .035(\), it helps to \214rst understand the life c)B .036(ycle of)
-.15 F 2.5(at)108 584.4 S(hread in the)-2.5 E F1(Pth)2.5 E F0
(threading system. It can be illustrated with the follo)2.5 E
(wing directed graph:)-.25 E F4(NEW)186 601.2 Q/F5 10/Symbol SF<ef>192
613.2 Q F4(V)192 625.2 Q(+---> READY ---+)144 637.2 Q F5<ef>144 649.2 Q
F4(^)42 E F5<ef>36 E 42<efef>144 661.2 S F4(V)-6 E
(WAITING <--+-- RUNNING)126 673.2 Q F5<ef>234 685.2 Q F4 84(:V)144 697.2
S 36(SUSPENDED DEAD)126 709.2 R F0 .092(When a ne)108 726 R 2.592(wt)
-.25 G .092(hread is created, it is mo)-2.592 F -.15(ve)-.15 G 2.592(di)
.15 G .091(nto the)-2.592 F F2(NEW)2.591 E F0 .091
(queue of the scheduler)2.591 F 2.591(.O)-.55 G 2.591(nt)-2.591 G .091
(he ne)-2.591 F .091(xt dispatching for)-.15 F(perl v5.8.6)72 768 Q
203.17(2004-12-03 5)167.62 F 0 Cg EP
%%Page: 6 6
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/Times-Roman@0 SF(PTH-MANU)72 48 Q 78.275(AL\(1\) User)-.4 F
(Contrib)2.5 E(uted Perl Documentation)-.2 E(PTH-MANU)80.775 E(AL\(1\))
-.4 E .202(this thread, the scheduler picks it up from there and mo)108
84 R -.15(ve)-.15 G 2.703(si).15 G 2.703(tt)-2.703 G 2.703(ot)-2.703 G
(he)-2.703 E/F1 9/Times-Bold@0 SF(READ)2.703 E(Y)-.36 E F0 .203
(queue. This is a queue contain-)2.703 F .894(ing all threads which w)
108 96 R .894(ant to perform a)-.1 F/F2 9/Times-Roman@0 SF(CPU)3.394 E
F0 -.2(bu)3.393 G .893(rst. There the).2 F 3.393(ya)-.15 G .893
(re queued in priority order)-3.393 F 3.393(.O)-.55 G 3.393(ne)-3.393 G
.893(ach dis-)-3.393 F .583(patching step, the scheduler al)108 108 R
-.1(wa)-.1 G .583(ys remo).1 F -.15(ve)-.15 G 3.083(st).15 G .583
(he thread with the highest priority only)-3.083 F 3.083(.I)-.65 G 3.083
(tt)-3.083 G .584(hen increases the)-3.083 F
(priority of all remaining threads by 1, to pre)108 120 Q -.15(ve)-.25 G
(nt them from `starving'.).15 E .717(The thread which w)108 136.8 R .717
(as remo)-.1 F -.15(ve)-.15 G 3.217(df).15 G .717(rom the)-3.217 F F1
(READ)3.217 E(Y)-.36 E F0 .717(queue is the ne)3.217 F(w)-.25 E F1 -.27
(RU)3.216 G(NNING).27 E F0 .716(thread \(there is al)3.216 F -.1(wa)-.1
G .716(ys just).1 F(one)108 148.8 Q F1 -.27(RU)3.768 G(NNING).27 E F0
1.269(thread, of course\). The)3.768 F F1 -.27(RU)3.769 G(NNING).27 E F0
1.269(thread is assigned e)3.769 F -.15(xe)-.15 G 1.269
(cution control. After this thread).15 F 1.278(yields e)108 160.8 R -.15
(xe)-.15 G 1.278(cution \(either e).15 F 1.277(xplicitly by yielding e)
-.15 F -.15(xe)-.15 G 1.277
(cution or implicitly by calling a function which w).15 F(ould)-.1 E
.638(block\) there are three possibilities: Either it has terminated, t\
hen it is mo)108 172.8 R -.15(ve)-.15 G 3.138(dt).15 G 3.138(ot)-3.138 G
(he)-3.138 E F1(DEAD)3.138 E F0 .638(queue, or it has)3.138 F -2.15 -.25
(ev e)108 184.8 T .563(nts on which it w).25 F .563(ants to w)-.1 F .562
(ait, then it is mo)-.1 F -.15(ve)-.15 G 3.062(di).15 G .562(nto the)
-3.062 F F1 -1.08(WA)3.062 G(ITING)1.08 E F0 .562
(queue. Else it is assumed it w)3.062 F .562(ants to)-.1 F(perform more)
108 196.8 Q F2(CPU)2.5 E F0 -.2(bu)2.5 G
(rsts and immediately enters the).2 E F1(READ)2.5 E(Y)-.36 E F0
(queue ag)2.5 E(ain.)-.05 E 1.658(Before the ne)108 213.6 R 1.659
(xt thread is tak)-.15 F 1.659(en out of the)-.1 F F1(READ)4.159 E(Y)
-.36 E F0 1.659(queue, the)4.159 F F1 -1.08(WA)4.159 G(ITING)1.08 E F0
1.659(queue is check)4.159 F 1.659(ed for pending)-.1 F -2.15 -.25(ev e)
108 225.6 T .523(nts. If one or more e).25 F -.15(ve)-.25 G .522
(nts occurred, the threads that are w).15 F .522
(aiting on them are immediately mo)-.1 F -.15(ve)-.15 G 3.022(dt).15 G
3.022(ot)-3.022 G(he)-3.022 E F1(READ)108 237.6 Q(Y)-.36 E F0(queue.)2.5
E 1.553(The purpose of the)108 254.4 R F1(NEW)4.053 E F0 1.553
(queue has to do with the f)4.053 F 1.554(act that in)-.1 F/F3 10
/Times-Bold@0 SF(Pth)4.054 E F0 4.054(at)4.054 G 1.554(hread ne)-4.054 F
-.15(ve)-.25 G 4.054(rd).15 G 1.554(irectly switches to)-4.054 F .64
(another thread. A thread al)108 266.4 R -.1(wa)-.1 G .64(ys yields e).1
F -.15(xe)-.15 G .64
(cution to the scheduler and the scheduler dispatches to the ne).15 F
(xt)-.15 E .06(thread. So a freshly spa)108 278.4 R .06
(wned thread has to be k)-.15 F .06(ept some)-.1 F .06
(where until the scheduler gets a chance to pick it up)-.25 F
(for scheduling. That is what the)108 290.4 Q F1(NEW)2.5 E F0
(queue is for)2.5 E(.)-.55 E .028(The purpose of the)108 307.2 R F1
(DEAD)2.527 E F0 .027
(queue is to support thread joining. When a thread is mark)2.527 F .027
(ed to be unjoinable, it is)-.1 F 1.279(directly kick)108 319.2 R 1.28(\
ed out of the system after it terminated. But when it is joinable, it e\
nters the)-.1 F F1(DEAD)3.78 E F0(queue.)3.78 E
(There it remains until another thread joins it.)108 331.2 Q(Finally)108
348 Q 3.339(,t)-.65 G .839(here is a special separated queue named)
-3.339 F F1(SUSPENDED)3.339 E F0 3.339(,t)C 3.339(ow)-3.339 G .839
(here threads can be manually mo)-3.339 F -.15(ve)-.15 G(d).15 E 1.172
(from the)108 360 R F1(NEW)3.672 E F0(,)A F1(READ)3.672 E(Y)-.36 E F0
(or)3.672 E F1 -1.08(WA)3.672 G(ITING)1.08 E F0 1.173
(queues by the application. The purpose of this special queue is to)
3.672 F .859(temporarily absorb suspended threads until the)108 372 R
3.359(ya)-.15 G .858(re ag)-3.359 F .858
(ain resumed by the application. Suspended threads)-.05 F 1.471
(do not cost scheduling or e)108 384 R -.15(ve)-.25 G 1.471
(nt handling resources, because the).15 F 3.971(ya)-.15 G 1.472
(re temporarily completely out of the)-3.971 F(scheduler')108 396 Q
2.992(ss)-.55 G .491(cope. If a thread is resumed, it is mo)-2.992 F
-.15(ve)-.15 G 2.991(db).15 G .491
(ack to the queue from where it originally came and)-2.991 F(this w)108
408 Q(ay ag)-.1 E(ain enters the schedulers scope.)-.05 E/F4 10.95
/Times-Bold@0 SF(APPLICA)72 424.8 Q(TION PR)-1.04 E(OGRAMMING INTERF)
-.329 E -.602(AC)-.986 G 2.738(E\().602 G(API\))-2.738 E F0 .756
(In the follo)108 436.8 R .756(wing the)-.25 F F3(Pth)3.256 E/F5 10
/Times-Italic@0 SF .757(Application Pr)3.257 F -.1(og)-.45 G -.15(ra).1
G .757(mming Interface).15 F F0(\()3.257 E F2(API)A F0 3.257(\)i)C 3.257
(sd)-3.257 G .757(iscussed in detail. W)-3.257 F .757(ith the kno)-.4 F
(wl-)-.25 E .242(edge gi)108 448.8 R -.15(ve)-.25 G 2.742(na).15 G(bo)
-2.742 E -.15(ve)-.15 G 2.741(,i).15 G 2.741(ts)-2.741 G .241(hould no)
-2.741 F 2.741(wb)-.25 G 2.741(ee)-2.741 G .241(asy to understand ho)
-2.741 F 2.741(wt)-.25 G 2.741(op)-2.741 G .241
(rogram threads with this)-2.741 F F2(API)2.741 E F0 2.741(.I)C 2.741
(ng)-2.741 G .241(ood Unix)-2.741 F(tradition,)108 460.8 Q F3(Pth)2.98 E
F0 .48(functions use special return v)2.98 F .481(alues \()-.25 F/F6 10
/Courier@0 SF(NULL)A F0 .481(in pointer conte)2.981 F(xt,)-.15 E F6
(FALSE)2.981 E F0 .481(in boolean conte)2.981 F .481(xt and)-.15 F F6
<ad31>108 472.8 Q F0 .127(in inte)2.627 F .127(ger conte)-.15 F .127
(xt\) to indicate an error condition and set \(or pass through\) the)
-.15 F F6(errno)2.626 E F0 .126(system v)2.626 F .126(ariable to)-.25 F
(pass more details about the error to the caller)108 484.8 Q(.)-.55 E F3
(Global Library Management)108 507.6 Q F0 .428(The follo)108 524.4 R
.429(wing functions act on the library as a whole.)-.25 F(The)5.429 E
2.929(ya)-.15 G .429(re used to initialize and shutdo)-2.929 F .429
(wn the sched-)-.25 F(uler and fetch information from it.)108 536.4 Q
(int)108 553.2 Q F3(pth_init)2.5 E F0(\(v)A(oid\);)-.2 E 1.323
(This initializes the)128 565.2 R F3(Pth)3.823 E F0(library)3.822 E
3.822(.I)-.65 G 3.822(th)-3.822 G 1.322(as to be the \214rst)-3.822 F F3
(Pth)3.822 E F2(API)3.822 E F0 1.322
(function call in an application, and is)3.822 F(mandatory)128 577.2 Q
4.003(.I)-.65 G(t')-4.003 E 4.003(su)-.55 G 1.503(sually done at the be)
-4.003 F 1.503(gin of the)-.15 F F5(main\(\))4.003 E F0 1.504
(function of the application. This implicitly)4.003 F(spa)128 589.2 Q
1.094(wns the internal scheduler thread and transforms the single e)-.15
F -.15(xe)-.15 G 1.093(cution unit of the current process).15 F
(into a thread \(the `main' thread\). It returns)128 601.2 Q F6(TRUE)2.5
E F0(on success and)2.5 E F6(FALSE)2.5 E F0(on error)2.5 E(.)-.55 E(int)
108 618 Q F3(pth_kill)2.5 E F0(\(v)A(oid\);)-.2 E .335(This kills the)
128 630 R F3(Pth)2.835 E F0(library)2.835 E 2.835(.I)-.65 G 2.835(ts)
-2.835 G .335(hould be the last)-2.835 F F3(Pth)2.835 E F2(API)2.835 E
F0 .335(function call in an application, b)2.835 F .335
(ut is not really)-.2 F 1.336(required. It')128 642 R 3.836(su)-.55 G
1.336(sually done at the end of the main function of the application. A\
t least, it has to be)-3.836 F .111(called from within the main thread.\
 It implicitly kills all threads and transforms back the calling thread)
128 654 R .292(into the single e)128 666 R -.15(xe)-.15 G .292
(cution unit of the underlying process.).15 F .292(The usual w)5.292 F
.292(ay to terminate a)-.1 F F3(Pth)2.791 E F0(application)2.791 E .981
(is either a simple `)128 678 R F6(pth_exit\(0\);)A F0 3.482('i)C 3.482
(nt)-3.482 G .982(he main thread \(which w)-3.482 F .982
(aits for all other threads to termi-)-.1 F 1.196(nate, kills the threa\
ding system and then terminates the process\) or a `)128 690 R F6 1.196
(pth_kill\(\); exit\(0\))B F0(')A 2.37(\(which immediately kills the th\
reading system and terminates the process\). The)128 702 R F5
(pth_kill\(\))4.87 E F0(return)4.87 E .604
(immediately with a return code of)128 714 R F6(FALSE)3.104 E F0 .604
(if it is not called from within the main thread. Else it kills)3.104 F
(the threading system and returns)128 726 Q F6(TRUE)2.5 E F0(.)A
(perl v5.8.6)72 768 Q 203.17(2004-12-03 6)167.62 F 0 Cg EP
%%Page: 7 7
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/Times-Roman@0 SF(PTH-MANU)72 48 Q 78.275(AL\(1\) User)-.4 F
(Contrib)2.5 E(uted Perl Documentation)-.2 E(PTH-MANU)80.775 E(AL\(1\))
-.4 E(long)108 84 Q/F1 10/Times-Bold@0 SF(pth_ctrl)2.5 E F0
(\(unsigned long)A/F2 10/Times-Italic@0 SF(query)2.5 E F0 2.5(,.)C
(..\);)-2.5 E 1.582
(This is a generalized query/control function for the)128 96 R F1(Pth)
4.082 E F0(library)4.082 E 6.582(.T)-.65 G 1.582(he ar)-6.582 F(gument)
-.18 E F2(query)4.082 E F0 1.582(is a bitmask)4.082 F
(formed out of one or more)128 108 Q/F3 10/Courier@0 SF(PTH_CTRL_)2.5 E
/F4 9/Times-Italic@0 SF(XXXX)A F0(queries. Currently the follo)2.5 E
(wing queries are supported:)-.25 E F3(PTH_CTRL_GETTHREADS)128 124.8 Q
F0 .314(This returns the total number of threads currently in e)148
136.8 R 2.814(xistence. This)-.15 F .314(query actually is formed out)
2.814 F 2.684(of the combination of queries for threads in a particular\
 state, i.e., the)148 148.8 R F3(PTH_CTRL_GET-)5.184 E(THREADS)148 160.8
Q F0(query is equal to the OR-combination of all the follo)2.5 E
(wing specialized queries:)-.25 E F3(PTH_CTRL_GETTHREADS_NEW)148 178.8 Q
F0 1.226(for the number of threads in the ne)3.727 F 3.726(wq)-.25 G
1.226(ueue \(threads created)-3.726 F(via)148 190.8 Q F2(pth_spawn)4.907
E F0 2.407(\(3\) b)1.666 F 2.407(ut still not scheduled once\),)-.2 F F3
(PTH_CTRL_GETTHREADS_READY)4.907 E F0 2.408(for the)4.907 F .827
(number of threads in the ready queue \(threads who w)148 202.8 R .827
(ant to do)-.1 F/F5 9/Times-Roman@0 SF(CPU)3.326 E F0 -.2(bu)3.326 G
(rsts\),).2 E F3(PTH_CTRL_GET-)3.326 E(THREADS_RUNNING)148 214.8 Q F0
6.031(for the number of running threads \(al)8.531 F -.1(wa)-.1 G 6.031
(ys just one thread!\),).1 F F3(PTH_CTRL_GETTHREADS_WAITING)148 226.8 Q
F0 .737(for the number of threads in the w)3.237 F .737
(aiting queue \(threads)-.1 F -.1(wa)148 238.8 S .882(iting for e).1 F
-.15(ve)-.25 G(nts\),).15 E F3(PTH_CTRL_GETTHREADS_SUSPENDED)3.382 E F0
.882(for the number of threads in the)3.382 F .26
(suspended queue \(threads w)148 250.8 R .26(aiting to be resumed\) and)
-.1 F F3(PTH_CTRL_GETTHREADS_DEAD)2.76 E F0 .26(for the)2.76 F
(number of threads in the ne)148 262.8 Q 2.5(wq)-.25 G
(ueue \(terminated threads w)-2.5 E(aiting for a join\).)-.1 E F3
(PTH_CTRL_GETAVLOAD)128 279.6 Q F0 1.44(This requires a second ar)148
291.6 R 1.44(gument of type `)-.18 F F3 1.44(float *)B F0 3.94('\()C
1.44(pointer to a \215oating point v)-3.94 F 3.94(ariable\). It)-.25 F
.075(stores a \215oating point v)148 303.6 R .075(alue describing the e)
-.25 F .075(xponential a)-.15 F -.15(ve)-.2 G .074
(raged load of the scheduler in this v).15 F(ari-)-.25 E .409(able. The\
 load is a function from the number of threads in the ready queue of th\
e schedulers dis-)148 315.6 R .563(patching unit.)148 327.6 R .562(So a\
 load around 1.0 means there is only one ready thread \(the standard si\
tuation)5.563 F 1.031
(when the application has no high load\). A higher load v)148 339.6 R
1.032(alue means there a more threads ready)-.25 F 1.251(who w)148 351.6
R 1.251(ant to do)-.1 F F5(CPU)3.751 E F0 -.2(bu)3.751 G 1.251
(rsts. The a).2 F -.15(ve)-.2 G 1.251(rage load v).15 F 1.251
(alue updates once per second only)-.25 F 3.751(.T)-.65 G 1.25
(he return)-3.751 F -.25(va)148 363.6 S(lue for this query is al).25 E
-.1(wa)-.1 G(ys 0.).1 E F3(PTH_CTRL_GETPRIO)128 380.4 Q F0 .057
(This requires a second ar)148 392.4 R .057(gument of type `)-.18 F F3
(pth_t)A F0 2.557('w)C .057(hich identi\214es a thread.)-2.557 F .058
(It returns the priority)5.058 F(\(ranging from)148 404.4 Q F3
(PTH_PRIO_MIN)2.5 E F0(to)2.5 E F3(PTH_PRIO_MAX)2.5 E F0 2.5(\)o)C 2.5
(ft)-2.5 G(he gi)-2.5 E -.15(ve)-.25 G 2.5(nt).15 G(hread.)-2.5 E F3
(PTH_CTRL_GETNAME)128 421.2 Q F0 .055(This requires a second ar)148
433.2 R .055(gument of type `)-.18 F F3(pth_t)A F0 2.554('w)C .054
(hich identi\214es a thread. It returns the name of)-2.554 F(the gi)148
445.2 Q -.15(ve)-.25 G 2.5(nt).15 G(hread, i.e., the return v)-2.5 E
(alue of)-.25 E F2(pth_ctrl)2.5 E F0(\(3\) should be casted to a `)1.666
E F3(char *)A F0('.)A F3(PTH_CTRL_DUMPSTATE)128 462 Q F0 1.657
(This requires a second ar)148 474 R 1.657(gument of type `)-.18 F F3
1.657(FILE *)B F0 4.158('t)C 4.158(ow)-4.158 G 1.658
(hich a summary of the internal)-4.158 F F1(Pth)4.158 E F0 .319(library\
 state is written to. The main information which is currently written o\
ut is the current state)148 486 R(of the thread pool.)148 498 Q F3
(PTH_CTRL_FAVOURNEW)128 514.8 Q F0 .661(This requires a second ar)148
526.8 R .661(gument of type `)-.18 F F3(int)A F0 3.162('w)C .662
(hich speci\214ed whether the)-3.162 F/F6 9/Times-Bold@0 SF(GNU)3.162 E
F1(Pth)3.162 E F0(scheduler)3.162 E -.1(fa)148 538.8 S -.2(vo)-.1 G .17
(urs ne).2 F 2.67(wt)-.25 G .17(hreads on startup, i.e., whether the)
-2.67 F 2.67(ya)-.15 G .17(re mo)-2.67 F -.15(ve)-.15 G 2.67(df).15 G
.17(rom the ne)-2.67 F 2.67(wq)-.25 G .17(ueue to the top \(ar)-2.67 F
(gu-)-.18 E .567(ment is)148 550.8 R F3(TRUE)3.067 E F0 3.067(\)o)C
3.067(rm)-3.067 G .567(iddle \(ar)-3.067 F .567(gument is)-.18 F F3
(FALSE)3.068 E F0 3.068(\)o)C 3.068(ft)-3.068 G .568
(he ready queue. The def)-3.068 F .568(ault is to f)-.1 F -.2(avo)-.1 G
.568(ur ne).2 F(w)-.25 E .274(threads to mak)148 562.8 R 2.774(es)-.1 G
.274(ure the)-2.774 F 2.774(yd)-.15 G 2.774(on)-2.774 G .274(ot starv)
-2.774 F 2.774(ea)-.15 G .274
(lready at startup, although this slightly violates the strict)-2.774 F
(priority based scheduling.)148 574.8 Q(The function returns)128 592.8 Q
F3<ad31>2.5 E F0(on error)2.5 E(.)-.55 E(long)108 609.6 Q F1(pth_v)2.5 E
(ersion)-.1 E F0(\(v)A(oid\);)-.2 E .145(This function returns a he)128
621.6 R(x-v)-.15 E .145(alue `0x)-.25 F F2(V)A F4(RR)A F2(T)A F4(LL)A F0
2.645('w)C .145(hich describes the current)-2.645 F F1(Pth)2.645 E F0
.145(library v)2.645 F(ersion.)-.15 E F2(V)2.645 E F0 .145(is the)2.645
F -.15(ve)128 633.6 S(rsion,).15 E F4(RR)3.584 E F0 1.084(the re)3.584 F
(visions,)-.25 E F4(LL)3.584 E F0 1.084(the le)3.584 F -.15(ve)-.25 G
3.583(la).15 G(nd)-3.583 E F2(T)3.583 E F0 1.083(the type of the le)
3.583 F -.15(ve)-.25 G 3.583(l\().15 G(alphale)-3.583 E -.15(ve)-.25 G
1.083(l=0, betale).15 F -.15(ve)-.25 G 1.083(l=1, patch-).15 F(le)128
645.6 Q -.15(ve)-.25 G 1.289(l=2, etc\). F).15 F 1.289(or instance)-.15
F F1(Pth)3.789 E F0 -.15(ve)3.789 G 1.289
(rsion 1.0b1 is encoded as 0x100101.).15 F 1.29
(The reason for this unusual)6.29 F .887(mapping is that this w)128
657.6 R .887(ay the v)-.1 F .887(ersion number is steadily)-.15 F F2
(incr)3.387 E(easing)-.37 E F0 3.387(.T)C .887(he same v)-3.387 F .886
(alue is also a)-.25 F -.25(va)-.2 G(ilable).25 E(under compile time as)
128 669.6 Q F3(PTH_VERSION)2.5 E F0(.)A(perl v5.8.6)72 768 Q 203.17
(2004-12-03 7)167.62 F 0 Cg EP
%%Page: 8 8
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/Times-Roman@0 SF(PTH-MANU)72 48 Q 78.275(AL\(1\) User)-.4 F
(Contrib)2.5 E(uted Perl Documentation)-.2 E(PTH-MANU)80.775 E(AL\(1\))
-.4 E/F1 10/Times-Bold@0 SF(Thr)108 84 Q(ead Attrib)-.18 E(ute Handling)
-.2 E F0(Attrib)108 100.8 Q 1.256(ute objects are used in)-.2 F F1(Pth)
3.756 E F0 1.256(for tw)3.756 F 3.756(ot)-.1 G 1.256
(hings: First stand\255alone/unbound attrib)-3.756 F 1.256
(ute objects are used to)-.2 F 2.021(store attrib)108 112.8 R 2.021
(utes for to be spa)-.2 F 2.021(wned threads.)-.15 F 2.021
(Bounded attrib)7.021 F 2.02(ute objects are used to modify attrib)-.2 F
2.02(utes of)-.2 F(already e)108 124.8 Q(xisting threads. The follo)-.15
E(wing attrib)-.25 E(ute \214elds e)-.2 E(xists in attrib)-.15 E
(ute objects:)-.2 E/F2 10/Courier@0 SF(PTH_ATTR_PRIO)108 141.6 Q F0
(\(read\255write\) [)2.5 E F2(int)A F0(])A(Thread Priority between)128
153.6 Q F2(PTH_PRIO_MIN)2.5 E F0(and)2.5 E F2(PTH_PRIO_MAX)2.5 E F0 5
(.T)C(he def)-5 E(ault is)-.1 E F2(PTH_PRIO_STD)2.5 E F0(.)A F2
(PTH_ATTR_NAME)108 170.4 Q F0(\(read\255write\) [)2.5 E F2(char *)A F0
(])A
(Name of thread \(up to 40 characters are stored only\), mainly for deb)
128 182.4 Q(ugging purposes.)-.2 E F2(PTH_ATTR_DISPATCHES)108 199.2 Q F0
(\(read\255write\) [)2.5 E F2(int)A F0(])A .365(In bounded attrib)128
211.2 R .365(ute objects, this \214eld is incremented e)-.2 F -.15(ve)
-.25 G .366(ry time the conte).15 F .366(xt is switched to the associ-)
-.15 F(ated thread.)128 223.2 Q F2(PTH_ATTR_JOINABLE)108 240 Q F0
(\(read\255write> [)2.5 E F2(int)A F0(])A 1.263
(The thread detachment type,)128 252 R F2(TRUE)3.763 E F0 1.263
(indicates a joinable thread,)3.763 F F2(FALSE)3.763 E F0 1.263
(indicates a detached thread.)3.763 F 1.437
(When a thread is detached, after termination it is immediately kick)128
264 R 1.437(ed out of the system instead of)-.1 F
(inserted into the dead queue.)128 276 Q F2(PTH_ATTR_CANCEL_STATE)108
292.8 Q F0(\(read\255write\) [)2.5 E F2(unsigned int)A F0(])A 4.149
(The thread cancellation state, i.e., a combination of)128 304.8 R F2
(PTH_CANCEL_ENABLE)6.649 E F0(or)6.649 E F2(PTH_CAN-)6.649 E
(CEL_DISABLE)128 316.8 Q F0(and)2.5 E F2(PTH_CANCEL_DEFERRED)2.5 E F0
(or)2.5 E F2(PTH_CANCEL_ASYNCHRONOUS)2.5 E F0(.)A F2
(PTH_ATTR_STACK_SIZE)108 333.6 Q F0(\(read\255write\) [)2.5 E F2
(unsigned int)A F0(])A(The thread stack size in bytes. Use lo)128 345.6
Q(wer v)-.25 E(alues than 64)-.25 E/F3 9/Times-Roman@0 SF(KB)2.5 E F0
(with great care!)2.5 E F2(PTH_ATTR_STACK_ADDR)108 362.4 Q F0
(\(read\255write\) [)2.5 E F2(char *)A F0(])A 2.5(Ap)128 374.4 S
(ointer to the lo)-2.5 E(wer address of a chunk of)-.25 E/F4 10
/Times-Italic@0 SF(malloc)2.5 E F0(\(3\)'ed memory for the stack.)1.666
E F2(PTH_ATTR_TIME_SPAWN)108 391.2 Q F0(\(read\255only\) [)2.5 E F2
(pth_time_t)A F0(])A .589(The time when the thread w)128 403.2 R .589
(as spa)-.1 F 3.089(wned. This)-.15 F .59
(can be queried only when the attrib)3.089 F .59(ute object is bound)-.2
F(to a thread.)128 415.2 Q F2(PTH_ATTR_TIME_LAST)108 432 Q F0
(\(read\255only\) [)2.5 E F2(pth_time_t)A F0(])A .777
(The time when the thread w)128 444 R .777(as last dispatched.)-.1 F
.776(This can be queried only when the attrib)5.777 F .776
(ute object is)-.2 F(bound to a thread.)128 456 Q F2(PTH_ATTR_TIME_RAN)
108 472.8 Q F0(\(read\255only\) [)2.5 E F2(pth_time_t)A F0(])A .021
(The total time the thread w)128 484.8 R .021(as running.)-.1 F .022
(This can be queried only when the attrib)5.021 F .022
(ute object is bound to a)-.2 F(thread.)128 496.8 Q F2
(PTH_ATTR_START_FUNC)108 513.6 Q F0(\(read\255only\) [)2.5 E F2
(void *\(*\)\(void *\))A F0(])A(The thread start function.)128 525.6 Q
(This can be queried only when the attrib)5 E
(ute object is bound to a thread.)-.2 E F2(PTH_ATTR_START_ARG)108 542.4
Q F0(\(read\255only\) [)2.5 E F2(void *)A F0(])A(The thread start ar)128
554.4 Q 2.5(gument. This)-.18 F(can be queried only when the attrib)2.5
E(ute object is bound to a thread.)-.2 E F2(PTH_ATTR_STATE)108 571.2 Q
F0(\(read\255only\) [)2.5 E F2(pth_state_t)A F0(])A 5.973
(The scheduling state of the thread, i.e., either)128 583.2 R F2
(PTH_STATE_NEW)8.473 E F0(,)A F2(PTH_STATE_READY)8.473 E F0(,)A F2
(PTH_STATE_WAITING)128 595.2 Q F0 3.168(,o)C(r)-3.168 E F2
(PTH_STATE_DEAD)3.168 E F0 .668
(This can be queried only when the attrib)3.168 F .669(ute object)-.2 F
(is bound to a thread.)128 607.2 Q F2(PTH_ATTR_EVENTS)108 624 Q F0
(\(read\255only\) [)2.5 E F2(pth_event_t)A F0(])A .102(The e)128 636 R
-.15(ve)-.25 G .101(nt ring the thread is w).15 F .101(aiting for)-.1 F
5.101(.T)-.55 G .101(his can be queried only when the attrib)-5.101 F
.101(ute object is bound to)-.2 F 2.5(at)128 648 S(hread.)-2.5 E F2
(PTH_ATTR_BOUND)108 664.8 Q F0(\(read\255only\) [)2.5 E F2(int)A F0(])A
(Whether the attrib)128 676.8 Q(ute object is bound \()-.2 E F2(TRUE)A
F0 2.5(\)t)C 2.5(oat)-2.5 G(hread or not \()-2.5 E F2(FALSE)A F0(\).)A
(The follo)108 693.6 Q(wing)-.25 E F3(API)2.5 E F0
(functions can be used to handle the attrib)2.5 E(ute objects:)-.2 E
(perl v5.8.6)72 768 Q 203.17(2004-12-03 8)167.62 F 0 Cg EP
%%Page: 9 9
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/Times-Roman@0 SF(PTH-MANU)72 48 Q 78.275(AL\(1\) User)-.4 F
(Contrib)2.5 E(uted Perl Documentation)-.2 E(PTH-MANU)80.775 E(AL\(1\))
-.4 E(pth_attr_t)108 84 Q/F1 10/Times-Bold@0 SF(pth_attr_of)2.5 E F0
(\(pth_t)A/F2 10/Times-Italic@0 SF(tid)2.5 E F0(\);)A 1.832
(This returns a ne)128 96 R 4.332(wa)-.25 G(ttrib)-4.332 E 1.832
(ute object)-.2 F F2(bound)4.332 E F0 1.832(to thread)4.332 F F2(tid)
4.333 E F0 6.833(.A)C 2.133 -.15(ny q)-6.833 H 1.833
(ueries on this object directly fetch).15 F(attrib)128 108 Q .466
(utes from)-.2 F F2(tid)2.966 E F0 2.966(.A)C .466(nd attrib)-2.966 F
.466(ute modi\214cations directly change)-.2 F F2(tid)2.966 E F0 2.966
(.U)C .466(se such attrib)-2.966 F .465(ute objects to mod-)-.2 F(ify e)
128 120 Q(xisting threads.)-.15 E(pth_attr_t)108 136.8 Q F1
(pth_attr_new)2.5 E F0(\(v)A(oid\);)-.2 E .615(This returns a ne)128
148.8 R(w)-.25 E F2(unbound)3.115 E F0(attrib)3.115 E .615
(ute object. An implicit)-.2 F F2(pth_attr_init\(\))3.115 E F0 .615
(is done on it. An)3.115 F 3.115(yq)-.15 G .615(ueries on)-3.115 F 1.999
(this object just fetch stored attrib)128 160.8 R 1.999(utes from it.)
-.2 F 1.998(And attrib)6.999 F 1.998
(ute modi\214cations just change the stored)-.2 F(attrib)128 172.8 Q 2.5
(utes. Use)-.2 F(such attrib)2.5 E
(ute objects to pre-con\214gure attrib)-.2 E(utes for to be spa)-.2 E
(wned threads.)-.15 E(int)108 189.6 Q F1(pth_attr_init)2.5 E F0
(\(pth_attr_t)A F2(attr)2.5 E F0(\);)A .6(This initializes an attrib)128
201.6 R .6(ute object)-.2 F F2(attr)3.1 E F0 .6(to the def)3.1 F .6
(ault v)-.1 F(alues:)-.25 E/F3 10/Courier@0 SF(PTH_ATTR_PRIO)3.1 E F0
(:=)3.1 E F3(PTH_PRIO_STD)3.1 E F0(,)A F3(PTH_ATTR_NAME)128 213.6 Q F0
2.226(:= `)4.726 F F3(unknown)A F0(',)A F3(PTH_ATTR_DISPATCHES)4.726 E
F0(:=)4.726 E F3(0)4.726 E F0(,)A F3(PTH_ATTR_JOINABLE)4.725 E F0(:=)
4.725 E F3(TRUE)128 225.6 Q F0(,)A F3(PTH_ATTR_CANCELSTATE)4.832 E F0
(:=)4.832 E F3(PTH_CANCEL_DEFAULT)4.832 E F0(,)A F3(PTH_ATTR_STACK_SIZE)
4.832 E F0(:=)4.832 E .776(64*1024 and)128 237.6 R F3
(PTH_ATTR_STACK_ADDR)3.276 E F0(:=)3.276 E F3(NULL)3.276 E F0 3.276(.A)C
.776(ll other)-3.276 F F3(PTH_ATTR_*)3.276 E F0(attrib)3.276 E .776
(utes are read-only)-.2 F(attrib)128 249.6 Q 2.148(utes and don')-.2 F
4.648(tr)-.18 G(ecei)-4.648 E 2.448 -.15(ve d)-.25 H(ef).15 E 2.148
(ault v)-.1 F 2.148(alues in)-.25 F F2(attr)4.649 E F0 4.649(,b)C 2.149
(ecause the)-4.649 F 4.649(ye)-.15 G 2.149
(xists only for bounded attrib)-4.799 F(ute)-.2 E(objects.)128 261.6 Q
(int)108 278.4 Q F1(pth_attr_set)2.5 E F0(\(pth_attr_t)A F2(attr)2.5 E
F0 2.5(,i)C(nt)-2.5 E F2(\214eld)2.5 E F0 2.5(,.)C(..\);)-2.5 E .718
(This sets the attrib)128 290.4 R .718(ute \214eld)-.2 F F2(\214eld)
3.218 E F0(in)3.218 E F2(attr)3.218 E F0 .718(to a v)3.218 F .718
(alue speci\214ed as an additional ar)-.25 F .717(gument on the v)-.18 F
(ariable)-.25 E(ar)128 302.4 Q(gument list. The follo)-.18 E
(wing attrib)-.25 E(ute)-.2 E F2(\214elds)2.5 E F0(and ar)2.5 E
(gument pairs can be used:)-.18 E F3 60(PTH_ATTR_PRIO int)134 320.4 R 60
(PTH_ATTR_NAME char)134 332.4 R(*)6 E 24(PTH_ATTR_DISPATCHES int)134
344.4 R 36(PTH_ATTR_JOINABLE int)134 356.4 R 12
(PTH_ATTR_CANCEL_STATE unsigned)134 368.4 R(int)6 E 24
(PTH_ATTR_STACK_SIZE unsigned)134 380.4 R(int)6 E 24
(PTH_ATTR_STACK_ADDR char)134 392.4 R(*)6 E F0(int)108 409.2 Q F1
(pth_attr_get)2.5 E F0(\(pth_attr_t)A F2(attr)2.5 E F0 2.5(,i)C(nt)-2.5
E F2(\214eld)2.5 E F0 2.5(,.)C(..\);)-2.5 E 1.377(This retrie)128 421.2
R -.15(ve)-.25 G 3.877(st).15 G 1.377(he attrib)-3.877 F 1.377
(ute \214eld)-.2 F F2(\214eld)3.877 E F0(in)3.877 E F2(attr)3.878 E F0
1.378(and stores its v)3.878 F 1.378(alue in the v)-.25 F 1.378
(ariable speci\214ed through a)-.25 F 1.431(pointer in an additional ar)
128 433.2 R 1.431(gument on the v)-.18 F 1.431(ariable ar)-.25 F 1.431
(gument list. The follo)-.18 F(wing)-.25 E F2(\214elds)3.93 E F0 1.43
(and ar)3.93 F(gument)-.18 E(pairs can be used:)128 445.2 Q F3 60
(PTH_ATTR_PRIO int)134 463.2 R(*)6 E 60(PTH_ATTR_NAME char)134 475.2 R
(**)6 E 24(PTH_ATTR_DISPATCHES int)134 487.2 R(*)6 E 36
(PTH_ATTR_JOINABLE int)134 499.2 R(*)6 E 12
(PTH_ATTR_CANCEL_STATE unsigned)134 511.2 R(int *)6 E 24
(PTH_ATTR_STACK_SIZE unsigned)134 523.2 R(int *)6 E 24
(PTH_ATTR_STACK_ADDR char)134 535.2 R(**)6 E 24
(PTH_ATTR_TIME_SPAWN pth_time_t)134 547.2 R(*)6 E 30
(PTH_ATTR_TIME_LAST pth_time_t)134 559.2 R(*)6 E 36
(PTH_ATTR_TIME_RAN pth_time_t)134 571.2 R(*)6 E 24
(PTH_ATTR_START_FUNC void)134 583.2 R(*\(**\)\(void *\))6 E 30
(PTH_ATTR_START_ARG void)134 595.2 R(**)6 E 54
(PTH_ATTR_STATE pth_state_t)134 607.2 R(*)6 E 48
(PTH_ATTR_EVENTS pth_event_t)134 619.2 R(*)6 E 54(PTH_ATTR_BOUND int)134
631.2 R(*)6 E F0(int)108 648 Q F1(pth_attr_destr)2.5 E(oy)-.18 E F0
(\(pth_attr_t)A F2(attr)2.5 E F0(\);)A(This destro)128 660 Q
(ys a attrib)-.1 E(ute object)-.2 E F2(attr)2.5 E F0 2.5(.A)C(fter this)
-2.5 E F2(attr)2.5 E F0(is no longer a v)2.5 E(alid attrib)-.25 E
(ute object.)-.2 E(perl v5.8.6)72 768 Q 203.17(2004-12-03 9)167.62 F 0
Cg EP
%%Page: 10 10
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/Times-Roman@0 SF(PTH-MANU)72 48 Q 78.275(AL\(1\) User)-.4 F
(Contrib)2.5 E(uted Perl Documentation)-.2 E(PTH-MANU)80.775 E(AL\(1\))
-.4 E/F1 10/Times-Bold@0 SF(Thr)108 84 Q(ead Contr)-.18 E(ol)-.18 E F0
(The follo)108 100.8 Q
(wing functions control the threading itself and mak)-.25 E 2.5(eu)-.1 G
2.5(pt)-2.5 G(he main)-2.5 E/F2 9/Times-Roman@0 SF(API)2.5 E F0(of the)
2.5 E F1(Pth)2.5 E F0(library)2.5 E(.)-.65 E(pth_t)108 117.6 Q F1
(pth_spawn)2.5 E F0(\(pth_attr_t)A/F3 10/Times-Italic@0 SF(attr)2.5 E F0
2.5(,v)C(oid *\(*)-2.7 E F3(entry)A F0(\)\(v)A(oid *\), v)-.2 E(oid *)
-.2 E F3(ar)A(g)-.37 E F0(\);)A 1.859(This spa)128 129.6 R 1.859
(wns a ne)-.15 F 4.359(wt)-.25 G 1.859(hread with the attrib)-4.359 F
1.859(utes gi)-.2 F -.15(ve)-.25 G 4.359(ni).15 G(n)-4.359 E F3(attr)
4.359 E F0(\(or)4.36 E/F4 10/Courier@0 SF(PTH_ATTR_DEFAULT)4.36 E F0
1.86(for def)4.36 F(ault)-.1 E(attrib)128 141.6 Q .19
(utes \255 which means that thread priority)-.2 F 2.689(,j)-.65 G .189
(oinability and cancel state are inherited from the current)-2.689 F
1.343(thread\) with the starting point at routine)128 153.6 R F3(entry)
3.843 E F0 3.843(;t)C 1.343
(he dispatch count is not inherited from the current)-3.843 F 2.647
(thread if)128 165.6 R F3(attr)5.147 E F0 2.646
(is not speci\214ed \255 rather)5.146 F 5.146(,i)-.4 G 5.146(ti)-5.146 G
5.146(si)-5.146 G 2.646(nitialized to zero.)-5.146 F 2.646
(This entry routine is called as)7.646 F(`pth_e)128 177.6 Q(xit\()-.15 E
F3(entry)A F0(\()A F3(ar)A(g)-.37 E F0 2.838(\)\)' inside the ne)B 5.338
(wt)-.25 G 2.838(hread unit, i.e.,)-5.338 F F3(entry)5.339 E F0 3.939
-.55('s r)D 2.839(eturn v).55 F 2.839(alue is fed to an implicit)-.25 F
F3(pth_e)128 189.6 Q(xit)-.2 E F0 .439(\(3\). So the thread can also e)
1.666 F .438(xit by just returning. Ne)-.15 F -.15(ve)-.25 G .438
(rtheless the thread can also e).15 F .438(xit e)-.15 F(xplic-)-.15 E
.816(itly at an)128 201.6 R 3.317(yt)-.15 G .817(ime by calling)-3.317 F
F3(pth_e)3.317 E(xit)-.2 E F0 .817(\(3\). But k)1.666 F .817
(eep in mind that calling the)-.1 F F2(POSIX)3.317 E F0(function)3.317 E
F3 -.2(ex)3.317 G(it).2 E F0 .817(\(3\) still)1.666 F
(terminates the complete process and not just the current thread.)128
213.6 Q .049(There is no)128 231.6 R F1(Pth)2.549 E F0 .048
(\255internal limit on the number of threads one can spa)B .048(wn, e)
-.15 F .048(xcept the limit implied by the)-.15 F -.2(av)128 243.6 S
.115(ailable virtual memory)-.05 F(.)-.65 E F1(Pth)2.615 E F0 .115
(internally k)2.615 F .115
(eeps track of thread in dynamic data structures. The function)-.1 F
(returns)128 255.6 Q F4(NULL)2.5 E F0(on error)2.5 E(.)-.55 E(int)108
272.4 Q F1(pth_once)2.5 E F0(\(pth_once_t *)A F3(ctrlvar)A F0 2.5(,v)C
(oid \(*)-2.7 E F3(func)A F0(\)\(v)A(oid *\), v)-.2 E(oid *)-.2 E F3(ar)
A(g)-.37 E F0(\);)A 1.124(This is a con)128 284.4 R -.15(ve)-.4 G 1.123
(nience function which uses a control v).15 F 1.123(ariable of type)-.25
F F4(pth_once_t)3.623 E F0 1.123(to mak)3.623 F 3.623(es)-.1 G 1.123
(ure a)-3.623 F .017(constructor function)128 296.4 R F3(func)2.517 E F0
.017(is called only once as `)2.517 F F3(func)A F0(\()A F3(ar)A(g)-.37 E
F0 .018(\)' in the system. In other w)B .018(ords: Only the \214rst)-.1
F .759(call to)128 308.4 R F3(pth_once)3.259 E F0 .759(\(3\) by an)1.666
F 3.259(yt)-.15 G .759(hread in the system succeeds. The v)-3.259 F .759
(ariable referenced via)-.25 F F3(ctrlvar)3.259 E F0(should)3.258 E
(be declared as `)128 320.4 Q F4(pth_once_t)A F3(variable-name)2.5 E F0
(=)2.5 E F4(PTH_ONCE_INIT)2.5 E F0(;' before calling this function.)A
(pth_t)108 337.2 Q F1(pth_self)2.5 E F0(\(v)A(oid\);)-.2 E .333(This ju\
st returns the unique thread handle of the currently running thread.)128
349.2 R .334(This handle itself has to be)5.334 F .181
(treated as an opaque entity by the application.)128 361.2 R(It')5.181 E
2.681(su)-.55 G .18(sually used as an ar)-2.681 F .18
(gument to other functions who)-.18 F(require an ar)128 373.2 Q
(gument of type)-.18 E F4(pth_t)2.5 E F0(.)A(int)108 390 Q F1
(pth_suspend)2.5 E F0(\(pth_t)A F3(tid)2.5 E F0(\);)A .202
(This suspends a thread)128 402 R F3(tid)2.702 E F0 .202
(until it is manually resumed ag)2.702 F .202(ain via)-.05 F F3(pth_r)
2.702 E(esume)-.37 E F0 .202(\(3\). F)1.666 F .202
(or this, the thread is)-.15 F(mo)128 414 Q -.15(ve)-.15 G 2.633(dt).15
G 2.633(ot)-2.633 G(he)-2.633 E/F5 9/Times-Bold@0 SF(SUSPENDED)2.633 E
F0 .132(queue and this w)2.632 F .132
(ay is completely out of the scheduler')-.1 F 2.632(se)-.55 G -.15(ve)
-2.882 G .132(nt handling and).15 F .137
(thread dispatching scope. Suspending the current thread is not allo)128
426 R 2.637(wed. The)-.25 F .137(function returns)2.637 F F4(TRUE)2.638
E F0(on)2.638 E(success and)128 438 Q F4(FALSE)2.5 E F0(on errors.)2.5 E
(int)108 454.8 Q F1(pth_r)2.5 E(esume)-.18 E F0(\(pth_t)A F3(tid)2.5 E
F0(\);)A 1.919(This function resumes a pre)128 466.8 R 1.919
(viously suspended thread)-.25 F F3(tid)4.418 E F0 4.418(,i)C(.e.)-4.418
E F3(tid)4.418 E F0 1.918(has to stay on the)4.418 F F5(SUSPENDED)4.418
E F0 .183(queue. The thread is mo)128 478.8 R -.15(ve)-.15 G 2.683(dt)
.15 G 2.683(ot)-2.683 G(he)-2.683 E F5(NEW)2.683 E F0(,)A F5(READ)2.684
E(Y)-.36 E F0(or)2.684 E F5 -1.08(WA)2.684 G(ITING)1.08 E F0 .184
(queue \(dependent on what its state w)2.684 F(as)-.1 E .131(when the)
128 490.8 R F3(pth_suspend)2.631 E F0 .13
(\(3\) call were made\) and this w)1.666 F .13(ay ag)-.1 F .13
(ain enters the e)-.05 F -.15(ve)-.25 G .13(nt handling and thread dis-)
.15 F(patching scope of the scheduler)128 502.8 Q 2.5(.T)-.55 G
(he function returns)-2.5 E F4(TRUE)2.5 E F0(on success and)2.5 E F4
(FALSE)2.5 E F0(on errors.)2.5 E(int)108 519.6 Q F1(pth_raise)2.5 E F0
(\(pth_t)A F3(tid)2.5 E F0 2.5(,i)C(nt)-2.5 E F3(sig)2.5 E F0(\))A .335
(This function raises a signal for deli)128 531.6 R -.15(ve)-.25 G .335
(ry to thread).15 F F3(tid)2.835 E F0(only)2.835 E 5.335(.W)-.65 G .335
(hen one just raises a signal via)-5.335 F F3 -.15(ra)2.836 G(ise).15 E
F0(\(3\))1.666 E(or)128 543.6 Q F3(kill)2.608 E F0 .108(\(2\), its deli)
1.666 F -.15(ve)-.25 G .107
(red to an arbitrary thread which has this signal not block).15 F 2.607
(ed. W)-.1 F(ith)-.4 E F3(pth_r)2.607 E(aise)-.15 E F0 .107(\(3\) one)
1.666 F .164(can send a signal to a thread and its guarantees that only\
 this thread gets the signal deli)128 555.6 R -.15(ve)-.25 G .165
(red. But k).15 F(eep)-.1 E 1.686(in mind that ne)128 567.6 R -.15(ve)
-.25 G 1.686(rtheless the signals).15 F F3(action)4.185 E F0 1.685
(is still con\214gured)4.185 F F3(pr)4.185 E(ocess)-.45 E F0 4.185
(\255wide. When)B F3(sig)4.185 E F0 1.685(is 0 plain)4.185 F .007
(thread checking is performed, i.e., `)128 579.6 R F4 .007
(pth_raise\(tid, 0\))B F0 2.507('r)C(eturns)-2.507 E F4(TRUE)2.507 E F0
.007(when thread)2.507 F F3(tid)2.507 E F0 .007(still e)2.507 F(xists)
-.15 E(in the)128 591.6 Q F5(PTH)2.5 E F0(system b)2.5 E(ut doesn')-.2 E
2.5(ts)-.18 G(end an)-2.5 E 2.5(ys)-.15 G(ignal to it.)-2.5 E(int)108
608.4 Q F1(pth_yield)2.5 E F0(\(pth_t)A F3(tid)2.5 E F0(\);)A 1.629
(This e)128 620.4 R 1.629(xplicitly yields back the e)-.15 F -.15(xe)
-.15 G 1.629(cution control to the scheduler thread.).15 F 1.628
(Usually the e)6.628 F -.15(xe)-.15 G 1.628(cution is).15 F .221
(implicitly transferred back to the scheduler when a thread w)128 632.4
R .221(aits for an e)-.1 F -.15(ve)-.25 G .221
(nt. But when a thread has to).15 F .25(do lar)128 644.4 R(ger)-.18 E F2
(CPU)2.75 E F0 -.2(bu)2.75 G .25
(rsts, it can be reasonable to interrupt it e).2 F .25
(xplicitly by doing a fe)-.15 F(w)-.25 E F3(pth_yield)2.75 E F0 .25
(\(3\) calls to)1.666 F(gi)128 656.4 Q 1.092 -.15(ve o)-.25 H .793
(ther threads a chance to e).15 F -.15(xe)-.15 G .793(cute, too.).15 F
.793(This ob)5.793 F .793(viously is the cooperating part of)-.15 F F1
(Pth)3.293 E F0 5.793(.A)C(thread)-2.5 E F3 .823(has not)128 668.4 R F0
.823(to yield e)3.323 F -.15(xe)-.15 G .823
(cution, of course. But when you w).15 F .823(ant to program a serv)-.1
F .823(er application with good)-.15 F 1.296
(response times the threads should be cooperati)128 680.4 R -.15(ve)-.25
G 3.796(,i).15 G 1.296(.e., when the)-3.796 F 3.796(ys)-.15 G 1.297
(hould split their)-3.796 F F2(CPU)3.797 E F0 -.2(bu)3.797 G 1.297
(rsts into).2 F(smaller units with this call.)128 692.4 Q .294
(Usually one speci\214es)128 710.4 R F3(tid)2.794 E F0(as)2.794 E F4
(NULL)2.794 E F0 .294
(to indicate to the scheduler that it can freely decide which thread to)
2.794 F .541(dispatch ne)128 722.4 R 3.041(xt. But)-.15 F .541(if one w)
3.041 F .542
(ants to indicate to the scheduler that a particular thread should be f)
-.1 F -.2(avo)-.1 G(red).2 E(perl v5.8.6)72 768 Q 198.17(2004-12-03 10)
167.62 F 0 Cg EP
%%Page: 11 11
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/Times-Roman@0 SF(PTH-MANU)72 48 Q 78.275(AL\(1\) User)-.4 F
(Contrib)2.5 E(uted Perl Documentation)-.2 E(PTH-MANU)80.775 E(AL\(1\))
-.4 E 1.025(on the ne)128 84 R 1.024
(xt dispatching step, one can specify this thread e)-.15 F(xplicitly)
-.15 E 3.524(.T)-.65 G 1.024(his allo)-3.524 F 1.024
(ws the usage of the old)-.25 F .798(concept of)128 96 R/F1 10
/Times-Italic@0 SF(cor)3.298 E(outines)-.45 E F0 .799
(where a thread/routine switches to a particular cooperating thread. If)
3.298 F F1(tid)3.299 E F0 .799(is not)3.299 F/F2 10/Courier@0 SF(NULL)
128 108 Q F0 .612(and points to a)3.112 F F1(ne)3.112 E(w)-.15 E F0(or)
3.112 E F1 -.37(re)3.112 G(ady).37 E F0 .612
(thread, it is guaranteed that this thread recei)3.112 F -.15(ve)-.25 G
3.111(se).15 G -.15(xe)-3.261 G .611(cution control).15 F 2.498
(on the ne)128 120 R 2.499(xt dispatching step. If)-.15 F F1(tid)4.999 E
F0 2.499(is in a dif)4.999 F 2.499(ferent state \(that is, not in)-.25 F
F2(PTH_STATE_NEW)4.999 E F0(or)4.999 E F2(PTH_STATE_READY)128 132 Q F0
2.5(\)a)C 2.5(ne)-2.5 G(rror is reported.)-2.5 E .787
(The function usually returns)128 150 R F2(TRUE)3.287 E F0 .787
(for success and only)3.287 F F2(FALSE)3.287 E F0(\(with)3.287 E F2
(errno)3.287 E F0 .787(set to)3.287 F F2(EINVAL)3.287 E F0 3.286(\)i)C
(f)-3.286 E F1(tid)3.286 E F0(speci\214ed an in)128 162 Q -.25(va)-.4 G
(lid or still not ne).25 E 2.5(wo)-.25 G 2.5(rr)-2.5 G(eady thread.)-2.5
E(int)108 178.8 Q/F3 10/Times-Bold@0 SF(pth_nap)2.5 E F0(\(pth_time_t)A
F1(naptime)2.5 E F0(\);)A .129(This functions suspends the e)128 190.8 R
-.15(xe)-.15 G .129(cution of the current thread until).15 F F1(naptime)
2.629 E F0 .13(is elapsed.)2.63 F F1(naptime)2.63 E F0 .13(is of type)
2.63 F F2(pth_time_t)128 202.8 Q F0 .413(and this w)2.913 F .412(ay has\
 theoretically a resolution of one microsecond. In practice you should)
-.1 F .217(neither rely on this nor that the thread is a)128 214.8 R -.1
(wa)-.15 G -.1(ke).1 G .218(ned e).1 F .218(xactly after)-.15 F F1
(naptime)2.718 E F0 .218(has elapsed. It')2.718 F 2.718(so)-.55 G .218
(nly guaran-)-2.718 F .308(tees that the thread will sleep at least)128
226.8 R F1(naptime)2.807 E F0 2.807(.B)C .307
(ut because of the non-preempti)-2.807 F .607 -.15(ve n)-.25 H .307
(ature of).15 F F3(Pth)2.807 E F0 .307(it can)2.807 F .724
(last longer \(when another thread k)128 238.8 R .725(ept the)-.1 F/F4 9
/Times-Roman@0 SF(CPU)3.225 E F0 .725
(for a long time\). Additionally the resolution is depen-)3.225 F .358(\
dent of the implementation of timers by the operating system and these \
usually ha)128 250.8 R .657 -.15(ve o)-.2 H .357(nly a resolution).15 F
.826(of 10 microseconds or lar)128 262.8 R(ger)-.18 E 3.326(.B)-.55 G
.826(ut usually this isn')-3.326 F 3.326(ti)-.18 G .827
(mportant for an application unless it tries to use)-3.326 F(this f)128
274.8 Q(acility for real time tasks.)-.1 E(int)108 291.6 Q F3(pth_wait)
2.5 E F0(\(pth_e)A -.15(ve)-.25 G(nt_t).15 E F1 -.15(ev)2.5 G F0(\);).15
E .168(This is the link between the scheduler and the e)128 303.6 R -.15
(ve)-.25 G .168(nt f).15 F .168(acility \(see belo)-.1 F 2.668(wf)-.25 G
.168(or the v)-2.668 F(arious)-.25 E F1(pth_e)2.668 E(vent_xxx\(\))-.15
E F0 1.095(functions\). It')128 315.6 R 3.595(sm)-.55 G 1.095
(odeled lik)-3.595 F(e)-.1 E F1(select)3.595 E F0 1.095
(\(2\), i.e., one gi)1.666 F -.15(ve)-.25 G 3.595(st).15 G 1.095
(his function one or more e)-3.595 F -.15(ve)-.25 G 1.096
(nts \(in the e).15 F -.15(ve)-.25 G(nt).15 E .198(ring speci\214ed by)
128 327.6 R F1 -.15(ev)2.698 G F0 2.698(\)o).15 G 2.698(nw)-2.698 G .198
(hich the current thread w)-2.698 F .198(ants to w)-.1 F .197
(ait. The scheduler a)-.1 F -.1(wa)-.15 G -.1(ke).1 G 2.697(st).1 G .197
(he thread when)-2.697 F .168(one ore more of them occurred or f)128
339.6 R .168(ailed after tagging them as such. The)-.1 F F1 -.15(ev)
2.668 G F0(ar)2.818 E .168(gument is a)-.18 F F1(pointer)2.668 E F0 .168
(to an)2.668 F -2.15 -.25(ev e)128 351.6 T .595(nt ring which isn').25 F
3.095(tc)-.18 G .595(hanged e)-3.095 F .595(xcept for the tagging.)-.15
F F1(pth_wait)3.095 E F0 .595(\(3\) returns the number of occurred or)
1.666 F -.1(fa)128 363.6 S(iled e).1 E -.15(ve)-.25 G
(nts and the application can use).15 E F1(pth_e)2.5 E(vent_status)-.15 E
F0(\(3\) to test which e)1.666 E -.15(ve)-.25 G(nts occurred or f).15 E
(ailed.)-.1 E(int)108 380.4 Q F3(pth_cancel)2.5 E F0(\(pth_t)A F1(tid)
2.5 E F0(\);)A .528(This cancels a thread)128 392.4 R F1(tid)3.029 E F0
3.029(.H)C 1.029 -.25(ow t)-3.029 H .529
(he cancellation is done depends on the cancellation state of).25 F F1
(tid)3.029 E F0(which)3.029 E 1.039
(the thread can con\214gure itself. When its state is)128 404.4 R F2
(PTH_CANCEL_DISABLE)3.538 E F0 3.538(ac)3.538 G 1.038
(ancellation request is)-3.538 F .954(just made pending.)128 416.4 R
.954(When it is)5.954 F F2(PTH_CANCEL_ENABLE)3.454 E F0 .955
(it depends on the cancellation type what is)3.454 F .409
(performed. When its)128 428.4 R F2(PTH_CANCEL_DEFERRED)2.908 E F0(ag)
2.908 E .408(ain the cancellation request is just made pending.)-.05 F
1.349(But when its)128 440.4 R F2(PTH_CANCEL_ASYNCHRONOUS)3.849 E F0
1.349(the thread is immediately canceled before)3.849 F F1(pth_can-)
3.849 E(cel)128 452.4 Q F0 1.831(\(3\) returns. The ef)1.666 F 1.83(fec\
t of a thread cancellation is equal to implicitly forcing the thread to\
 call)-.25 F(`)128 464.4 Q F2(pth_exit\(PTH_CANCELED\))A F0 2.736('a)C
2.736(to)-2.736 G .236(ne of his cancellation points.)-2.736 F(In)5.237
E F3(Pth)2.737 E F0 .237(thread enter a cancellation)2.737 F
(point either e)128 476.4 Q(xplicitly via)-.15 E F1(pth_cancel_point)2.5
E F0(\(3\) or implicitly by w)1.666 E(aiting for an e)-.1 E -.15(ve)-.25
G(nt.).15 E(int)108 493.2 Q F3(pth_abort)2.5 E F0(\(pth_t)A F1(tid)2.5 E
F0(\);)A .04(This is the cruel w)128 505.2 R .039(ay to cancel a thread)
-.1 F F1(tid)2.539 E F0 2.539(.W)C .039(hen it')-2.539 F 2.539(sa)-.55 G
.039(lready dead and w)-2.539 F .039(aits to be joined it just joins it)
-.1 F .557(\(via `)128 517.2 R F2(pth_join\()A F1(tid)A F2 6.557(,N)C
(ULL\))-6.557 E F0 .557('\) and this w)B .557
(ay kicks it out of the system.)-.1 F .557(Else it forces the thread to)
5.557 F(be not joinable and to allo)128 529.2 Q 2.5(wa)-.25 G
(synchronous cancellation and then cancels it via `)-2.5 E F2
(pth_cancel\()A F1(tid)A F2(\))A F0('.)A(int)108 546 Q F3(pth_join)2.5 E
F0(\(pth_t)A F1(tid)2.5 E F0 2.5(,v)C(oid **)-2.7 E F1(value)A F0(\);)A
.398(This joins the current thread with the thread speci\214ed via)128
558 R F1(tid)2.898 E F0 5.398(.I)C 2.898<748c>-5.398 G .398
(rst suspends the current thread until)-2.898 F(the)128 570 Q F1(tid)
3.583 E F0 1.083(thread has terminated. Then it is a)3.583 F -.1(wa)-.15
G -.1(ke).1 G 1.083(ned and stores the v).1 F 1.083(alue of)-.25 F F1
(tid)3.583 E F0 -.55('s)C F1(pth_e)4.134 E(xit)-.2 E F0 1.084
(\(3\) call into)1.666 F(*)128 582 Q F1(value)A F0(\(if)3.112 E F1
(value)3.112 E F0 .612(and not)3.112 F F2(NULL)3.112 E F0 3.112(\)a)C
.612(nd returns to the caller)-3.112 F 3.112(.At)-.55 G .612
(hread can be joined only when it has the)-3.112 F(attrib)128 594 Q(ute)
-.2 E F2(PTH_ATTR_JOINABLE)3.608 E F0 1.108(set to)3.608 F F2(TRUE)3.608
E F0 1.108(\(the def)3.608 F 1.109
(ault\). A thread can only be joined once, i.e.,)-.1 F(after the)128 606
Q F1(pth_join)2.5 E F0(\(3\) call the thread)1.666 E F1(tid)2.5 E F0
(is completely remo)2.5 E -.15(ve)-.15 G 2.5(df).15 G(rom the system.)
-2.5 E -.2(vo)108 622.8 S(id).2 E F3(pth_exit)2.5 E F0(\(v)A(oid *)-.2 E
F1(value)A F0(\);)A .228
(This terminates the current thread. Whether it')128 634.8 R 2.728(si)
-.55 G .228(mmediately remo)-2.728 F -.15(ve)-.15 G 2.728(df).15 G .228
(rom the system or inserted into)-2.728 F .823
(the dead queue of the scheduler depends on its join type which w)128
646.8 R .823(as speci\214ed at spa)-.1 F .823(wning time. If it)-.15 F
2.52(has the attrib)128 658.8 R(ute)-.2 E F2(PTH_ATTR_JOINABLE)5.02 E F0
2.52(set to)5.02 F F2(FALSE)5.02 E F0 5.02(,i)C(t')-5.02 E 5.02(si)-.55
G 2.52(mmediately remo)-5.02 F -.15(ve)-.15 G 5.02(da).15 G(nd)-5.02 E
F1(value)5.02 E F0(is)5.02 E 2.102
(ignored. Else the thread is inserted into the dead queue and)128 670.8
R F1(value)4.602 E F0 2.102(remembered for a subsequent)4.602 F F1
(pth_join)128 682.8 Q F0(\(3\) call by another thread.)1.666 E
(perl v5.8.6)72 768 Q 198.17(2004-12-03 11)167.62 F 0 Cg EP
%%Page: 12 12
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/Times-Roman@0 SF(PTH-MANU)72 48 Q 78.275(AL\(1\) User)-.4 F
(Contrib)2.5 E(uted Perl Documentation)-.2 E(PTH-MANU)80.775 E(AL\(1\))
-.4 E/F1 10/Times-Bold@0 SF(Utilities)108 84 Q F0(Utility functions.)108
100.8 Q(int)108 117.6 Q F1(pth_fdmode)2.5 E F0(\(int)A/F2 10
/Times-Italic@0 SF(fd)2.5 E F0 2.5(,i)C(nt)-2.5 E F2(mode)2.5 E F0(\);)A
3.453(This switches the non-blocking mode \215ag on \214le descriptor)
128 129.6 R F2(fd)5.953 E F0 8.453(.T)C 3.453(he ar)-8.453 F(gument)-.18
E F2(mode)5.953 E F0 3.452(can be)5.952 F/F3 10/Courier@0 SF
(PTH_FDMODE_BLOCK)128 141.6 Q F0 2.322(for switching)4.822 F F2(fd)4.822
E F0 2.322(into blocking I/O mode,)4.822 F F3(PTH_FDMODE_NONBLOCK)4.823
E F0(for)4.823 E(switching)128 153.6 Q F2(fd)3.297 E F0 .796
(into non-blocking I/O mode or)3.297 F F3(PTH_FDMODE_POLL)3.296 E F0
.796(for just polling the current mode.)3.296 F 3.036
(The current mode is returned \(either)128 165.6 R F3(PTH_FDMODE_BLOCK)
5.537 E F0(or)5.537 E F3(PTH_FDMODE_NONBLOCK)5.537 E F0 5.537(\)o)C(r)
-5.537 E F3(PTH_FDMODE_ERROR)128 177.6 Q F0 .602(on error)3.102 F 3.102
(.K)-.55 G .602(eep in mind that since)-3.352 F F1(Pth)3.102 E F0 .602
(1.1 there is no longer a requirement to)3.102 F .248(manually switch a\
 \214le descriptor into non-blocking mode in order to use it. This is a\
utomatically done)128 189.6 R 1.277(temporarily inside)128 201.6 R F1
(Pth)3.777 E F0 6.277(.I)C 1.277(nstead when you no)-6.277 F 3.777(ws)
-.25 G 1.277(witch a \214le descriptor e)-3.777 F 1.277
(xplicitly into non-blocking)-.15 F(mode,)128 213.6 Q F2(pth_r)2.5 E
(ead)-.37 E F0(\(3\) or)1.666 E F2(pth_write)2.5 E F0(\(3\) will ne)
1.666 E -.15(ve)-.25 G 2.5(rb).15 G(lock the current thread.)-2.5 E
(pth_time_t)108 230.4 Q F1(pth_time)2.5 E F0(\(long)A F2(sec)2.5 E F0
2.5(,l)C(ong)-2.5 E F2(usec)2.5 E F0(\);)A .441
(This is a constructor for a)128 242.4 R F3(pth_time_t)2.941 E F0 .441
(structure which is a con)2.941 F -.15(ve)-.4 G .442
(nient function to a).15 F -.2(vo)-.2 G .442(id temporary).2 F .43
(structure v)128 254.4 R .43(alues. It returns a)-.25 F F2(pth_time_t)
2.93 E F0 .43(structure which holds the absolute time v)2.93 F .43
(alue speci\214ed by)-.25 F F2(sec)2.93 E F0(and)128 266.4 Q F2(usec)2.5
E F0(.)A(pth_time_t)108 283.2 Q F1(pth_timeout)2.5 E F0(\(long)A F2(sec)
2.5 E F0 2.5(,l)C(ong)-2.5 E F2(usec)2.5 E F0(\);)A .441
(This is a constructor for a)128 295.2 R F3(pth_time_t)2.941 E F0 .441
(structure which is a con)2.941 F -.15(ve)-.4 G .442
(nient function to a).15 F -.2(vo)-.2 G .442(id temporary).2 F 1.017
(structure v)128 307.2 R 3.517(alues. It)-.25 F 1.017(returns a)3.517 F
F2(pth_time_t)3.517 E F0 1.016
(structure which holds the absolute time v)3.517 F 1.016
(alue calculated by)-.25 F(adding)128 319.2 Q F2(sec)2.5 E F0(and)2.5 E
F2(usec)2.5 E F0(to the current time.)2.5 E(Sfdisc_t *)108 336 Q F1
(pth_s\214odisc)A F0(\(v)A(oid\);)-.2 E .915(This functions is al)128
348 R -.1(wa)-.1 G .915(ys a).1 F -.25(va)-.2 G .915(ilable, b).25 F
.915(ut only reasonably usable when)-.2 F F1(Pth)3.415 E F0 -.1(wa)3.416
G 3.416(sb).1 G .916(uilt with)-3.616 F F1(S\214o)3.416 E F0(support)
3.416 E(\()128 360 Q F3(\255\255with\255sfio)A F0 .139(option\) and)
2.639 F F3(PTH_EXT_SFIO)2.639 E F0 .139(is then de\214ned by)2.639 F F3
(pth.h)2.638 E F0 2.638(.I)C 2.638(ti)-2.638 G 2.638(su)-2.638 G .138
(seful for applications)-2.638 F .703(which w)128 372 R .703
(ant to use the comprehensi)-.1 F -.15(ve)-.25 G F1(S\214o)3.354 E F0
.704(I/O library with the)3.204 F F1(Pth)3.204 E F0 .704
(threading library)3.204 F 3.204(.T)-.65 G .704(hen this func-)-3.204 F
1.919(tion can be used to get an)128 384 R F1(S\214o)4.419 E F0 1.919
(discipline structure \()4.419 F F3(Sfdisc_t)A F0 4.419(\)w)C 1.918
(hich can be pushed onto)-4.419 F F1(S\214o)4.418 E F0 6.365(streams \()
128 396 R F3(Sfio_t)A F0 8.865(\)i)C 8.865(no)-8.865 G 6.365
(rder to let this stream use)-8.865 F F2(pth_r)8.866 E(ead)-.37 E F0
(\(3\)/)1.666 E F2(pth_write)A F0 6.366(\(2\) instead of)1.666 F F2 -.37
(re)128 408 S(ad).37 E F0(\(2\)/)1.666 E F2(write)A F0 .083
(\(2\). The bene\214t is that this w)1.666 F .083(ay I/O on the)-.1 F F1
(S\214o)2.583 E F0 .083(stream does only block the current thread)2.583
F 1.092(instead of the whole process. The application has to)128 420 R
F2(fr)3.593 E(ee)-.37 E F0 1.093(\(3\) the)1.666 F F3(Sfdisc_t)3.593 E
F0 1.093(structure when it is no)3.593 F
(longer needed. The S\214o package can be found at http://www)128 432 Q
(.research.att.com/sw/tools/s\214o/.)-.65 E F1(Cancellation Management)
108 454.8 Q(Pth)108 471.6 Q F0(supports)2.5 E/F4 9/Times-Roman@0 SF
(POSIX)2.5 E F0(style thread cancellation via)2.5 E F2(pth_cancel)2.5 E
F0(\(3\) and the follo)1.666 E(wing tw)-.25 E 2.5(or)-.1 G
(elated functions:)-2.5 E -.2(vo)108 488.4 S(id).2 E F1
(pth_cancel_state)2.5 E F0(\(int)A F2(ne)2.5 E(wstate)-.15 E F0 2.5(,i)C
(nt *)-2.5 E F2(oldstate)A F0(\);)A 1.297
(This manages the cancellation state of the current thread.)128 500.4 R
(When)6.297 E F2(oldstate)3.797 E F0 1.296(is not)3.796 F F3(NULL)3.796
E F0 1.296(the function)3.796 F .934
(stores the old cancellation state under the v)128 512.4 R .934
(ariable pointed to by)-.25 F F2(oldstate)3.434 E F0 3.434(.W)C(hen)
-3.434 E F2(ne)3.434 E(wstate)-.15 E F0 .934(is not)3.434 F F3(0)3.435 E
F0(it)3.435 E .668(sets the ne)128 524.4 R 3.168(wc)-.25 G .668
(ancellation state.)-3.168 F F2(oldstate)3.168 E F0 .668
(is created before)3.168 F F2(ne)3.168 E(wstate)-.15 E F0 .668(is set.)
3.168 F 3.167(As)5.667 G .667(tate is a combination of)-3.167 F F3
(PTH_CANCEL_ENABLE)128 536.4 Q F0(or)11.38 E F3(PTH_CANCEL_DISABLE)11.38
E F0(and)11.38 E F3(PTH_CANCEL_DEFERRED)11.38 E F0(or)11.38 E F3
(PTH_CANCEL_ASYNCHRONOUS)128 548.4 Q F0(.)A F3(PTH_CANCEL_ENABLE)20.7 E
/F5 10/Symbol SF<ef>A F3(PTH_CANCEL_DEFERRED)A F0(\(or)18.2 E F3
(PTH_CANCEL_DEFAULT)128 560.4 Q F0 3.14(\)i)C 3.14(st)-3.14 G .64
(he def)-3.14 F .64(ault state where cancellation is possible b)-.1 F
.64(ut only at cancellation)-.2 F 3.126(points. Use)128 572.4 R F3
(PTH_CANCEL_DISABLE)3.126 E F0 .625
(to complete disable cancellation for a thread and)3.126 F F3(PTH_CAN-)
3.125 E(CEL_ASYNCHRONOUS)128 584.4 Q F0 .362(for allo)2.862 F .362
(wing asynchronous cancellations, i.e., cancellations which can happen)
-.25 F(at an)128 596.4 Q 2.5(yt)-.15 G(ime.)-2.5 E -.2(vo)108 613.2 S
(id).2 E F1(pth_cancel_point)2.5 E F0(\(v)A(oid\);)-.2 E .254(This e)128
625.2 R .253(xplicitly enter a cancellation point. When the current can\
cellation state is)-.15 F F3(PTH_CANCEL_DIS-)2.753 E(ABLE)128 637.2 Q F0
1.134(or no cancellation request is pending, this has no side-ef)3.634 F
1.134(fect and returns immediately)-.25 F 3.634(.E)-.65 G 1.134(lse it)
-3.634 F(calls `)128 649.2 Q F3(pth_exit\(PTH_CANCELED\))A F0('.)A F1
(Ev)108 672 Q(ent Handling)-.1 E(Pth)108 688.8 Q F0 .792(has a v)3.292 F
.792(ery \215e)-.15 F .792(xible e)-.15 F -.15(ve)-.25 G .792(nt f).15 F
.792(acility which is link)-.1 F .791(ed into the scheduler through the)
-.1 F F2(pth_wait)3.291 E F0 .791(\(3\) function.)1.666 F(The follo)108
700.8 Q(wing functions pro)-.25 E(vide the handling of e)-.15 E -.15(ve)
-.25 G(nt rings.).15 E(perl v5.8.6)72 768 Q 198.17(2004-12-03 12)167.62
F 0 Cg EP
%%Page: 13 13
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/Times-Roman@0 SF(PTH-MANU)72 48 Q 78.275(AL\(1\) User)-.4 F
(Contrib)2.5 E(uted Perl Documentation)-.2 E(PTH-MANU)80.775 E(AL\(1\))
-.4 E(pth_e)108 84 Q -.15(ve)-.25 G(nt_t).15 E/F1 10/Times-Bold@0 SF
(pth_e)2.5 E -.1(ve)-.15 G(nt).1 E F0(\(unsigned long)A/F2 10
/Times-Italic@0 SF(spec)2.5 E F0 2.5(,.)C(..\);)-2.5 E .905
(This creates a ne)128 96 R 3.405(we)-.25 G -.15(ve)-3.655 G .905
(nt ring consisting of a single initial e).15 F -.15(ve)-.25 G 3.406
(nt. The).15 F .906(type of the generated e)3.406 F -.15(ve)-.25 G .906
(nt is).15 F(speci\214ed by)128 108 Q F2(spec)2.5 E F0 2.5(.T)C
(he follo)-2.5 E(wing types are a)-.25 E -.25(va)-.2 G(ilable:).25 E/F3
10/Courier@0 SF(PTH_EVENT_FD)128 124.8 Q F0 7.921
(This is a \214le descriptor e)148 136.8 R -.15(ve)-.25 G 7.921
(nt. One or more of).15 F F3(PTH_UNTIL_FD_READABLE)10.421 E F0(,)A F3
(PTH_UNTIL_FD_WRITEABLE)148 148.8 Q F0(or)2.991 E F3
(PTH_UNTIL_FD_EXCEPTION)2.991 E F0(ha)2.991 E .791 -.15(ve t)-.2 H 2.991
(ob).15 G 2.991(eO)-2.991 G .492(R-ed into)-2.991 F F2(spec)2.992 E F0
.588(to specify on which state of the \214le descriptor you w)148 160.8
R .588(ant to w)-.1 F 3.088(ait. The)-.1 F .587
(\214le descriptor itself has to)3.088 F 34.508(be gi)148 172.8 R -.15
(ve)-.25 G 37.008(na).15 G 37.008(sa)-37.008 G 37.008(na)-37.008 G
34.509(dditional ar)-37.008 F 37.009(gument. Example:)-.18 F(`)148 184.8
Q F3(pth_event\(PTH_EVENT_FD)A/F4 10/Symbol SF<ef>A F3
(PTH_UNTIL_FD_READABLE, fd\))A F0('.)A F3(PTH_EVENT_SELECT)128 201.6 Q
F0 .397(This is a multiple \214le descriptor e)148 213.6 R -.15(ve)-.25
G .397(nt modeled directly after the).15 F F2(select)2.896 E F0 .396
(\(2\) call \(actually it is also)1.666 F .777(used to implement)148
225.6 R F2(pth_select)3.277 E F0 .777(\(3\) internally\).)1.666 F(It')
5.777 E 3.277(sac)-.55 G(on)-3.277 E -.15(ve)-.4 G .777(nient w).15 F
.777(ay to w)-.1 F .777(ait for a lar)-.1 F .778(ge set of \214le)-.18 F
.596(descriptors at once and at each \214le descriptor for a dif)148
237.6 R .595(ferent type of state. Additionally as a nice)-.25 F
(side-ef)148 249.6 Q 1.733(fect one recei)-.25 F -.15(ve)-.25 G 4.233
(st).15 G 1.734(he number of \214le descriptors which causes the e)
-4.233 F -.15(ve)-.25 G 1.734(nt to be occurred).15 F(\(using)148 261.6
Q/F5 9/Times-Roman@0 SF(BSD)3.625 E F0 1.125
(semantics, i.e., when a \214le descriptor occurred in tw)3.625 F 3.625
(os)-.1 G 1.125(ets it')-3.625 F 3.625(sc)-.55 G 1.125
(ounted twice\). The)-3.625 F(ar)148 273.6 Q .305
(guments correspond directly to the)-.18 F F2(select)2.805 E F0 .305
(\(2\) function ar)1.666 F .305(guments e)-.18 F .305
(xcept that there is no timeout)-.15 F(ar)148 285.6 Q
(gument \(because timeouts already can be handled via)-.18 E F3
(PTH_EVENT_TIME)2.5 E F0 -2.15 -.25(ev e)2.5 H(nts\).).25 E 2.419
(Example: `)148 303.6 R F3 2.418
(pth_event\(PTH_EVENT_SELECT, &rc, nfd, rfds, wfds, efds\))B F0(')A
(where)148 315.6 Q F3(rc)3.033 E F0 .533(has to be of type `)3.033 F F3
.533(int *)B F0(',)A F3(nfd)3.033 E F0 .534(has to be of type `)3.033 F
F3(int)A F0 3.034('a)C(nd)-3.034 E F3(rfds)3.034 E F0(,)A F3(wfds)3.034
E F0(and)3.034 E F3(efds)3.034 E F0(ha)148 327.6 Q 1.949 -.15(ve t)-.2 H
4.149(ob).15 G 4.149(eo)-4.149 G 4.149(ft)-4.149 G 1.649(ype `)-4.149 F
F3 1.649(fd_set *)B F0 4.149('\()C(see)-4.149 E F2(select)4.149 E F0
1.649(\(2\)\). The number of occurred \214le descriptors are)1.666 F
(stored in)148 339.6 Q F3(rc)2.5 E F0(.)A F3(PTH_EVENT_SIGS)128 356.4 Q
F0 .454(This is a signal set e)148 368.4 R -.15(ve)-.25 G .454
(nt. The tw).15 F 2.954(oa)-.1 G .454(dditional ar)-2.954 F .454
(guments ha)-.18 F .754 -.15(ve t)-.2 H 2.954(ob).15 G 2.954(eap)-2.954
G .455(ointer to a signal set \(type)-2.954 F(`)148 380.4 Q F3 1.206
(sigset_t *)B F0 1.206('\) and a pointer to a signal number v)B 1.206
(ariable \(type `)-.25 F F3 1.206(int *)B F0 3.706('\). This)B -2.15
-.25(ev e)3.706 H 1.206(nt w).25 F(aits)-.1 E .021
(until one of the signals in the signal set occurred.)148 392.4 R .022
(As a result the occurred signal number is stored)5.022 F 1.44
(in the second additional ar)148 404.4 R 1.439(gument. K)-.18 F 1.439
(eep in mind that the)-.25 F F1(Pth)3.939 E F0 1.439(scheduler doesn')
3.939 F 3.939(tb)-.18 G 1.439(lock signals)-3.939 F(automatically)148
416.4 Q 5.742(.S)-.65 G 3.242(ow)-5.742 G .742(hen you w)-3.242 F .743
(ant to w)-.1 F .743(ait for a signal with this e)-.1 F -.15(ve)-.25 G
.743(nt you').15 F 1.043 -.15(ve t)-.5 H 3.243(ob).15 G .743
(lock it via)-3.243 F F2(sig-)3.243 E(pr)148 428.4 Q(ocmask)-.45 E F0
1.406(\(2\) or it will be deli)1.666 F -.15(ve)-.25 G 1.405
(red without your notice. Example: `).15 F F3(sigemptyset\(&set\);)A
(sigaddset\(&set, SIGINT\); pth_event\(PTH_EVENT_SIG, &set, &sig\);)148
440.4 Q F0('.)A F3(PTH_EVENT_TIME)128 457.2 Q F0 .388
(This is a time point e)148 469.2 R -.15(ve)-.25 G .389
(nt. The additional ar).15 F .389(gument has to be of type)-.18 F F3
(pth_time_t)2.889 E F0 .389(\(usually on-)2.889 F 1.072
(the-\215y generated via)148 481.2 R F2(pth_time)3.572 E F0 1.072
(\(3\)\). This e)1.666 F -.15(ve)-.25 G 1.072(nts w).15 F 1.072
(aits until the speci\214ed time point has elapsed.)-.1 F -.25(Ke)148
493.2 S .742(ep in mind that the v).25 F .742
(alue is an absolute time point and not an of)-.25 F .742
(fset. When you w)-.25 F .743(ant to w)-.1 F(ait)-.1 E 1.244
(for a speci\214ed amount of time, you')148 505.2 R 1.544 -.15(ve t)-.5
H 3.744(oa).15 G 1.244(dd the current time to the of)-3.744 F 1.243
(fset \(usually on-the-\215y)-.25 F(achie)148 517.2 Q -.15(ve)-.25 G
5.208(dv).15 G(ia)-5.208 E F2(pth_timeout)5.209 E F0 5.209
(\(3\)\). Example:)1.666 F(`)5.209 E F3 2.709
(pth_event\(PTH_EVENT_TIME, pth_time-)B(out\(2,0\)\))148 529.2 Q F0('.)A
F3(PTH_EVENT_MSG)128 546 Q F0 .29(This is a message port e)148 558 R
-.15(ve)-.25 G .289(nt. The additional ar).15 F .289
(gument has to be of type)-.18 F F3(pth_msgport_t)2.789 E F0 2.789(.T)C
(his)-2.789 E -2.15 -.25(ev e)148 570 T .53(nts w).25 F .53
(aits until one or more messages were recei)-.1 F -.15(ve)-.25 G 3.03
(do).15 G 3.03(nt)-3.03 G .53(he speci\214ed message port.)-3.03 F
(Example:)5.53 E(`)148 582 Q F3(pth_event\(PTH_EVENT_MSG, mp\))A F0('.)A
F3(PTH_EVENT_TID)128 598.8 Q F0 4.509(This is a thread e)148 610.8 R
-.15(ve)-.25 G 4.509(nt. The additional ar).15 F 4.509
(gument has to be of type)-.18 F F3(pth_t)7.008 E F0 9.508(.O)C 4.508
(ne of)-9.508 F F3(PTH_UNTIL_TID_NEW)148 622.8 Q F0(,)A F3
(PTH_UNTIL_TID_READY)12.223 E F0(,)A F3(PTH_UNTIL_TID_WAITING)12.223 E
F0(or)12.224 E F3(PTH_UNTIL_TID_DEAD)148 634.8 Q F0 .4
(has to be OR-ed into)2.9 F F2(spec)2.899 E F0 .399
(to specify on which state of the thread you)2.899 F -.1(wa)148 646.8 S
8.54(nt to w).1 F 11.04(ait. Example:)-.1 F(`)11.04 E F3
(pth_event\(PTH_EVENT_TID)A F4<ef>A F3(PTH_UNTIL_TID_DEAD,)A(tid\))148
658.8 Q F0('.)A F3(PTH_EVENT_FUNC)128 675.6 Q F0 .93
(This is a custom callback function e)148 687.6 R -.15(ve)-.25 G .929
(nt. Three additional ar).15 F .929(guments ha)-.18 F 1.229 -.15(ve t)
-.2 H 3.429(ob).15 G 3.429(eg)-3.429 G -2.15 -.25(iv e)-3.429 H 3.429
(nw).25 G .929(ith the)-3.429 F(follo)148 699.6 Q .269(wing types: `)
-.25 F F3 .269(int \(*\)\(void *\))B F0 .269(', `)B F3 .269(void *)B F0
2.769('a)C .269(nd `)-2.769 F F3(pth_time_t)A F0 .27
('. The \214rst is a function)B 1.246
(pointer to a check function and the second ar)148 711.6 R 1.245
(gument is a user)-.18 F 1.245(-supplied conte)-.2 F 1.245(xt v)-.15 F
1.245(alue which is)-.25 F .275
(passed to this function. The scheduler calls this function on a re)148
723.6 R .275(gular basis \(on his o)-.15 F .275(wn scheduler)-.25 F
(perl v5.8.6)72 768 Q 198.17(2004-12-03 13)167.62 F 0 Cg EP
%%Page: 14 14
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/Times-Roman@0 SF(PTH-MANU)72 48 Q 78.275(AL\(1\) User)-.4 F
(Contrib)2.5 E(uted Perl Documentation)-.2 E(PTH-MANU)80.775 E(AL\(1\))
-.4 E .042(stack, so be v)148 84 R .042
(ery careful!\) and the thread is k)-.15 F .042
(ept sleeping while the function returns)-.1 F/F1 10/Courier@0 SF(FALSE)
2.541 E F0 2.541(.O)C(nce)-2.541 E 1.091(it returned)148 96 R F1(TRUE)
3.591 E F0 1.092(the thread will be a)3.592 F -.1(wa)-.15 G -.1(ke).1 G
1.092(ned. The check interv).1 F 1.092(al is de\214ned by the third ar)
-.25 F(gu-)-.18 E 1.509(ment, i.e., the check function is polled ag)148
108 R 1.508(ain not until this amount of time elapsed. Example:)-.05 F
(`)148 120 Q F1
(pth_event\(PTH_EVENT_FUNC, func, arg, pth_time\(0,500000\)\))A F0('.)A
(unsigned long)108 136.8 Q/F2 10/Times-Bold@0 SF(pth_e)2.5 E -.1(ve)-.15
G(nt_typeof).1 E F0(\(pth_e)A -.15(ve)-.25 G(nt_t).15 E/F3 10
/Times-Italic@0 SF -.15(ev)2.5 G F0(\);).15 E 3.237
(This returns the type of e)128 148.8 R -.15(ve)-.25 G(nt).15 E F3 -.15
(ev)5.737 G F0 5.737(.I).15 G(t')-5.737 E 5.737(sac)-.55 G 3.237
(ombination of the describing)-5.737 F F1(PTH_EVENT_XX)5.738 E F0(and)
5.738 E F1(PTH_UNTIL_XX)128 160.8 Q F0 -.25(va)2.794 G .294
(lue. This is especially useful to kno).25 F 2.793(ww)-.25 G .293
(hich ar)-2.793 F .293(guments ha)-.18 F .593 -.15(ve t)-.2 H 2.793(ob)
.15 G 2.793(es)-2.793 G .293(upplied to the)-2.793 F F3(pth_e)128 172.8
Q(vent_e)-.15 E(xtr)-.2 E(act)-.15 E F0(\(3\) function.)1.666 E(int)108
189.6 Q F2(pth_e)2.5 E -.1(ve)-.15 G(nt_extract).1 E F0(\(pth_e)A -.15
(ve)-.25 G(nt_t).15 E F3 -.15(ev)2.5 G F0 2.5(,.).15 G(..\);)-2.5 E
(When)128 201.6 Q F3(pth_e)2.777 E(vent)-.15 E F0 .277
(\(3\) is treated lik)1.666 F(e)-.1 E F3(sprintf)2.777 E F0 .278
(\(3\), then this function is)1.666 F F3(sscanf)2.778 E F0 .278
(\(3\), i.e., it is the in)1.666 F -.15(ve)-.4 G .278(rse oper).15 F(-)
-.2 E .201(ation of)128 213.6 R F3(pth_e)2.701 E(vent)-.15 E F0 .201
(\(3\). This means that it can be used to e)1.666 F .201
(xtract the ingredients of an e)-.15 F -.15(ve)-.25 G 2.7(nt. The).15 F
(ingre-)2.7 E .092(dients are stored into v)128 225.6 R .092
(ariables which are gi)-.25 F -.15(ve)-.25 G 2.592(na).15 G 2.593(sp)
-2.592 G .093(ointers on the v)-2.593 F .093(ariable ar)-.25 F .093
(gument list.)-.18 F .093(Which point-)5.093 F 1.188(ers ha)128 237.6 R
1.488 -.15(ve t)-.2 H 3.688(ob).15 G 3.688(ep)-3.688 G 1.188
(resent depends on the e)-3.688 F -.15(ve)-.25 G 1.188
(nt type and has to be determined by the caller before via).15 F F3
(pth_e)128 249.6 Q(vent_typeof)-.15 E F0(\(3\).)1.666 E 1.959 -.8(To m)
128 267.6 T(ak).8 E 2.859(ei)-.1 G 2.859(tc)-2.859 G(lear)-2.859 E 2.859
(,w)-.4 G .359(hen you constructed)-2.859 F F3 -.15(ev)2.859 G F0 .359
(via `)3.009 F F1 .36(ev = pth_event\(PTH_EVENT_FD, fd\);)B F0 2.86('y)C
(ou)-2.86 E(ha)128 279.6 Q .604 -.15(ve t)-.2 H 2.803(oe).15 G .303
(xtract it via `)-2.953 F F1 .303(pth_event_extract\(ev, &fd\))B F0 .303
(', etc. F)B .303(or multiple ar)-.15 F .303(guments of an e)-.18 F -.15
(ve)-.25 G(nt).15 E .566(the order of the pointer ar)128 291.6 R .566
(guments is the same as for)-.18 F F3(pth_e)3.066 E(vent)-.15 E F0 .566
(\(3\). But al)1.666 F -.1(wa)-.1 G .567(ys k).1 F .567
(eep in mind that you)-.1 F(ha)128 303.6 Q 1.595 -.15(ve t)-.2 H 3.795
(oa).15 G -.1(lwa)-3.795 G 1.295(ys supply).1 F F3(pointer)3.795 E(s)-.1
E F0(to)3.795 E F3(variables)3.795 E F0 1.295(and these v)3.795 F 1.295
(ariables ha)-.25 F 1.595 -.15(ve t)-.2 H 3.795(ob).15 G 3.795(eo)-3.795
G 3.795(ft)-3.795 G 1.295(he same type as the)-3.795 F(ar)128 315.6 Q
(gument of)-.18 E F3(pth_e)2.5 E(vent)-.15 E F0(\(3\) required.)1.666 E
(pth_e)108 332.4 Q -.15(ve)-.25 G(nt_t).15 E F2(pth_e)2.5 E -.1(ve)-.15
G(nt_concat).1 E F0(\(pth_e)A -.15(ve)-.25 G(nt_t).15 E F3 -.15(ev)2.5 G
F0 2.5(,.).15 G(..\);)-2.5 E .051
(This concatenates one or more additional e)128 344.4 R -.15(ve)-.25 G
.051(nt rings to the e).15 F -.15(ve)-.25 G .051(nt ring).15 F F3 -.15
(ev)2.551 G F0 .051(and returns)2.701 F F3 -.15(ev)2.551 G F0 2.551(.T)
.15 G .051(he end of the)-2.551 F(ar)128 356.4 Q .141
(gument list has to be mark)-.18 F .141(ed with a)-.1 F F1(NULL)2.641 E
F0(ar)2.641 E .14(gument. Use this function to create real e)-.18 F -.15
(ve)-.25 G .14(nts rings out).15 F(of the single-e)128 368.4 Q -.15(ve)
-.25 G(nt rings created by).15 E F3(pth_e)2.5 E(vent)-.15 E F0(\(3\).)
1.666 E(pth_e)108 385.2 Q -.15(ve)-.25 G(nt_t).15 E F2(pth_e)2.5 E -.1
(ve)-.15 G(nt_isolate).1 E F0(\(pth_e)A -.15(ve)-.25 G(nt_t).15 E F3
-.15(ev)2.5 G F0(\);).15 E .251(This isolates the e)128 397.2 R -.15(ve)
-.25 G(nt).15 E F3 -.15(ev)2.751 G F0 .251(from possibly appended e)
2.901 F -.15(ve)-.25 G .251(nts in the e).15 F -.15(ve)-.25 G .251
(nt ring.).15 F .251(When in)5.251 F F3 -.15(ev)2.751 G F0 .252
(only one e)2.901 F -.15(ve)-.25 G(nt).15 E -.15(ex)128 409.2 S .112
(ists, this returns).15 F F1(NULL)2.612 E F0 2.612(.W)C .111
(hen remaining e)-2.612 F -.15(ve)-.25 G .111(nts e).15 F .111
(xists, the)-.15 F 2.611(yf)-.15 G .111(orm a ne)-2.611 F 2.611(we)-.25
G -.15(ve)-2.861 G .111(nt ring which is returned.).15 F(pth_e)108 426 Q
-.15(ve)-.25 G(nt_t).15 E F2(pth_e)2.5 E -.1(ve)-.15 G(nt_walk).1 E F0
(\(pth_e)A -.15(ve)-.25 G(nt_t).15 E F3 -.15(ev)2.5 G F0 2.5(,i).15 G
(nt)-2.5 E F3(dir)2.5 E(ection)-.37 E F0(\);)A 3.181(This w)128 438 R
3.181(alks to the ne)-.1 F 3.181(xt \(when)-.15 F F3(dir)5.681 E(ection)
-.37 E F0(is)5.682 E F1(PTH_WALK_NEXT)5.682 E F0 5.682(\)o)C 5.682(rp)
-5.682 G(re)-5.682 E(vie)-.25 E 3.182(ws \(when)-.25 F F3(dir)5.682 E
(ection)-.37 E F0(is)5.682 E F1(PTH_WALK_PREV)128 450 Q F0 4.987(\)e)C
-.15(ve)-5.237 G 2.487(nt in the e).15 F -.15(ve)-.25 G 2.487(nt ring)
.15 F F3 -.15(ev)4.987 G F0 2.487(and returns this ne)5.137 F 4.987(wr)
-.25 G 2.487(eached e)-4.987 F -.15(ve)-.25 G 2.486(nt. Additionally).15
F F1(PTH_UNTIL_OCCURRED)128 462 Q F0 .387(can be OR-ed into)2.887 F F3
(dir)2.888 E(ection)-.37 E F0 .388(to w)2.888 F .388(alk to the ne)-.1 F
(xt/pre)-.15 E .388(vious occurred e)-.25 F -.15(ve)-.25 G .388(nt in)
.15 F(the ring)128 474 Q F3 -.15(ev)2.5 G F0(.).15 E(pth_status_t)108
490.8 Q F2(pth_e)2.5 E -.1(ve)-.15 G(nt_status).1 E F0(\(pth_e)A -.15
(ve)-.25 G(nt_t).15 E F3 -.15(ev)2.5 G F0(\);).15 E .552
(This returns the status of e)128 502.8 R -.15(ve)-.25 G(nt).15 E F3
-.15(ev)3.052 G F0 3.052(.T).15 G .552(his is a f)-3.052 F .552
(ast operation because only a tag on)-.1 F F3 -.15(ev)3.052 G F0 .552
(is check)3.202 F .552(ed which)-.1 F -.1(wa)128 514.8 S 2.53(se).1 G
.03(ither set or still not set by the scheduler)-2.53 F 2.53(.I)-.55 G
2.53(no)-2.53 G .03(ther w)-2.53 F .03(ords: This doesn')-.1 F 2.53(tc)
-.18 G .03(heck the e)-2.53 F -.15(ve)-.25 G .03(nt itself, it just).15
F 2.427(checks the last kno)128 526.8 R 2.426(wledge of the scheduler)
-.25 F 4.926(.T)-.55 G 2.426(he possible returned status codes are:)
-4.926 F F1(PTH_STA-)4.926 E(TUS_PENDING)128 538.8 Q F0(\(e)4.175 E -.15
(ve)-.25 G 1.675(nt is still pending\),).15 F F1(PTH_STATUS_OCCURRED)
4.175 E F0(\(e)4.175 E -.15(ve)-.25 G 1.675(nt successfully occurred\),)
.15 F F1(PTH_STATUS_FAILED)128 550.8 Q F0(\(e)2.5 E -.15(ve)-.25 G(nt f)
.15 E(ailed\).)-.1 E(int)108 567.6 Q F2(pth_e)2.5 E -.1(ve)-.15 G(nt_fr)
.1 E(ee)-.18 E F0(\(pth_e)A -.15(ve)-.25 G(nt_t).15 E F3 -.15(ev)2.5 G
F0 2.5(,i).15 G(nt)-2.5 E F3(mode)2.5 E F0(\);)A .825
(This deallocates the e)128 579.6 R -.15(ve)-.25 G(nt).15 E F3 -.15(ev)
3.325 G F0(\(when)3.475 E F3(mode)3.325 E F0(is)3.325 E F1
(PTH_FREE_THIS)3.325 E F0 3.325(\)o)C 3.325(ra)-3.325 G .824(ll e)-3.325
F -.15(ve)-.25 G .824(nts appended to the e).15 F -.15(ve)-.25 G(nt).15
E(ring under)128 591.6 Q F3 -.15(ev)2.5 G F0(\(when)2.65 E F3(mode)2.5 E
F0(is)2.5 E F1(PTH_FREE_ALL)2.5 E F0(\).)A F2 -.25(Ke)108 614.4 S
(y-Based Storage).25 E F0 1.276(The follo)108 631.2 R 1.276
(wing functions pro)-.25 F 1.277
(vide thread-local storage through unique k)-.15 F -.15(ey)-.1 G 3.777
(ss).15 G 1.277(imilar to the)-3.777 F/F4 9/Times-Roman@0 SF(POSIX)3.777
E F2(Pthr)3.777 E(ead)-.18 E F4(API)108 643.2 Q F0 2.5(.U)C
(se this for thread speci\214c global data.)-2.5 E(int)108 660 Q F2
(pth_k)2.5 E(ey_cr)-.1 E(eate)-.18 E F0(\(pth_k)A -.15(ey)-.1 G(_t *).15
E F3 -.1(ke)C(y)-.2 E F0 2.5(,v)C(oid \(*)-2.7 E F3(func)A F0(\)\(v)A
(oid *\)\);)-.2 E .192(This created a ne)128 672 R 2.692(wu)-.25 G .192
(nique k)-2.692 F .492 -.15(ey a)-.1 H .192(nd stores it in).15 F F3 -.1
(ke)2.692 G(y)-.2 E F0 5.192(.A)C(dditionally)-5.192 E F3(func)2.692 E
F0 .191(can specify a destructor function)2.692 F
(which is called on the current threads termination with the)128 684 Q
F3 -.1(ke)2.5 G(y)-.2 E F0(.)A(int)108 700.8 Q F2(pth_k)2.5 E(ey_delete)
-.1 E F0(\(pth_k)A -.15(ey)-.1 G(_t).15 E F3 -.1(ke)2.5 G(y)-.2 E F0
(\);)A(This e)128 712.8 Q(xplicitly destro)-.15 E(ys a k)-.1 E -.15(ey)
-.1 G F3 -.1(ke)2.65 G(y)-.2 E F0(.)A(perl v5.8.6)72 768 Q 198.17
(2004-12-03 14)167.62 F 0 Cg EP
%%Page: 15 15
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/Times-Roman@0 SF(PTH-MANU)72 48 Q 78.275(AL\(1\) User)-.4 F
(Contrib)2.5 E(uted Perl Documentation)-.2 E(PTH-MANU)80.775 E(AL\(1\))
-.4 E(int)108 84 Q/F1 10/Times-Bold@0 SF(pth_k)2.5 E(ey_setdata)-.1 E F0
(\(pth_k)A -.15(ey)-.1 G(_t).15 E/F2 10/Times-Italic@0 SF -.1(ke)2.5 G
(y)-.2 E F0 2.5(,c)C(onst v)-2.5 E(oid *)-.2 E F2(value)A F0(\);)A
(This stores)128 96 Q F2(value)2.5 E F0(under)2.5 E F2 -.1(ke)2.5 G(y)
-.2 E F0(.)A -.2(vo)108 112.8 S(id *).2 E F1(pth_k)A(ey_getdata)-.1 E F0
(\(pth_k)A -.15(ey)-.1 G(_t).15 E F2 -.1(ke)2.5 G(y)-.2 E F0(\);)A
(This retrie)128 124.8 Q -.15(ve)-.25 G 2.5(st).15 G(he v)-2.5 E
(alue under)-.25 E F2 -.1(ke)2.5 G(y)-.2 E F0(.)A F1(Message P)108 147.6
Q(ort Communication)-.2 E F0 1.45(The follo)108 164.4 R 1.45
(wing functions pro)-.25 F 1.45
(vide message ports which can be used for ef)-.15 F 1.45
(\214cient and \215e)-.25 F 1.45(xible inter)-.15 F(-thread)-.2 E
(communication.)108 176.4 Q(pth_msgport_t)108 193.2 Q F1(pth_msgport_cr)
2.5 E(eate)-.18 E F0(\(const char *)A F2(name)A F0(\);)A 1.055
(This returns a pointer to a ne)128 205.2 R 3.555(wm)-.25 G 1.055
(essage port. If name)-3.555 F F2(name)3.555 E F0 1.055(is not)3.555 F
/F3 10/Courier@0 SF(NULL)3.555 E F0 3.555(,t)C(he)-3.555 E F2(name)3.555
E F0 1.055(can be used by)3.555 F .708(other threads via)128 217.2 R F2
(pth_msgport_\214nd)3.208 E F0 .708
(\(3\) to \214nd the message port in case the)1.666 F 3.209(yd)-.15 G
3.209(on)-3.209 G .709(ot kno)-3.209 F 3.209(wd)-.25 G .709(irectly the)
-3.209 F(pointer to the message port.)128 229.2 Q -.2(vo)108 246 S(id).2
E F1(pth_msgport_destr)2.5 E(oy)-.18 E F0(\(pth_msgport_t)A F2(mp)2.5 E
F0(\);)A .16(This destro)128 258 R .16(ys a message port)-.1 F F2(mp)
2.66 E F0 2.66(.B)C .16
(efore all pending messages on it are replied to their origin message)
-2.66 F(port.)128 270 Q(pth_msgport_t)108 286.8 Q F1(pth_msgport_\214nd)
2.5 E F0(\(const char *)A F2(name)A F0(\);)A
(This \214nds a message port in the system by)128 298.8 Q F2(name)2.5 E
F0(and returns the pointer to it.)2.5 E(int)108 315.6 Q F1
(pth_msgport_pending)2.5 E F0(\(pth_msgport_t)A F2(mp)2.5 E F0(\);)A
(This returns the number of pending messages on message port)128 327.6 Q
F2(mp)2.5 E F0(.)A(int)108 344.4 Q F1(pth_msgport_put)2.5 E F0
(\(pth_msgport_t)A F2(mp)2.5 E F0 2.5(,p)C(th_message_t *)-2.5 E F2(m)A
F0(\);)A(This puts \(or sends\) a message)128 356.4 Q F2(m)2.5 E F0
(to message port)2.5 E F2(mp)2.5 E F0(.)A(pth_message_t *)108 373.2 Q F1
(pth_msgport_get)A F0(\(pth_msgport_t)A F2(mp)2.5 E F0(\);)A .278
(This gets \(or recei)128 385.2 R -.15(ve)-.25 G .278
(s\) the top message from message port).15 F F2(mp)2.778 E F0 5.278(.I)C
.278(ncoming messages are al)-5.278 F -.1(wa)-.1 G .279(ys k).1 F .279
(ept in)-.1 F 2.5(aq)128 397.2 S
(ueue, so there can be more pending messages, of course.)-2.5 E(int)108
414 Q F1(pth_msgport_r)2.5 E(eply)-.18 E F0(\(pth_message_t *)A F2(m)A
F0(\);)A(This replies a message)128 426 Q F2(m)2.5 E F0
(to the message port of the sender)2.5 E(.)-.55 E F1(Thr)108 448.8 Q
(ead Cleanups)-.18 E F0(Per)108 465.6 Q(-thread cleanup functions.)-.2 E
(int)108 482.4 Q F1(pth_cleanup_push)2.5 E F0(\(v)A(oid \(*)-.2 E F2
(handler)A F0(\)\(v)A(oid *\), v)-.2 E(oid *)-.2 E F2(ar)A(g)-.37 E F0
(\);)A .651(This pushes the routine)128 494.4 R F2(handler)3.151 E F0
.651(onto the stack of cleanup routines for the current thread.)3.151 F
.65(These rou-)5.65 F(tines are called in)128 506.4 Q/F4 9/Times-Roman@0
SF(LIFO)2.5 E F0(order when the thread terminates.)2.5 E(int)108 523.2 Q
F1(pth_cleanup_pop)2.5 E F0(\(int)A F2 -.2(ex)2.5 G(ecute).2 E F0(\);)A
.126(This pops the top-most routine from the stack of cleanup routines \
for the current thread. When)128 535.2 R F2 -.2(ex)2.626 G(ecute).2 E F0
(is)128 547.2 Q F3(TRUE)2.5 E F0(the routine is additionally called.)2.5
E F1(Pr)108 570 Q(ocess F)-.18 E(orking)-.25 E F0 1.193(The follo)108
586.8 R 1.193(wing functions pro)-.25 F 1.192(vide some special support\
 for process forking situations inside the threading)-.15 F(en)108 598.8
Q(vironment.)-.4 E(int)108 615.6 Q F1(pth_atf)2.5 E(ork_push)-.25 E F0
(\(v)A(oid \(*)-.2 E F2(pr)A(epar)-.37 E(e)-.37 E F0(\)\(v)A(oid *\), v)
-.2 E(oid \(*\)\(v)-.2 E(oid *)-.2 E F2(par)A(ent)-.37 E F0(\), v)A
(oid \(*\)\(v)-.2 E(oid *)-.2 E F2 -.15(ch)C(ild).15 E F0(\), v)A(oid *)
-.2 E F2(ar)A(g)-.37 E F0(\);)A .366
(This function declares forking handlers to be called before and after)
128 627.6 R F2(pth_fork)2.866 E F0 .366(\(3\), in the conte)1.666 F .366
(xt of the)-.15 F 1.163(thread that called)128 639.6 R F2(pth_fork)3.663
E F0 1.163(\(3\). The)1.666 F F2(pr)3.662 E(epar)-.37 E(e)-.37 E F0
1.162(handler is called before)3.662 F F2(fork)3.662 E F0 1.162
(\(2\) processing commences.)1.666 F(The)128 651.6 Q F2(par)2.729 E(ent)
-.37 E F0 .229(handler is called)2.729 F(after)7.729 E F2(fork)2.729 E
F0 .23(\(2\) processing completes in the parent process.)1.666 F(The)
5.23 E F2 -.15(ch)2.73 G(ild).15 E F0(han-)2.73 E .58
(dler is called after)128 663.6 R F2(fork)3.08 E F0 .58(\(2\) processin\
g completed in the child process. If no handling is desired at one)1.666
F .14
(or more of these three points, the corresponding handler can be gi)128
675.6 R -.15(ve)-.25 G 2.64(na).15 G(s)-2.64 E F3(NULL)2.64 E F0 5.14
(.E)C .14(ach handler is called)-5.14 F(with)128 687.6 Q F2(ar)2.5 E(g)
-.37 E F0(as the ar)2.5 E(gument.)-.18 E .353(The order of calls to)128
705.6 R F2(pth_atfork_push)2.852 E F0 .352(\(3\) is signi\214cant. The)
1.666 F F2(par)2.852 E(ent)-.37 E F0(and)2.852 E F2 -.15(ch)2.852 G(ild)
.15 E F0 .352(handlers are called in the)2.852 F .341
(order in which the)128 717.6 R 2.841(yw)-.15 G .341
(ere established by calls to)-2.841 F F2(pth_atfork_push)2.841 E F0 .342
(\(3\), i.e.,)1.666 F F4(FIFO)2.842 E F0 2.842(.T)C(he)-2.842 E F2(pr)
2.842 E(epar)-.37 E(e)-.37 E F0 .342(fork han-)2.842 F
(dlers are called in the opposite order)128 729.6 Q 2.5(,i)-.4 G(.e.,)
-2.5 E F4(LIFO)2.5 E F0(.)A(perl v5.8.6)72 768 Q 198.17(2004-12-03 15)
167.62 F 0 Cg EP
%%Page: 16 16
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/Times-Roman@0 SF(PTH-MANU)72 48 Q 78.275(AL\(1\) User)-.4 F
(Contrib)2.5 E(uted Perl Documentation)-.2 E(PTH-MANU)80.775 E(AL\(1\))
-.4 E(int)108 84 Q/F1 10/Times-Bold@0 SF(pth_atf)2.5 E(ork_pop)-.25 E F0
(\(v)A(oid\);)-.2 E .472(This remo)128 96 R -.15(ve)-.15 G 2.972(st).15
G .472(he top-most handlers on the forking handler stack which were est\
ablished with the last)-2.972 F/F2 10/Times-Italic@0 SF(pth_atfork_push)
128 108 Q F0 1.905(\(3\) call. It returns)1.666 F/F3 10/Courier@0 SF
(FALSE)4.405 E F0 1.905(when no more handlers couldn')4.405 F 4.405(tb)
-.18 G 4.405(er)-4.405 G(emo)-4.405 E -.15(ve)-.15 G 4.405(df).15 G
1.905(rom the)-4.405 F(stack.)128 120 Q(pid_t)108 136.8 Q F1(pth_f)2.5 E
(ork)-.25 E F0(\(v)A(oid\);)-.2 E 1.045(This is a v)128 148.8 R 1.045
(ariant of)-.25 F F2(fork)3.545 E F0 1.045(\(2\) with the dif)1.666 F
1.045(ference that the current thread only is fork)-.25 F 1.044
(ed into a separate)-.1 F 1.519(process, i.e., in the parent process no\
thing changes while in the child process all threads are gone)128 160.8
R -.15(ex)128 172.8 S .922
(cept for the scheduler and the calling thread. When you really w).15 F
.921(ant to duplicate all threads in the)-.1 F 1.024
(current process you should use)128 184.8 R F2(fork)3.524 E F0 1.024
(\(2\) directly)1.666 F 3.525(.B)-.65 G 1.025
(ut this is usually not reasonable. Additionally this)-3.525 F
(function tak)128 196.8 Q(es care of forking handlers as established by)
-.1 E F2(pth_fork_push)2.5 E F0(\(3\).)1.666 E F1(Synchr)108 219.6 Q
(onization)-.18 E F0 1.147(The follo)108 236.4 R 1.147
(wing functions pro)-.25 F 1.146
(vide synchronization support via mutual e)-.15 F 1.146
(xclusion locks \()-.15 F F1(mutex)A F0 1.146(\), read-write)B .847
(locks \()108 248.4 R F1(rwlock)A F0 .847(\), condition v)B .848
(ariables \()-.25 F F1(cond)A F0 3.348(\)a)C .848(nd barriers \()-3.348
F F1(barrier)A F0 .848(\). K)B .848(eep in mind that in a non-preempti)
-.25 F -.15(ve)-.25 G .51(threading system lik)108 260.4 R(e)-.1 E F1
(Pth)3.01 E F0 .51(this might sound unnecessary at the \214rst look, be\
cause a thread isn')3.01 F 3.01(ti)-.18 G(nterrupted)-3.01 E .885
(by the system. Actually when you ha)108 272.4 R 1.185 -.15(ve a c)-.2 H
.885(ritical code section which doesn').15 F 3.385(tc)-.18 G .885
(ontain an)-3.385 F(y)-.15 E F2(pth_xxx\(\))3.385 E F0(func-)3.385 E
(tions, you don')108 284.4 Q 2.5(tn)-.18 G(eed an)-2.5 E 2.5(ym)-.15 G
(ute)-2.5 E 2.5(xt)-.15 G 2.5(op)-2.5 G(rotect it, of course.)-2.5 E
.292(But when your critical code section contains an)108 301.2 R(y)-.15
E F2(pth_xxx\(\))2.791 E F0 .291
(function the chance is high that these temporar)2.791 F(-)-.2 E .42
(ily switch to the scheduler)108 313.2 R 2.92(.A)-.55 G .42(nd this w)
-2.92 F .421(ay other threads can mak)-.1 F 2.921(ep)-.1 G .421
(rogress and enter your critical code sec-)-2.921 F .12(tion, too.)108
325.2 R .12(This is especially true for critical code sections which im\
plicitly or e)5.12 F .12(xplicitly use the e)-.15 F -.15(ve)-.25 G .12
(nt mech-).15 F(anism.)108 337.2 Q(int)108 354 Q F1(pth_mutex_init)2.5 E
F0(\(pth_mute)A(x_t *)-.15 E F2(mute)A(x)-.2 E F0(\);)A 1.219
(This dynamically initializes a mute)128 366 R 3.719(xv)-.15 G 1.219
(ariable of type `)-3.969 F F3(pth_mutex_t)A F0 3.719('. Alternati)B
-.15(ve)-.25 G 1.22(ly one can also).15 F
(use static initialization via `)128 378 Q F3
(pth_mutex_t mutex = PTH_MUTEX_INIT)A F0('.)A(int)108 394.8 Q F1
(pth_mutex_acquir)2.5 E(e)-.18 E F0(\(pth_mute)A(x_t *)-.15 E F2(mute)A
(x)-.2 E F0 2.5(,i)C(nt)-2.5 E F2(try)2.5 E F0 2.5(,p)C(th_e)-2.5 E -.15
(ve)-.25 G(nt_t).15 E F2 -.15(ev)2.5 G F0(\);).15 E 1.228
(This acquires a mute)128 406.8 R(x)-.15 E F2(mute)3.728 E(x)-.2 E F0
6.228(.I)C 3.728(ft)-6.228 G 1.228(he mute)-3.728 F 3.728(xi)-.15 G
3.727(sa)-3.728 G 1.227(lready lock)-3.727 F 1.227
(ed by another thread, the current threads)-.1 F -.15(exe)128 418.8 S
.002(cution is suspended until the mute).15 F 2.502(xi)-.15 G 2.502(su)
-2.502 G(nlock)-2.502 E .002(ed ag)-.1 F .002(ain or additionally the e)
-.05 F .002(xtra e)-.15 F -.15(ve)-.25 G .002(nts in).15 F F2 -.15(ev)
2.502 G F0(occurred)2.652 E(\(when)128 430.8 Q F2 -.15(ev)2.753 G F0
.253(is not)2.903 F F3(NULL)2.753 E F0 2.753(\). Recursi)B .553 -.15
(ve l)-.25 H .252(ocking is e).15 F .252
(xplicitly supported, i.e., a thread is allo)-.15 F .252
(wed to acquire a)-.25 F(mute)128 442.8 Q 3.225(xm)-.15 G .726(ore than\
 once before its released. But it then also has be released the same nu\
mber of times)-3.225 F .16(until the mute)128 454.8 R 2.66(xi)-.15 G
2.66(sa)-2.66 G -.05(ga)-2.66 G .16(in lockable by others.).05 F(When)
5.159 E F2(try)2.659 E F0(is)2.659 E F3(TRUE)2.659 E F0 .159
(this function ne)2.659 F -.15(ve)-.25 G 2.659(rs).15 G .159(uspends e)
-2.659 F -.15(xe)-.15 G(cution.).15 E(Instead it returns)128 466.8 Q F3
(FALSE)2.5 E F0(with)2.5 E F3(errno)2.5 E F0(set to)2.5 E F3(EBUSY)2.5 E
F0(.)A(int)108 483.6 Q F1(pth_mutex_r)2.5 E(elease)-.18 E F0(\(pth_mute)
A(x_t *)-.15 E F2(mute)A(x)-.2 E F0(\);)A .285
(This decrements the recursion locking count on)128 495.6 R F2(mute)
2.785 E(x)-.2 E F0 .285(and when it is zero it releases the mute)2.785 F
(x)-.15 E F2(mute)2.786 E(x)-.2 E F0(.)A(int)108 512.4 Q F1
(pth_rwlock_init)2.5 E F0(\(pth_rwlock_t *)A F2(rwloc)A(k)-.2 E F0(\);)A
.697(This dynamically initializes a read-write lock v)128 524.4 R .696
(ariable of type `)-.25 F F3(pth_rwlock_t)A F0 3.196('. Alternati)B -.15
(ve)-.25 G .696(ly one).15 F(can also use static initialization via `)
128 536.4 Q F3(pth_rwlock_t rwlock = PTH_RWLOCK_INIT)A F0('.)A(int)108
553.2 Q F1(pth_rwlock_acquir)2.5 E(e)-.18 E F0(\(pth_rwlock_t *)A F2
(rwloc)A(k)-.2 E F0 2.5(,i)C(nt)-2.5 E F2(op)2.5 E F0 2.5(,i)C(nt)-2.5 E
F2(try)2.5 E F0 2.5(,p)C(th_e)-2.5 E -.15(ve)-.25 G(nt_t).15 E F2 -.15
(ev)2.5 G F0(\);).15 E 5.163(This acquires a read-only \(when)128 565.2
R F2(op)7.664 E F0(is)7.664 E F3(PTH_RWLOCK_RD)7.664 E F0 7.664(\)o)C
7.664(rar)-7.664 G 5.164(ead-write \(when)-7.664 F F2(op)7.664 E F0(is)
7.664 E F3(PTH_RWLOCK_RW)128 577.2 Q F0 3.525(\)l)C(ock)-3.525 E F2
(rwloc)3.525 E(k)-.2 E F0 3.525(.W)C 1.025(hen the lock is only lock)
-3.525 F 1.025(ed by other threads in read-only mode,)-.1 F .333
(the lock succeeds.)128 589.2 R .333(But when one thread holds a read-w\
rite lock, all locking attempts suspend the cur)5.333 F(-)-.2 E .864
(rent thread until this lock is released ag)128 601.2 R .864
(ain. Additionally in)-.05 F F2 -.15(ev)3.364 G F0 -2.15 -.25(ev e)3.514
H .864(nts can be gi).25 F -.15(ve)-.25 G 3.364(nt).15 G 3.364(ol)-3.364
G .863(et the locking)-3.364 F .323(timeout, etc. When)128 613.2 R F2
(try)2.823 E F0(is)2.823 E F3(TRUE)2.823 E F0 .323(this function ne)
2.823 F -.15(ve)-.25 G 2.823(rs).15 G .323(uspends e)-2.823 F -.15(xe)
-.15 G .324(cution. Instead it returns).15 F F3(FALSE)2.824 E F0(with)
2.824 E F3(errno)128 625.2 Q F0(set to)2.5 E F3(EBUSY)2.5 E F0(.)A(int)
108 642 Q F1(pth_rwlock_r)2.5 E(elease)-.18 E F0(\(pth_rwlock_t *)A F2
(rwloc)A(k)-.2 E F0(\);)A(This releases a pre)128 654 Q
(viously acquired \(read\255only or read\255write\) lock.)-.25 E(int)108
670.8 Q F1(pth_cond_init)2.5 E F0(\(pth_cond_t *)A F2(cond)A F0(\);)A
.748(This dynamically initializes a condition v)128 682.8 R .748
(ariable v)-.25 F .748(ariable of type `)-.25 F F3(pth_cond_t)A F0 3.248
('. Alternati)B -.15(ve)-.25 G .748(ly one).15 F
(can also use static initialization via `)128 694.8 Q F3
(pth_cond_t cond = PTH_COND_INIT)A F0('.)A(perl v5.8.6)72 768 Q 198.17
(2004-12-03 16)167.62 F 0 Cg EP
%%Page: 17 17
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/Times-Roman@0 SF(PTH-MANU)72 48 Q 78.275(AL\(1\) User)-.4 F
(Contrib)2.5 E(uted Perl Documentation)-.2 E(PTH-MANU)80.775 E(AL\(1\))
-.4 E(int)108 84 Q/F1 10/Times-Bold@0 SF(pth_cond_await)2.5 E F0
(\(pth_cond_t *)A/F2 10/Times-Italic@0 SF(cond)A F0 2.5(,p)C(th_mute)
-2.5 E(x_t *)-.15 E F2(mute)A(x)-.2 E F0 2.5(,p)C(th_e)-2.5 E -.15(ve)
-.25 G(nt_t).15 E F2 -.15(ev)2.5 G F0(\);).15 E .649(This a)128 96 R -.1
(wa)-.15 G .65(its a condition situation. The caller has to follo).1 F
3.15(wt)-.25 G .65(he semantics of the)-3.15 F/F3 9/Times-Roman@0 SF
(POSIX)3.15 E F0 .65(condition v)3.15 F(ari-)-.25 E(ables:)128 108 Q F2
(mute)3.47 E(x)-.2 E F0 .97
(has to be acquired before this function is called. The e)3.47 F -.15
(xe)-.15 G .969(cution of the current thread is).15 F .77
(then suspended either until the e)128 120 R -.15(ve)-.25 G .77(nts in)
.15 F F2 -.15(ev)3.27 G F0 .771(occurred \(when)3.42 F F2 -.15(ev)3.271
G F0 .771(is not)3.421 F/F4 10/Courier@0 SF(NULL)3.271 E F0 3.271(\)o)C
(r)-3.271 E F2(cond)3.271 E F0 -.1(wa)3.271 G 3.271(sn).1 G .771
(oti\214ed by)-3.271 F 2.298(another thread via)128 132 R F2
(pth_cond_notify)4.798 E F0 4.798(\(3\). While)1.666 F 2.298
(the thread is w)4.798 F(aiting,)-.1 E F2(mute)4.798 E(x)-.2 E F0 2.298
(is released. Before it)4.798 F(returns)128 144 Q F2(mute)2.5 E(x)-.2 E
F0(is reacquired.)2.5 E(int)108 160.8 Q F1(pth_cond_notify)2.5 E F0
(\(pth_cond_t *)A F2(cond)A F0 2.5(,i)C(nt)-2.5 E F2(br)2.5 E(oadcast)
-.45 E F0(\);)A 1.013(This noti\214ed one or all threads which are w)128
172.8 R 1.013(aiting on)-.1 F F2(cond)3.513 E F0 6.013(.W)C(hen)-6.013 E
F2(br)3.513 E(oadcast)-.45 E F0(is)3.513 E F4(TRUE)3.513 E F0 1.013
(all thread are)3.513 F
(noti\214ed, else only a single \(unspeci\214ed\) one.)128 184.8 Q(int)
108 201.6 Q F1(pth_barrier_init)2.5 E F0(\(pth_barrier_t *)A F2(barrier)
A F0 2.5(,i)C(nt)-2.5 E F2(thr)2.5 E(eshold)-.37 E F0(\);)A .069
(This dynamically initializes a barrier v)128 213.6 R .069
(ariable of type `)-.25 F F4(pth_barrier_t)A F0 2.569('. Alternati)B
-.15(ve)-.25 G .069(ly one can also).15 F .014
(use static initialization via `)128 225.6 R F4 .015
(pth_barrier_t barrier = PTH_BARRIER_INIT\()B F2(thr)A(eadhold)-.37 E F4
(\))A F0('.)A(int)108 242.4 Q F1(pth_barrier_r)2.5 E(each)-.18 E F0
(\(pth_barrier_t *)A F2(barrier)A F0(\);)A 1.015
(This function reaches a barrier)128 254.4 R F2(barrier)3.515 E F0 3.515
(.I)C 3.515(ft)-3.515 G 1.014
(his is the last thread \(as speci\214ed by)-3.515 F F2(thr)3.514 E
(eshold)-.37 E F0 1.014(on init of)3.514 F F2(barrier)128 266.4 Q F0
2.514(\)a)C .014(ll threads are a)-2.514 F -.1(wa)-.15 G -.1(ke).1 G
2.514(ned. Else).1 F .015
(the current thread is suspended until the last thread reached the)2.514
F .22(barrier and this w)128 278.4 R .22(ay a)-.1 F -.1(wa)-.15 G -.1
(ke).1 G 2.72(sa).1 G .22(ll threads. The function returns \(beside)
-2.72 F F4(FALSE)2.72 E F0 .22(on error\) the v)2.72 F(alue)-.25 E F4
(TRUE)2.72 E F0 3.338(for an)128 290.4 R 5.838(yt)-.15 G 3.338(hread wh\
ich neither reached the barrier as the \214rst nor the last thread;)
-5.838 F F4(PTH_BAR-)5.838 E(RIER_HEADLIGHT)128 302.4 Q F0 2.207
(for the thread which reached the barrier as the \214rst thread and)
4.707 F F4(PTH_BAR-)4.706 E(RIER_TAILLIGHT)128 314.4 Q F0
(for the thread which reached the barrier as the last thread.)2.5 E F1
(User)108 337.2 Q(-Space Context)-.37 E F0 1.413(The follo)108 354 R
1.413(wing functions pro)-.25 F 1.413
(vide a stand-alone sub-API for user)-.15 F 1.413(-space conte)-.2 F
1.413(xt switching. It internally is)-.15 F .26
(based on the same underlying machine conte)108 366 R .26
(xt switching mechanism the threads in)-.15 F/F5 9/Times-Bold@0 SF(GNU)
2.76 E F1(Pth)2.76 E F0 .26(are based on.)2.76 F 4.297
(Hence these functions you can use for implementing your o)108 378 R
4.297(wn simple user)-.25 F 4.297(-space threads. The)-.2 F F4
(pth_uctx_t)108 390 Q F0(conte)2.5 E(xt is some)-.15 E
(what modeled after)-.25 E F3(POSIX)2.5 E F2(uconte)2.5 E(xt)-.2 E F0
(\(3\).)1.666 E 2.578(The time required to create \(via)108 406.8 R F2
(pth_uctx_mak)5.078 E(e)-.1 E F0 2.578(\(3\)\) a user)1.666 F 2.578
(-space conte)-.2 F 2.577(xt can range from just a fe)-.15 F(w)-.25 E
.425(microseconds up to a more dramatical time \(depending on the machi\
ne conte)108 418.8 R .425(xt switching method which is)-.15 F -.2(av)108
430.8 S .538(ailable on the platform\). On the other hand, the ra)-.05 F
3.037(wp)-.15 G .537(erformance in switching the user)-3.037 F .537
(-space conte)-.2 F .537(xts is)-.15 F(al)108 442.8 Q -.1(wa)-.1 G .459
(ys v).1 F .459(ery good \(nearly independent of the used machine conte)
-.15 F .46(xt switching method\). F)-.15 F .46(or instance, on an)-.15 F
1.102(Intel Pentium-III)108 454.8 R F3(CPU)3.602 E F0 1.102
(with 800Mhz running under FreeBSD 4 one usually achie)3.602 F -.15(ve)
-.25 G 3.601(sa).15 G 1.101(bout 260,000 user)-3.601 F(-)-.2 E
(space conte)108 466.8 Q(xt switches \(via)-.15 E F2(pth_uctx_switc)2.5
E(h)-.15 E F0(\(3\)\) per second.)1.666 E(int)108 483.6 Q F1
(pth_uctx_cr)2.5 E(eate)-.18 E F0(\(pth_uctx_t *)A F2(uctx)A F0(\);)A
1.17(This function creates a user)128 495.6 R 1.17(-space conte)-.2 F
1.171(xt and stores it into)-.15 F F2(uctx)3.671 E F0 6.171(.T)C 1.171
(here is still no underlying user)-6.171 F(-)-.2 E .844(space conte)128
507.6 R .844(xt con\214gured. Y)-.15 F .843(ou still ha)-1.1 F 1.143
-.15(ve t)-.2 H 3.343(od).15 G 3.343(ot)-3.343 G .843(his with)-3.343 F
F2(pth_uctx_mak)3.343 E(e)-.1 E F0 .843
(\(3\). On success, this function)1.666 F(returns)128 519.6 Q F4(TRUE)
2.5 E F0 2.5(,e)C(lse)-2.5 E F4(FALSE)2.5 E F0(.)A(int)108 536.4 Q F1
(pth_uctx_mak)7.01 E(e)-.1 E F0(\(pth_uctx_t)A F2(uctx)7.01 E F0 7.01
(,c)C 4.51(har *)-7.01 F F2(sk_addr)A F0 7.01(,s)C(ize_t)-7.01 E F2
(sk_size)7.01 E F0 7.01(,c)C 4.51(onst sigset_t *)-7.01 F F2(sigmask)A
F0 7.01(,v)C(oid)-7.21 E(\(*)108 548.4 Q F2(start_func)A F0(\)\(v)A
(oid *\), v)-.2 E(oid *)-.2 E F2(start_ar)A(g)-.37 E F0 2.5(,p)C
(th_uctx_t)-2.5 E F2(uctx_after)2.5 E F0(\);)A(This function mak)128
560.4 Q(es a ne)-.1 E 2.5(wu)-.25 G(ser)-2.5 E(-space conte)-.2 E(xt in)
-.15 E F2(uctx)2.5 E F0(which will operate on the run-time stack)2.5 E
F2(sk_addr)2.5 E F0 .25(\(which is of maximum size)128 572.4 R F2
(sk_size)2.75 E F0 .25(\), with the signals in)B F2(sigmask)2.749 E F0
(block)2.749 E .249(ed \(if)-.1 F F2(sigmask)2.749 E F0 .249(is not)
2.749 F F4(NULL)2.749 E F0 2.749(\)a)C(nd)-2.749 E .265(starting to e)
128 584.4 R -.15(xe)-.15 G .265(cute with the call).15 F F2(start_func)
2.765 E F0(\()A F2(start_ar)A(g)-.37 E F0 .265(\). If)B F2(sk_addr)2.765
E F0(is)2.765 E F4(NULL)2.765 E F0 2.766(,as)C .266
(tack is dynamically allo-)-2.766 F .825(cated. The stack size)128 596.4
R F2(sk_size)3.324 E F0 .824
(has to be at least 16384 \(16KB\). If the start function)3.324 F F2
(start_func)3.324 E F0(returns)3.324 E(and)128 608.4 Q F2(uctx_after)
2.756 E F0 .256(is not)2.756 F F4(NULL)2.756 E F0 2.756(,a)C 2.756(ni)
-2.756 G .256(mplicit user)-2.756 F .256(-space conte)-.2 F .256
(xt switch to this conte)-.15 F .257(xt is performed. Else \(if)-.15 F
F2(uctx_after)128 620.4 Q F0(is)3.366 E F4(NULL)3.366 E F0 3.366(\)t)C
.865(he process is terminated with)-3.366 F F2 -.2(ex)3.365 G(it).2 E F0
.865(\(3\). This function is some)1.666 F .865(what modeled after)-.25 F
F3(POSIX)128 632.4 Q F2(mak)2.5 E(econte)-.1 E(xt)-.2 E F0
(\(3\). On success, this function returns)1.666 E F4(TRUE)2.5 E F0 2.5
(,e)C(lse)-2.5 E F4(FALSE)2.5 E F0(.)A(int)108 649.2 Q F1
(pth_uctx_switch)2.5 E F0(\(pth_uctx_t)A F2(uctx_fr)2.5 E(om)-.45 E F0
2.5(,p)C(th_uctx_t)-2.5 E F2(uctx_to)2.5 E F0(\);)A 1.012
(This function sa)128 661.2 R -.15(ve)-.2 G 3.512(st).15 G 1.012
(he current user)-3.512 F 1.012(-space conte)-.2 F 1.012(xt in)-.15 F F2
(uctx_fr)3.512 E(om)-.45 E F0 1.012
(for later restoring by another call to)3.512 F F2(pth_uctx_switc)128
673.2 Q(h)-.15 E F0 .494(\(3\) and restores the ne)1.666 F 2.994(wu)-.25
G(ser)-2.994 E .493(-space conte)-.2 F .493(xt from)-.15 F F2(uctx_to)
2.993 E F0 2.993(,w)C .493(hich pre)-2.993 F .493(viously had to be)-.25
F .201(set with either a pre)128 685.2 R .201(vious call to)-.25 F F2
(pth_uctx_switc)2.701 E(h)-.15 E F0 .201(\(3\) or initially by)1.666 F
F2(pth_uctx_mak)2.702 E(e)-.1 E F0 .202(\(3\). This function is)1.666 F
(some)128 697.2 Q .749(what modeled after)-.25 F F3(POSIX)3.249 E F2
(swapconte)3.249 E(xt)-.2 E F0 .749(\(3\). If)1.666 F F2(uctx_fr)3.249 E
(om)-.45 E F0(or)3.249 E F2(uctx_to)3.249 E F0(are)3.249 E F4(NULL)3.249
E F0 .748(or if)3.249 F F2(uctx_to)3.248 E F0(con-)3.248 E .195
(tains no v)128 709.2 R .195(alid user)-.25 F .195(-space conte)-.2 F
(xt,)-.15 E F4(FALSE)2.695 E F0 .195(is returned instead of)2.695 F F4
(TRUE)2.695 E F0 2.695(.T)C .195(hese are the only errors possi-)-2.695
F(ble.)128 721.2 Q(perl v5.8.6)72 768 Q 198.17(2004-12-03 17)167.62 F 0
Cg EP
%%Page: 18 18
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/Times-Roman@0 SF(PTH-MANU)72 48 Q 78.275(AL\(1\) User)-.4 F
(Contrib)2.5 E(uted Perl Documentation)-.2 E(PTH-MANU)80.775 E(AL\(1\))
-.4 E(int)108 84 Q/F1 10/Times-Bold@0 SF(pth_uctx_destr)2.5 E(oy)-.18 E
F0(\(pth_uctx_t)A/F2 10/Times-Italic@0 SF(uctx)2.5 E F0(\);)A 1.485
(This function destro)128 96 R 1.485(ys the user)-.1 F 1.484
(-space conte)-.2 F 1.484(xt in)-.15 F F2(uctx)3.984 E F0 3.984(.T)C
1.484(he run-time stack associated with the user)-3.984 F(-)-.2 E .644
(space conte)128 108 R .644(xt is deallocated only if it w)-.15 F .644
(as not gi)-.1 F -.15(ve)-.25 G 3.144(nb).15 G 3.145(yt)-3.144 G .645
(he application \(see)-3.145 F F2(sk_addr)3.145 E F0(of)3.145 E F2
(pth_uctx_cr)3.145 E(e-)-.37 E(ate)128 120 Q F0 2.5(\(3\)\). If)1.666 F
F2(uctx)2.5 E F0(is)2.5 E/F3 10/Courier@0 SF(NULL)2.5 E F0(,)A F3(FALSE)
2.5 E F0(is returned instead of)2.5 E F3(TRUE)2.5 E F0 2.5(.T)C
(his is the only error possible.)-2.5 E F1(Generalized)108 142.8 Q/F4 9
/Times-Bold@0 SF(POSIX)2.5 E F1(Replacement)2.5 E F4(API)2.5 E F0 .558
(The follo)108 159.6 R .558
(wing functions are generalized replacements functions for the)-.25 F/F5
9/Times-Roman@0 SF .808(POSIX API)3.058 F F0 3.058(,i)C .558(.e., the)
-3.058 F 3.058(ya)-.15 G .558(re similar to)-3.058 F .409
(the functions under `)108 171.6 R F1(Standard)A F4(POSIX)2.91 E F1
(Replacement)2.91 E F4(API)2.91 E F0 2.91('b)C .41(ut all ha)-3.11 F .71
-.15(ve a)-.2 H 2.91(na).15 G .41(dditional e)-2.91 F -.15(ve)-.25 G .41
(nt ar).15 F .41(gument which)-.18 F(can be used for timeouts, etc.)108
183.6 Q(int)108 200.4 Q F1(pth_sigwait_e)2.5 E(v)-.15 E F0
(\(const sigset_t *)A F2(set)A F0 2.5(,i)C(nt *)-2.5 E F2(sig)A F0 2.5
(,p)C(th_e)-2.5 E -.15(ve)-.25 G(nt_t).15 E F2 -.15(ev)2.5 G F0(\);).15
E .827(This is equal to)128 212.4 R F2(pth_sigwait)3.327 E F0 .826
(\(3\) \(see belo)1.666 F .826(w\), b)-.25 F .826
(ut has an additional e)-.2 F -.15(ve)-.25 G .826(nt ar).15 F(gument)
-.18 E F2 -.15(ev)3.326 G F0 3.326(.W).15 G(hen)-3.326 E F2(pth_sig-)
3.326 E(wait)128 224.4 Q F0 .871(\(3\) suspends the current threads e)
1.666 F -.15(xe)-.15 G .871(cution it usually only uses the signal e).15
F -.15(ve)-.25 G .871(nt on).15 F F2(set)3.371 E F0 .871(to a)3.371 F
-.1(wa)-.15 G -.1(ke).1 G(.).1 E -.4(Wi)128 236.4 S .291
(th this function an).4 F 2.791(yn)-.15 G .291(umber of e)-2.791 F .291
(xtra e)-.15 F -.15(ve)-.25 G .291(nts can be used to a).15 F -.1(wa)
-.15 G .49 -.1(ke t).1 H .29(he current thread \(remember that).1 F F2
-.15(ev)128 248.4 S F0(actually is an e)2.65 E -.15(ve)-.25 G(nt).15 E
F2(ring)2.5 E F0(\).)A(int)108 265.2 Q F1(pth_connect_e)2.5 E(v)-.15 E
F0(\(int)A F2(s)2.5 E F0 2.5(,c)C(onst struct sockaddr *)-2.5 E F2(addr)
A F0 2.5(,s)C(ocklen_t)-2.5 E F2(addrlen)2.5 E F0 2.5(,p)C(th_e)-2.5 E
-.15(ve)-.25 G(nt_t).15 E F2 -.15(ev)2.5 G F0(\);).15 E .495
(This is equal to)128 277.2 R F2(pth_connect)2.995 E F0 .495
(\(3\) \(see belo)1.666 F .495(w\), b)-.25 F .495
(ut has an additional e)-.2 F -.15(ve)-.25 G .495(nt ar).15 F(gument)
-.18 E F2 -.15(ev)2.995 G F0 2.995(.W).15 G(hen)-2.995 E F2(pth_con-)
2.995 E(nect)128 289.2 Q F0 .599(\(3\) suspends the current threads e)
1.666 F -.15(xe)-.15 G .599(cution it usually only uses the I/O e).15 F
-.15(ve)-.25 G .599(nt on).15 F F2(s)3.099 E F0 .599(to a)3.099 F -.1
(wa)-.15 G -.1(ke).1 G 3.099(.W).1 G(ith)-3.499 E .93(this function an)
128 301.2 R 3.43(yn)-.15 G .93(umber of e)-3.43 F .93(xtra e)-.15 F -.15
(ve)-.25 G .93(nts can be used to a).15 F -.1(wa)-.15 G 1.13 -.1(ke t).1
H .93(he current thread \(remember that).1 F F2 -.15(ev)3.43 G F0
(actually is an e)128 313.2 Q -.15(ve)-.25 G(nt).15 E F2(ring)2.5 E F0
(\).)A(int)108 330 Q F1(pth_accept_e)2.5 E(v)-.15 E F0(\(int)A F2(s)2.5
E F0 2.5(,s)C(truct sockaddr *)-2.5 E F2(addr)A F0 2.5(,s)C(ocklen_t *)
-2.5 E F2(addrlen)A F0 2.5(,p)C(th_e)-2.5 E -.15(ve)-.25 G(nt_t).15 E F2
-.15(ev)2.5 G F0(\);).15 E 3.606(This is equal to)128 342 R F2
(pth_accept)6.106 E F0 3.605(\(3\) \(see belo)1.666 F 3.605(w\), b)-.25
F 3.605(ut has an additional e)-.2 F -.15(ve)-.25 G 3.605(nt ar).15 F
(gument)-.18 E F2 -.15(ev)6.105 G F0 6.105(.W).15 G(hen)-6.105 E F2
(pth_accept)128 354 Q F0 .316(\(3\) suspends the current threads e)1.666
F -.15(xe)-.15 G .317(cution it usually only uses the I/O e).15 F -.15
(ve)-.25 G .317(nt on).15 F F2(s)2.817 E F0 .317(to a)2.817 F -.1(wa)
-.15 G -.1(ke).1 G(.).1 E -.4(Wi)128 366 S .291(th this function an).4 F
2.791(yn)-.15 G .291(umber of e)-2.791 F .291(xtra e)-.15 F -.15(ve)-.25
G .291(nts can be used to a).15 F -.1(wa)-.15 G .49 -.1(ke t).1 H .29
(he current thread \(remember that).1 F F2 -.15(ev)128 378 S F0
(actually is an e)2.65 E -.15(ve)-.25 G(nt).15 E F2(ring)2.5 E F0(\).)A
(int)108 394.8 Q F1(pth_select_e)2.5 E(v)-.15 E F0(\(int)A F2(nfd)2.5 E
F0 2.5(,f)C(d_set *)-2.5 E F2(rfds)A F0 2.5(,f)C(d_set *)-2.5 E F2(wfds)
A F0 2.5(,f)C(d_set *)-2.5 E F2(efds)A F0 2.5(,s)C(truct time)-2.5 E
-.25(va)-.25 G 2.5(l*).25 G F2(timeout)-2.5 E F0 2.5(,p)C(th_e)-2.5 E
-.15(ve)-.25 G(nt_t).15 E F2 -.15(ev)2.5 G F0(\);).15 E 3.843
(This is equal to)128 406.8 R F2(pth_select)6.343 E F0 3.843
(\(3\) \(see belo)1.666 F 3.843(w\), b)-.25 F 3.843
(ut has an additional e)-.2 F -.15(ve)-.25 G 3.843(nt ar).15 F(gument)
-.18 E F2 -.15(ev)6.344 G F0 6.344(.W).15 G(hen)-6.344 E F2(pth_select)
128 418.8 Q F0 .924(\(3\) suspends the current threads e)1.666 F -.15
(xe)-.15 G .924(cution it usually only uses the I/O e).15 F -.15(ve)-.25
G .923(nt on).15 F F2(rfds)3.423 E F0(,)A F2(wfds)3.423 E F0(and)128
430.8 Q F2(efds)3.626 E F0 1.126(to a)3.626 F -.1(wa)-.15 G -.1(ke).1 G
3.626(.W).1 G 1.126(ith this function an)-4.026 F 3.627(yn)-.15 G 1.127
(umber of e)-3.627 F 1.127(xtra e)-.15 F -.15(ve)-.25 G 1.127
(nts can be used to a).15 F -.1(wa)-.15 G 1.327 -.1(ke t).1 H 1.127
(he current).1 F(thread \(remember that)128 442.8 Q F2 -.15(ev)2.5 G F0
(actually is an e)2.65 E -.15(ve)-.25 G(nt).15 E F2(ring)2.5 E F0(\).)A
(int)108 459.6 Q F1(pth_poll_e)2.5 E(v)-.15 E F0(\(struct pollfd *)A F2
(fds)A F0 2.5(,u)C(nsigned int)-2.5 E F2(nfd)2.5 E F0 2.5(,i)C(nt)-2.5 E
F2(timeout)2.5 E F0 2.5(,p)C(th_e)-2.5 E -.15(ve)-.25 G(nt_t).15 E F2
-.15(ev)2.5 G F0(\);).15 E .79(This is equal to)128 471.6 R F2(pth_poll)
3.29 E F0 .79(\(3\) \(see belo)1.666 F .79(w\), b)-.25 F .79
(ut has an additional e)-.2 F -.15(ve)-.25 G .79(nt ar).15 F(gument)-.18
E F2 -.15(ev)3.29 G F0 3.289(.W).15 G(hen)-3.289 E F2(pth_poll)3.289 E
F0(\(3\))1.666 E 1.055(suspends the current threads e)128 483.6 R -.15
(xe)-.15 G 1.055(cution it usually only uses the I/O e).15 F -.15(ve)
-.25 G 1.055(nt on).15 F F2(fds)3.556 E F0 1.056(to a)3.556 F -.1(wa)
-.15 G -.1(ke).1 G 3.556(.W).1 G 1.056(ith this)-3.956 F .605
(function an)128 495.6 R 3.105(yn)-.15 G .604(umber of e)-3.105 F .604
(xtra e)-.15 F -.15(ve)-.25 G .604(nts can be used to a).15 F -.1(wa)
-.15 G .804 -.1(ke t).1 H .604(he current thread \(remember that).1 F F2
-.15(ev)3.104 G F0(actu-)3.254 E(ally is an e)128 507.6 Q -.15(ve)-.25 G
(nt).15 E F2(ring)2.5 E F0(\).)A(ssize_t)108 524.4 Q F1(pth_r)2.5 E
(ead_e)-.18 E(v)-.15 E F0(\(int)A F2(fd)2.5 E F0 2.5(,v)C(oid *)-2.7 E
F2 -.2(bu)C(f).2 E F0 2.5(,s)C(ize_t)-2.5 E F2(nbytes)2.5 E F0 2.5(,p)C
(th_e)-2.5 E -.15(ve)-.25 G(nt_t).15 E F2 -.15(ev)2.5 G F0(\);).15 E
.469(This is equal to)128 536.4 R F2(pth_r)2.97 E(ead)-.37 E F0 .47
(\(3\) \(see belo)1.666 F .47(w\), b)-.25 F .47(ut has an additional e)
-.2 F -.15(ve)-.25 G .47(nt ar).15 F(gument)-.18 E F2 -.15(ev)2.97 G F0
2.97(.W).15 G(hen)-2.97 E F2(pth_r)2.97 E(ead)-.37 E F0(\(3\))1.666 E
1.285(suspends the current threads e)128 548.4 R -.15(xe)-.15 G 1.284
(cution it usually only uses the I/O e).15 F -.15(ve)-.25 G 1.284(nt on)
.15 F F2(fd)3.784 E F0 1.284(to a)3.784 F -.1(wa)-.15 G -.1(ke).1 G
3.784(.W).1 G 1.284(ith this)-4.184 F .604(function an)128 560.4 R 3.104
(yn)-.15 G .604(umber of e)-3.104 F .604(xtra e)-.15 F -.15(ve)-.25 G
.604(nts can be used to a).15 F -.1(wa)-.15 G .804 -.1(ke t).1 H .604
(he current thread \(remember that).1 F F2 -.15(ev)3.105 G F0(actu-)
3.255 E(ally is an e)128 572.4 Q -.15(ve)-.25 G(nt).15 E F2(ring)2.5 E
F0(\).)A(ssize_t)108 589.2 Q F1(pth_r)2.5 E(eadv_e)-.18 E(v)-.15 E F0
(\(int)A F2(fd)2.5 E F0 2.5(,c)C(onst struct io)-2.5 E -.15(ve)-.15 G
2.5(c*).15 G F2(io)-2.5 E(vec)-.1 E F0 2.5(,i)C(nt)-2.5 E F2(io)2.5 E
(vcnt)-.1 E F0 2.5(,p)C(th_e)-2.5 E -.15(ve)-.25 G(nt_t).15 E F2 -.15
(ev)2.5 G F0(\);).15 E 3.87(This is equal to)128 601.2 R F2(pth_r)6.37 E
(eadv)-.37 E F0 3.87(\(3\) \(see belo)1.666 F 3.87(w\), b)-.25 F 3.869
(ut has an additional e)-.2 F -.15(ve)-.25 G 3.869(nt ar).15 F(gument)
-.18 E F2 -.15(ev)6.369 G F0 6.369(.W).15 G(hen)-6.369 E F2(pth_r)128
613.2 Q(eadv)-.37 E F0 .304(\(3\) suspends the current threads e)1.666 F
-.15(xe)-.15 G .305(cution it usually only uses the I/O e).15 F -.15(ve)
-.25 G .305(nt on).15 F F2(fd)2.805 E F0 .305(to a)2.805 F -.1(wa)-.15 G
-.1(ke).1 G(.).1 E -.4(Wi)128 625.2 S .291(th this function an).4 F
2.791(yn)-.15 G .291(umber of e)-2.791 F .291(xtra e)-.15 F -.15(ve)-.25
G .291(nts can be used to a).15 F -.1(wa)-.15 G .49 -.1(ke t).1 H .29
(he current thread \(remember that).1 F F2 -.15(ev)128 637.2 S F0
(actually is an e)2.65 E -.15(ve)-.25 G(nt).15 E F2(ring)2.5 E F0(\).)A
(ssize_t)108 654 Q F1(pth_write_e)2.5 E(v)-.15 E F0(\(int)A F2(fd)2.5 E
F0 2.5(,c)C(onst v)-2.5 E(oid *)-.2 E F2 -.2(bu)C(f).2 E F0 2.5(,s)C
(ize_t)-2.5 E F2(nbytes)2.5 E F0 2.5(,p)C(th_e)-2.5 E -.15(ve)-.25 G
(nt_t).15 E F2 -.15(ev)2.5 G F0(\);).15 E .123(This is equal to)128 666
R F2(pth_write)2.623 E F0 .123(\(3\) \(see belo)1.666 F .123(w\), b)-.25
F .123(ut has an additional e)-.2 F -.15(ve)-.25 G .123(nt ar).15 F
(gument)-.18 E F2 -.15(ev)2.624 G F0 2.624(.W).15 G(hen)-2.624 E F2
(pth_write)2.624 E F0(\(3\))1.666 E 1.285
(suspends the current threads e)128 678 R -.15(xe)-.15 G 1.284
(cution it usually only uses the I/O e).15 F -.15(ve)-.25 G 1.284(nt on)
.15 F F2(fd)3.784 E F0 1.284(to a)3.784 F -.1(wa)-.15 G -.1(ke).1 G
3.784(.W).1 G 1.284(ith this)-4.184 F .604(function an)128 690 R 3.104
(yn)-.15 G .604(umber of e)-3.104 F .604(xtra e)-.15 F -.15(ve)-.25 G
.604(nts can be used to a).15 F -.1(wa)-.15 G .804 -.1(ke t).1 H .604
(he current thread \(remember that).1 F F2 -.15(ev)3.105 G F0(actu-)
3.255 E(ally is an e)128 702 Q -.15(ve)-.25 G(nt).15 E F2(ring)2.5 E F0
(\).)A(perl v5.8.6)72 768 Q 198.17(2004-12-03 18)167.62 F 0 Cg EP
%%Page: 19 19
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/Times-Roman@0 SF(PTH-MANU)72 48 Q 78.275(AL\(1\) User)-.4 F
(Contrib)2.5 E(uted Perl Documentation)-.2 E(PTH-MANU)80.775 E(AL\(1\))
-.4 E(ssize_t)108 84 Q/F1 10/Times-Bold@0 SF(pth_write)2.5 E(v_e)-.15 E
(v)-.15 E F0(\(int)A/F2 10/Times-Italic@0 SF(fd)2.5 E F0 2.5(,c)C
(onst struct io)-2.5 E -.15(ve)-.15 G 2.5(c*).15 G F2(io)-2.5 E(vec)-.1
E F0 2.5(,i)C(nt)-2.5 E F2(io)2.5 E(vcnt)-.1 E F0 2.5(,p)C(th_e)-2.5 E
-.15(ve)-.25 G(nt_t).15 E F2 -.15(ev)2.5 G F0(\);).15 E 3.695
(This is equal to)128 96 R F2(pth_write)6.195 E(v)-.15 E F0 3.695
(\(3\) \(see belo)1.666 F 3.695(w\), b)-.25 F 3.694
(ut has an additional e)-.2 F -.15(ve)-.25 G 3.694(nt ar).15 F(gument)
-.18 E F2 -.15(ev)6.194 G F0 6.194(.W).15 G(hen)-6.194 E F2(pth_write)
128 108 Q(v)-.15 E F0 .151(\(3\) suspends the current threads e)1.666 F
-.15(xe)-.15 G .152(cution it usually only uses the I/O e).15 F -.15(ve)
-.25 G .152(nt on).15 F F2(fd)2.652 E F0 .152(to a)2.652 F -.1(wa)-.15 G
-.1(ke).1 G(.).1 E -.4(Wi)128 120 S .291(th this function an).4 F 2.791
(yn)-.15 G .291(umber of e)-2.791 F .291(xtra e)-.15 F -.15(ve)-.25 G
.291(nts can be used to a).15 F -.1(wa)-.15 G .49 -.1(ke t).1 H .29
(he current thread \(remember that).1 F F2 -.15(ev)128 132 S F0
(actually is an e)2.65 E -.15(ve)-.25 G(nt).15 E F2(ring)2.5 E F0(\).)A
(ssize_t)108 148.8 Q F1(pth_r)2.5 E(ecv_e)-.18 E(v)-.15 E F0(\(int)A F2
(fd)2.5 E F0 2.5(,v)C(oid *)-2.7 E F2 -.2(bu)C(f).2 E F0 2.5(,s)C(ize_t)
-2.5 E F2(nbytes)2.5 E F0 2.5(,i)C(nt)-2.5 E F2<8d61>2.5 E(gs)-.1 E F0
2.5(,p)C(th_e)-2.5 E -.15(ve)-.25 G(nt_t).15 E F2 -.15(ev)2.5 G F0(\);)
.15 E .619(This is equal to)128 160.8 R F2(pth_r)3.119 E(ecv)-.37 E F0
.619(\(3\) \(see belo)1.666 F .619(w\), b)-.25 F .619
(ut has an additional e)-.2 F -.15(ve)-.25 G .619(nt ar).15 F(gument)
-.18 E F2 -.15(ev)3.12 G F0 3.12(.W).15 G(hen)-3.12 E F2(pth_r)3.12 E
(ecv)-.37 E F0(\(3\))1.666 E 1.285(suspends the current threads e)128
172.8 R -.15(xe)-.15 G 1.284(cution it usually only uses the I/O e).15 F
-.15(ve)-.25 G 1.284(nt on).15 F F2(fd)3.784 E F0 1.284(to a)3.784 F -.1
(wa)-.15 G -.1(ke).1 G 3.784(.W).1 G 1.284(ith this)-4.184 F .604
(function an)128 184.8 R 3.104(yn)-.15 G .604(umber of e)-3.104 F .604
(xtra e)-.15 F -.15(ve)-.25 G .604(nts can be used to a).15 F -.1(wa)
-.15 G .804 -.1(ke t).1 H .604(he current thread \(remember that).1 F F2
-.15(ev)3.105 G F0(actu-)3.255 E(ally is an e)128 196.8 Q -.15(ve)-.25 G
(nt).15 E F2(ring)2.5 E F0(\).)A(ssize_t)108 213.6 Q F1(pth_r)5.361 E
(ecvfr)-.18 E(om_e)-.18 E(v)-.15 E F0(\(int)A F2(fd)5.361 E F0 5.361(,v)
C 2.861(oid *)-5.561 F F2 -.2(bu)C(f).2 E F0 5.361(,s)C(ize_t)-5.361 E
F2(nbytes)5.361 E F0 5.361(,i)C(nt)-5.361 E F2<8d61>5.361 E(gs)-.1 E F0
5.361(,s)C 2.861(truct sockaddr *)-5.361 F F2(fr)A(om)-.45 E F0 5.36(,s)
C(ocklen_t)-5.36 E(*)108 225.6 Q F2(fr)A(omlen)-.45 E F0 2.5(,p)C(th_e)
-2.5 E -.15(ve)-.25 G(nt_t).15 E F2 -.15(ev)2.5 G F0(\);).15 E 2.95
(This is equal to)128 237.6 R F2(pth_r)5.45 E(ecvfr)-.37 E(om)-.45 E F0
2.95(\(3\) \(see belo)1.666 F 2.95(w\), b)-.25 F 2.949
(ut has an additional e)-.2 F -.15(ve)-.25 G 2.949(nt ar).15 F(gument)
-.18 E F2 -.15(ev)5.449 G F0 5.449(.W).15 G(hen)-5.449 E F2(pth_r)128
249.6 Q(ecvfr)-.37 E(om)-.45 E F0 1.479
(\(3\) suspends the current threads e)1.666 F -.15(xe)-.15 G 1.479
(cution it usually only uses the I/O e).15 F -.15(ve)-.25 G 1.479(nt on)
.15 F F2(fd)3.979 E F0(to)3.979 E -2.3 -.15(aw a)128 261.6 T -.1(ke).15
G 2.6(.W).1 G .1(ith this function an)-3 F 2.6(yn)-.15 G .1(umber of e)
-2.6 F .099(xtra e)-.15 F -.15(ve)-.25 G .099(nts can be used to a).15 F
-.1(wa)-.15 G .299 -.1(ke t).1 H .099(he current thread \(remem-).1 F
(ber that)128 273.6 Q F2 -.15(ev)2.5 G F0(actually is an e)2.65 E -.15
(ve)-.25 G(nt).15 E F2(ring)2.5 E F0(\).)A(ssize_t)108 290.4 Q F1
(pth_send_e)2.5 E(v)-.15 E F0(\(int)A F2(fd)2.5 E F0 2.5(,c)C(onst v)
-2.5 E(oid *)-.2 E F2 -.2(bu)C(f).2 E F0 2.5(,s)C(ize_t)-2.5 E F2
(nbytes)2.5 E F0 2.5(,i)C(nt)-2.5 E F2<8d61>2.5 E(gs)-.1 E F0 2.5(,p)C
(th_e)-2.5 E -.15(ve)-.25 G(nt_t).15 E F2 -.15(ev)2.5 G F0(\);).15 E .42
(This is equal to)128 302.4 R F2(pth_send)2.92 E F0 .42
(\(3\) \(see belo)1.666 F .42(w\), b)-.25 F .421(ut has an additional e)
-.2 F -.15(ve)-.25 G .421(nt ar).15 F(gument)-.18 E F2 -.15(ev)2.921 G
F0 2.921(.W).15 G(hen)-2.921 E F2(pth_send)2.921 E F0(\(3\))1.666 E
1.285(suspends the current threads e)128 314.4 R -.15(xe)-.15 G 1.284
(cution it usually only uses the I/O e).15 F -.15(ve)-.25 G 1.284(nt on)
.15 F F2(fd)3.784 E F0 1.284(to a)3.784 F -.1(wa)-.15 G -.1(ke).1 G
3.784(.W).1 G 1.284(ith this)-4.184 F .604(function an)128 326.4 R 3.104
(yn)-.15 G .604(umber of e)-3.104 F .604(xtra e)-.15 F -.15(ve)-.25 G
.604(nts can be used to a).15 F -.1(wa)-.15 G .804 -.1(ke t).1 H .604
(he current thread \(remember that).1 F F2 -.15(ev)3.105 G F0(actu-)
3.255 E(ally is an e)128 338.4 Q -.15(ve)-.25 G(nt).15 E F2(ring)2.5 E
F0(\).)A(ssize_t)108 355.2 Q F1(pth_sendto_e)3.147 E(v)-.15 E F0(\(int)A
F2(fd)3.147 E F0 3.147(,c)C .647(onst v)-3.147 F .647(oid *)-.2 F F2 -.2
(bu)C(f).2 E F0 3.147(,s)C(ize_t)-3.147 E F2(nbytes)3.146 E F0 3.146(,i)
C(nt)-3.146 E F2<8d61>3.146 E(gs)-.1 E F0 3.146(,c)C .646
(onst struct sockaddr *)-3.146 F F2(to)A F0 3.146(,s)C(ocklen_t)-3.146 E
F2(tolen)108 367.2 Q F0 2.5(,p)C(th_e)-2.5 E -.15(ve)-.25 G(nt_t).15 E
F2 -.15(ev)2.5 G F0(\);).15 E 3.605(This is equal to)128 379.2 R F2
(pth_sendto)6.105 E F0 3.605(\(3\) \(see belo)1.666 F 3.605(w\), b)-.25
F 3.604(ut has an additional e)-.2 F -.15(ve)-.25 G 3.604(nt ar).15 F
(gument)-.18 E F2 -.15(ev)6.104 G F0 6.104(.W).15 G(hen)-6.104 E F2
(pth_sendto)128 391.2 Q F0 .072(\(3\) suspends the current threads e)
1.666 F -.15(xe)-.15 G .073(cution it usually only uses the I/O e).15 F
-.15(ve)-.25 G .073(nt on).15 F F2(fd)2.573 E F0 .073(to a)2.573 F -.1
(wa)-.15 G -.1(ke).1 G(.).1 E -.4(Wi)128 403.2 S .291
(th this function an).4 F 2.791(yn)-.15 G .291(umber of e)-2.791 F .291
(xtra e)-.15 F -.15(ve)-.25 G .291(nts can be used to a).15 F -.1(wa)
-.15 G .49 -.1(ke t).1 H .29(he current thread \(remember that).1 F F2
-.15(ev)128 415.2 S F0(actually is an e)2.65 E -.15(ve)-.25 G(nt).15 E
F2(ring)2.5 E F0(\).)A F1(Standard)108 438 Q/F3 9/Times-Bold@0 SF(POSIX)
2.5 E F1(Replacement)2.5 E F3(API)2.5 E F0 .704(The follo)108 454.8 R
.704(wing functions are standard replacements functions for the)-.25 F
/F4 9/Times-Roman@0 SF .954(POSIX API)3.204 F F0 5.705(.T)C .705(he dif)
-5.705 F .705(ference is mainly)-.25 F .108(that the)108 466.8 R 2.608
(ys)-.15 G .108(uspend the current thread only instead of the whole pro\
cess in case the \214le descriptors will block.)-2.608 F(int)108 483.6 Q
F1(pth_nanosleep)2.5 E F0(\(const struct timespec *)A F2 -.37(rq)C(tp)
.37 E F0 2.5(,s)C(truct timespec *)-2.5 E F2(rmtp)A F0(\);)A .884
(This is a v)128 495.6 R .885(ariant of the)-.25 F F4(POSIX)3.385 E F2
(nanosleep)3.385 E F0 .885
(\(3\) function. It suspends the current threads e)1.666 F -.15(xe)-.15
G .885(cution until).15 F 1.345(the amount of time in)128 507.6 R F2
-.37(rq)3.845 G(tp).37 E F0 3.845(elapsed. The)3.845 F 1.345
(thread is guaranteed to not w)3.845 F(ak)-.1 E 3.845(eu)-.1 G 3.845(pb)
-3.845 G 1.345(efore this time, b)-3.845 F(ut)-.2 E .158
(because of the non-preempti)128 519.6 R .459 -.15(ve s)-.25 H .159
(cheduling nature of).15 F F1(Pth)2.659 E F0 2.659(,i)C 2.659(tc)-2.659
G .159(an be a)-2.659 F -.1(wa)-.15 G -.1(ke).1 G .159(ned later).1 F
2.659(,o)-.4 G 2.659(fc)-2.659 G .159(ourse. If)-2.659 F F2(rmtp)2.659 E
F0(is)2.659 E(not)128 531.6 Q/F5 10/Courier@0 SF(NULL)2.652 E F0 2.652
(,t)C(he)-2.652 E F5(timespec)2.652 E F0 .152(structure it references i\
s updated to contain the unslept amount \(the request)2.652 F .54
(time minus the time actually slept time\). The dif)128 543.6 R .541
(ference between)-.25 F F2(nanosleep)3.041 E F0 .541(\(3\) and)1.666 F
F2(pth_nanosleep)3.041 E F0(\(3\))1.666 E 1.583(is that that)128 555.6 R
F2(pth_nanosleep)4.083 E F0 1.583(\(3\) suspends only the e)1.666 F -.15
(xe)-.15 G 1.583(cution of the current thread and not the whole).15 F
(process.)128 567.6 Q(int)108 584.4 Q F1(pth_usleep)2.5 E F0
(\(unsigned int)A F2(usec)2.5 E F0(\);)A .128(This is a v)128 596.4 R
.128(ariant of the 4.3BSD)-.25 F F2(usleep)2.628 E F0 .129
(\(3\) function. It suspends the current threads e)1.666 F -.15(xe)-.15
G .129(cution until).15 F F2(usec)2.629 E F0 .991(microseconds \(=)128
608.4 R F2(usec)3.491 E F0 .991(*1/1000000 sec\) elapsed.)B .991
(The thread is guaranteed to not w)5.991 F(ak)-.1 E 3.49(eu)-.1 G 3.49
(pb)-3.49 G .99(efore this)-3.49 F .285(time, b)128 620.4 R .285
(ut because of the non-preempti)-.2 F .585 -.15(ve s)-.25 H .285
(cheduling nature of).15 F F1(Pth)2.785 E F0 2.785(,i)C 2.785(tc)-2.785
G .285(an be a)-2.785 F -.1(wa)-.15 G -.1(ke).1 G .285(ned later).1 F
2.785(,o)-.4 G 2.785(fc)-2.785 G(ourse.)-2.785 E 1.954(The dif)128 632.4
R 1.954(ference between)-.25 F F2(usleep)4.454 E F0 1.954(\(3\) and)
1.666 F F2(pth_usleep)4.454 E F0 1.953(\(3\) is that that)1.666 F F2
(pth_usleep)4.453 E F0 1.953(\(3\) suspends only the)1.666 F -.15(exe)
128 644.4 S(cution of the current thread and not the whole process.).15
E(unsigned int)108 661.2 Q F1(pth_sleep)2.5 E F0(\(unsigned int)A F2
(sec)2.5 E F0(\);)A 1.125(This is a v)128 673.2 R 1.125(ariant of the)
-.25 F F4(POSIX)3.625 E F2(sleep)3.625 E F0 1.125
(\(3\) function. It suspends the current threads e)1.666 F -.15(xe)-.15
G 1.126(cution until).15 F F2(sec)3.626 E F0 .049(seconds elapsed.)128
685.2 R .049(The thread is guaranteed to not w)5.049 F(ak)-.1 E 2.549
(eu)-.1 G 2.549(pb)-2.549 G .049(efore this time, b)-2.549 F .048
(ut because of the non-pre-)-.2 F(empti)128 697.2 Q 2.733 -.15(ve s)-.25
H 2.433(cheduling nature of).15 F F1(Pth)4.933 E F0 4.933(,i)C 4.933(tc)
-4.933 G 2.434(an be a)-4.933 F -.1(wa)-.15 G -.1(ke).1 G 2.434
(ned later).1 F 4.934(,o)-.4 G 4.934(fc)-4.934 G 4.934(ourse. The)-4.934
F(dif)4.934 E 2.434(ference between)-.25 F F2(sleep)128 709.2 Q F0 .766
(\(3\) and)1.666 F F2(pth_sleep)3.266 E F0 .765(\(3\) is that)1.666 F F2
(pth_sleep)3.265 E F0 .765(\(3\) suspends only the e)1.666 F -.15(xe)
-.15 G .765(cution of the current thread and).15 F
(not the whole process.)128 721.2 Q(perl v5.8.6)72 768 Q 198.17
(2004-12-03 19)167.62 F 0 Cg EP
%%Page: 20 20
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/Times-Roman@0 SF(PTH-MANU)72 48 Q 78.275(AL\(1\) User)-.4 F
(Contrib)2.5 E(uted Perl Documentation)-.2 E(PTH-MANU)80.775 E(AL\(1\))
-.4 E(pid_t)108 84 Q/F1 10/Times-Bold@0 SF(pth_waitpid)2.5 E F0(\(pid_t)
A/F2 10/Times-Italic@0 SF(pid)2.5 E F0 2.5(,i)C(nt *)-2.5 E F2(status)A
F0 2.5(,i)C(nt)-2.5 E F2(options)2.5 E F0(\);)A .394(This is a v)128 96
R .394(ariant of the)-.25 F/F3 9/Times-Roman@0 SF(POSIX)2.894 E F2
(waitpid)2.894 E F0 .395
(\(2\) function. It suspends the current threads e)1.666 F -.15(xe)-.15
G .395(cution until).15 F F2(sta-)2.895 E(tus)128 108 Q F0 .159
(information is a)2.659 F -.25(va)-.2 G .159
(ilable for a terminated child process).25 F F2(pid)2.659 E F0 5.159(.T)
C .159(he dif)-5.159 F .159(ference between)-.25 F F2(waitpid)2.658 E F0
.158(\(2\) and)1.666 F F2(pth_waitpid)128 120 Q F0 1.079(\(3\) is that)
1.666 F F2(pth_waitpid)3.579 E F0 1.079(\(3\) suspends only the e)1.666
F -.15(xe)-.15 G 1.079(cution of the current thread and not the).15 F
(whole process.)128 132 Q -.15(Fo)5 G 2.5(rm).15 G
(ore details about the ar)-2.5 E(guments and return code semantics see)
-.18 E F2(waitpid)2.5 E F0(\(2\).)1.666 E(int)108 148.8 Q F1(pth_system)
2.5 E F0(\(const char *)A F2(cmd)A F0(\);)A 1.16(This is a v)128 160.8 R
1.16(ariant of the)-.25 F F3(POSIX)3.66 E F2(system)3.66 E F0 1.16
(\(3\) function. It e)1.666 F -.15(xe)-.15 G 1.159
(cutes the shell command).15 F F2(cmd)3.659 E F0 1.159(with Bourne)3.659
F .731(Shell \()128 172.8 R/F4 10/Courier@0 SF(sh)A F0 3.231(\)a)C .731
(nd suspends the current threads e)-3.231 F -.15(xe)-.15 G .732
(cution until this command terminates. The dif).15 F(ference)-.25 E
(between)128 184.8 Q F2(system)2.577 E F0 .077(\(3\) and)1.666 F F2
(pth_system)2.577 E F0 .077(\(3\) is that)1.666 F F2(pth_system)2.576 E
F0 .076(\(3\) suspends only the e)1.666 F -.15(xe)-.15 G .076
(cution of the current).15 F .307(thread and not the whole process. F)
128 196.8 R .307(or more details about the ar)-.15 F .307
(guments and return code semantics see)-.18 F F2(system)128 208.8 Q F0
(\(3\).)1.666 E(int)108 225.6 Q F1(pth_sigmask)2.5 E F0(\(int)A F2(how)
2.5 E F0 2.5(,c)C(onst sigset_t *)-2.5 E F2(set)A F0 2.5(,s)C(igset_t *)
-2.5 E F2(oset)A F0(\))A .918(This is the)128 237.6 R F1(Pth)3.418 E F0
.918(thread-related equi)3.418 F -.25(va)-.25 G .918(lent of).25 F F3
(POSIX)3.418 E F2(sigpr)3.417 E(ocmask)-.45 E F0 .917(\(2\) respecti)
1.666 F -.15(ve)-.25 G(ly).15 E F2(pthr)3.417 E(ead_sigmask)-.37 E F0
(\(3\).)1.666 E 1.144(The ar)128 249.6 R(guments)-.18 E F2(how)3.644 E
F0(,)A F2(set)3.644 E F0(and)3.644 E F2(oset)3.644 E F0 1.145
(directly relate to)3.644 F F2(sigpr)3.645 E(ocmask)-.45 E F0 1.145
(\(2\), because)1.666 F F1(Pth)3.645 E F0 1.145(internally just uses)
3.645 F F2(sigpr)128 261.6 Q(ocmask)-.45 E F0 1.005
(\(2\) here. So alternati)1.666 F -.15(ve)-.25 G 1.005
(ly you can also directly call).15 F F2(sigpr)3.505 E(ocmask)-.45 E F0
1.005(\(2\), b)1.666 F 1.004(ut for consistenc)-.2 F(y)-.15 E
(reasons you should use this function)128 273.6 Q F2(pth_sigmask)2.5 E
F0(\(3\).)1.666 E(int)108 290.4 Q F1(pth_sigwait)2.5 E F0
(\(const sigset_t *)A F2(set)A F0 2.5(,i)C(nt *)-2.5 E F2(sig)A F0(\);)A
.377(This is a v)128 302.4 R .377(ariant of the)-.25 F F3(POSIX)2.878 E
F0(.1c)A F2(sigwait)2.878 E F0 .378
(\(3\) function. It suspends the current threads e)1.666 F -.15(xe)-.15
G .378(cution until a).15 F .428(signal in)128 314.4 R F2(set)2.928 E F0
.428(occurred and stores the signal number in)2.928 F F2(sig)2.928 E F0
2.928(.T)C .428(he important point is that the signal is not)-2.928 F
(deli)128 326.4 Q -.15(ve)-.25 G .688(red to a signal handler).15 F
3.188(.I)-.55 G .688(nstead it')-3.188 F 3.188(sc)-.55 G .688
(aught by the scheduler only in order to a)-3.188 F -.1(wa)-.15 G .889
-.1(ke t).1 H(he).1 E F2(pth_sig-)3.189 E(wait\(\))128 338.4 Q F0 .078
(call. The trick and noticeable point here is that this w)2.578 F .077
(ay you get an asynchronous a)-.1 F -.1(wa)-.15 G .077(re applica-).1 F
.015(tion that is written completely synchronously)128 350.4 R 2.516(.W)
-.65 G .016(hen you think about the problem of)-2.516 F F2(async)2.516 E
(hr)-.15 E .016(onous safe)-.45 F F0
(functions you should recognize that this is a great bene\214t.)128
362.4 Q(int)108 379.2 Q F1(pth_connect)2.5 E F0(\(int)A F2(s)2.5 E F0
2.5(,c)C(onst struct sockaddr *)-2.5 E F2(addr)A F0 2.5(,s)C(ocklen_t)
-2.5 E F2(addrlen)2.5 E F0(\);)A .33(This is a v)128 391.2 R .329
(ariant of the 4.2BSD)-.25 F F2(connect)2.829 E F0 .329
(\(2\) function. It establishes a connection on a sock)1.666 F(et)-.1 E
F2(s)2.829 E F0 .329(to tar)2.829 F(get)-.18 E 3.111(speci\214ed in)128
403.2 R F2(addr)5.611 E F0(and)5.611 E F2(addrlen)5.611 E F0 8.111(.T)C
3.111(he dif)-8.111 F 3.112(ference between)-.25 F F2(connect)5.612 E F0
3.112(\(2\) and)1.666 F F2(pth_connect)5.612 E F0 3.112(\(3\) is that)
1.666 F F2(pth_connect)128 415.2 Q F0 .039(\(3\) suspends only the e)
1.666 F -.15(xe)-.15 G .039
(cution of the current thread and not the whole process.).15 F -.15(Fo)
5.039 G 2.538(rm).15 G(ore)-2.538 E(details about the ar)128 427.2 Q
(guments and return code semantics see)-.18 E F2(connect)2.5 E F0
(\(2\).)1.666 E(int)108 444 Q F1(pth_accept)2.5 E F0(\(int)A F2(s)2.5 E
F0 2.5(,s)C(truct sockaddr *)-2.5 E F2(addr)A F0 2.5(,s)C(ocklen_t *)
-2.5 E F2(addrlen)A F0(\);)A .69(This is a v)128 456 R .691
(ariant of the 4.2BSD)-.25 F F2(accept)3.191 E F0 .691
(\(2\) function. It accepts a connection on a sock)1.666 F .691(et by e)
-.1 F(xtracting)-.15 E .343(the \214rst connection request on the queue\
 of pending connections, creating a ne)128 468 R 2.842(ws)-.25 G(ock)
-2.842 E .342(et with the same)-.1 F .968(properties of)128 480 R F2(s)
3.468 E F0 .968(and allocates a ne)3.468 F 3.468<778c>-.25 G .968
(le descriptor for the sock)-3.468 F .968(et \(which is returned\).)-.1
F .969(The dif)5.969 F(ference)-.25 E(between)128 492 Q F2(accept)2.706
E F0 .206(\(2\) and)1.666 F F2(pth_accept)2.706 E F0 .206(\(3\) is that)
1.666 F F2(pth_accept)2.706 E F0 .205(\(3\) suspends only the e)1.666 F
-.15(xe)-.15 G .205(cution of the current).15 F .15
(thread and not the whole process.)128 504 R -.15(Fo)5.15 G 2.651(rm).15
G .151(ore details about the ar)-2.651 F .151
(guments and return code semantics see)-.18 F F2(accept)128 516 Q F0
(\(2\).)1.666 E(int)108 532.8 Q F1(pth_select)2.5 E F0(\(int)A F2(nfd)
2.5 E F0 2.5(,f)C(d_set *)-2.5 E F2(rfds)A F0 2.5(,f)C(d_set *)-2.5 E F2
(wfds)A F0 2.5(,f)C(d_set *)-2.5 E F2(efds)A F0 2.5(,s)C(truct time)-2.5
E -.25(va)-.25 G 2.5(l*).25 G F2(timeout)-2.5 E F0(\);)A .033
(This is a v)128 544.8 R .033(ariant of the 4.2BSD)-.25 F F2(select)
2.533 E F0 .033(\(2\) function.)1.666 F .033(It e)5.033 F .032
(xamines the I/O descriptor sets whose addresses)-.15 F .147
(are passed in)128 556.8 R F2(rfds)2.647 E F0(,)A F2(wfds)2.647 E F0
2.647(,a)C(nd)-2.647 E F2(efds)2.647 E F0 .147(to see if some of their \
descriptors are ready for reading, are ready for)2.647 F .367
(writing, or ha)128 568.8 R .667 -.15(ve a)-.2 H 2.867(ne).15 G .367
(xceptional condition pending, respecti)-3.017 F -.15(ve)-.25 G(ly).15 E
5.367(.F)-.65 G .367(or more details about the ar)-5.517 F(guments)-.18
E(and return code semantics see)128 580.8 Q F2(select)2.5 E F0(\(2\).)
1.666 E(int)108 597.6 Q F1(pth_pselect)4.663 E F0(\(int)A F2(nfd)4.663 E
F0 4.663(,f)C 2.163(d_set *)-4.663 F F2(rfds)A F0 4.663(,f)C 2.163
(d_set *)-4.663 F F2(wfds)A F0 4.663(,f)C 2.163(d_set *)-4.663 F F2
(efds)A F0 4.663(,c)C 2.163(onst struct timespec *)-4.663 F F2(timeout)A
F0 4.664(,c)C(onst)-4.664 E(sigset_t *)108 609.6 Q F2(sigmask)A F0(\);)A
1.741(This is a v)128 621.6 R 1.741(ariant of the)-.25 F F3(POSIX)4.241
E F2(pselect)4.241 E F0 1.741
(\(2\) function, which in turn is a stronger v)1.666 F 1.742
(ariant of 4.2BSD)-.25 F F2(select)128 633.6 Q F0 .985(\(2\). The dif)
1.666 F .984(ference is that the higher)-.25 F(-resolution)-.2 E F4 .984
(struct timespec)3.484 F F0 .984(is passed instead of the)3.484 F(lo)128
645.6 Q(wer)-.25 E(-resolution)-.2 E F4 1.72(struct timeval)4.22 F F0
1.721(and that a signal mask is speci\214ed which is temporarily set)
4.22 F .056(while w)128 657.6 R .056(aiting for input. F)-.1 F .056
(or more details about the ar)-.15 F .055
(guments and return code semantics see)-.18 F F2(pselect)2.555 E F0
(\(2\))1.666 E(and)128 669.6 Q F2(select)2.5 E F0(\(2\).)1.666 E(int)108
686.4 Q F1(pth_poll)2.5 E F0(\(struct pollfd *)A F2(fds)A F0 2.5(,u)C
(nsigned int)-2.5 E F2(nfd)2.5 E F0 2.5(,i)C(nt)-2.5 E F2(timeout)2.5 E
F0(\);)A .399(This is a v)128 698.4 R .399(ariant of the SysV)-.25 F F2
(poll)2.899 E F0 .399(\(2\) function. It e)1.666 F .399
(xamines the I/O descriptors which are passed in the)-.15 F(array)128
710.4 Q F2(fds)3.443 E F0 .942(to see if some of them are ready for rea\
ding, are ready for writing, or ha)3.443 F 1.242 -.15(ve a)-.2 H 3.442
(ne).15 G(xceptional)-3.592 E .884(condition pending, respecti)128 722.4
R -.15(ve)-.25 G(ly).15 E 3.384(.F)-.65 G .885
(or more details about the ar)-3.534 F .885
(guments and return code semantics see)-.18 F(perl v5.8.6)72 768 Q
198.17(2004-12-03 20)167.62 F 0 Cg EP
%%Page: 21 21
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/Times-Roman@0 SF(PTH-MANU)72 48 Q 78.275(AL\(1\) User)-.4 F
(Contrib)2.5 E(uted Perl Documentation)-.2 E(PTH-MANU)80.775 E(AL\(1\))
-.4 E/F1 10/Times-Italic@0 SF(poll)128 84 Q F0(\(2\).)1.666 E(ssize_t)
108 100.8 Q/F2 10/Times-Bold@0 SF(pth_r)2.5 E(ead)-.18 E F0(\(int)A F1
(fd)2.5 E F0 2.5(,v)C(oid *)-2.7 E F1 -.2(bu)C(f).2 E F0 2.5(,s)C(ize_t)
-2.5 E F1(nbytes)2.5 E F0(\);)A .128(This is a v)128 112.8 R .128
(ariant of the)-.25 F/F3 9/Times-Roman@0 SF(POSIX)2.628 E F1 -.37(re)
2.628 G(ad).37 E F0 .128(\(2\) function. It reads up to)1.666 F F1
(nbytes)2.627 E F0 .127(bytes into)2.627 F F1 -.2(bu)2.627 G(f).2 E F0
.127(from \214le descriptor)2.627 F F1(fd)128 124.8 Q F0 6.292(.T)C
1.292(he dif)-6.292 F 1.292(ference between)-.25 F F1 -.37(re)3.792 G
(ad).37 E F0 1.292(\(2\) and)1.666 F F1(pth_r)3.792 E(ead)-.37 E F0
1.292(\(2\) is that)1.666 F F1(pth_r)3.793 E(ead)-.37 E F0 1.293
(\(2\) suspends e)1.666 F -.15(xe)-.15 G 1.293(cution of the).15 F .723
(current thread until the \214le descriptor is ready for reading. F)128
136.8 R .723(or more details about the ar)-.15 F .723(guments and)-.18 F
(return code semantics see)128 148.8 Q F1 -.37(re)2.5 G(ad).37 E F0
(\(2\).)1.666 E(ssize_t)108 165.6 Q F2(pth_r)2.5 E(eadv)-.18 E F0(\(int)
A F1(fd)2.5 E F0 2.5(,c)C(onst struct io)-2.5 E -.15(ve)-.15 G 2.5(c*)
.15 G F1(io)-2.5 E(vec)-.1 E F0 2.5(,i)C(nt)-2.5 E F1(io)2.5 E(vcnt)-.1
E F0(\);)A 1.404(This is a v)128 177.6 R 1.404(ariant of the)-.25 F F3
(POSIX)3.904 E F1 -.37(re)3.904 G(adv).37 E F0 1.405
(\(2\) function. It reads data from \214le descriptor)1.666 F F1(fd)
3.905 E F0 1.405(into the \214rst)3.905 F F1(io)128 189.6 Q(vcnt)-.1 E
F0(ro)2.751 E .251(ws of the)-.25 F F1(io)2.751 E(v)-.1 E F0 -.15(ve)
2.751 G(ctor).15 E 5.251(.T)-.55 G .251(he dif)-5.251 F .251
(ference between)-.25 F F1 -.37(re)2.751 G(adv).37 E F0 .251(\(2\) and)
1.666 F F1(pth_r)2.751 E(eadv)-.37 E F0 .251(\(2\) is that)1.666 F F1
(pth_r)2.75 E(eadv)-.37 E F0(\(2\))1.666 E .418(suspends e)128 201.6 R
-.15(xe)-.15 G .418(cution of the current thread until the \214le descr\
iptor is ready for reading. F).15 F .419(or more details)-.15 F
(about the ar)128 213.6 Q(guments and return code semantics see)-.18 E
F1 -.37(re)2.5 G(adv).37 E F0(\(2\).)1.666 E(ssize_t)108 230.4 Q F2
(pth_write)2.5 E F0(\(int)A F1(fd)2.5 E F0 2.5(,c)C(onst v)-2.5 E(oid *)
-.2 E F1 -.2(bu)C(f).2 E F0 2.5(,s)C(ize_t)-2.5 E F1(nbytes)2.5 E F0
(\);)A .793(This is a v)128 242.4 R .793(ariant of the)-.25 F F3(POSIX)
3.293 E F1(write)3.293 E F0 .792(\(2\) function. It writes)1.666 F F1
(nbytes)3.292 E F0 .792(bytes from)3.292 F F1 -.2(bu)3.292 G(f).2 E F0
.792(to \214le descriptor)3.292 F F1(fd)3.292 E F0(.)A .452(The dif)128
254.4 R .452(ference between)-.25 F F1(write)2.952 E F0 .452(\(2\) and)
1.666 F F1(pth_write)2.952 E F0 .452(\(2\) is that)1.666 F F1(pth_write)
2.953 E F0 .453(\(2\) suspends e)1.666 F -.15(xe)-.15 G .453
(cution of the cur).15 F(-)-.2 E 1.434
(rent thread until the \214le descriptor is ready for writing.)128 266.4
R -.15(Fo)6.434 G 3.934(rm).15 G 1.433(ore details about the ar)-3.934 F
1.433(guments and)-.18 F(return code semantics see)128 278.4 Q F1(write)
2.5 E F0(\(2\).)1.666 E(ssize_t)108 295.2 Q F2(pth_write)2.5 E(v)-.15 E
F0(\(int)A F1(fd)2.5 E F0 2.5(,c)C(onst struct io)-2.5 E -.15(ve)-.15 G
2.5(c*).15 G F1(io)-2.5 E(vec)-.1 E F0 2.5(,i)C(nt)-2.5 E F1(io)2.5 E
(vcnt)-.1 E F0(\);)A .022(This is a v)128 307.2 R .022(ariant of the)
-.25 F F3(POSIX)2.523 E F1(write)2.523 E(v)-.15 E F0 .023
(\(2\) function. It writes data to \214le descriptor)1.666 F F1(fd)2.523
E F0 .023(from the \214rst)2.523 F F1(io)2.523 E(vcnt)-.1 E F0(ro)128
319.2 Q .314(ws of the)-.25 F F1(io)2.814 E(v)-.1 E F0 -.15(ve)2.814 G
(ctor).15 E 5.314(.T)-.55 G .314(he dif)-5.314 F .314(ference between)
-.25 F F1(write)2.814 E(v)-.15 E F0 .314(\(2\) and)1.666 F F1(pth_write)
2.814 E(v)-.15 E F0 .313(\(2\) is that)1.666 F F1(pth_write)2.813 E(v)
-.15 E F0 .313(\(2\) sus-)1.666 F 1.216(pends e)128 331.2 R -.15(xe)-.15
G 1.217(cution of the current thread until the \214le descriptor is rea\
dy for reading. F).15 F 1.217(or more details)-.15 F(about the ar)128
343.2 Q(guments and return code semantics see)-.18 E F1(write)2.5 E(v)
-.15 E F0(\(2\).)1.666 E(ssize_t)108 360 Q F2(pth_pr)2.5 E(ead)-.18 E F0
(\(int)A F1(fd)2.5 E F0 2.5(,v)C(oid *)-2.7 E F1 -.2(bu)C(f).2 E F0 2.5
(,s)C(ize_t)-2.5 E F1(nbytes)2.5 E F0 2.5(,o)C -.25(ff)-2.5 G(_t).25 E
F1(of)2.5 E(fset)-.18 E F0(\);)A 1.046(This is a v)128 372 R 1.046
(ariant of the)-.25 F F3(POSIX)3.546 E F1(pr)3.546 E(ead)-.37 E F0 1.046
(\(3\) function.)1.666 F 1.045(It performs the same action as a re)6.046
F(gular)-.15 E F1 -.37(re)3.545 G(ad).37 E F0(\(2\),)1.666 E -.15(ex)128
384 S .699(cept that it reads from a gi).15 F -.15(ve)-.25 G 3.199(np)
.15 G .699(osition in the \214le without changing the \214le pointer)
-3.199 F 5.699(.T)-.55 G .699(he \214rst three)-5.699 F(ar)128 396 Q
.127(guments are the same as for)-.18 F F1(pth_r)2.627 E(ead)-.37 E F0
.127(\(3\) with the addition of a fourth ar)1.666 F(gument)-.18 E F1(of)
2.626 E(fset)-.18 E F0 .126(for the desired)2.626 F
(position inside the \214le.)128 408 Q(ssize_t)108 424.8 Q F2
(pth_pwrite)2.5 E F0(\(int)A F1(fd)2.5 E F0 2.5(,c)C(onst v)-2.5 E
(oid *)-.2 E F1 -.2(bu)C(f).2 E F0 2.5(,s)C(ize_t)-2.5 E F1(nbytes)2.5 E
F0 2.5(,o)C -.25(ff)-2.5 G(_t).25 E F1(of)2.5 E(fset)-.18 E F0(\);)A
.739(This is a v)128 436.8 R .74(ariant of the)-.25 F F3(POSIX)3.24 E F1
(pwrite)3.24 E F0 .74(\(3\) function.)1.666 F .74
(It performs the same action as a re)5.74 F(gular)-.15 E F1(write)3.24 E
F0(\(2\),)1.666 E -.15(ex)128 448.8 S 1.3(cept that it writes to a gi)
.15 F -.15(ve)-.25 G 3.8(np).15 G 1.3
(osition in the \214le without changing the \214le pointer)-3.8 F 3.8
(.T)-.55 G 1.3(he \214rst three)-3.8 F(ar)128 460.8 Q 1.933
(guments are the same as for)-.18 F F1(pth_write)4.433 E F0 1.933
(\(3\) with the addition of a fourth ar)1.666 F(gument)-.18 E F1(of)
4.434 E(fset)-.18 E F0 1.934(for the)4.434 F
(desired position inside the \214le.)128 472.8 Q(ssize_t)108 489.6 Q F2
(pth_r)2.5 E(ecv)-.18 E F0(\(int)A F1(fd)2.5 E F0 2.5(,v)C(oid *)-2.7 E
F1 -.2(bu)C(f).2 E F0 2.5(,s)C(ize_t)-2.5 E F1(nbytes)2.5 E F0 2.5(,i)C
(nt)-2.5 E F1<8d61>2.5 E(gs)-.1 E F0(\);)A 1.446(This is a v)128 501.6 R
1.446(ariant of the SUSv2)-.25 F F1 -.37(re)3.946 G(cv).37 E F0 1.445
(\(2\) function and equal to `)1.666 F 1.445(`pth_recvfrom\(fd, b)-.74 F
1.445(uf, nbytes, \215ags,)-.2 F F3(NULL)128 513.6 Q F0 2.5(,0)C(\)')
-2.5 E('.)-.74 E(ssize_t)108 530.4 Q F2(pth_r)2.5 E(ecvfr)-.18 E(om)-.18
E F0(\(int)A F1(fd)2.5 E F0 2.5(,v)C(oid *)-2.7 E F1 -.2(bu)C(f).2 E F0
2.5(,s)C(ize_t)-2.5 E F1(nbytes)2.5 E F0 2.5(,i)C(nt)-2.5 E F1<8d61>2.5
E(gs)-.1 E F0 2.5(,s)C(truct sockaddr *)-2.5 E F1(fr)A(om)-.45 E F0 2.5
(,s)C(ocklen_t *)-2.5 E F1(fr)A(omlen)-.45 E F0(\);)A 1.403(This is a v)
128 542.4 R 1.403(ariant of the SUSv2)-.25 F F1 -.37(re)3.903 G(cvfr).37
E(om)-.45 E F0 1.403(\(2\) function. It reads up to)1.666 F F1(nbytes)
3.903 E F0 1.403(bytes into)3.903 F F1 -.2(bu)3.903 G(f).2 E F0 1.403
(from \214le)3.903 F(descriptor)128 554.4 Q F1(fd)7.322 E F0 4.822
(while using)7.322 F F1<8d61>7.321 E(gs)-.1 E F0(and)7.321 E F1(fr)7.321
E(om)-.45 E F0(/)A F1(fr)A(omlen)-.45 E F0 7.321(.T)C 4.821(he dif)
-7.321 F 4.821(ference between)-.25 F F1 -.37(re)7.321 G(cvfr).37 E(om)
-.45 E F0 4.821(\(2\) and)1.666 F F1(pth_r)128 566.4 Q(ecvfr)-.37 E(om)
-.45 E F0 .073(\(2\) is that)1.666 F F1(pth_r)2.573 E(ecvfr)-.37 E(om)
-.45 E F0 .073(\(2\) suspends e)1.666 F -.15(xe)-.15 G .074
(cution of the current thread until the \214le descrip-).15 F 2.976
(tor is ready for reading. F)128 578.4 R 2.975
(or more details about the ar)-.15 F 2.975
(guments and return code semantics see)-.18 F F1 -.37(re)128 590.4 S
(cvfr).37 E(om)-.45 E F0(\(2\).)1.666 E(ssize_t)108 607.2 Q F2(pth_send)
2.5 E F0(\(int)A F1(fd)2.5 E F0 2.5(,c)C(onst v)-2.5 E(oid *)-.2 E F1
-.2(bu)C(f).2 E F0 2.5(,s)C(ize_t)-2.5 E F1(nbytes)2.5 E F0 2.5(,i)C(nt)
-2.5 E F1<8d61>2.5 E(gs)-.1 E F0(\);)A .108(This is a v)128 619.2 R .109
(ariant of the SUSv2)-.25 F F1(send)2.609 E F0 .109
(\(2\) function and equal to `)1.666 F .109(`pth_sendto\(fd, b)-.74 F
.109(uf, nbytes, \215ags,)-.2 F F3(NULL)2.609 E F0(,)A(0\)')128 631.2 Q
('.)-.74 E(ssize_t)108 648 Q F2(pth_sendto)4.168 E F0(\(int)A F1(fd)
4.168 E F0 4.167(,c)C 1.667(onst v)-4.167 F 1.667(oid *)-.2 F F1 -.2(bu)
C(f).2 E F0 4.167(,s)C(ize_t)-4.167 E F1(nbytes)4.167 E F0 4.167(,i)C
(nt)-4.167 E F1<8d61>4.167 E(gs)-.1 E F0 4.167(,c)C 1.667
(onst struct sockaddr *)-4.167 F F1(to)A F0 4.167(,s)C(ocklen_t)-4.167 E
F1(tolen)108 660 Q F0(\);)A .493(This is a v)128 672 R .493
(ariant of the SUSv2)-.25 F F1(sendto)2.993 E F0 .493
(\(2\) function. It writes)1.666 F F1(nbytes)2.993 E F0 .493(bytes from)
2.993 F F1 -.2(bu)2.993 G(f).2 E F0 .493(to \214le descriptor)2.993 F F1
(fd)2.993 E F0 4.159(while using)128 684 R F1<8d61>6.659 E(gs)-.1 E F0
(and)6.659 E F1(to)6.659 E F0(/)A F1(tolen)A F0 6.659(.T)C 4.159(he dif)
-6.659 F 4.159(ference between)-.25 F F1(sendto)6.659 E F0 4.159
(\(2\) and)1.666 F F1(pth_sendto)6.659 E F0 4.159(\(2\) is that)1.666 F
F1(pth_sendto)128 696 Q F0 1.141(\(2\) suspends e)1.666 F -.15(xe)-.15 G
1.141(cution of the current thread until the \214le descriptor is ready\
 for writing.).15 F -.15(Fo)128 708 S 2.5(rm).15 G
(ore details about the ar)-2.5 E(guments and return code semantics see)
-.18 E F1(sendto)2.5 E F0(\(2\).)1.666 E(perl v5.8.6)72 768 Q 198.17
(2004-12-03 21)167.62 F 0 Cg EP
%%Page: 22 22
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/Times-Roman@0 SF(PTH-MANU)72 48 Q 78.275(AL\(1\) User)-.4 F
(Contrib)2.5 E(uted Perl Documentation)-.2 E(PTH-MANU)80.775 E(AL\(1\))
-.4 E/F1 10.95/Times-Bold@0 SF(EXAMPLE)72 84 Q F0 .603(The follo)108 96
R .603(wing e)-.25 F .603(xample is a useless serv)-.15 F .603
(er which does nothing more than listening on)-.15 F/F2 9/Times-Roman@0
SF(TCP)3.103 E F0 .604(port 12345 and)3.104 F .198
(displaying the current time to the sock)108 108 R .198
(et when a connection w)-.1 F .198(as established. F)-.1 F .198
(or each incoming connection)-.15 F 3.246(at)108 120 S .746
(hread is spa)-3.246 F .746(wned. Additionally)-.15 F 3.246(,t)-.65 G
3.246(os)-3.246 G .747(ee more multithreading, a useless tick)-3.246 F
.747(er thread runs simultaneously)-.1 F .194
(which outputs the current time to)108 132 R/F3 10/Courier@0 SF(stderr)
2.694 E F0 -2.15 -.25(ev e)2.694 H .194(ry 5 seconds. The e).25 F .193
(xample contains)-.15 F/F4 10/Times-Italic@0 SF(no)2.693 E F0 .193
(error checking and is)2.693 F F4(only)108 144 Q F0(intended to sho)2.5
E 2.5(wy)-.25 G(ou the look and feel of)-2.5 E/F5 10/Times-Bold@0 SF
(Pth)2.5 E F0(.)A F3(#include <stdio.h>)114 160.8 Q(#include <stdlib.h>)
114 172.8 Q(#include <errno.h>)114 184.8 Q(#include <sys/types.h>)114
196.8 Q(#include <sys/socket.h>)114 208.8 Q(#include <netinet/in.h>)114
220.8 Q(#include <arpa/inet.h>)114 232.8 Q(#include <signal.h>)114 244.8
Q(#include <netdb.h>)114 256.8 Q(#include <unistd.h>)114 268.8 Q
(#include "pth.h")114 280.8 Q(#define PORT 12345)114 297.6 Q
(/* the socket connection handler thread */)114 314.4 Q
(static void *handler\(void *_arg\))114 326.4 Q({)114 338.4 Q
(int fd = \(int\)_arg;)138 350.4 Q(time_t now;)138 362.4 Q(char *ct;)138
374.4 Q(now = time\(NULL\);)138 391.2 Q(ct = ctime\(&now\);)138 403.2 Q
(pth_write\(fd, ct, strlen\(ct\)\);)138 415.2 Q(close\(fd\);)138 427.2 Q
(return NULL;)138 439.2 Q(})114 451.2 Q
(/* the stderr time ticker thread */)114 468 Q
(static void *ticker\(void *_arg\))114 480 Q({)114 492 Q(time_t now;)138
504 Q(char *ct;)138 516 Q(float load;)138 528 Q(for \(;;\) {)138 544.8 Q
(pth_sleep\(5\);)162 556.8 Q(now = time\(NULL\);)162 568.8 Q
(ct = ctime\(&now\);)162 580.8 Q(ct[strlen\(ct\)-1] = '\\0';)162 592.8 Q
(pth_ctrl\(PTH_CTRL_GETAVLOAD, &load\);)162 604.8 Q
(printf\("ticker: time: %s, average load: %.2f\\n", ct, load\);)162
616.8 Q(})138 628.8 Q(})114 640.8 Q F0(perl v5.8.6)72 768 Q 198.17
(2004-12-03 22)167.62 F 0 Cg EP
%%Page: 23 23
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/Times-Roman@0 SF(PTH-MANU)72 48 Q 78.275(AL\(1\) User)-.4 F
(Contrib)2.5 E(uted Perl Documentation)-.2 E(PTH-MANU)80.775 E(AL\(1\))
-.4 E/F1 10/Courier@0 SF(/* the main thread/procedure */)114 84 Q
(int main\(int argc, char *argv[]\))114 96 Q({)114 108 Q
(pth_attr_t attr;)138 120 Q(struct sockaddr_in sar;)138 132 Q
(struct protoent *pe;)138 144 Q(struct sockaddr_in peer_addr;)138 156 Q
(int peer_len;)138 168 Q(int sa, sw;)138 180 Q(int port;)138 192 Q
(pth_init\(\);)138 208.8 Q(signal\(SIGPIPE, SIG_IGN\);)138 220.8 Q
(attr = pth_attr_new\(\);)138 237.6 Q
(pth_attr_set\(attr, PTH_ATTR_NAME, "ticker"\);)138 249.6 Q
(pth_attr_set\(attr, PTH_ATTR_STACK_SIZE, 64*1024\);)138 261.6 Q
(pth_attr_set\(attr, PTH_ATTR_JOINABLE, FALSE\);)138 273.6 Q
(pth_spawn\(attr, ticker, NULL\);)138 285.6 Q
(pe = getprotobyname\("tcp"\);)138 302.4 Q
(sa = socket\(AF_INET, SOCK_STREAM, pe->p_proto\);)138 314.4 Q
(sar.sin_family = AF_INET;)138 326.4 Q
(sar.sin_addr.s_addr = INADDR_ANY;)138 338.4 Q
(sar.sin_port = htons\(PORT\);)138 350.4 Q
(bind\(sa, \(struct sockaddr *\)&sar, sizeof\(struct sockaddr_in\)\);)
138 362.4 Q(listen\(sa, 10\);)138 374.4 Q
(pth_attr_set\(attr, PTH_ATTR_NAME, "handler"\);)138 391.2 Q
(for \(;;\) {)138 403.2 Q(peer_len = sizeof\(peer_addr\);)162 415.2 Q
(sw = pth_accept\(sa, \(struct sockaddr *\)&peer_addr, &peer_len\);)162
427.2 Q(pth_spawn\(attr, handler, \(void *\)sw\);)162 439.2 Q(})138
451.2 Q(})114 463.2 Q/F2 10.95/Times-Bold@0 SF -.11(BU)72 480 S
(ILD ENVIR).11 E(ONMENTS)-.329 E F0 .708
(In this section we will discuss the canonical w)108 492 R .708
(ays to establish the b)-.1 F .709(uild en)-.2 F .709(vironment for a)
-.4 F/F3 10/Times-Bold@0 SF(Pth)3.209 E F0 .709(based pro-)3.209 F
(gram. The possibilities supported by)108 504 Q F3(Pth)2.5 E F0
(range from v)2.5 E(ery simple en)-.15 E(vironments to rather comple)-.4
E 2.5(xo)-.15 G(nes.)-2.5 E F3(Manual Build En)108 526.8 Q(vir)-.4 E
(onment \(No)-.18 E(vice\))-.1 E F0 .4(As a \214rst e)108 543.6 R .4
(xample, assume we ha)-.15 F .7 -.15(ve t)-.2 H .4(he abo).15 F .7 -.15
(ve t)-.15 H .4(est program staying in the source \214le).15 F F1(foo.c)
2.9 E F0 2.9(.T)C .4(hen we can)-2.9 F(create a v)108 555.6 Q
(ery simple b)-.15 E(uild en)-.2 E(vironment by just adding the follo)
-.4 E(wing)-.25 E F1(Makefile)2.5 E F0(:)A F1 6($v)114 572.4 S 6(iM)-6 G
(akefile)-6 E/F4 10/Symbol SF<ef>114 584.4 Q F1 30(CC =)6 F(cc)6 E F4
<ef>114 596.4 Q F1 6(CFLAGS =)6 F(`pth-config --cflags`)6 E F4<ef>114
608.4 Q F1(LDFLAGS = `pth-config --ldflags`)6 E F4<ef>114 620.4 Q F1 18
(LIBS =)6 F(`pth-config --libs`)6 E F4<ef>114 632.4 Q<ef>114 644.4 Q F1
(all: foo)6 E F4<ef>114 656.4 Q F1(foo: foo.o)6 E F4<ef>114 668.4 Q F1
($\(CC\) $\(LDFLAGS\) -o foo foo.o $\(LIBS\))30 E F4<ef>114 680.4 Q F1
(foo.o: foo.c)6 E F4<ef>114 692.4 Q F1($\(CC\) $\(CFLAGS\) -c foo.c)30 E
F4<ef>114 704.4 Q F1(clean:)6 E F4<ef>114 716.4 Q F1(rm -f foo foo.o)30
E F0(perl v5.8.6)72 768 Q 198.17(2004-12-03 23)167.62 F 0 Cg EP
%%Page: 24 24
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/Times-Roman@0 SF(PTH-MANU)72 48 Q 78.275(AL\(1\) User)-.4 F
(Contrib)2.5 E(uted Perl Documentation)-.2 E(PTH-MANU)80.775 E(AL\(1\))
-.4 E .182(This imports the necessary compiler and link)108 84 R .183
(er \215ags on-the-\215y from the)-.1 F/F1 10/Times-Bold@0 SF(Pth)2.683
E F0 .183(installation via its)2.683 F/F2 10/Courier@0 SF(pth\255con-)
2.683 E(fig)108 96 Q F0(program. This approach is straight-forw)2.5 E
(ard and w)-.1 E(orks \214ne for small projects.)-.1 E F1 -.5(Au)108
118.8 S(toconf Build En).5 E(vir)-.4 E(onment \(Adv)-.18 E(anced\))-.1 E
F0 .649(The pre)108 135.6 R .649(vious approach is simple b)-.25 F .649
(ut in\215e)-.2 F .649(xible. First, to speed up b)-.15 F .649
(uilding, it w)-.2 F .649(ould be nice to not e)-.1 F(xpand)-.15 E .021
(the compiler and link)108 147.6 R .021(er \215ags e)-.1 F -.15(ve)-.25
G .021(ry time the compiler is started. Second, it w).15 F .022
(ould be useful to also be able to)-.1 F -.2(bu)108 159.6 S .358(ild ag)
.2 F .358(ainst uninstalled)-.05 F F1(Pth)2.858 E F0 2.858(,t)C .358
(hat is, ag)-2.858 F .358(ainst a)-.05 F F1(Pth)2.858 E F0 .358
(source tree which w)2.858 F .358(as just con\214gured and b)-.1 F .357
(uilt, b)-.2 F .357(ut not)-.2 F .906(installed. Third, it w)108 171.6 R
.906(ould be also useful to allo)-.1 F 3.406(wc)-.25 G .906
(hecking of the)-3.406 F F1(Pth)3.406 E F0 -.15(ve)3.406 G .906
(rsion to mak).15 F 3.406(es)-.1 G .907(ure it is at least a)-3.406 F
.937(minimum required v)108 183.6 R 3.437(ersion. And)-.15 F(\214nally)
3.437 E 3.437(,i)-.65 G 3.437(tw)-3.437 G .936
(ould be also great to mak)-3.537 F 3.436(es)-.1 G(ure)-3.436 E F1(Pth)
3.436 E F0 -.1(wo)3.436 G .936(rks correctly by \214rst).1 F .096(perfo\
rming some sanity compile and run-time checks. All this can be done if \
we use)108 195.6 R/F3 9/Times-Roman@0 SF(GNU)2.597 E F1(autoconf)2.597 E
F0 .097(and the)2.597 F F2(AC_CHECK_PTH)108 207.6 Q F0(macro pro)2.5 E
(vided by)-.15 E F1(Pth)2.5 E F0 2.5(.F)C
(or this, we establish the follo)-2.65 E(wing three \214les:)-.25 E .286
(First we ag)108 224.4 R .286(ain need the)-.05 F F2(Makefile)2.786 E F0
2.786(,b)C .286(ut this time it contains)-2.986 F F1(autoconf)2.786 E F0
.286(placeholders and additional cleanup)2.786 F(tar)108 236.4 Q
(gets. And we create it under the name)-.18 E F2(Makefile.in)2.5 E F0
2.5(,b)C(ecause it is no)-2.5 E 2.5(wa)-.25 G 2.5(ni)-2.5 G
(nput \214le for)-2.5 E F1(autoconf)2.5 E F0(:)A F2 6($v)114 253.2 S 6
(iM)-6 G(akefile.in)-6 E/F4 10/Symbol SF<ef>114 265.2 Q F2 30(CC =)6 F
(@CC@)6 E F4<ef>114 277.2 Q F2 6(CFLAGS =)6 F(@CFLAGS@)6 E F4<ef>114
289.2 Q F2(LDFLAGS = @LDFLAGS@)6 E F4<ef>114 301.2 Q F2 18(LIBS =)6 F
(@LIBS@)6 E F4<ef>114 313.2 Q<ef>114 325.2 Q F2(all: foo)6 E F4<ef>114
337.2 Q F2(foo: foo.o)6 E F4<ef>114 349.2 Q F2
($\(CC\) $\(LDFLAGS\) -o foo foo.o $\(LIBS\))30 E F4<ef>114 361.2 Q F2
(foo.o: foo.c)6 E F4<ef>114 373.2 Q F2($\(CC\) $\(CFLAGS\) -c foo.c)30 E
F4<ef>114 385.2 Q F2(clean:)6 E F4<ef>114 397.2 Q F2(rm -f foo foo.o)30
E F4<ef>114 409.2 Q F2(distclean:)6 E F4<ef>114 421.2 Q F2
(rm -f foo foo.o)30 E F4<ef>114 433.2 Q F2
(rm -f config.log config.status config.cache)30 E F4<ef>114 445.2 Q F2
(rm -f Makefile)30 E F0(Because)108 462 Q F1(autoconf)3.52 E F0 1.02
(generates additional \214les, we added a canonical)3.52 F F2(distclean)
3.52 E F0(tar)3.52 E 1.02(get which cleans this)-.18 F(up. Secondly)108
474 Q 2.5(,w)-.65 G 2.5(ew)-2.5 G(rote)-2.5 E F2(configure.ac)2.5 E F0
2.5(,a\()C(minimal\))-2.5 E F1(autoconf)2.5 E F0
(script speci\214cation:)2.5 E F2 6($v)114 490.8 S 6(ic)-6 G
(onfigure.ac)-6 E F4<ef>114 502.8 Q F2(AC_INIT\(Makefile.in\))6 E F4<ef>
114 514.8 Q F2(AC_CHECK_PTH\(1.3.0\))6 E F4<ef>114 526.8 Q F2
(AC_OUTPUT\(Makefile\))6 E F0 2.846(Then we let)108 543.6 R F1(autoconf)
5.346 E F0 -.55('s)C F2(aclocal)5.896 E F0 2.845
(program generate for us an)5.346 F F2(aclocal.m4)5.345 E F0 2.845
(\214le containing)5.345 F F1(Pth)5.345 E F0 -.55('s)C F2(AC_CHECK_PTH)
108 555.6 Q F0 .173(macro. Then we generate the \214nal)2.673 F F2
(configure)2.674 E F0 .174(script out of this)2.674 F F2(aclocal.m4)
2.674 E F0 .174(\214le and)2.674 F(the)108 567.6 Q F2(configure.ac)2.5 E
F0(\214le:)2.5 E F2 6($a)114 584.4 S
(clocal --acdir=`pth-config --acdir`)-6 E 6($a)114 596.4 S(utoconf)-6 E
F0(After these steps, the w)108 613.2 Q
(orking directory should look similar to this:)-.1 E F2 6($l)114 630 S 6
(s-)-6 G(l)-6 E 6(-rw-r--r-- 1)114 642 R 6(rse users)6 F(176 Nov)24 E 6
(31)12 G(1:11 Makefile.in)-6 E 6(-rw-r--r-- 1)114 654 R 6
(rse users 15314)6 F 6(Nov 3)6 F(11:16 aclocal.m4)6 E 6(-rwxr-xr-x 1)114
666 R 6(rse users 52045)6 F 6(Nov 3)6 F(11:16 configure)6 E 6
(-rw-r--r-- 1)114 678 R 6(rse users)6 F(63 Nov)30 E 6(31)12 G
(1:11 configure.ac)-6 E 6(-rw-r--r-- 1)114 690 R 6(rse users)6 F
(4227 Nov)18 E 6(31)12 G(1:11 foo.c)-6 E F0 1.21(If we no)108 706.8 R
3.71(wr)-.25 G(un)-3.71 E F2(configure)3.71 E F0 1.21(we get a correct)
3.71 F F2(Makefile)3.71 E F0 1.21(which immediately can be used to b)
3.71 F(uild)-.2 E F2(foo)3.71 E F0(\(assuming that)108 718.8 Q F1(Pth)
2.5 E F0(is already installed some)2.5 E(where, so that)-.25 E F2
(pth\255config)2.5 E F0(is in)2.5 E F2($PATH)2.5 E F0(\):)A(perl v5.8.6)
72 768 Q 198.17(2004-12-03 24)167.62 F 0 Cg EP
%%Page: 25 25
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/Times-Roman@0 SF(PTH-MANU)72 48 Q 78.275(AL\(1\) User)-.4 F
(Contrib)2.5 E(uted Perl Documentation)-.2 E(PTH-MANU)80.775 E(AL\(1\))
-.4 E/F1 10/Courier@0 SF 6($.)114 84 S(/configure)-6 E
(creating cache ./config.cache)114 96 Q(checking for gcc... gcc)114 108
Q(checking whether the C compiler \(gcc)114 120 Q 6(\)w)18 G
(orks... yes)-6 E(checking whether the C compiler \(gcc)114 132 Q 6(\)i)
18 G 6(sac)-6 G(ross-compiler... no)-6 E
(checking whether we are using GNU C... yes)114 144 Q
(checking whether gcc accepts -g... yes)114 156 Q
(checking how to run the C preprocessor... gcc -E)114 168 Q
(checking for GNU Pth... version 1.3.0, installed under /usr/local)114
180 Q(updating cache ./config.cache)114 192 Q(creating ./config.status)
114 204 Q(creating Makefile)114 216 Q(rse@en1:/e/gnu/pth/ac)114 228 Q 6
($m)114 240 S(ake)-6 E(gcc -g -O2 -I/usr/local/include -c foo.c)114 252
Q(gcc -L/usr/local/lib -o foo foo.o -lpth)114 264 Q F0(If)108 280.8 Q/F2
10/Times-Bold@0 SF(Pth)3.615 E F0 1.115
(is installed in non-standard locations or)3.615 F F1(pth\255config)
3.615 E F0 1.115(is not in)3.615 F F1($PATH)3.615 E F0 3.615(,o)C 1.115
(ne just has to drop the)-3.615 F F1(configure)108 292.8 Q F0 .509
(script a note about the location by running)3.01 F F1(configure)3.009 E
F0 .509(with the option)3.009 F F1(\255\255with\255pth=)3.009 E/F3 10
/Times-Italic@0 SF(dir)A F0(\(where)108 304.8 Q F3(dir)2.5 E F0
(is the ar)2.5 E(gument which w)-.18 E(as used with the)-.1 E F1
(\255\255prefix)2.5 E F0(option when)2.5 E F2(Pth)2.5 E F0 -.1(wa)2.5 G
2.5(si).1 G(nstalled\).)-2.5 E F2 -.5(Au)108 327.6 S(toconf Build En).5
E(vir)-.4 E(onment with Local Copy of Pth \(Expert\))-.18 E F0 .543
(Finally let us assume the)108 344.4 R F1(foo)3.043 E F0 .543
(program stays under either a)3.043 F/F4 9/Times-Italic@0 SF(GPL)3.044 E
F0(or)3.044 E F4(LGPL)3.044 E F0(distrib)3.044 E .544
(ution license and we w)-.2 F(ant)-.1 E .842(to mak)108 356.4 R 3.342
(ei)-.1 G 3.342(ta)-3.342 G .841(stand-alone package for easier distrib)
-.001 F .841(ution and installation.)-.2 F .841(That is, we don')5.841 F
3.341(tw)-.18 G .841(ant to oblige)-3.441 F .36(the end-user to install)
108 368.4 R F2(Pth)2.86 E F0 .36(just to allo)2.86 F 2.86(wo)-.25 G(ur)
-2.86 E F1(foo)2.86 E F0 .361(package to compile. F)2.86 F .361
(or this, it is a con)-.15 F -.15(ve)-.4 G .361(nient practice to).15 F
.444(include the required libraries \(here)108 380.4 R F2(Pth)2.944 E F0
2.944(\)i)C .444(nto the source tree of the package \(here)-2.944 F F1
(foo)2.944 E F0(\).)A F2(Pth)5.444 E F0 .443(ships with all)2.944 F .907
(necessary support to allo)108 392.4 R 3.407(wu)-.25 G 3.407(st)-3.407 G
3.407(oe)-3.407 G .907(asily achie)-3.407 F 1.207 -.15(ve t)-.25 H .907
(his approach. Say).15 F 3.407(,w)-.65 G 3.407(ew)-3.407 G(ant)-3.507 E
F2(Pth)3.407 E F0 .907(in a subdirectory named)3.407 F F1(pth/)108 404.4
Q F0(and this directory should be seamlessly inte)2.5 E
(grated into the con\214guration and b)-.15 E(uild process of)-.2 E F1
(foo)2.5 E F0(.)A .883(First we ag)108 421.2 R .883(ain start with the)
-.05 F F1(Makefile.in)3.383 E F0 3.383(,b)C .883
(ut this time it is a more adv)-3.583 F .883(anced v)-.25 F .883
(ersion which supports)-.15 F(subdirectory mo)108 433.2 Q -.15(ve)-.15 G
(ment:).15 E(perl v5.8.6)72 768 Q 198.17(2004-12-03 25)167.62 F 0 Cg EP
%%Page: 26 26
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/Times-Roman@0 SF(PTH-MANU)72 48 Q 78.275(AL\(1\) User)-.4 F
(Contrib)2.5 E(uted Perl Documentation)-.2 E(PTH-MANU)80.775 E(AL\(1\))
-.4 E/F1 10/Courier@0 SF 6($v)114 84 S 6(iM)-6 G(akefile.in)-6 E/F2 10
/Symbol SF<ef>114 96 Q F1 30(CC =)6 F(@CC@)6 E F2<ef>114 108 Q F1 6
(CFLAGS =)6 F(@CFLAGS@)6 E F2<ef>114 120 Q F1(LDFLAGS = @LDFLAGS@)6 E F2
<ef>114 132 Q F1 18(LIBS =)6 F(@LIBS@)6 E F2<ef>114 144 Q<ef>114 156 Q
F1(SUBDIRS = pth)6 E F2<ef>114 168 Q<ef>114 180 Q F1
(all: subdirs_all foo)6 E F2<ef>114 192 Q<ef>114 204 Q F1(subdirs_all:)6
E F2<ef>114 216 Q F1(@$\(MAKE\) $\(MFLAGS\) subdirs TARGET=all)30 E F2
<ef>114 228 Q F1(subdirs_clean:)6 E F2<ef>114 240 Q F1
(@$\(MAKE\) $\(MFLAGS\) subdirs TARGET=clean)30 E F2<ef>114 252 Q F1
(subdirs_distclean:)6 E F2<ef>114 264 Q F1
(@$\(MAKE\) $\(MFLAGS\) subdirs TARGET=distclean)30 E F2<ef>114 276 Q F1
(subdirs:)6 E F2<ef>114 288 Q F1(@for subdir in $\(SUBDIRS\); do \\)30 E
F2<ef>114 300 Q F1(echo "===> $$subdir \($\(TARGET\)\)"; \\)54 E F2<ef>
114 312 Q F1(\(cd $$subdir; $\(MAKE\) $\(MFLAGS\) $\(TARGET\))54 E F2
<efef>6 E F1(exit 1\))6 E F2<efef>6 E F1(exit 1; \\)6 E F2<ef>114 324 Q
F1(echo "<=== $$subdir"; \\)54 E F2<ef>114 336 Q F1(done)30 E F2<ef>114
348 Q<ef>114 360 Q F1(foo: foo.o)6 E F2<ef>114 372 Q F1
($\(CC\) $\(LDFLAGS\) -o foo foo.o $\(LIBS\))30 E F2<ef>114 384 Q F1
(foo.o: foo.c)6 E F2<ef>114 396 Q F1($\(CC\) $\(CFLAGS\) -c foo.c)30 E
F2<ef>114 408 Q<ef>114 420 Q F1(clean: subdirs_clean)6 E F2<ef>114 432 Q
F1(rm -f foo foo.o)30 E F2<ef>114 444 Q F1(distclean: subdirs_distclean)
6 E F2<ef>114 456 Q F1(rm -f foo foo.o)30 E F2<ef>114 468 Q F1
(rm -f config.log config.status config.cache)30 E F2<ef>114 480 Q F1
(rm -f Makefile)30 E F0(Then we create a slightly dif)108 496.8 Q
(ferent)-.25 E/F3 10/Times-Bold@0 SF(autoconf)2.5 E F0(script)2.5 E F1
(configure.ac)2.5 E F0(:)A F1 6($v)114 513.6 S 6(ic)-6 G(onfigure.ac)-6
E F2<ef>114 525.6 Q F1(AC_INIT\(Makefile.in\))6 E F2<ef>114 537.6 Q F1
(AC_CONFIG_AUX_DIR\(pth\))6 E F2<ef>114 549.6 Q F1
(AC_CHECK_PTH\(1.3.0, subdir:pth --disable-tests\))6 E F2<ef>114 561.6 Q
F1(AC_CONFIG_SUBDIRS\(pth\))6 E F2<ef>114 573.6 Q F1
(AC_OUTPUT\(Makefile\))6 E F0 4.386(Here we pro)108 590.4 R 4.386
(vided a def)-.15 F 4.386(ault v)-.1 F 4.386(alue for)-.25 F F1(foo)
6.886 E F0 -.55('s)C F1(\255\255with\255pth)7.436 E F0 4.387
(option as the second ar)6.887 F 4.387(gument to)-.18 F F1(AC_CHECK_PTH)
108 602.4 Q F0 .214(which indicates that)2.714 F F3(Pth)2.714 E F0 .214
(can be found in the subdirectory named)2.714 F F1(pth/)2.713 E F0 2.713
(.A)C .213(dditionally we)-2.713 F .362(speci\214ed that the)108 614.4 R
F1(\255\255disable\255tests)2.863 E F0 .363(option of)2.863 F F3(Pth)
2.863 E F0 .363(should be passed to the)2.863 F F1(pth/)2.863 E F0
(subdirectory)2.863 E 2.863(,b)-.65 G(ecause)-2.863 E .074
(we need only to b)108 626.4 R .074(uild the)-.2 F F3(Pth)2.574 E F0
.073(library itself. And we added a)2.574 F F1(AC_CONFIG_SUBDIR)2.573 E
F0 .073(call which indicates to)2.573 F F3(autoconf)108 638.4 Q F0 .737
(that it should con\214gure the)3.237 F F1(pth/)3.237 E F0(subdirectory)
3.238 E 3.238(,t)-.65 G .738(oo. The)-3.238 F F1(AC_CONFIG_AUX_DIR)3.238
E F0(directi)3.238 E 1.038 -.15(ve w)-.25 H(as).05 E 2.503
(added just to mak)108 650.4 R(e)-.1 E F3(autoconf)5.003 E F0(happ)5.003
E 3.803 -.65(y, b)-.1 H 2.503(ecause it w).65 F 2.502(ants to \214nd a)
-.1 F F1(install.sh)5.002 E F0(or)5.002 E F1(shtool)5.002 E F0 2.502
(script if)5.002 F F1(AC_CONFIG_SUBDIRS)108 662.4 Q F0(is used.)2.5 E
(No)108 679.2 Q 2.591(ww)-.25 G 2.591(el)-2.591 G(et)-2.591 E F3
(autoconf)2.592 E F0 -.55('s)C F1(aclocal)3.142 E F0 .092(program ag)
2.592 F .092(ain generate for us an)-.05 F F1(aclocal.m4)2.592 E F0 .092
(\214le with the contents of)2.592 F F3(Pth)108 691.2 Q F0 -.55('s)C F1
(AC_CHECK_PTH)3.45 E F0 2.9(macro. Finally)2.9 F .399(we generate the)
2.899 F F1(configure)2.899 E F0 .399(script out of this)2.899 F F1
(aclocal.m4)2.899 E F0(\214le)2.899 E(and the)108 703.2 Q F1
(configure.ac)2.5 E F0(\214le.)2.5 E(perl v5.8.6)72 768 Q 198.17
(2004-12-03 26)167.62 F 0 Cg EP
%%Page: 27 27
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/Times-Roman@0 SF(PTH-MANU)72 48 Q 78.275(AL\(1\) User)-.4 F
(Contrib)2.5 E(uted Perl Documentation)-.2 E(PTH-MANU)80.775 E(AL\(1\))
-.4 E/F1 10/Courier@0 SF 6($a)114 84 S
(clocal --acdir=`pth-config --acdir`)-6 E 6($a)114 96 S(utoconf)-6 E F0
(No)108 112.8 Q 3.428(ww)-.25 G 3.428(eh)-3.428 G -2.25 -.2(av e)-3.428
H .928(to create the)3.628 F F1(pth/)3.428 E F0 .928
(subdirectory itself. F)3.428 F .928(or this, we e)-.15 F .929
(xtract the)-.15 F/F2 10/Times-Bold@0 SF(Pth)3.429 E F0(distrib)3.429 E
.929(ution to the)-.2 F F1(foo)3.429 E F0
(source tree and just rename it to)108 124.8 Q F1(pth/)2.5 E F0(:)A F1 6
($g)114 141.6 S(unzip <pth-X.Y.Z.tar.gz)-6 E/F3 10/Symbol SF<ef>6 E F1
(tar xvf -)6 E 6($m)114 153.6 S 6(vp)-6 G(th-X.Y.Z pth)-6 E F0 .668
(Optionally to reduce the size of the)108 170.4 R F1(pth/)3.167 E F0
(subdirectory)3.167 E 3.167(,w)-.65 G 3.167(ec)-3.167 G .667
(an strip do)-3.167 F .667(wn the)-.25 F F2(Pth)3.167 E F0 .667
(sources to a minimum)3.167 F(with the)108 182.4 Q/F4 10/Times-Italic@0
SF(striptease)2.5 E F0(feature:)2.5 E F1 6($c)114 199.2 S 6(dp)-6 G(th)
-6 E 6($.)114 211.2 S(/configure)-6 E 6($m)114 223.2 S(ake striptease)-6
E 6($c)114 235.2 S 6(d.)-6 G(.)-6 E F0(After this the source tree of)108
252 Q F1(foo)2.5 E F0(should look similar to this:)2.5 E F1 6($l)114
268.8 S 6(s-)-6 G(l)-6 E 6(-rw-r--r-- 1)114 280.8 R 6(rse users)6 F
(709 Nov)24 E 6(31)12 G(1:51 Makefile.in)-6 E 6(-rw-r--r-- 1)114 292.8 R
6(rse users 16431)6 F 6(Nov 3)6 F(12:20 aclocal.m4)6 E 6(-rwxr-xr-x 1)
114 304.8 R 6(rse users 57403)6 F 6(Nov 3)6 F(12:21 configure)6 E 6
(-rw-r--r-- 1)114 316.8 R 6(rse users)6 F(129 Nov)24 E 6(31)12 G
(2:21 configure.ac)-6 E 6(-rw-r--r-- 1)114 328.8 R 6(rse users)6 F
(4227 Nov)18 E 6(31)12 G(1:11 foo.c)-6 E 6(drwxr-xr-x 2)114 340.8 R 6
(rse users)6 F(3584 Nov)18 E 6(31)12 G(2:36 pth)-6 E 6($l)114 352.8 S 6
(s-)-6 G 6(lp)-6 G(th/)-6 E 6(-rw-rw-r-- 1)114 364.8 R 6(rse users)6 F
(26344 Nov)18 E 6(12)12 G(0:12 COPYING)-6 E 6(-rw-rw-r-- 1)114 376.8 R 6
(rse users)6 F(2042 Nov)24 E 6(31)12 G(2:36 Makefile.in)-6 E 6
(-rw-rw-r-- 1)114 388.8 R 6(rse users)6 F(3967 Nov)24 E 6(11)12 G
(9:48 README)-6 E 6(-rw-rw-r-- 1)114 400.8 R 6(rse users)6 F(340 Nov)30
E 6(31)12 G(2:36 README.1st)-6 E 6(-rw-rw-r-- 1)114 412.8 R 6(rse users)
6 F(28719 Oct 31 17:06 config.guess)18 E 6(-rw-rw-r-- 1)114 424.8 R 6
(rse users)6 F(24274 Aug 18 13:31 config.sub)18 E 6(-rwxrwxr-x 1)114
436.8 R 6(rse users 155141)6 F 6(Nov 3)6 F(12:36 configure)6 E 6
(-rw-rw-r-- 1)114 448.8 R 6(rse users 162021)6 F 6(Nov 3)6 F
(12:36 pth.c)6 E 6(-rw-rw-r-- 1)114 460.8 R 6(rse users)6 F(18687 Nov)18
E 6(21)12 G(5:19 pth.h.in)-6 E 6(-rw-rw-r-- 1)114 472.8 R 6(rse users)6
F(5251 Oct 31 12:46 pth_acdef.h.in)24 E 6(-rw-rw-r-- 1)114 484.8 R 6
(rse users)6 F(2120 Nov)24 E 6(11)12 G(1:27 pth_acmac.h.in)-6 E 6
(-rw-rw-r-- 1)114 496.8 R 6(rse users)6 F(2323 Nov)24 E 6(11)12 G
(1:27 pth_p.h.in)-6 E 6(-rw-rw-r-- 1)114 508.8 R 6(rse users)6 F
(946 Nov)30 E 6(11)12 G(1:27 pth_vers.c)-6 E 6(-rw-rw-r-- 1)114 520.8 R
6(rse users)6 F(26848 Nov)18 E 6(11)12 G(1:27 pthread.c)-6 E 6
(-rw-rw-r-- 1)114 532.8 R 6(rse users)6 F(18772 Nov)18 E 6(11)12 G
(1:27 pthread.h.in)-6 E 6(-rwxrwxr-x 1)114 544.8 R 6(rse users)6 F
(26188 Nov)18 E 6(31)12 G(2:36 shtool)-6 E F0(No)108 561.6 Q 2.5(ww)-.25
G(hen we con\214gure and b)-2.5 E(uild the)-.2 E F1(foo)2.5 E F0
(package it looks similar to this:)2.5 E(perl v5.8.6)72 768 Q 198.17
(2004-12-03 27)167.62 F 0 Cg EP
%%Page: 28 28
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/Times-Roman@0 SF(PTH-MANU)72 48 Q 78.275(AL\(1\) User)-.4 F
(Contrib)2.5 E(uted Perl Documentation)-.2 E(PTH-MANU)80.775 E(AL\(1\))
-.4 E/F1 10/Courier@0 SF 6($.)114 84 S(/configure)-6 E
(creating cache ./config.cache)114 96 Q(checking for gcc... gcc)114 108
Q(checking whether the C compiler \(gcc)114 120 Q 6(\)w)18 G
(orks... yes)-6 E(checking whether the C compiler \(gcc)114 132 Q 6(\)i)
18 G 6(sac)-6 G(ross-compiler... no)-6 E
(checking whether we are using GNU C... yes)114 144 Q
(checking whether gcc accepts -g... yes)114 156 Q
(checking how to run the C preprocessor... gcc -E)114 168 Q
(checking for GNU Pth... version 1.3.0, local under pth)114 180 Q
(updating cache ./config.cache)114 192 Q(creating ./config.status)114
204 Q(creating Makefile)114 216 Q(configuring in pth)114 228 Q
(running /bin/sh ./configure)114 240 Q(--enable-subdir --enable-batch)12
E(--disable-tests --cache-file=.././config.cache --srcdir=.)114 252 Q
(loading cache .././config.cache)114 264 Q
(checking for gcc... \(cached\) gcc)114 276 Q
(checking whether the C compiler \(gcc)114 288 Q 6(\)w)18 G(orks... yes)
-6 E(checking whether the C compiler \(gcc)114 300 Q 6(\)i)18 G 6(sac)-6
G(ross-compiler... no)-6 E([...])114 312 Q 6($m)114 324 S(ake)-6 E
(===> pth \(all\))114 336 Q
(./shtool scpp -o pth_p.h -t pth_p.h.in -Dcpp -Cintern -M '==#==' pth.c)
114 348 Q(pth_vers.c)114 360 Q(gcc -c -I. -O2 -pipe pth.c)114 372 Q
(gcc -c -I. -O2 -pipe pth_vers.c)114 384 Q
(ar rc libpth.a pth.o pth_vers.o)114 396 Q(ranlib libpth.a)114 408 Q
(<=== pth)114 420 Q(gcc -g -O2 -Ipth -c foo.c)114 432 Q
(gcc -Lpth -o foo foo.o -lpth)114 444 Q F0 .221(As you can see,)108
460.8 R/F2 10/Times-Bold@0 SF(autoconf)2.721 E F0(no)2.722 E 2.722(wa)
-.25 G .222(utomatically con\214gures the local \(stripped do)-2.722 F
.222(wn\) cop)-.25 F 2.722(yo)-.1 G(f)-2.722 E F2(Pth)2.722 E F0 .222
(in the subdi-)2.722 F(rectory)108 472.8 Q F1(pth/)2.5 E F0(and the)2.5
E F1(Makefile)2.5 E F0(automatically b)2.5 E(uilds the subdirectory)-.2
E 2.5(,t)-.65 G(oo.)-2.5 E/F3 10.95/Times-Bold@0 SF
(SYSTEM CALL WRAPPER F)72 489.6 Q -.602(AC)-.986 G(ILITY).602 E F2(Pth)
108 501.6 Q F0 2.005(per def)4.505 F 2.005(ault uses an e)-.1 F(xplicit)
-.15 E/F4 9/Times-Roman@0 SF(API)4.505 E F0 4.505(,i)C 2.004
(ncluding the system calls. F)-4.505 F 2.004(or instance you')-.15 F
2.304 -.15(ve t)-.5 H 4.504(oe).15 G 2.004(xplicitly use)-4.654 F/F5 10
/Times-Italic@0 SF(pth_r)108 513.6 Q(ead)-.37 E F0 .295
(\(3\) when you need a thread-a)1.666 F -.1(wa)-.15 G(re).1 E F5 -.37
(re)2.795 G(ad).37 E F0 .295(\(3\) and cannot e)1.666 F .295
(xpect that by just calling)-.15 F F5 -.37(re)2.795 G(ad).37 E F0 .296
(\(3\) only the)1.666 F 1.208(current thread is block)108 525.6 R 1.207
(ed. Instead with the standard)-.1 F F5 -.37(re)3.707 G(ad).37 E F0
1.207(\(3\) call the whole process will be block)1.666 F 1.207(ed. But)
-.1 F .153(because for some applications \(mainly those consisting of l\
ots of third-party stuf)108 537.6 R .154(f\) this can be incon)-.25 F
-.15(ve)-.4 G(nient.).15 E 1.548(Here it')108 549.6 R 4.048(sr)-.55 G
1.548(equired that a call to)-4.048 F F5 -.37(re)4.048 G(ad).37 E F0
1.548(\(3\) `magically' means)1.666 F F5(pth_r)4.048 E(ead)-.37 E F0
1.548(\(3\). The problem here is that such)1.666 F(magic)108 561.6 Q F2
(Pth)2.616 E F0 .117(cannot pro)2.616 F .117(vide per def)-.15 F .117
(ault because it')-.1 F 2.617(sn)-.55 G .117(ot really portable.)-2.617
F(Ne)5.117 E -.15(ve)-.25 G(rtheless).15 E F2(Pth)2.617 E F0(pro)2.617 E
.117(vides a tw)-.15 F 2.617(os)-.1 G(tep)-2.617 E(approach to solv)108
573.6 Q 2.5(et)-.15 G(his problem:)-2.5 E F2(Soft System Call Mapping)
108 596.4 Q F0 5.066(This v)108 613.2 R 5.066(ariant is a)-.25 F -.25
(va)-.2 G 5.066(ilable on all platforms and can).25 F F5(always)7.566 E
F0 5.066(be enabled by b)7.566 F(uilding)-.2 E F2(Pth)7.566 E F0(with)
7.566 E F1(\255\255enable\255syscall\255soft)108 625.2 Q F0 3.183(.T)C
.683(his then triggers some)-3.183 F F1(#define)3.183 E F0 1.783 -.55
('s i)D 3.183(nt).55 G(he)-3.183 E F1(pth.h)3.183 E F0 .684
(header which map for)3.184 F(instance)108 637.2 Q F5 -.37(re)2.756 G
(ad).37 E F0 .256(\(3\) to)1.666 F F5(pth_r)2.756 E(ead)-.37 E F0 .256
(\(3\), etc. Currently the follo)1.666 F .255
(wing functions are mapped:)-.25 F F5(fork)2.755 E F0(\(2\),)1.666 E F5
(nanosleep)2.755 E F0(\(3\),)1.666 E F5(usleep)108 649.2 Q F0(\(3\),)
1.666 E F5(sleep)3.175 E F0(\(3\),)1.666 E F5(sigwait)3.175 E F0(\(3\),)
1.666 E F5(waitpid)3.175 E F0(\(2\),)1.666 E F5(system)3.175 E F0
(\(3\),)1.666 E F5(select)3.176 E F0(\(2\),)1.666 E F5(poll)3.176 E F0
(\(2\),)1.666 E F5(connect)3.176 E F0(\(2\),)1.666 E F5(accept)3.176 E
F0(\(2\),)1.666 E F5 -.37(re)3.176 G(ad).37 E F0(\(2\),)1.666 E F5
(write)108 661.2 Q F0(\(2\),)1.666 E F5 -.37(re)2.5 G(cv).37 E F0
(\(2\),)1.666 E F5(send)2.5 E F0(\(2\),)1.666 E F5 -.37(re)2.5 G(cvfr)
.37 E(om)-.45 E F0(\(2\),)1.666 E F5(sendto)2.5 E F0(\(2\).)1.666 E .001
(The dra)108 678 R .001(wback of this approach is just that really all \
source \214les of the application where these function calls)-.15 F .325
(occur ha)108 690 R .625 -.15(ve t)-.2 H 2.825(oi).15 G(nclude)-2.825 E
F1(pth.h)2.825 E F0 2.825(,o)C 2.825(fc)-2.825 G .325
(ourse. And this also means that e)-2.825 F .325
(xisting libraries, including the v)-.15 F(endor')-.15 E(s)-.55 E F2
(stdio)108 702 Q F0 2.5(,u)C(sually will still block the whole process \
if one of its I/O functions block.)-2.5 E(perl v5.8.6)72 768 Q 198.17
(2004-12-03 28)167.62 F 0 Cg EP
%%Page: 29 29
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/Times-Roman@0 SF(PTH-MANU)72 48 Q 78.275(AL\(1\) User)-.4 F
(Contrib)2.5 E(uted Perl Documentation)-.2 E(PTH-MANU)80.775 E(AL\(1\))
-.4 E/F1 10/Times-Bold@0 SF(Hard System Call Mapping)108 84 Q F0 1.071
(This v)108 100.8 R 1.071(ariant is a)-.25 F -.25(va)-.2 G 1.07
(ilable only on those platforms where the).25 F/F2 10/Times-Italic@0 SF
(syscall)3.57 E F0 1.07(\(2\) function e)1.666 F 1.07
(xists and there it can be)-.15 F 2.25(enabled by b)108 112.8 R(uilding)
-.2 E F1(Pth)4.751 E F0(with)4.751 E/F3 10/Courier@0 SF
(\255\255enable\255syscall\255hard)4.751 E F0 4.751(.T)C 2.251
(his then b)-4.751 F 2.251(uilds wrapper functions \(for)-.2 F
(instances)108 124.8 Q F2 -.37(re)6.598 G(ad).37 E F0 4.098
(\(3\)\) into the)1.666 F F1(Pth)6.598 E F0 4.098
(library which internally call the real)6.598 F F1(Pth)6.598 E F0 4.098
(replacement functions)6.598 F(\()108 136.8 Q F2(pth_r)A(ead)-.37 E F0
.965(\(3\)\). Currently the follo)1.666 F .965
(wing functions are mapped:)-.25 F F2(fork)3.465 E F0(\(2\),)1.666 E F2
(nanosleep)3.465 E F0(\(3\),)1.666 E F2(usleep)3.465 E F0(\(3\),)1.666 E
F2(sleep)3.465 E F0(\(3\),)1.666 E F2(waitpid)108 148.8 Q F0(\(2\),)
1.666 E F2(system)2.5 E F0(\(3\),)1.666 E F2(select)2.5 E F0(\(2\),)
1.666 E F2(poll)2.5 E F0(\(2\),)1.666 E F2(connect)2.5 E F0(\(2\),)1.666
E F2(accept)2.5 E F0(\(2\),)1.666 E F2 -.37(re)2.5 G(ad).37 E F0(\(2\),)
1.666 E F2(write)2.5 E F0(\(2\).)1.666 E .633(The dra)108 165.6 R .633
(wback of this approach is that it depends on)-.15 F F2(syscall)3.133 E
F0 .633(\(2\) interf)1.666 F .632
(ace and prototype con\215icts can occur)-.1 F .443(while b)108 177.6 R
.443(uilding the wrapper functions due to dif)-.2 F .444
(ferent function signatures in the v)-.25 F .444
(endor C header \214les.)-.15 F(But)5.444 E .789(the adv)108 189.6 R
.789(antage of this mapping v)-.25 F .788(ariant is that the source \
\214les of the application where these function calls)-.25 F 2.374
(occur ha)108 201.6 R 2.674 -.15(ve n)-.2 H 2.374(ot to include).15 F F3
(pth.h)4.874 E F0 2.374(and that e)4.874 F 2.374
(xisting libraries, including the v)-.15 F(endor')-.15 E(s)-.55 E F1
(stdio)4.875 E F0 4.875(,m)C(agically)-4.875 E(become thread-a)108 213.6
Q -.1(wa)-.15 G(re \(and then block only the current thread\).).1 E/F4
10.95/Times-Bold@0 SF(IMPLEMENT)72 230.4 Q -1.04(AT)-.986 G(ION NO)1.04
E(TES)-.438 E F1(Pth)108 242.4 Q F0 1.286(is v)3.786 F 1.285(ery portab\
le because it has only one part which perhaps has to be ported to ne)
-.15 F 3.785(wp)-.25 G 1.285(latforms \(the)-3.785 F .433(machine conte)
108 254.4 R .433(xt initialization\). But it is written in a w)-.15 F
.434(ay which w)-.1 F .434(orks on mostly all Unix platforms which)-.1 F
(support)108 266.4 Q F2(mak)2.94 E(econte)-.1 E(xt)-.2 E F0 .44
(\(2\) or at least)1.666 F F2(sigstac)2.94 E(k)-.2 E F0 .439(\(2\) or)
1.666 F F2(sigaltstac)2.939 E(k)-.2 E F0 .439(\(2\) [see)1.666 F F3
(pth_mctx.c)2.939 E F0 .439(for details]. An)2.939 F 2.939(yo)-.15 G
(ther)-2.939 E F1(Pth)108 278.4 Q F0(code is)2.5 E/F5 9/Times-Roman@0 SF
(POSIX)2.5 E F0(and)2.5 E F5(ANSI)2.5 E F0 2.5(Cb)2.5 G(ased only)-2.5 E
(.)-.65 E 3.143(The conte)108 295.2 R 3.144
(xt switching is done via either SUSv2)-.15 F F2(mak)5.644 E(econte)-.1
E(xt)-.2 E F0 3.144(\(2\) or)1.666 F F5(POSIX)5.644 E F0(mak)5.644 E
(e[sig])-.1 E F2(setjmp)A F0 3.144(\(3\) and)1.666 F([sig])108 307.2 Q
F2(longjmp)A F0 .438(\(3\). Here all)1.666 F F5(CPU)2.937 E F0(re)2.937
E .437(gisters, the program counter and the stack pointer are switched.\
 Addition-)-.15 F .654(ally the)108 319.2 R F1(Pth)3.154 E F0 .654
(dispatcher switches also the global Unix)3.154 F F3(errno)3.154 E F0
-.25(va)3.154 G .654(riable [see).25 F F3(pth_mctx.c)3.154 E F0 .654
(for details] and)3.154 F .073(the signal mask \(either implicitly via)
108 331.2 R F2(sigsetjmp)2.573 E F0 .072(\(3\) or in an emulated w)1.666
F .072(ay via e)-.1 F(xplicit)-.15 E F2(setpr)2.572 E(ocmask)-.45 E F0
.072(\(2\) calls\).)1.666 F(The)108 348 Q F1(Pth)3.078 E F0 -2.15 -.25
(ev e)3.078 H .578(nt manager is mainly).25 F F2(select)3.078 E F0 .579
(\(2\) and)1.666 F F2 -.1(ge)3.079 G(ttimeofday).1 E F0 .579
(\(2\) based, i.e., the current time is fetched via)1.666 F F2 -.1(ge)
108 360 S(ttimeofday).1 E F0 .241(\(2\) once per conte)1.666 F .24
(xt switch for time calculations and all I/O e)-.15 F -.15(ve)-.25 G .24
(nts are implemented via a sin-).15 F(gle central)108 372 Q F2(select)
2.5 E F0(\(2\) call [see)1.666 E F3(pth_sched.c)2.5 E F0(for details].)
2.5 E .388(The thread control block management is done via virtual prio\
rity queues without an)108 388.8 R 2.888(ya)-.15 G .388
(dditional data struc-)-2.888 F .277(ture o)108 400.8 R -.15(ve)-.15 G
.277(rhead. F).15 F .276(or this, the queue linkage attrib)-.15 F .276
(utes are part of the thread control blocks and the queues are)-.2 F
3.75(actually implemented as rings with a selected element as the entry\
 point [see)108 412.8 R F3(pth_tcb.h)6.25 E F0(and)6.25 E F3
(pth_pqueue.c)108 424.8 Q F0(for details].)2.5 E 1.333
(Most time critical code sections \(especially the dispatcher and e)108
441.6 R -.15(ve)-.25 G 1.332(nt manager\) are speeded up by inline).15 F
.696(functions \(implemented as)108 453.6 R F5(ANSI)3.197 E F0 3.197(Cp)
3.197 G .697(re-processor macros\). Additionally an)-3.197 F 3.197(yd)
-.15 G(eb)-3.197 E .697(ugging code is)-.2 F F2(completely)3.197 E F0
(remo)108 465.6 Q -.15(ve)-.15 G 2.828(df).15 G .328
(rom the source when not b)-2.828 F .327(uilt with)-.2 F F3
(\255DPTH_DEBUG)2.827 E F0 .327(\(see Autoconf)2.827 F F3
(\255\255enable\255debug)2.827 E F0(option\),)2.827 E
(i.e., not only stub functions remain [see)108 477.6 Q F3(pth_debug.c)
2.5 E F0(for details].)2.5 E F4(RESTRICTIONS)72 494.4 Q F1(Pth)108 506.4
Q F0 1.722(\(intentionally\) pro)4.222 F 1.722
(vides no replacements for non-thread-safe functions \(lik)-.15 F(e)-.1
E F2(strtok)4.222 E F0 1.722(\(3\) which uses a)1.666 F 1.181
(static internal b)108 518.4 R(uf)-.2 E 1.18
(fer\) or synchronous system functions \(lik)-.25 F(e)-.1 E F2 -.1(ge)
3.68 G(thostbyname).1 E F0 1.18(\(3\) which doesn')1.666 F 3.68(tp)-.18
G(ro)-3.68 E 1.18(vide an)-.15 F .451(asynchronous mode where it doesn')
108 530.4 R 2.952(tb)-.18 G .452(lock\). When you w)-2.952 F .452
(ant to use those functions in your serv)-.1 F .452(er applica-)-.15 F
.814(tion together with threads, you')108 542.4 R 1.114 -.15(ve t)-.5 H
3.314(oe).15 G .814(ither link the application ag)-3.314 F .814
(ainst special third-party libraries \(or for)-.05 F .413
(thread\255safe/reentrant functions possibly ag)108 554.4 R .413
(ainst an e)-.05 F(xisting)-.15 E F3(libc_r)2.913 E F0 .413
(of the platform v)2.913 F .413(endor\). F)-.15 F .413(or an asyn-)-.15
F(chronous)108 566.4 Q F5(DNS)2.977 E F0(resolv)2.977 E .476
(er library use the)-.15 F F5(GNU)2.976 E F1(adns)2.976 E F0 .476
(package from Ian Jackson \( see http://www)2.976 F(.gnu.or)-.65 E
(g/soft-)-.18 E -.1(wa)108 578.4 S(re/adns/adns.html \).).1 E F4(HIST)72
595.2 Q(OR)-.197 E(Y)-.383 E F0(The)108 607.2 Q F1(Pth)3.697 E F0 1.197
(library w)3.697 F 1.197
(as designed and implemented between February and July 1999 by)-.1 F F2
1.198(Ralf S. Eng)3.698 F(elsc)-.1 E(hall)-.15 E F0 1.181(after e)108
619.2 R -.25(va)-.25 G 1.181(luating numerous \(mostly preempti).25 F
-.15(ve)-.25 G 3.681(\)t).15 G 1.181(hread libraries and after intensi)
-3.681 F 1.481 -.15(ve d)-.25 H 1.18(iscussions with).15 F F2 -.8(Pe)
3.68 G(ter).8 E(Simons)108 631.2 Q F0(,)A F2 .609(Martin Kr)3.109 F
(aemer)-.15 E F0(,)A F2(Lar)3.109 E 3.109(sE)-.1 G(ilebr)-3.109 E(ec)
-.37 E(ht)-.15 E F0(and)3.109 E F2 .609(Ralph Babel)3.109 F F0 .609
(related to an e)3.109 F .61(xperimental \(matrix based\) non-)-.15 F
(preempti)108 643.2 Q .3 -.15(ve C)-.25 H/F6 8/Times-Roman@0 SF -1(++)
-.85 -1.2 O F0(scheduler class written by)2.5 1.2 M F2 -.8(Pe)2.5 G
(ter Simons).8 E F0(.)A F1(Pth)108 660 Q F0 -.1(wa)2.722 G 2.722(st).1 G
.222(hen implemented in order to combine the)-2.722 F F2(non-pr)2.721 E
(eemptive)-.37 E F0 .221(approach of multithreading \(which pro-)2.721 F
.345(vides better portability and performance\) with an)108 672 R F5
(API)2.845 E F0 .345(similar to the popular one found in)2.845 F F1
(Pthr)2.845 E(ead)-.18 E F0(libraries)2.846 E(\(which pro)108 684 Q
(vides easy programming\).)-.15 E .255
(So the essential idea of the non-preempti)108 700.8 R .554 -.15(ve a)
-.25 H .254(pproach w).15 F .254(as tak)-.1 F .254(en o)-.1 F -.15(ve)
-.15 G 2.754(rf).15 G(rom)-2.754 E F2 -.8(Pe)2.754 G .254(ter Simons).8
F F0(scheduler)2.754 E 2.754(.T)-.55 G .254(he pri-)-2.754 F .104
(ority based scheduling algorithm w)108 712.8 R .104(as suggested by)-.1
F F2 .104(Martin Kr)2.604 F(aemer)-.15 E F0 2.604(.S)C .105
(ome code inspiration also came from)-2.604 F .282(an e)108 724.8 R .282
(xperimental threading library \()-.15 F F1(rsthr)A(eads)-.18 E F0 2.782
(\)w)C .281(ritten by)-2.782 F F2 .281(Robert S. Thau)2.781 F F0 .281
(for an ancient internal test v)2.781 F(ersion)-.15 E(perl v5.8.6)72 768
Q 198.17(2004-12-03 29)167.62 F 0 Cg EP
%%Page: 30 30
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/Times-Roman@0 SF(PTH-MANU)72 48 Q 78.275(AL\(1\) User)-.4 F
(Contrib)2.5 E(uted Perl Documentation)-.2 E(PTH-MANU)80.775 E(AL\(1\))
-.4 E .232(of the Apache webserv)108 84 R(er)-.15 E 5.232(.T)-.55 G .232
(he concept and)-5.232 F/F1 9/Times-Roman@0 SF(API)2.732 E F0 .232
(of message ports w)2.732 F .232(as borro)-.1 F .232(wed from Amig)-.25
F(aOS')-.05 E/F2 10/Times-Bold@0 SF(Exec)2.732 E F0(sub-)2.732 E .19
(system. The concept and idea for the \215e)108 96 R .189(xible e)-.15 F
-.15(ve)-.25 G .189(nt mechanism came from).15 F/F3 10/Times-Italic@0 SF
-.8(Pa)2.689 G .189(ul V).8 F(ixie)-.74 E F0 -.55('s)C F2 -2.3 -.15
(ev e)3.239 H(ntlib).15 E F0 .189(\(which can)2.689 F
(be found as a part of)108 108 Q/F4 9/Times-Bold@0 SF(BIND)2.5 E F0
(v8\).)2.5 E/F5 10.95/Times-Bold@0 SF -.11(BU)72 124.8 S 2.738(GR).11 G
(EPOR)-2.738 E(TS AND SUPPOR)-.438 E(T)-.438 E F0 3.089
(If you think you ha)108 136.8 R 3.389 -.15(ve f)-.2 H 3.089(ound a b)
.15 F 3.089(ug in)-.2 F F2(Pth)5.589 E F0 5.589(,y)C 3.09
(ou should send a report as complete as possible to)-5.589 F F3 -.2(bu)
108 148.8 S(g\255pth@gnu.or).2 E(g)-.37 E F0 2.962(.I)C 2.962(fy)-2.962
G .461(ou can, please try to \214x the problem and include a patch, mad\
e with ')-2.962 F/F6 10/Courier@0 SF .461(diff \255u3)B F0(',)A 1.455
(in your report. Al)108 160.8 R -.1(wa)-.1 G 1.455(ys, at least, includ\
e a reasonable amount of description in your report to allo).1 F 3.956
(wt)-.25 G(he)-3.956 E(author to deterministically reproduce the b)108
172.8 Q(ug.)-.2 E -.15(Fo)108 189.6 S 3.752(rf).15 G 1.252
(urther support you additionally can subscribe to the)-3.752 F F3
(pth\255user)3.751 E(s@gnu.or)-.1 E(g)-.37 E F0 1.251
(mailing list by sending an)3.751 F .165(Email to)108 201.6 R F3
(pth\255user)2.665 E(s\255r)-.1 E(equest@gnu.or)-.37 E(g)-.37 E F0 .165
(with `)2.665 F F6 .165(subscribe pth\255users)B F0 2.665('\()C .165
(or `)-2.665 F F6 .165(subscribe pth\255users)B F3(addr)108 213.6 Q(ess)
-.37 E F0 2.96('i)C 2.96(fy)-2.96 G .46(ou w)-2.96 F .46
(ant to subscribe from a particular Email)-.1 F F3(addr)2.959 E(ess)-.37
E F0 2.959(\)i)C 2.959(nt)-2.959 G .459(he body)-2.959 F 2.959(.T)-.65 G
.459(hen you can discuss your)-2.959 F .084(issues with other)108 225.6
R F2(Pth)2.584 E F0 .085(users by sending messages to)2.584 F F3
(pth\255user)2.585 E(s@gnu.or)-.1 E(g)-.37 E F0 2.585(.C)C .085
(urrently \(as of August 2000\) you)-2.585 F 2.053(can reach about 110 \
Pth users on this mailing list. Old postings you can \214nd at)108 237.6
R F3(http://www)4.553 E(.mail\255ar)-.74 E(-)-.2 E -.15(ch)108 249.6 S
(ive).15 E(.com/pth\255user)-.15 E(s@gnu.or)-.1 E(g/)-.37 E F0(.)A F5
(SEE ALSO)72 266.4 Q F2(Related W)108 278.4 Q(eb Locations)-.65 E F0
29.543(`comp.programming.threads Ne)108 295.2 R 29.543(wsgroup Archi)
-.25 F -.15(ve)-.25 G 29.544(', http://www).15 F
(.deja.com/topics_if.xp?)-.65 E
(search=topic&group=comp.programming.threads)108 307.2 Q 5.27
(`comp.programming.threads Frequently Ask)108 324 R 5.27
(ed Questions \(F)-.1 F 5.27(.A.Q.\)', http://www)-.8 F
(.lambdacs.com/ne)-.65 E(ws-)-.25 E(group/F)108 336 Q -.55(AQ)-.74 G
(.html).55 E(`)108 352.8 Q F3(Multithr)A 17.476
(eading \255 De\214nitions and Guidelines)-.37 F F0 17.476
(', Numeric Quest Inc 1998;)B(http://www)108 364.8 Q
(.numeric\255quest.com/lang/multi\255frame.html)-.65 E(`)108 381.6 Q F3
3.992(The Single)B/F7 9/Times-Italic@0 SF(UNIX)6.492 E F3 3.992
(Speci\214cation, V)6.492 F(er)-1.11 E 3.992(sion 2 \255 Thr)-.1 F(eads)
-.37 E F0 3.992(', The Open Group 1997; http://www)B(.open-)-.65 E
(group.or)108 393.6 Q(g/onlinepubs /007908799/xsh/threads.html)-.18 E F1
(SMI)108 410.4 Q F0(Thread Resources, Sun Microsystems Inc; http://www)
2.5 E(.sun.com/w)-.65 E(orkshop/threads/)-.1 E(Bibliograph)108 427.2 Q
6.614(yo)-.05 G 6.614(nt)-6.614 G 4.114(hreads and multithreading, T)
-6.614 F 4.115(orsten Amundsen; http://liinwww)-.8 F
(.ira.uka.de/bibliogra-)-.65 E(ph)108 439.2 Q(y/Os/threads.html)-.05 E
F2(Related Books)108 462 Q F0 1.067(B. Nichols, D. Buttlar)108 478.8 R
3.566(,J)-.4 G(.P)-3.566 E 3.566(.F)-1.11 G 1.066(arrel: `)-3.716 F F3
(Pthr)A 1.066(eads Pr)-.37 F -.1(og)-.45 G -.15(ra).1 G 1.066
(mming \255 A).15 F F7(POSIX)3.566 E F3(Standar)3.566 E 3.566(df)-.37 G
1.066(or Better Multipr)-3.566 F(ocess-)-.45 E(ing)108 490.8 Q F0
(', O'Reilly 1996;)A F1(ISBN)2.5 E F0(1\25556592\255115\2551)2.5 E .448
(B. Le)108 507.6 R .448(wis, D. J. Ber)-.25 F .448(g: `)-.18 F F3
(Multithr)A .448(eaded Pr)-.37 F -.1(og)-.45 G -.15(ra).1 G .448
(mming with Pthr).15 F(eads)-.37 E F0 .449
(', Sun Microsystems Press, Prentice Hall)B(1998;)108 519.6 Q F1(ISBN)
2.5 E F0(0\25513\255680729\2551)2.5 E 1.242(B. Le)108 536.4 R 1.242
(wis, D. J. Ber)-.25 F 1.242(g: `)-.18 F F3(Thr)A 1.241
(eads Primer \255 A Guide T)-.37 F 3.741(oM)-.92 G(ultithr)-3.741 E
1.241(eaded Pr)-.37 F -.1(og)-.45 G -.15(ra).1 G(mming).15 E F0 1.241
(', Prentice Hall 1996;)B F1(ISBN)108 548.4 Q F0(0\25513\255443698\2559)
2.5 E 1.233(S. J. Norton, M. D. Dipasquale: `)108 565.2 R F3(Thr)A 1.234
(ead T)-.37 F 1.234(ime \255 The Multithr)-.55 F 1.234(eaded Pr)-.37 F
-.1(og)-.45 G -.15(ra).1 G 1.234(mming Guide).15 F F0 1.234
(', Prentice Hall)B(1997;)108 577.2 Q F1(ISBN)2.5 E F0
(0\25513\255190067\2556)2.5 E(D. R. Butenhof: `)108 594 Q F3(Pr)A -.1
(og)-.45 G -.15(ra).1 G(mming with).15 E F7(POSIX)2.5 E F3(Thr)2.5 E
(eads)-.37 E F0(', Addison W)A(esle)-.8 E 2.5(y1)-.15 G(997;)-2.5 E F1
(ISBN)2.5 E F0(0\255201\25563392\2552)2.5 E F2(Related Manpages)108
616.8 Q F3(pth\255con\214g)108 633.6 Q F0(\(1\),)1.666 E F3(pthr)2.5 E
(ead)-.37 E F0(\(3\).)1.666 E F3 -.1(ge)108 650.4 S(tconte).1 E(xt)-.2 E
F0(\(2\),)1.666 E F3(setconte)5.073 E(xt)-.2 E F0(\(2\),)1.666 E F3(mak)
5.073 E(econte)-.1 E(xt)-.2 E F0(\(2\),)1.666 E F3(swapconte)5.073 E(xt)
-.2 E F0(\(2\),)1.666 E F3(sigstac)5.073 E(k)-.2 E F0(\(2\),)1.666 E F3
(sigaltstac)5.073 E(k)-.2 E F0(\(2\),)1.666 E F3(sigaction)5.073 E F0
(\(2\),)1.666 E F3(sig)108 662.4 Q(emptyset)-.1 E F0(\(2\),)1.666 E F3
(sigaddset)5.758 E F0(\(2\),)1.666 E F3(sigpr)5.758 E(ocmask)-.45 E F0
(\(2\),)1.666 E F3(sigsuspend)5.758 E F0(\(2\),)1.666 E F3(sigsetjmp)
5.758 E F0(\(3\),)1.666 E F3(siglongjmp)5.758 E F0(\(3\),)1.666 E F3
(setjmp)5.758 E F0(\(3\),)1.666 E F3(longjmp)108 674.4 Q F0(\(3\),)1.666
E F3(select)2.5 E F0(\(2\),)1.666 E F3 -.1(ge)2.5 G(ttimeofday).1 E F0
(\(2\).)1.666 E F5 -.548(AU)72 691.2 S(THOR).548 E F0(perl v5.8.6)72 768
Q 198.17(2004-12-03 30)167.62 F 0 Cg EP
%%Page: 31 31
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/Times-Roman@0 SF(PTH-MANU)72 48 Q 78.275(AL\(1\) User)-.4 F
(Contrib)2.5 E(uted Perl Documentation)-.2 E(PTH-MANU)80.775 E(AL\(1\))
-.4 E/F1 10/Courier@0 SF(Ralf S. Engelschall)114 84 Q
(rse@engelschall.com)114 96 Q(www.engelschall.com)114 108 Q F0
(perl v5.8.6)72 768 Q 198.17(2004-12-03 31)167.62 F 0 Cg EP
%%Trailer
end
%%EOF
